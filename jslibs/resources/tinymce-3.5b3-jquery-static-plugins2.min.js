(function(b){var e,d,a=[],c=window;b.fn.tinysafe=function(k){var q=this,g,l,h,n,j,m="",o="";if(!q.length){return q}if(!k){return tinyMCE.get(q[0].id)}function p(){var u=[],s=0;q.each(function(z,A){var v,C=A.id,B=k.oninit;if(!C){A.id=C=tinymce.DOM.uniqueId()}v=new tinymce.Editor(C,k);u.push(v);if(B){v.onInit.add(function(){var D,E=B;if(++s==u.length){if(tinymce.is(E,"string")){D=(E.indexOf(".")===-1)?null:tinymce.resolve(E.replace(/\.\w+$/,""));E=tinymce.resolve(E)}E.apply(D||tinymce,u)}})}});b.each(u,function(z,v){v.render()})}var g=k.script_url;if(k.load_js===false){if(g.charAt(g.length-1)!="/"){g+="/"}g+="gzip"}if(k.load_editor_css===false){var r;b("link").each(function(){var s=b(this);if(s.attr("rel")=="stylesheet"&&(!s.attr("type")||s.attr("type")=="text/css")&&s.attr("href")&&(!s.attr("media")||s.attr("media")=="screen")){r=s.attr("href");return false}});if(!r){r="MISS"}k.editor_css=r}if((k.load_js===false)||(!c.tinymce&&!d&&g)){d=1;h=g.substring(0,g.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(g)){o="_src"}n=g.lastIndexOf("?");if(n!=-1){m=g.substring(n+1)}c.tinyMCEPreInit=c.tinyMCEPreInit||{base:h,suffix:o,query:m};if(g.indexOf("gzip")!=-1){j=k.language||"en";g=g+(/\?/.test(g)?"&":"?")+"js=true&core=true&suffix="+escape(o)+"&themes="+escape(k.theme)+"&plugins="+escape(k.plugins)+"&languages="+j;if(!c.tinyMCE_GZ){tinyMCE_GZ={start:function(){tinymce.suffix=o;function s(u){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(u))}s("langs/"+j+".js");s("themes/"+k.theme+"/editor_template"+o+".js");s("themes/"+k.theme+"/langs/"+j+".js");b.each(k.plugins.split(","),function(v,u){if(u){s("plugins/"+u+"/editor_plugin"+o+".js");s("plugins/"+u+"/langs/"+j+".js")}})},end:function(){}}}}if(k.load_js===false){tinymce.baseURL=new tinymce.util.URI(tinymce.documentBaseURL).toAbsolute(tinyMCEPreInit.base);if(tinymce.baseURL.charAt(tinymce.baseURL.length-1)=="/"){tinymce.baseURL=tinymce.baseURL.substr(0,tinymce.baseURL.length-1)}tinymce.baseURI=new tinymce.util.URI(tinymce.baseURL);tinymce.dom.Event.domLoaded=1;tinyMCE_GZ.start();if(k.script_loaded){k.script_loaded()}p()}(k.load_js!==false)&&b.ajax({type:"GET",url:g,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;d=2;if(k.script_loaded){k.script_loaded()}p();b.each(a,function(s,u){u()})}})}else{if(d===1){a.push(p)}else{p()}}return q};b.extend(b.expr[":"],{tinymce:function(g){return g.id&&!!tinyMCE.get(g.id)}});function f(){function j(m){if(m==="remove"){this.each(function(o,p){var n=h(p);if(n){n.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(o,p){var n=tinyMCE.get(p.id.replace(/_parent$/,""));if(n){n.remove()}})}function l(o){var n=this,m;if(o!==e){j.call(n);n.each(function(q,r){var p;if(p=tinyMCE.get(r.id)){p.setContent(o)}})}else{if(n.length>0){if(m=tinyMCE.get(n[0].id)){return m.getContent()}}}}function h(n){var m=null;(n)&&(n.id)&&(c.tinymce)&&(m=tinyMCE.get(n.id));return m}function g(m){return !!((m)&&(m.length)&&(c.tinymce)&&(m.is(":tinymce")))}var k={};b.each(["text","html","val"],function(o,m){var p=k[m]=b.fn[m],n=(m==="text");b.fn["tiny_"+m]=function(u){var q=this;if(!g(q)){return p.apply(q,arguments)}if(u!==e){l.call(q.filter(":tinymce"),u);p.apply(q.not(":tinymce"),arguments);return q}else{var s="";var r=arguments;(n?q:q.eq(0)).each(function(z,A){var v=h(A);s+=v?(n?v.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):v.getContent()):p.apply(b(A),r)});return s}}});b.each(["append","prepend"],function(o,n){var p=k[n]=b.fn[n],m=(n==="prepend");b.fn["tiny_"+n]=function(r){var q=this;if(!g(q)){return p.apply(q,arguments)}if(r!==e){q.filter(":tinymce").each(function(u,v){var s=h(v);s&&s.setContent(m?r+s.getContent():s.getContent()+r)});p.apply(q.not(":tinymce"),arguments);return q}}});b.each(["remove","replaceWith","replaceAll","empty"],function(n,m){var o=k[m]=b.fn[m];b.fn["tiny_"+m]=function(){j.call(this,m);return o.apply(this,arguments)}});k.attr=b.fn.attr;b.fn.tiny_attr=function(o,r,p){var n=this;if((!o)||(o!=="value")||(!g(n))){return k.attr.call(n,o,r,p)}if(r!==e){l.call(n.filter(":tinymce"),r);k.attr.call(n.not(":tinymce"),o,r,p);return n}else{var q=n[0],m=h(q);return m?m.getContent():k.attr.call(b(q),o,r,p)}}}if(f){f();f=null}})(jQuery);(function(e){var a=/^\s*|\s*$/g,b,d="B".replace(/A(.)|B/,"$1")==="$1";var c={majorVersion:"@@tinymce_major_version@@",minorVersion:"@@tinymce_minor_version@@",releaseDate:"@@tinymce_release_date@@",_init:function(){var s=this,q=document,o=navigator,g=o.userAgent,m,f,l,k,j,r;s.isOpera=e.opera&&opera.buildNumber;s.isWebKit=/WebKit/.test(g);s.isIE=!s.isWebKit&&!s.isOpera&&(/MSIE/gi).test(g)&&(/Explorer/gi).test(o.appName);s.isIE6=s.isIE&&/MSIE [56]/.test(g);s.isIE7=s.isIE&&/MSIE [7]/.test(g);s.isIE8=s.isIE&&/MSIE [8]/.test(g);s.isIE9=s.isIE&&/MSIE [9]/.test(g);s.isGecko=!s.isWebKit&&/Gecko/.test(g);s.isMac=g.indexOf("Mac")!=-1;s.isAir=/adobeair/i.test(g);s.isIDevice=/(iPad|iPhone)/.test(g);s.isIOS5=s.isIDevice&&g.match(/AppleWebKit\/(\d*)/)[1]>=534;if(e.tinyMCEPreInit){s.suffix=tinyMCEPreInit.suffix;s.baseURL=tinyMCEPreInit.base;s.query=tinyMCEPreInit.query;return}s.suffix="";f=q.getElementsByTagName("base");for(m=0;m<f.length;m++){r=f[m].href;if(r){if(/^https?:\/\/[^\/]+$/.test(r)){r+="/"}k=r?r.match(/.*\//)[0]:""}}function h(p){if(p.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(p.src)){if(/_(src|dev)\.js/g.test(p.src)){s.suffix="_src"}if((j=p.src.indexOf("?"))!=-1){s.query=p.src.substring(j+1)}s.baseURL=p.src.substring(0,p.src.lastIndexOf("/"));if(k&&s.baseURL.indexOf("://")==-1&&s.baseURL.indexOf("/")!==0){s.baseURL=k+s.baseURL}return s.baseURL}return null}f=q.getElementsByTagName("script");for(m=0;m<f.length;m++){if(h(f[m])){return}}l=q.getElementsByTagName("head")[0];if(l){f=l.getElementsByTagName("script");for(m=0;m<f.length;m++){if(h(f[m])){return}}}return},is:function(g,f){if(!f){return g!==b}if(f=="array"&&(g.hasOwnProperty&&g instanceof Array)){return true}return typeof(g)==f},makeMap:function(f,j,h){var g;f=f||[];j=j||",";if(typeof(f)=="string"){f=f.split(j)}h=h||{};g=f.length;while(g--){h[f[g]]={}}return h},each:function(j,f,h){var k,g;if(!j){return 0}h=h||j;if(j.length!==b){for(k=0,g=j.length;k<g;k++){if(f.call(h,j[k],k,j)===false){return 0}}}else{for(k in j){if(j.hasOwnProperty(k)){if(f.call(h,j[k],k,j)===false){return 0}}}}return 1},map:function(g,h){var j=[];c.each(g,function(f){j.push(h(f))});return j},grep:function(g,h){var j=[];c.each(g,function(f){if(!h||h(f)){j.push(f)}});return j},inArray:function(g,h){var j,f;if(g){for(j=0,f=g.length;j<f;j++){if(g[j]===h){return j}}}return -1},extend:function(n,k){var j,f,h,g=arguments,m;for(j=1,f=g.length;j<f;j++){k=g[j];for(h in k){if(k.hasOwnProperty(h)){m=k[h];if(m!==b){n[h]=m}}}}return n},trim:function(f){return(f?""+f:"").replace(a,"")},create:function(q,f,k){var o=this,g,j,l,m,h,n=0;q=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(q);l=q[3].match(/(^|\.)(\w+)$/i)[2];j=o.createNS(q[3].replace(/\.\w+$/,""),k);if(j[l]){return}if(q[2]=="static"){j[l]=f;if(this.onCreate){this.onCreate(q[2],q[3],j[l])}return}if(!f[l]){f[l]=function(){};n=1}j[l]=f[l];o.extend(j[l].prototype,f);if(q[5]){g=o.resolve(q[5]).prototype;m=q[5].match(/\.(\w+)$/i)[1];h=j[l];if(n){j[l]=function(){return g[m].apply(this,arguments)}}else{j[l]=function(){this.parent=g[m];return h.apply(this,arguments)}}j[l].prototype[l]=j[l];o.each(g,function(p,r){j[l].prototype[r]=g[r]});o.each(f,function(p,r){if(g[r]){j[l].prototype[r]=function(){this.parent=g[r];return p.apply(this,arguments)}}else{if(r!=l){j[l].prototype[r]=p}}})}o.each(f["static"],function(p,r){j[l][r]=p});if(this.onCreate){this.onCreate(q[2],q[3],j[l].prototype)}},walk:function(j,h,k,g){g=g||this;if(j){if(k){j=j[k]}c.each(j,function(l,f){if(h.call(g,l,f,k)===false){return false}c.walk(l,h,k,g)})}},createNS:function(j,h){var g,f;h=h||e;j=j.split(".");for(g=0;g<j.length;g++){f=j[g];if(!h[f]){h[f]={}}h=h[f]}return h},resolve:function(j,h){var g,f;h=h||e;j=j.split(".");for(g=0,f=j.length;g<f;g++){h=h[j[g]];if(!h){break}}return h},addUnload:function(k,j){var h=this,g;g=function(){var f=h.unloads,m,p;if(f){for(p in f){m=f[p];if(m&&m.func){m.func.call(m.scope,1)}}if(e.detachEvent){e.detachEvent("onbeforeunload",l);e.detachEvent("onunload",g)}else{if(e.removeEventListener){e.removeEventListener("unload",g,false)}}h.unloads=m=f=w=g=0;if(e.CollectGarbage){CollectGarbage()}}};function l(){var m=document;function f(){m.detachEvent("onstop",f);if(g){g()}m=0}if(m.readyState=="interactive"){if(m){m.attachEvent("onstop",f)}e.setTimeout(function(){if(m){m.detachEvent("onstop",f)}},0)}}k={func:k,scope:j||this};if(!h.unloads){if(e.attachEvent){e.attachEvent("onunload",g);e.attachEvent("onbeforeunload",l)}else{if(e.addEventListener){e.addEventListener("unload",g,false)}}h.unloads=[k]}else{h.unloads.push(k)}return k},removeUnload:function(j){var g=this.unloads,h=null;c.each(g,function(k,f){if(k&&k.func==j){g.splice(f,1);h=j;return false}});return h},explode:function(f,g){if(!f||c.is(f,"array")){return f}return c.map(f.split(g||","),c.trim)},_addVer:function(g){var f;if(!this.query){return g}f=(g.indexOf("?")==-1?"?":"&")+this.query;if(g.indexOf("#")==-1){return g+f}return g.replace("#",f+"#")},_replace:function(h,f,g){if(d){return g.replace(h,function(){var l=f,j=arguments,k;for(k=0;k<j.length-2;k++){if(j[k]===b){l=l.replace(new RegExp("\\$"+k,"g"),"")}else{l=l.replace(new RegExp("\\$"+k,"g"),j[k])}}return l})}return g.replace(h,f)}};c._init();e.tinymce=e.tinyMCE=c})(window);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){this.listeners.unshift({cb:a,scope:b||this.scope});return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(e,d){if(a==e.cb){c=a;b.splice(d,1);return false}});return c},dispatch:function(){var f,d=arguments,e,b=this.listeners,g;for(e=0;e<b.length;e++){g=b[e];f=g.cb.apply(g.scope,d.length>0?d:[g.scope]);if(f===false){break}}return f}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,g){var f=this,j,d,c,h;e=tinymce.trim(e);g=f.settings=g||{};if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){f.source=e;return}if(e.indexOf("/")===0&&e.indexOf("//")!==0){e=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+e}if(!/^[\w\-]*:?\/\//.test(e)){h=g.base_uri?g.base_uri.path:new tinymce.util.URI(location.href).directory;e=((g.base_uri&&g.base_uri.protocol)||"http")+"://mce_host"+f.toAbsPath(h,e)}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,k){var l=e[k];if(l){l=l.replace(/\(mce_at\)/g,"@@")}f[b]=l});c=g.base_uri;if(c){if(!f.protocol){f.protocol=c.protocol}if(!f.userInfo){f.userInfo=c.userInfo}if(!f.port&&f.host==="mce_host"){f.port=c.port}if(!f.host||f.host==="mce_host"){f.host=c.host}f.source=""}},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source="";b.getURI()},toRelative:function(b){var d=this,f;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:d});if((b.host!="mce_host"&&d.host!=b.host&&b.host)||d.port!=b.port||d.protocol!=b.protocol){return b.getURI()}var c=d.getURI(),e=b.getURI();if(c==e||(c.charAt(c.length-1)=="/"&&c.substr(0,c.length-1)==e)){return c}f=d.toRelPath(d.path,b.path);if(b.query){f+="?"+b.query}if(b.anchor){f+="#"+b.anchor}return f},toAbsolute:function(b,c){b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,f=0,d="",e,b;g=g.substring(0,g.lastIndexOf("/"));g=g.split("/");c=h.split("/");if(g.length>=c.length){for(e=0,b=g.length;e<b;e++){if(e>=c.length||g[e]!=c[e]){f=e+1;break}}}if(g.length<c.length){for(e=0,b=c.length;e<b;e++){if(e>=g.length||g[e]!=c[e]){f=e+1;break}}}if(f===1){return h}for(e=0,b=g.length-(f-1);e<b;e++){d+="../"}for(e=f-1,b=c.length;e<b;e++){if(e!=f-1){d+="/"+c[e]}else{d+=c[e]}}return d},toAbsPath:function(e,f){var c,b=0,h=[],d,g;d=/\/$/.test(f)?"/":"";e=e.split("/");f=f.split("/");a(e,function(j){if(j){h.push(j)}});e=h;for(c=f.length-1,h=[];c>=0;c--){if(f[c].length===0||f[c]==="."){continue}if(f[c]===".."){b++;continue}if(b>0){b--;continue}h.push(f[c])}c=e.length-b;if(c<=0){g=h.reverse().join("/")}else{g=e.slice(0,c).join("/")+"/"+h.reverse().join("/")}if(g.indexOf("/")!==0){g="/"+g}if(d&&g.lastIndexOf("/")!==g.length-1){g+=d}return g},getURI:function(d){var c,b=this;if(!b.source||d){c="";if(!d){if(b.protocol){c+=b.protocol+"://"}if(b.userInfo){c+=b.userInfo+"@"}if(b.host){c+=b.host}if(b.port){c+=":"+b.port}}if(b.path){c+=b.path}if(b.query){c+="?"+b.query}if(b.anchor){c+="#"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var b=this.get(d),c;if(b){a(b.split("&"),function(e){e=e.split("=");c=c||{};c[unescape(e[0])]=unescape(e[1])})}return c},setHash:function(k,b,g,f,j,c){var h="";a(b,function(e,d){h+=(!h?"":"&")+escape(d)+"="+escape(e)});this.set(k,h,g,f,j,c)},get:function(j){var h=document.cookie,g,f=j+"=",d;if(!h){return}d=h.indexOf("; "+f);if(d==-1){d=h.indexOf(f);if(d!==0){return null}}else{d+=2}g=h.indexOf(";",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(j,b,g,f,h,c){document.cookie=j+"="+escape(b)+((g)?"; expires="+g.toGMTString():"")+((f)?"; path="+escape(f):"")+((h)?"; domain="+h:"")+((c)?"; secure":"")},remove:function(e,b){var c=new Date();c.setTime(c.getTime()-1000);this.set(e,"",c,b,c)}})})();(function(){function serialize(o,quote){var i,v,t,name;quote=quote||'"';if(o==null){return"null"}t=typeof o;if(t=="string"){v="\bb\tt\nn\ff\rr\"\"''\\\\";return quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if(quote==='"'&&a==="'"){return a}i=v.indexOf(b);if(i+1){return"\\"+v.charAt(i+1)}a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+quote}if(t=="object"){if(o.hasOwnProperty&&o instanceof Array){for(i=0,v="[";i<o.length;i++){v+=(i>0?",":"")+serialize(o[i],quote)}return v+"]"}v="{";for(name in o){if(o.hasOwnProperty(name)){v+=typeof o[name]!="function"?(v.length>1?","+quote:quote)+name+quote+":"+serialize(o[name],quote):""}}return v+"}"}return""+o}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}})();tinymce.create("static tinymce.util.XHR",{send:function(g){var a,e,b=window,h=0;function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,""+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?"TIMED_OUT":"GENERAL",a,g)}}a=null}else{b.setTimeout(f,10)}}g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||"";function d(j){a=0;try{a=new ActiveXObject(j)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?"POST":"GET"),g.url,g.async);if(g.content_type){a.setRequestHeader("Content-Type",g.content_type)}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(g.data);if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var c=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=c({},d);this.count=0},send:function(f){var e=f.error,d=f.success;f=c(this.settings,f);f.success=function(h,g){h=b.parse(h);if(typeof(h)=="undefined"){h={error:"JSON Parse error."}}if(h.error){e.call(f.error_scope||f.scope,h.error,g)}else{d.call(f.success_scope||f.scope,h.result)}};f.error=function(h,g){if(e){e.call(f.error_scope||f.scope,h,g)}};f.data=b.serialize({id:f.id||"c"+(this.count++),method:f.method,params:f.params});f.content_type="application/json";a.send(f)},"static":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d)}}})}());(function(a){a.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(b){return b.shiftKey||b.ctrlKey||b.altKey}}})(tinymce);tinymce.util.Quirks=function(d){var m=tinymce.VK,s=m.BACKSPACE,u=m.DELETE,p=d.dom,D=d.selection,r=d.settings;function c(H,G){try{d.getDoc().execCommand(H,false,G)}catch(F){}}function h(){function F(I){var G,K,H,J;G=D.getRng();K=p.getParent(G.startContainer,p.isBlock);if(I){K=p.getNext(K,p.isBlock)}if(K){H=K.firstChild;while(H&&H.nodeType==3&&H.nodeValue.length===0){H=H.nextSibling}if(H&&H.nodeName==="SPAN"){J=H.cloneNode(false)}}d.getDoc().execCommand(I?"ForwardDelete":"Delete",false,null);K=p.getParent(G.startContainer,p.isBlock);tinymce.each(p.select("span.Apple-style-span,font.Apple-style-span",K),function(L){var M=D.getBookmark();if(J){p.replace(J.cloneNode(false),L,true)}else{p.remove(L,true)}D.moveToBookmark(M)})}d.onKeyDown.add(function(G,I){var H;if(I.isDefaultPrevented()){return}H=I.keyCode==u;if((H||I.keyCode==s)&&!m.modifierPressed(I)){I.preventDefault();F(H)}});d.addCommand("Delete",function(){F()})}function E(){function F(I){var H=p.create("body");var J=I.cloneContents();H.appendChild(J);return D.serializer.serialize(H,{format:"html"})}function G(H){var J=F(H);var K=p.createRng();K.selectNode(d.getBody());var I=F(K);return J===I}d.onKeyDown.addToTop(function(I,K){var J=K.keyCode;if(J==u||J==s){var H=D.getRng(true);if(!H.collapsed&&G(H)){I.setContent("",{format:"raw"});I.nodeChanged();K.preventDefault()}}})}function v(){p.bind(d.getBody(),"focusin",function(){D.setRng(D.getRng())})}function n(){d.onKeyDown.add(function(F,I){if(I.keyCode===s){if(D.isCollapsed()&&D.getRng(true).startOffset===0){var H=D.getNode();var G=H.previousSibling;if(G&&G.nodeName&&G.nodeName.toLowerCase()==="hr"){p.remove(G);tinymce.dom.Event.cancel(I)}}}})}function b(){if(!Range.prototype.getClientRects){d.onMouseDown.add(function(G,H){if(H.target.nodeName==="HTML"){var F=G.getBody();F.blur();setTimeout(function(){F.focus()},0)}})}}function A(){d.onClick.add(function(F,G){G=G.target;if(/^(IMG|HR)$/.test(G.nodeName)){D.getSel().setBaseAndExtent(G,0,G,1)}if(G.nodeName=="A"&&p.hasClass(G,"mceItemAnchor")){D.select(G)}F.nodeChanged()})}function B(){function G(){var I=p.getAttribs(D.getStart().cloneNode(false));return function(){var J=D.getStart();if(J!==d.getBody()){p.setAttrib(J,"style",null);tinymce.each(I,function(K){J.setAttributeNode(K.cloneNode(true))})}}}function F(){return !D.isCollapsed()&&D.getStart()!=D.getEnd()}function H(I,J){J.preventDefault();return false}d.onKeyPress.add(function(I,K){var J;if((K.keyCode==8||K.keyCode==46)&&F()){J=G();I.getDoc().execCommand("delete",false,null);J();K.preventDefault();return false}});p.bind(d.getDoc(),"cut",function(J){var I;if(F()){I=G();d.onKeyUp.addToTop(H);setTimeout(function(){I();d.onKeyUp.remove(H)},0)}})}function j(){var G,F;p.bind(d.getDoc(),"selectionchange",function(){if(F){clearTimeout(F);F=0}F=window.setTimeout(function(){var H=D.getRng();if(!G||!tinymce.dom.RangeUtils.compareRanges(H,G)){d.nodeChanged();G=H}},50)})}function C(){document.body.setAttribute("role","application")}function z(){d.onKeyDown.add(function(F,H){if(H.keyCode===s){if(D.isCollapsed()&&D.getRng(true).startOffset===0){var G=D.getNode().previousSibling;if(G&&G.nodeName&&G.nodeName.toLowerCase()==="table"){return tinymce.dom.Event.cancel(H)}}}})}function g(){var F=d.getDoc().documentMode;if(F&&F>7){return}c("RespectVisibilityInDesign",true);p.addClass(d.getBody(),"mceHideBrInPre");d.parser.addNodeFilter("pre",function(G,I){var J=G.length,L,H,M,K;while(J--){L=G[J].getAll("br");H=L.length;while(H--){M=L[H];K=M.prev;if(K&&K.type===3&&K.value.charAt(K.value-1)!="\n"){K.value+="\n"}else{M.parent.insert(new tinymce.html.Node("#text",3),M,true).value="\n"}}}});d.serializer.addNodeFilter("pre",function(G,I){var J=G.length,L,H,M,K;while(J--){L=G[J].getAll("br");H=L.length;while(H--){M=L[H];K=M.prev;if(K&&K.type==3){K.value=K.value.replace(/\r?\n$/,"")}}}})}function f(){p.bind(d.getBody(),"mouseup",function(H){var G,F=D.getNode();if(F.nodeName=="IMG"){if(G=p.getStyle(F,"width")){p.setAttrib(F,"width",G.replace(/[^0-9%]+/g,""));p.setStyle(F,"width","")}if(G=p.getStyle(F,"height")){p.setAttrib(F,"height",G.replace(/[^0-9%]+/g,""));p.setStyle(F,"height","")}}})}function q(){d.onKeyDown.add(function(L,M){var K,F,G,I,J,N,H;if(M.isDefaultPrevented()){return}K=M.keyCode==u;if((K||M.keyCode==s)&&!m.modifierPressed(M)){F=D.getRng();G=F.startContainer;I=F.startOffset;H=F.collapsed;if(G.nodeType==3&&G.nodeValue.length>0&&((I===0&&!H)||(H&&I===(K?0:1)))){nonEmptyElements=L.schema.getNonEmptyElements();M.preventDefault();J=p.create("br",{id:"__tmp"});G.parentNode.insertBefore(J,G);L.getDoc().execCommand(K?"ForwardDelete":"Delete",false,null);G=D.getRng().startContainer;N=G.previousSibling;if(N&&N.nodeType==1&&!p.isBlock(N)&&p.isEmpty(N)&&!nonEmptyElements[N.nodeName.toLowerCase()]){p.remove(N)}p.remove("__tmp")}}})}function e(){d.onKeyDown.add(function(J,K){var H,G,L,F,I;if(K.keyCode!=m.BACKSPACE){return}H=D.getRng();G=H.startContainer;L=H.startOffset;F=p.getRoot();I=G;if(!H.collapsed||L!==0){return}while(I&&I.parentNode.firstChild==I&&I.parentNode!=F){I=I.parentNode}if(I.tagName==="BLOCKQUOTE"){J.formatter.toggle("blockquote",null,I);H.setStart(G,0);H.setEnd(G,0);D.setRng(H);D.collapse(false)}})}function l(){function F(){d._refreshContentEditable();c("StyleWithCSS",false);c("enableInlineTableEditing",false);if(!r.object_resizing){c("enableObjectResizing",false)}}if(!r.readonly){d.onBeforeExecCommand.add(F);d.onMouseDown.add(F)}}function o(){function F(G,H){tinymce.each(p.select("a"),function(K){var I=K.parentNode,J=p.getRoot();if(I.lastChild===K){while(I&&!p.isBlock(I)){if(I.parentNode.lastChild!==I||I===J){return}I=I.parentNode}p.add(I,"br",{"data-mce-bogus":1})}})}d.onExecCommand.add(function(G,H){if(H==="CreateLink"){F(G)}});d.onSetContent.add(D.onSetContent.add(F))}function a(){function F(H,G){if(!H||!G.initial){d.execCommand("mceRepaint")}}d.onUndo.add(F);d.onRedo.add(F);d.onSetContent.add(F)}function k(){d.onKeyDown.add(function(F,G){if(G.keyCode==8&&D.getNode().nodeName=="IMG"){G.preventDefault();F.undoManager.beforeChange();p.remove(D.getNode());F.undoManager.add()}})}z();e();if(tinymce.isWebKit){q();h();E();v();A();if(tinymce.isIDevice){j()}}if(tinymce.isIE){n();E();C();g();f();k()}if(tinymce.isGecko){n();b();B();l();o();a()}};(function(k){var a,g,d,l=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,c=/&(#x|#)?([\w]+);/g,j={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};g={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};d={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};function h(m){var n;n=document.createElement("div");n.innerHTML=m;return n.textContent||n.innerText||m}function e(n,q){var o,p,m,r={};if(n){n=n.split(",");q=q||10;for(o=0;o<n.length;o+=2){p=String.fromCharCode(parseInt(n[o],q));if(!g[p]){m="&"+n[o+1]+";";r[p]=m;r[m]=p}}return r}}a=e("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);k.html=k.html||{};k.html.Entities={encodeRaw:function(n,m){return n.replace(m?l:b,function(o){return g[o]||o})},encodeAllRaw:function(m){return(""+m).replace(f,function(n){return g[n]||n})},encodeNumeric:function(n,m){return n.replace(m?l:b,function(o){if(o.length>1){return"&#"+(((o.charCodeAt(0)-55296)*1024)+(o.charCodeAt(1)-56320)+65536)+";"}return g[o]||"&#"+o.charCodeAt(0)+";"})},encodeNamed:function(o,m,n){n=n||a;return o.replace(m?l:b,function(p){return g[p]||n[p]||p})},getEncodeFunc:function(m,p){var q=k.html.Entities;p=e(p)||a;function n(s,r){return s.replace(r?l:b,function(u){return g[u]||p[u]||"&#"+u.charCodeAt(0)+";"||u})}function o(s,r){return q.encodeNamed(s,r,p)}m=k.makeMap(m.replace(/\+/g,","));if(m.named&&m.numeric){return n}if(m.named){if(p){return o}return q.encodeNamed}if(m.numeric){return q.encodeNumeric}return q.encodeRaw},decode:function(m){return m.replace(c,function(o,n,p){if(n){p=parseInt(p,n.length===2?16:10);if(p>65535){p-=65536;return String.fromCharCode(55296+(p>>10),56320+(p&1023))}else{return j[p]||String.fromCharCode(p)}}return d[o]||a[o]||h(o)})}}})(tinymce);tinymce.html.Styles=function(d,f){var k=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,h=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,m=/rgb/,e,g,a={},j;d=d||{};j="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(g=0;g<j.length;g++){a[j[g]]="\uFEFF"+g;a["\uFEFF"+g]=j[g]}function c(o,s,q,n){function p(r){r=parseInt(r).toString(16);return r.length>1?r:"0"+r}return"#"+p(s)+p(q)+p(n)}return{toHex:function(n){return n.replace(k,c)},parse:function(u){var D={},r,o,B,s,A=d.url_converter,C=d.url_converter_scope||this;function q(H,K){var J,G,F,I;J=D[H+"-top"+K];if(!J){return}G=D[H+"-right"+K];if(J!=G){return}F=D[H+"-bottom"+K];if(G!=F){return}I=D[H+"-left"+K];if(F!=I){return}D[H+K]=I;delete D[H+"-top"+K];delete D[H+"-right"+K];delete D[H+"-bottom"+K];delete D[H+"-left"+K]}function z(G){var H=D[G],F;if(!H||H.indexOf(" ")<0){return}H=H.split(" ");F=H.length;while(F--){if(H[F]!==H[0]){return false}}D[G]=H[0];return true}function E(H,G,F,I){if(!z(G)){return}if(!z(F)){return}if(!z(I)){return}D[H]=D[G]+" "+D[F]+" "+D[I];delete D[G];delete D[F];delete D[I]}function v(F){s=true;return a[F]}function n(G,F){if(s){G=G.replace(/\uFEFF[0-9]/g,function(H){return a[H]})}if(!F){G=G.replace(/\\([\'\";:])/g,"$1")}return G}function p(G,F,J,I,K,H){K=K||H;if(K){K=n(K);return"'"+K.replace(/\'/g,"\\'")+"'"}F=n(F||J||I);if(A){F=A.call(C,F,"style")}return"url('"+F.replace(/\'/g,"\\'")+"')"}if(u){u=u.replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(F){return F.replace(/[;:]/g,v)});while(r=b.exec(u)){o=r[1].replace(l,"").toLowerCase();B=r[2].replace(l,"");if(o&&B.length>0){if(o==="font-weight"&&B==="700"){B="bold"}else{if(o==="color"||o==="background-color"){B=B.toLowerCase()}}B=B.replace(k,c);B=B.replace(h,p);D[o]=s?n(B,true):B}b.lastIndex=r.index+r[0].length}q("border","");q("border","-width");q("border","-color");q("border","-style");q("padding","");q("margin","");E("border","border-width","border-style","border-color");if(D.border==="medium none"){delete D.border}}return D},serialize:function(q,s){var p="",o,r;function n(v){var B,z,u,A;B=f.styles[v];if(B){for(z=0,u=B.length;z<u;z++){v=B[z];A=q[v];if(A!==e&&A.length>0){p+=(p.length>0?" ":"")+v+": "+A+";"}}}}if(s&&f&&f.styles){n("*");n(s)}else{for(o in q){r=q[o];if(r!==e&&r.length>0){p+=(p.length>0?" ":"")+o+": "+r+";"}}}return p}}};(function(f){var a={},e=f.makeMap,g=f.each;function d(k,j){return k.split(j||",")}function h(n,m){var k,l={};function j(o){return o.replace(/[A-Z]+/g,function(p){return j(n[p])})}for(k in n){if(n.hasOwnProperty(k)){n[k]=j(n[k])}}j(m).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(r,p,o,q){o=d(o,"|");l[p]={attributes:e(o),attributesOrder:o,children:e(q,"|",{"#comment":{}})}});return l}function b(){var j=a.html5;if(!j){j=a.html5=h({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][C]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|summary][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]")}return j}function c(){var j=a.html4;if(!j){j=a.html4=h({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")}return j}f.html.Schema=function(E){var z=this,u={},l={},k=[],H,C;var p,r,D,s,A,o,q={};function n(J,I,L){var K=E[J];if(!K){K=a[J];if(!K){K=e(I," ",e(I.toUpperCase()," "));K=f.extend(K,L);a[J]=K}}else{K=e(K,",",e(K.toUpperCase()," "))}return K}E=E||{};C=E.schema=="html5"?b():c();if(E.verify_html===false){E.valid_elements="*[*]"}if(E.valid_styles){H={};g(E.valid_styles,function(J,I){H[I]=f.explode(J)})}p=n("whitespace_elements","pre script style textarea");r=n("self_closing_elements","colgroup dd dt li options p td tfoot th thead tr");D=n("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source");s=n("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");o=n("non_empty_elements","td th iframe video audio object",D);A=n("block_elements","h1 h2 h3 h4 h5 h6 hr p div address pre form table tbody thead tfoot th tr td li ol ul caption blockquote center dl dt dd dir fieldset noscript menu isindex samp header footer article section hgroup aside nav figure");function j(I){return new RegExp("^"+I.replace(/([?+*])/g,".$1")+"$")}function G(P){var O,K,ad,Z,ae,J,M,Y,ab,U,ac,ag,S,N,aa,I,W,L,af,ah,T,X,R=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,V=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,Q=/[*?+]/;if(P){P=d(P);if(u["@"]){W=u["@"].attributes;L=u["@"].attributesOrder}for(O=0,K=P.length;O<K;O++){J=R.exec(P[O]);if(J){aa=J[1];U=J[2];I=J[3];ab=J[4];S={};N=[];M={attributes:S,attributesOrder:N};if(aa==="#"){M.paddEmpty=true}if(aa==="-"){M.removeEmpty=true}if(W){for(ah in W){S[ah]=W[ah]}N.push.apply(N,L)}if(ab){ab=d(ab,"|");for(ad=0,Z=ab.length;ad<Z;ad++){J=V.exec(ab[ad]);if(J){Y={};ag=J[1];ac=J[2].replace(/::/g,":");aa=J[3];X=J[4];if(ag==="!"){M.attributesRequired=M.attributesRequired||[];M.attributesRequired.push(ac);Y.required=true}if(ag==="-"){delete S[ac];N.splice(f.inArray(N,ac),1);continue}if(aa){if(aa==="="){M.attributesDefault=M.attributesDefault||[];M.attributesDefault.push({name:ac,value:X});Y.defaultValue=X}if(aa===":"){M.attributesForced=M.attributesForced||[];M.attributesForced.push({name:ac,value:X});Y.forcedValue=X}if(aa==="<"){Y.validValues=e(X,"?")}}if(Q.test(ac)){M.attributePatterns=M.attributePatterns||[];Y.pattern=j(ac);M.attributePatterns.push(Y)}else{if(!S[ac]){N.push(ac)}S[ac]=Y}}}}if(!W&&U=="@"){W=S;L=N}if(I){M.outputName=U;u[I]=M}if(Q.test(U)){M.pattern=j(U);k.push(M)}else{u[U]=M}}}}}function v(I){u={};k=[];G(I);g(C,function(K,J){l[J]=K.children})}function m(J){var I=/^(~)?(.+)$/;if(J){g(d(J),function(N){var L=I.exec(N),M=L[1]==="~",O=M?"span":"div",K=L[2];l[K]=l[O];q[K]=O;if(!M){A[K]={}}g(l,function(P,Q){if(P[O]){P[K]=P[O]}})})}}function B(J){var I=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(J){g(d(J),function(N){var M=I.exec(N),K,L;if(M){L=M[1];if(L){K=l[M[2]]}else{K=l[M[2]]={"#comment":{}}}K=l[M[2]];g(d(M[3],"|"),function(O){if(L==="-"){delete K[O]}else{K[O]={}}})}})}}function F(I){var K=u[I],J;if(K){return K}J=k.length;while(J--){K=k[J];if(K.pattern.test(I)){return K}}}if(!E.valid_elements){g(C,function(J,I){u[I]={attributes:J.attributes,attributesOrder:J.attributesOrder};l[I]=J.children});if(E.schema!="html5"){g(d("strong/b,em/i"),function(I){I=d(I,"/");u[I[1]].outputName=I[0]})}u.img.attributesDefault=[{name:"alt",value:""}];g(d("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(I){if(u[I]){u[I].removeEmpty=true}});g(d("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(I){u[I].paddEmpty=true})}else{v(E.valid_elements)}m(E.custom_elements);B(E.valid_children);G(E.extended_valid_elements);B("+ol[ul|ol],+ul[ul|ol]");if(E.invalid_elements){f.each(f.explode(E.invalid_elements),function(I){if(u[I]){delete u[I]}})}if(!F("span")){G("span[!data-mce-type|*]")}z.children=l;z.styles=H;z.getBoolAttrs=function(){return s};z.getBlockElements=function(){return A};z.getShortEndedElements=function(){return D};z.getSelfClosingElements=function(){return r};z.getNonEmptyElements=function(){return o};z.getWhiteSpaceElements=function(){return p};z.isValidChild=function(I,K){var J=l[I];return !!(J&&J[K])};z.getElementRule=F;z.getCustomElements=function(){return q};z.addValidElements=G;z.setValidElements=v;z.addCustomElements=m;z.addValidChildren=B}})(tinymce);(function(a){a.html.SaxParser=function(c,e){var b=this,d=function(){};c=c||{};b.schema=e=e||new a.html.Schema();if(c.fix_self_closing!==false){c.fix_self_closing=true}a.each("comment cdata text start end pi doctype".split(" "),function(f){if(f){b[f]=c[f]||d}});b.parse=function(H){var n=this,g,J=0,L,E,D=[],Q,T,F,r,C,s,P,K,R,z,m,k,u,U,o,S,I,V,O,f,M,l,G,N,h,A=0,j=a.html.Entities.decode,B,q;function v(W){var Y,X;Y=D.length;while(Y--){if(D[Y].name===W){break}}if(Y>=0){for(X=D.length-1;X>=Y;X--){W=D[X];if(W.valid){n.end(W.name)}}D.length=Y}}function p(X,W,ab,aa,Z){var ac,Y;W=W.toLowerCase();ab=W in K?W:j(ab||aa||Z||"");if(z&&!C&&W.indexOf("data-")!==0){ac=S[W];if(!ac&&I){Y=I.length;while(Y--){ac=I[Y];if(ac.pattern.test(W)){break}}if(Y===-1){ac=null}}if(!ac){return}if(ac.validValues&&!(ab in ac.validValues)){return}}Q.map[W]=ab;Q.push({name:W,value:ab})}l=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g");G=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;N={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};P=e.getShortEndedElements();M=e.getSelfClosingElements();K=e.getBoolAttrs();z=c.validate;s=c.remove_internals;B=c.fix_self_closing;q=a.isIE;o=/^:/;while(g=l.exec(H)){if(J<g.index){n.text(j(H.substr(J,g.index-J)))}if(L=g[6]){L=L.toLowerCase();if(q&&o.test(L)){L=L.substr(1)}v(L)}else{if(L=g[7]){L=L.toLowerCase();if(q&&o.test(L)){L=L.substr(1)}R=L in P;if(B&&M[L]&&D.length>0&&D[D.length-1].name===L){v(L)}if(!z||(m=e.getElementRule(L))){k=true;if(z){S=m.attributes;I=m.attributePatterns}if(U=g[8]){C=U.indexOf("data-mce-type")!==-1;if(C&&s){k=false}Q=[];Q.map={};U.replace(G,p)}else{Q=[];Q.map={}}if(z&&!C){V=m.attributesRequired;O=m.attributesDefault;f=m.attributesForced;if(f){T=f.length;while(T--){u=f[T];r=u.name;h=u.value;if(h==="{$uid}"){h="mce_"+A++}Q.map[r]=h;Q.push({name:r,value:h})}}if(O){T=O.length;while(T--){u=O[T];r=u.name;if(!(r in Q.map)){h=u.value;if(h==="{$uid}"){h="mce_"+A++}Q.map[r]=h;Q.push({name:r,value:h})}}}if(V){T=V.length;while(T--){if(V[T] in Q.map){break}}if(T===-1){k=false}}if(Q.map["data-mce-bogus"]){k=false}}if(k){n.start(L,Q,R)}}else{k=false}if(E=N[L]){E.lastIndex=J=g.index+g[0].length;if(g=E.exec(H)){if(k){F=H.substr(J,g.index-J)}J=g.index+g[0].length}else{F=H.substr(J);J=H.length}if(k&&F.length>0){n.text(F,true)}if(k){n.end(L)}l.lastIndex=J;continue}if(!R){if(!U||U.indexOf("/")!=U.length-1){D.push({name:L,valid:k})}else{if(k){n.end(L)}}}}else{if(L=g[1]){n.comment(L)}else{if(L=g[2]){n.cdata(L)}else{if(L=g[3]){n.doctype(L)}else{if(L=g[4]){n.pi(L,g[5])}}}}}}J=g.index+g[0].length}if(J<H.length){n.text(j(H.substr(J)))}for(T=D.length-1;T>=0;T--){L=D[T];if(L.valid){n.end(L.name)}}}}})(tinymce);(function(d){var c=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function a(l,m,k){var j,h,f=k?"lastChild":"firstChild",g=k?"prev":"next";if(l[f]){return l[f]}if(l!==m){j=l[g];if(j){return j}for(h=l.parent;h&&h!==m;h=h.parent){j=h[g];if(j){return j}}}}function b(f,g){this.name=f;this.type=g;if(g===1){this.attributes=[];this.attributes.map={}}}d.extend(b.prototype,{replace:function(g){var f=this;if(g.parent){g.remove()}f.insert(g,f);f.remove();return f},attr:function(h,l){var f=this,g,j,k;if(typeof h!=="string"){for(j in h){f.attr(j,h[j])}return f}if(g=f.attributes){if(l!==k){if(l===null){if(h in g.map){delete g.map[h];j=g.length;while(j--){if(g[j].name===h){g=g.splice(j,1);return f}}}return f}if(h in g.map){j=g.length;while(j--){if(g[j].name===h){g[j].value=l;break}}}else{g.push({name:h,value:l})}g.map[h]=l;return f}else{return g.map[h]}}},clone:function(){var g=this,n=new b(g.name,g.type),h,f,m,j,k;if(m=g.attributes){k=[];k.map={};for(h=0,f=m.length;h<f;h++){j=m[h];if(j.name!=="id"){k[k.length]={name:j.name,value:j.value};k.map[j.name]=j.value}}n.attributes=k}n.value=g.value;n.shortEnded=g.shortEnded;return n},wrap:function(g){var f=this;f.parent.insert(g,f);g.append(f);return f},unwrap:function(){var f=this,h,g;for(h=f.firstChild;h;){g=h.next;f.insert(h,f,true);h=g}f.remove()},remove:function(){var f=this,h=f.parent,g=f.next,j=f.prev;if(h){if(h.firstChild===f){h.firstChild=g;if(g){g.prev=null}}else{j.next=g}if(h.lastChild===f){h.lastChild=j;if(j){j.next=null}}else{g.prev=j}f.parent=f.next=f.prev=null}return f},append:function(h){var f=this,g;if(h.parent){h.remove()}g=f.lastChild;if(g){g.next=h;h.prev=g;f.lastChild=h}else{f.lastChild=f.firstChild=h}h.parent=f;return h},insert:function(h,f,j){var g;if(h.parent){h.remove()}g=f.parent||this;if(j){if(f===g.firstChild){g.firstChild=h}else{f.prev.next=h}h.prev=f.prev;h.next=f;f.prev=h}else{if(f===g.lastChild){g.lastChild=h}else{f.next.prev=h}h.next=f.next;h.prev=f;f.next=h}h.parent=g;return h},getAll:function(g){var f=this,h,j=[];for(h=f.firstChild;h;h=a(h,f)){if(h.name===g){j.push(h)}}return j},empty:function(){var g=this,f,h,j;if(g.firstChild){f=[];for(j=g.firstChild;j;j=a(j,g)){f.push(j)}h=f.length;while(h--){j=f[h];j.parent=j.firstChild=j.lastChild=j.next=j.prev=null}}g.firstChild=g.lastChild=null;return g},isEmpty:function(k){var f=this,j=f.firstChild,h,g;if(j){do{if(j.type===1){if(j.attributes.map["data-mce-bogus"]){continue}if(k[j.name]){return false}h=j.attributes.length;while(h--){g=j.attributes[h].name;if(g==="name"||g.indexOf("data-")===0){return false}}}if(j.type===8){return false}if((j.type===3&&!c.test(j.value))){return false}}while(j=a(j,f))}return true},walk:function(f){return a(this,null,f)}});d.extend(b,{create:function(g,f){var j,h;j=new b(g,e[g]||1);if(f){for(h in f){j.attr(h,f[h])}}return j}});d.html.Node=b})(tinymce);(function(b){var a=b.html.Node;b.html.DomParser=function(g,h){var f=this,e={},d=[],j={},c={};g=g||{};g.validate="validate" in g?g.validate:true;g.root_name=g.root_name||"body";f.schema=h=h||new b.html.Schema();function k(n){var p,q,B,A,D,o,r,m,v,z,l,u,C,s;u=b.makeMap("tr,td,th,tbody,thead,tfoot,table");l=h.getNonEmptyElements();for(p=0;p<n.length;p++){q=n[p];if(!q.parent){continue}A=[q];for(B=q.parent;B&&!h.isValidChild(B.name,q.name)&&!u[B.name];B=B.parent){A.push(B)}if(B&&A.length>1){A.reverse();D=o=f.filterNode(A[0].clone());for(v=0;v<A.length-1;v++){if(h.isValidChild(o.name,A[v].name)){r=f.filterNode(A[v].clone());o.append(r)}else{r=o}for(m=A[v].firstChild;m&&m!=A[v+1];){s=m.next;r.append(m);m=s}o=r}if(!D.isEmpty(l)){B.insert(D,A[0],true);B.insert(q,D)}else{B.insert(q,A[0],true)}B=A[0];if(B.isEmpty(l)||B.firstChild===B.lastChild&&B.firstChild.name==="br"){B.empty().remove()}}else{if(q.parent){if(q.name==="li"){C=q.prev;if(C&&(C.name==="ul"||C.name==="ul")){C.append(q);continue}C=q.next;if(C&&(C.name==="ul"||C.name==="ul")){C.insert(q,C.firstChild,true);continue}q.wrap(f.filterNode(new a("ul",1)));continue}if(h.isValidChild(q.parent.name,"div")&&h.isValidChild("div",q.name)){q.wrap(f.filterNode(new a("div",1)))}else{if(q.name==="style"||q.name==="script"){q.empty().remove()}else{q.unwrap()}}}}}}f.filterNode=function(n){var m,l,o;if(l in e){o=j[l];if(o){o.push(n)}else{j[l]=[n]}}m=d.length;while(m--){l=d[m].name;if(l in n.attributes.map){o=c[l];if(o){o.push(n)}else{c[l]=[n]}}}return n};f.addNodeFilter=function(l,m){b.each(b.explode(l),function(n){var o=e[n];if(!o){e[n]=o=[]}o.push(m)})};f.addAttributeFilter=function(l,m){b.each(b.explode(l),function(n){var o;for(o=0;o<d.length;o++){if(d[o].name===n){d[o].callbacks.push(m);return}}d.push({name:n,callbacks:[m]})})};f.parse=function(A,n){var o,L,E,D,G,F,B,s,I,P,C,p,H,O=[],N,v,m,u,q,z,r;n=n||{};j={};c={};p=b.extend(b.makeMap("script,style,head,html,body,title,meta,param"),h.getBlockElements());z=h.getNonEmptyElements();q=h.children;C=g.validate;r="forced_root_block" in n?n.forced_root_block:g.forced_root_block;u=h.getWhiteSpaceElements();H=/^[ \t\r\n]+/;v=/[ \t\r\n]+$/;m=/[ \t\r\n]+/g;function J(){var Q=L.firstChild,l,R;while(Q){l=Q.next;if(Q.type==3||(Q.type==1&&Q.name!=="p"&&!p[Q.name]&&!Q.attr("data-mce-type"))){if(!R){R=M(r,1);L.insert(R,Q);R.append(Q)}else{R.append(Q)}}else{R=null}Q=l}}function M(l,Q){var R=new a(l,Q),S;if(l in e){S=j[l];if(S){S.push(R)}else{j[l]=[R]}}return R}function K(R){var S,l,Q;for(S=R.prev;S&&S.type===3;){l=S.value.replace(v,"");if(l.length>0){S.value=l;S=S.prev}else{Q=S.prev;S.remove();S=Q}}}o=new b.html.SaxParser({validate:C,fix_self_closing:!C,cdata:function(l){E.append(M("#cdata",4)).value=l},text:function(R,l){var Q;if(!N){R=R.replace(m," ");if(E.lastChild&&p[E.lastChild.name]){R=R.replace(H,"")}}if(R.length!==0){Q=M("#text",3);Q.raw=!!l;E.append(Q).value=R}},comment:function(l){E.append(M("#comment",8)).value=l},pi:function(l,Q){E.append(M(l,7)).value=Q;K(E)},doctype:function(Q){var l;l=E.append(M("#doctype",10));l.value=Q;K(E)},start:function(l,Y,R){var W,T,S,Q,U,Z,X,V;S=C?h.getElementRule(l):{};if(S){W=M(S.outputName||l,1);W.attributes=Y;W.shortEnded=R;E.append(W);V=q[E.name];if(V&&q[W.name]&&!V[W.name]){O.push(W)}T=d.length;while(T--){U=d[T].name;if(U in Y.map){I=c[U];if(I){I.push(W)}else{c[U]=[W]}}}if(p[l]){K(W)}if(!R){E=W}if(!N&&u[l]){N=true}}},end:function(l){var U,R,T,Q,S;R=C?h.getElementRule(l):{};if(R){if(p[l]){if(!N){for(U=E.firstChild;U&&U.type===3;){T=U.value.replace(H,"");if(T.length>0){U.value=T;U=U.next}else{Q=U.next;U.remove();U=Q}}for(U=E.lastChild;U&&U.type===3;){T=U.value.replace(v,"");if(T.length>0){U.value=T;U=U.prev}else{Q=U.prev;U.remove();U=Q}}}U=E.prev;if(U&&U.type===3){T=U.value.replace(H,"");if(T.length>0){U.value=T}else{U.remove()}}}if(N&&u[l]){N=false}if(R.removeEmpty||R.paddEmpty){if(E.isEmpty(z)){if(R.paddEmpty){E.empty().append(new a("#text","3")).value="\u00a0"}else{if(!E.attributes.map.name){S=E.parent;E.empty().remove();E=S;return}}}}E=E.parent}}},h);L=E=new a(n.context||g.root_name,11);o.parse(A);if(C&&O.length){if(!n.context){k(O)}else{n.invalid=true}}if(r&&L.name=="body"){J()}if(!n.invalid){for(P in j){I=e[P];D=j[P];B=D.length;while(B--){if(!D[B].parent){D.splice(B,1)}}for(G=0,F=I.length;G<F;G++){I[G](D,P,n)}}for(G=0,F=d.length;G<F;G++){I=d[G];if(I.name in c){D=c[I.name];B=D.length;while(B--){if(!D[B].parent){D.splice(B,1)}}for(B=0,s=I.callbacks.length;B<s;B++){I.callbacks[B](D,I.name,n)}}}}return L};if(g.remove_trailing_brs){f.addNodeFilter("br",function(o,n){var s,r=o.length,p,A=b.extend({},h.getBlockElements()),m=h.getNonEmptyElements(),v,u,q,z;A.body=1;for(s=0;s<r;s++){p=o[s];v=p.parent;if(A[p.parent.name]&&p===v.lastChild){q=p.prev;while(q){z=q.name;if(z!=="span"||q.attr("data-mce-type")!=="bookmark"){if(z!=="br"){break}if(z==="br"){p=null;break}}q=q.prev}if(p){p.remove();if(v.isEmpty(m)){elementRule=h.getElementRule(v.name);if(elementRule){if(elementRule.removeEmpty){v.remove()}else{if(elementRule.paddEmpty){v.empty().append(new b.html.Node("#text",3)).value="\u00a0"}}}}}}else{u=p;while(v.firstChild===u&&v.lastChild===u){u=v;if(A[v.name]){break}v=v.parent}if(u===v){textNode=new b.html.Node("#text",3);textNode.value="\u00a0";p.replace(textNode)}}}})}if(!g.allow_html_in_named_anchor){f.addAttributeFilter("name",function(l,m){var o=l.length,q,n,p,r;while(o--){r=l[o];if(r.name==="a"&&r.firstChild){p=r.parent;q=r.lastChild;do{n=q.prev;p.insert(q,r);q=n}while(q)}}})}}})(tinymce);tinymce.html.Writer=function(e){var c=[],a,b,d,f,g;e=e||{};a=e.indent;b=tinymce.makeMap(e.indent_before||"");d=tinymce.makeMap(e.indent_after||"");f=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities);g=e.element_format=="html";return{start:function(m,k,p){var n,j,h,o;if(a&&b[m]&&c.length>0){o=c[c.length-1];if(o.length>0&&o!=="\n"){c.push("\n")}}c.push("<",m);if(k){for(n=0,j=k.length;n<j;n++){h=k[n];c.push(" ",h.name,'="',f(h.value,true),'"')}}if(!p||g){c[c.length]=">"}else{c[c.length]=" />"}if(p&&a&&d[m]&&c.length>0){o=c[c.length-1];if(o.length>0&&o!=="\n"){c.push("\n")}}},end:function(h){var j;c.push("</",h,">");if(a&&d[h]&&c.length>0){j=c[c.length-1];if(j.length>0&&j!=="\n"){c.push("\n")}}},text:function(j,h){if(j.length>0){c[c.length]=h?j:f(j)}},cdata:function(h){c.push("<![CDATA[",h,"]]>")},comment:function(h){c.push("<!--",h,"-->")},pi:function(h,j){if(j){c.push("<?",h," ",j,"?>")}else{c.push("<?",h,"?>")}if(a){c.push("\n")}},doctype:function(h){c.push("<!DOCTYPE",h,">",a?"\n":"")},reset:function(){c.length=0},getContent:function(){return c.join("").replace(/\n$/,"")}}};(function(a){a.html.Serializer=function(c,d){var b=this,e=new a.html.Writer(c);c=c||{};c.validate="validate" in c?c.validate:true;b.schema=d=d||new a.html.Schema();b.writer=e;b.serialize=function(h){var g,j;j=c.validate;g={3:function(l,k){e.text(l.value,l.raw)},8:function(k){e.comment(k.value)},7:function(k){e.pi(k.name,k.value)},10:function(k){e.doctype(k.value)},4:function(k){e.cdata(k.value)},11:function(k){if((k=k.firstChild)){do{f(k)}while(k=k.next)}}};e.reset();function f(m){var v=g[m.type],k,p,u,s,q,z,o,n,r;if(!v){k=m.name;p=m.shortEnded;u=m.attributes;if(j&&u&&u.length>1){z=[];z.map={};r=d.getElementRule(m.name);for(o=0,n=r.attributesOrder.length;o<n;o++){s=r.attributesOrder[o];if(s in u.map){q=u.map[s];z.map[s]=q;z.push({name:s,value:q})}}for(o=0,n=u.length;o<n;o++){s=u[o].name;if(!(s in z.map)){q=u.map[s];z.map[s]=q;z.push({name:s,value:q})}}u=z}e.start(m.name,u,p);if(!p){if((m=m.firstChild)){do{f(m)}while(m=m.next)}e.end(k)}}else{v(m)}}if(h.type==1&&!c.inner){f(h)}else{g[11](h)}return e.getContent()}}})(tinymce);tinymce.dom={};(function(b,h){var g=!!document.addEventListener;function c(l,k,m,j){if(l.addEventListener){l.addEventListener(k,m,j||false)}else{if(l.attachEvent){l.attachEvent("on"+k,m)}}}function e(l,k,m,j){if(l.removeEventListener){l.removeEventListener(k,m,j||false)}else{if(l.detachEvent){l.detachEvent("on"+k,m)}}}function a(o,m){var j,l=m||{};function k(){return false}function n(){return true}for(j in o){if(j!=="layerX"&&j!=="layerY"){l[j]=o[j]}}if(!l.target){l.target=l.srcElement||document}l.preventDefault=function(){l.isDefaultPrevented=n;if(o){if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}}};l.stopPropagation=function(){l.isPropagationStopped=n;if(o){if(o.stopPropagation){o.stopPropagation()}else{o.cancelBubble=true}}};l.stopImmediatePropagation=function(){l.isImmediatePropagationStopped=n;l.stopPropagation()};if(!l.isDefaultPrevented){l.isDefaultPrevented=k;l.isPropagationStopped=k;l.isImmediatePropagationStopped=k}return l}function d(n,o,m){var l=n.document,k={type:"ready"};function j(){if(!m.domLoaded){m.domLoaded=true;o(k)}}if(g){c(n,"DOMContentLoaded",j)}else{c(l,"readystatechange",function(){if(l.readyState==="complete"){e(l,"readystatechange",arguments.callee);j()}});if(l.documentElement.doScroll&&n===n.top){(function(){try{l.documentElement.doScroll("left")}catch(p){setTimeout(arguments.callee,0);return}j()})()}}c(n,"load",j)}function f(l){var r=this,q={},j,p,o,n,m;n="onmouseenter" in document.documentElement;o="onfocusin" in document.documentElement;m={mouseenter:"mouseover",mouseleave:"mouseout"};j=1;r.domLoaded=false;r.events=q;function k(v,B){var u,z,s,A;u=q[B][v.type];if(u){for(z=0,s=u.length;z<s;z++){A=u[z];if(A&&A.func.call(A.scope,v)===false){v.preventDefault()}if(v.isImmediatePropagationStopped()){return}}}}r.bind=function(B,E,H,I){var u,v,z,s,F,D,G,A=window;function C(J){k(a(J||A.event),u)}if(!B||B.nodeType===3||B.nodeType===8){return}if(!B[h]){u=j++;B[h]=u;q[u]={}}else{u=B[h];if(!q[u]){q[u]={}}}I=I||B;E=E.split(" ");z=E.length;while(z--){s=E[z];D=C;F=G=false;if(s==="DOMContentLoaded"){s="ready"}if((r.domLoaded||B.readyState=="complete")&&s==="ready"){r.domLoaded=true;H.call(I,a({type:s}));continue}if(!n){F=m[s];if(F){D=function(J){var L,K;L=J.currentTarget;K=J.relatedTarget;if(K&&L.contains){K=L.contains(K)}else{while(K&&K!==L){K=K.parentNode}}if(!K){J=a(J||A.event);J.type=J.type==="mouseout"?"mouseleave":"mouseenter";J.target=L;k(J,u)}}}}if(!o&&(s==="focusin"||s==="focusout")){G=true;F=s==="focusin"?"focus":"blur";D=function(J){J=a(J||A.event);J.type=J.type==="focus"?"focusin":"focusout";k(J,u)}}v=q[u][s];if(!v){q[u][s]=v=[{func:H,scope:I}];v.fakeName=F;v.capture=G;v.nativeHandler=D;if(!g){v.proxyHandler=l(u)}if(s==="ready"){d(B,D,r)}else{c(B,F||s,g?D:v.proxyHandler,G)}}else{v.push({func:H,scope:I})}}B=v=0;return H};r.unbind=function(B,D,E){var u,z,A,F,s,v;if(!B||B.nodeType===3||B.nodeType===8){return r}u=B[h];if(u){v=q[u];if(D){D=D.split(" ");A=D.length;while(A--){s=D[A];z=v[s];if(z){if(E){F=z.length;while(F--){if(z[F].func===E){z.splice(F,1)}}}if(!E||z.length===0){delete v[s];e(B,z.fakeName||s,g?z.nativeHandler:z.proxyHandler,z.capture)}}}}else{for(s in v){z=v[s];e(B,z.fakeName||s,g?z.nativeHandler:z.proxyHandler,z.capture)}v={}}for(s in v){return r}delete q[u];try{delete B[h]}catch(C){B[h]=null}}return r};r.fire=function(z,u,s){var A,v;if(!z||z.nodeType===3||z.nodeType===8){return r}v=a(null,s);v.type=u;do{A=z[h];if(A){k(v,A)}z=z.parentNode||z.ownerDocument||z.defaultView||z.parentWindow}while(z&&!v.isPropagationStopped());return r};r.clean=function(z){var u,s,v=r.unbind;if(!z||z.nodeType===3||z.nodeType===8){return r}if(z[h]){v(z)}if(!z.getElementsByTagName){z=z.document}if(z&&z.getElementsByTagName){v(z);s=z.getElementsByTagName("*");u=s.length;while(u--){z=s[u];if(z[h]){v(z)}}}return r};r.callNativeHandler=function(u,s){if(q){q[u][s.type].nativeHandler(s)}};r.destory=function(){q={}};r.add=function(A,u,z,v){if(typeof(A)==="string"){A=document.getElementById(A)}if(A&&A instanceof Array){var s=A;while(s--){r.add(A[s],u,z,v)}return}if(u==="init"){u="ready"}return r.bind(A,u instanceof Array?u.join(" "):u,z,v)};r.remove=function(z,u,v){if(typeof(z)==="string"){z=document.getElementById(z)}if(z instanceof Array){var s=z;while(s--){r.remove(z[s],u,v,scope)}return r}return r.unbind(z,u instanceof Array?u.join(" "):u,v)};r.clear=function(s){if(typeof(s)==="string"){s=document.getElementById(s)}return r.clean(s)};r.cancel=function(s){if(s){r.prevent(s);r.stop(s)}return false};r.prevent=function(s){s.preventDefault();return false};r.stop=function(s){s.stopPropagation();return false}}b.EventUtils=f;b.Event=new f(function(j){return function(k){tinymce.dom.Event.callNativeHandler(j,k)}});b.Event.bind(window,"ready",function(){});b=0})(tinymce.dom,"data-mce-expando");tinymce.dom.TreeWalker=function(a,c){var b=a;function d(j,f,e,k){var h,g;if(j){if(!k&&j[f]){return j[f]}if(j!=c){h=j[e];if(h){return h}for(g=j.parentNode;g&&g!=c;g=g.parentNode){h=g[e];if(h){return h}}}}}this.current=function(){return b};this.next=function(e){return(b=d(b,"firstChild","nextSibling",e))};this.prev=function(e){return(b=d(b,"lastChild","previousSibling",e))}};(function(e){var g=e.each,d=e.is,f=e.isWebKit,b=e.isIE,h=e.html.Entities,c=/^([a-z0-9],?)+$/i,a=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(p,m){var l=this,j,k,o;l.doc=p;l.win=window;l.files={};l.cssFlicker=false;l.counter=0;l.stdMode=!e.isIE||p.documentMode>=8;l.boxModel=!e.isIE||p.compatMode=="CSS1Compat"||l.stdMode;l.hasOuterHTML="outerHTML" in p.createElement("a");l.settings=m=e.extend({keep_values:false,hex_colors:1},m);l.schema=m.schema;l.styles=new e.html.Styles({url_converter:m.url_converter,url_converter_scope:m.url_converter_scope},m.schema);if(e.isIE6){try{p.execCommand("BackgroundImageCache",false,true)}catch(n){l.cssFlicker=true}}l.fixDoc(p);l.events=m.ownEvents?new e.dom.EventUtils(m.proxy):e.dom.Event;e.addUnload(l.destroy,l);o=m.schema?m.schema.getBlockElements():{};l.isBlock=function(r){var q=r.nodeType;if(q){return !!(q===1&&o[r.nodeName])}return !!o[r]}},fixDoc:function(l){var k=this.settings,j;if(b&&k.schema){("abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video").replace(/\w+/g,function(m){l.createElement(m)});for(j in k.schema.getCustomElements()){l.createElement(j)}}},clone:function(l,j){var k=this,n,m;if(!b||l.nodeType!==1||j){return l.cloneNode(j)}m=k.doc;if(!j){n=m.createElement(l.nodeName);g(k.getAttribs(l),function(o){k.setAttrib(n,o.nodeName,k.getAttrib(l,o.nodeName))});return n}return n.firstChild},getRoot:function(){var j=this,k=j.settings;return(k&&j.get(k.root_element))||j.doc.body},getViewPort:function(k){var l,j;k=!k?this.win:k;l=k.document;j=this.boxModel?l.documentElement:l.body;return{x:k.pageXOffset||j.scrollLeft,y:k.pageYOffset||j.scrollTop,w:k.innerWidth||j.clientWidth,h:k.innerHeight||j.clientHeight}},getRect:function(m){var l,j=this,k;m=j.get(m);l=j.getPos(m);k=j.getSize(m);return{x:l.x,y:l.y,w:k.w,h:k.h}},getSize:function(m){var k=this,j,l;m=k.get(m);j=k.getStyle(m,"width");l=k.getStyle(m,"height");if(j.indexOf("px")===-1){j=0}if(l.indexOf("px")===-1){l=0}return{w:parseInt(j,10)||m.offsetWidth||m.clientWidth,h:parseInt(l,10)||m.offsetHeight||m.clientHeight}},getParent:function(l,k,j){return this.getParents(l,k,j,false)},getParents:function(u,p,l,s){var k=this,j,m=k.settings,q=[];u=k.get(u);s=s===undefined;if(m.strict_root){l=l||k.getRoot()}if(d(p,"string")){j=p;if(p==="*"){p=function(o){return o.nodeType==1}}else{p=function(o){return k.is(o,j)}}}while(u){if(u==l||!u.nodeType||u.nodeType===9){break}if(!p||p(u)){if(s){q.push(u)}else{return u}}u=u.parentNode}return s?q:null},get:function(j){var k;if(j&&this.doc&&typeof(j)=="string"){k=j;j=this.doc.getElementById(j);if(j&&j.id!==k){return this.doc.getElementsByName(k)[1]}}return j},getNext:function(k,j){return this._findSib(k,j,"nextSibling")},getPrev:function(k,j){return this._findSib(k,j,"previousSibling")},select:function(l,k){var j=this;return e.dom.Sizzle(l,j.get(k)||j.get(j.settings.root_element)||j.doc,[])},is:function(l,j){var k;if(l.length===undefined){if(j==="*"){return l.nodeType==1}if(c.test(j)){j=j.toLowerCase().split(/,/);l=l.nodeName.toLowerCase();for(k=j.length-1;k>=0;k--){if(j[k]==l){return true}}return false}}return e.dom.Sizzle.matches(j,l.nodeType?[l]:l).length>0},add:function(m,q,j,l,o){var k=this;return this.run(m,function(s){var r,n;r=d(q,"string")?k.doc.createElement(q):q;k.setAttribs(r,j);if(l){if(l.nodeType){r.appendChild(l)}else{k.setHTML(r,l)}}return !o?s.appendChild(r):r})},create:function(l,j,k){return this.add(this.doc.createElement(l),l,j,k,1)},createHTML:function(r,j,p){var q="",m=this,l;q+="<"+r;for(l in j){if(j.hasOwnProperty(l)){q+=" "+l+'="'+m.encode(j[l])+'"'}}if(typeof(p)!="undefined"){return q+">"+p+"</"+r+">"}return q+" />"},remove:function(j,k){return this.run(j,function(m){var n,l=m.parentNode;if(!l){return null}if(k){while(n=m.firstChild){if(!e.isIE||n.nodeType!==3||n.nodeValue){l.insertBefore(n,m)}else{m.removeChild(n)}}}return l.removeChild(m)})},setStyle:function(m,j,k){var l=this;return l.run(m,function(p){var o,n;o=p.style;j=j.replace(/-(\D)/g,function(r,q){return q.toUpperCase()});if(l.pixelStyles.test(j)&&(e.is(k,"number")||/^[\-0-9\.]+$/.test(k))){k+="px"}switch(j){case"opacity":if(b){o.filter=k===""?"":"alpha(opacity="+(k*100)+")";if(!m.currentStyle||!m.currentStyle.hasLayout){o.display="inline-block"}}o[j]=o["-moz-opacity"]=o["-khtml-opacity"]=k||"";break;case"float":b?o.styleFloat=k:o.cssFloat=k;break;default:o[j]=k||""}if(l.settings.update_styles){l.setAttrib(p,"data-mce-style")}})},getStyle:function(m,j,l){m=this.get(m);if(!m){return}if(this.doc.defaultView&&l){j=j.replace(/[A-Z]/g,function(n){return"-"+n});try{return this.doc.defaultView.getComputedStyle(m,null).getPropertyValue(j)}catch(k){return null}}j=j.replace(/-(\D)/g,function(o,n){return n.toUpperCase()});if(j=="float"){j=b?"styleFloat":"cssFloat"}if(m.currentStyle&&l){return m.currentStyle[j]}return m.style?m.style[j]:undefined},setStyles:function(m,n){var k=this,l=k.settings,j;j=l.update_styles;l.update_styles=0;g(n,function(o,p){k.setStyle(m,p,o)});l.update_styles=j;if(l.update_styles){k.setAttrib(m,l.cssText)}},removeAllAttribs:function(j){return this.run(j,function(m){var l,k=m.attributes;for(l=k.length-1;l>=0;l--){m.removeAttributeNode(k.item(l))}})},setAttrib:function(l,m,j){var k=this;if(!l||!m){return}if(k.settings.strict){m=m.toLowerCase()}return this.run(l,function(q){var p=k.settings;var n=q.getAttribute(m);if(j!==null){switch(m){case"style":if(!d(j,"string")){g(j,function(r,s){k.setStyle(q,s,r)});return}if(p.keep_values){if(j&&!k._isRes(j)){q.setAttribute("data-mce-style",j,2)}else{q.removeAttribute("data-mce-style",2)}}q.style.cssText=j;break;case"class":q.className=j||"";break;case"src":case"href":if(p.keep_values){if(p.url_converter){j=p.url_converter.call(p.url_converter_scope||k,j,m,q)}k.setAttrib(q,"data-mce-"+m,j,2)}break;case"shape":q.setAttribute("data-mce-style",j);break}}if(d(j)&&j!==null&&j.length!==0){q.setAttribute(m,""+j,2)}else{q.removeAttribute(m,2)}if(tinyMCE.activeEditor&&n!=j){var o=tinyMCE.activeEditor;o.onSetAttrib.dispatch(o,q,m,j)}})},setAttribs:function(k,l){var j=this;return this.run(k,function(m){g(l,function(o,p){j.setAttrib(m,p,o)})})},getAttrib:function(o,p,l){var j,k=this,m;o=k.get(o);if(!o||o.nodeType!==1){return l===m?false:l}if(!d(l)){l=""}if(/^(src|href|style|coords|shape)$/.test(p)){j=o.getAttribute("data-mce-"+p);if(j){return j}}if(b&&k.props[p]){j=o[k.props[p]];j=j&&j.nodeValue?j.nodeValue:j}if(!j){j=o.getAttribute(p,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(p)){if(o[k.props[p]]===true&&j===""){return p}return j?p:""}if(o.nodeName==="FORM"&&o.getAttributeNode(p)){return o.getAttributeNode(p).nodeValue}if(p==="style"){j=j||o.style.cssText;if(j){j=k.serializeStyle(k.parseStyle(j),o.nodeName);if(k.settings.keep_values&&!k._isRes(j)){o.setAttribute("data-mce-style",j)}}}if(f&&p==="class"&&j){j=j.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(b){switch(p){case"rowspan":case"colspan":if(j===1){j=""}break;case"size":if(j==="+0"||j===20||j===0){j=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(j===0){j=""}break;case"hspace":if(j===-1){j=""}break;case"maxlength":case"tabindex":if(j===32768||j===2147483647||j==="32768"){j=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(j===65535){return p}return l;case"shape":j=j.toLowerCase();break;default:if(p.indexOf("on")===0&&j){j=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+j)}}}return(j!==m&&j!==null&&j!=="")?""+j:l},getPos:function(s,m){var k=this,j=0,q=0,o,p=k.doc,l;s=k.get(s);m=m||p.body;if(s){if(s.getBoundingClientRect){s=s.getBoundingClientRect();o=k.boxModel?p.documentElement:p.body;j=s.left+(p.documentElement.scrollLeft||p.body.scrollLeft)-o.clientTop;q=s.top+(p.documentElement.scrollTop||p.body.scrollTop)-o.clientLeft;return{x:j,y:q}}l=s;while(l&&l!=m&&l.nodeType){j+=l.offsetLeft||0;q+=l.offsetTop||0;l=l.offsetParent}l=s.parentNode;while(l&&l!=m&&l.nodeType){j-=l.scrollLeft||0;q-=l.scrollTop||0;l=l.parentNode}}return{x:j,y:q}},parseStyle:function(j){return this.styles.parse(j)},serializeStyle:function(k,j){return this.styles.serialize(k,j)},loadCSS:function(j){var l=this,m=l.doc,k;if(!j){j=""}k=m.getElementsByTagName("head")[0];g(j.split(","),function(n){var o;if(l.files[n]){return}l.files[n]=true;o=l.create("link",{rel:"stylesheet",href:e._addVer(n)});if(b&&m.documentMode&&m.recalc){o.onload=function(){if(m.recalc){m.recalc()}o.onload=null}}k.appendChild(o)})},addClass:function(j,k){return this.run(j,function(l){var m;if(!k){return 0}if(this.hasClass(l,k)){return l.className}m=this.removeClass(l,k);return l.className=(m!=""?(m+" "):"")+k})},removeClass:function(l,m){var j=this,k;return j.run(l,function(o){var n;if(j.hasClass(o,m)){if(!k){k=new RegExp("(^|\\s+)"+m+"(\\s+|$)","g")}n=o.className.replace(k," ");n=e.trim(n!=" "?n:"");o.className=n;if(!n){o.removeAttribute("class");o.removeAttribute("className")}return n}return o.className})},hasClass:function(k,j){k=this.get(k);if(!k||!j){return false}return(" "+k.className+" ").indexOf(" "+j+" ")!==-1},show:function(j){return this.setStyle(j,"display","block")},hide:function(j){return this.setStyle(j,"display","none")},isHidden:function(j){j=this.get(j);return !j||j.style.display=="none"||this.getStyle(j,"display")=="none"},uniqueId:function(j){return(!j?"mce_":j)+(this.counter++)},setHTML:function(l,k){var j=this;return j.run(l,function(n){if(b){while(n.firstChild){n.removeChild(n.firstChild)}try{n.innerHTML="<br />"+k;n.removeChild(n.firstChild)}catch(m){n=j.create("div");n.innerHTML="<br />"+k;g(n.childNodes,function(p,o){if(o){n.appendChild(p)}})}}else{n.innerHTML=k}return k})},getOuterHTML:function(l){var k,j=this;l=j.get(l);if(!l){return null}if(l.nodeType===1&&j.hasOuterHTML){return l.outerHTML}k=(l.ownerDocument||j.doc).createElement("body");k.appendChild(l.cloneNode(true));return k.innerHTML},setOuterHTML:function(m,k,n){var j=this;function l(p,o,r){var s,q;q=r.createElement("body");q.innerHTML=o;s=q.lastChild;while(s){j.insertAfter(s.cloneNode(true),p);s=s.previousSibling}j.remove(p)}return this.run(m,function(p){p=j.get(p);if(p.nodeType==1){n=n||p.ownerDocument||j.doc;if(b){try{if(b&&p.nodeType==1){p.outerHTML=k}else{l(p,k,n)}}catch(o){l(p,k,n)}}else{l(p,k,n)}}})},decode:h.decode,encode:h.encodeAllRaw,insertAfter:function(j,k){k=this.get(k);return this.run(j,function(m){var l,n;l=k.parentNode;n=k.nextSibling;if(n){l.insertBefore(m,n)}else{l.appendChild(m)}return m})},replace:function(p,m,j){var l=this;if(d(m,"array")){p=p.cloneNode(true)}return l.run(m,function(k){if(j){g(e.grep(k.childNodes),function(n){p.appendChild(n)})}return k.parentNode.replaceChild(p,k)})},rename:function(m,j){var l=this,k;if(m.nodeName!=j.toUpperCase()){k=l.create(j);g(l.getAttribs(m),function(n){l.setAttrib(k,n.nodeName,l.getAttrib(m,n.nodeName))});l.replace(k,m,1)}return k||m},findCommonAncestor:function(l,j){var m=l,k;while(m){k=j;while(k&&m!=k){k=k.parentNode}if(m==k){break}m=m.parentNode}if(!m&&l.ownerDocument){return l.ownerDocument.documentElement}return m},toHex:function(j){var l=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(j);function k(m){m=parseInt(m,10).toString(16);return m.length>1?m:"0"+m}if(l){j="#"+k(l[1])+k(l[2])+k(l[3]);return j}return j},getClasses:function(){var n=this,j=[],m,o={},p=n.settings.class_filter,l;if(n.classes){return n.classes}function q(r){g(r.imports,function(s){q(s)});g(r.cssRules||r.rules,function(s){switch(s.type||1){case 1:if(s.selectorText){g(s.selectorText.split(","),function(u){u=u.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(u)||!/\.[\w\-]+$/.test(u)){return}l=u;u=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",u);if(p&&!(u=p(u,l))){return}if(!o[u]){j.push({"class":u});o[u]=1}})}break;case 3:q(s.styleSheet);break}})}try{g(n.doc.styleSheets,q)}catch(k){}if(j.length>0){n.classes=j}return j},run:function(m,l,k){var j=this,n;if(j.doc&&typeof(m)==="string"){m=j.get(m)}if(!m){return false}k=k||this;if(!m.nodeType&&(m.length||m.length===0)){n=[];g(m,function(p,o){if(p){if(typeof(p)=="string"){p=j.doc.getElementById(p)}n.push(l.call(k,p,o))}});return n}return l.call(k,m)},getAttribs:function(k){var j;k=this.get(k);if(!k){return[]}if(b){j=[];if(k.nodeName=="OBJECT"){return k.attributes}if(k.nodeName==="OPTION"&&this.getAttrib(k,"selected")){j.push({specified:1,nodeName:"selected"})}k.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(l){j.push({specified:1,nodeName:l})});return j}return k.attributes},isEmpty:function(m,k){var r=this,o,n,q,j,l,p=0;m=m.firstChild;if(m){j=new e.dom.TreeWalker(m,m.parentNode);k=k||r.schema?r.schema.getNonEmptyElements():null;do{q=m.nodeType;if(q===1){if(m.getAttribute("data-mce-bogus")){continue}l=m.nodeName.toLowerCase();if(k&&k[l]){if(l==="br"){p++;continue}return false}n=r.getAttribs(m);o=m.attributes.length;while(o--){l=m.attributes[o].nodeName;if(l==="name"||l==="data-mce-bookmark"){return false}}}if(q==8){return false}if((q===3&&!a.test(m.nodeValue))){return false}}while(m=j.next())}return p<=1},destroy:function(k){var j=this;j.win=j.doc=j.root=j.events=j.frag=null;if(!k){e.removeUnload(j.destroy)}},createRng:function(){var j=this.doc;return j.createRange?j.createRange():new e.dom.Range(this)},nodeIndex:function(n,o){var j=0,l,m,k;if(n){for(l=n.nodeType,n=n.previousSibling,m=n;n;n=n.previousSibling){k=n.nodeType;if(o&&k==3){if(k==l||!n.nodeValue.length){continue}}j++;l=k}}return j},split:function(n,m,q){var s=this,j=s.createRng(),o,l,p;function k(A){var v,u=A.childNodes,z=A.nodeType;function B(E){var D=E.previousSibling&&E.previousSibling.nodeName=="SPAN";var C=E.nextSibling&&E.nextSibling.nodeName=="SPAN";return D&&C}if(z==1&&A.getAttribute("data-mce-type")=="bookmark"){return}for(v=u.length-1;v>=0;v--){k(u[v])}if(z!=9){if(z==3&&A.nodeValue.length>0){var r=e.trim(A.nodeValue).length;if(!s.isBlock(A.parentNode)||r>0||r===0&&B(A)){return}}else{if(z==1){u=A.childNodes;if(u.length==1&&u[0]&&u[0].nodeType==1&&u[0].getAttribute("data-mce-type")=="bookmark"){A.parentNode.insertBefore(u[0],A)}if(u.length||/^(br|hr|input|img)$/i.test(A.nodeName)){return}}}s.remove(A)}return A}if(n&&m){j.setStart(n.parentNode,s.nodeIndex(n));j.setEnd(m.parentNode,s.nodeIndex(m));o=j.extractContents();j=s.createRng();j.setStart(m.parentNode,s.nodeIndex(m)+1);j.setEnd(n.parentNode,s.nodeIndex(n)+1);l=j.extractContents();p=n.parentNode;p.insertBefore(k(o),n);if(q){p.replaceChild(q,m)}else{p.insertBefore(m,n)}p.insertBefore(k(l),n);s.remove(n);return q||m}},bind:function(m,j,l,k){return this.events.add(m,j,l,k||this)},unbind:function(l,j,k){return this.events.remove(l,j,k)},fire:function(l,k,j){return this.events.fire(l,k,j)},getContentEditable:function(k){var j;if(k.nodeType!=1){return null}j=k.getAttribute("data-mce-contenteditable");if(j&&j!=="inherit"){return j}return k.contentEditable!=="inherit"?k.contentEditable:null},_findSib:function(m,j,k){var l=this,n=j;if(m){if(d(n,"string")){n=function(o){return l.is(o,j)}}for(m=m[k];m;m=m[k]){if(n(m)){return m}}}return null},_isRes:function(j){return/^(top|left|bottom|right|width|height)/i.test(j)||/;\s*(top|left|bottom|right|width|height)/i.test(j)}});e.DOM=new e.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(c){var R=this,e=c.doc,W=0,I=1,k=2,H=true,V=false,Y="startOffset",h="startContainer",T="endContainer",D="endOffset",l=tinymce.extend,o=c.nodeIndex;l(R,{startContainer:e,startOffset:0,endContainer:e,endOffset:0,collapsed:H,commonAncestorContainer:e,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:u,setStartBefore:g,setStartAfter:M,setEndBefore:N,setEndAfter:v,collapse:E,selectNode:B,selectNodeContents:J,compareBoundaryPoints:z,deleteContents:q,extractContents:L,cloneContents:d,insertNode:G,surroundContents:Q,cloneRange:O});function A(){return e.createDocumentFragment()}function r(aa,Z){F(H,aa,Z)}function u(aa,Z){F(V,aa,Z)}function g(Z){r(Z.parentNode,o(Z))}function M(Z){r(Z.parentNode,o(Z)+1)}function N(Z){u(Z.parentNode,o(Z))}function v(Z){u(Z.parentNode,o(Z)+1)}function E(Z){if(Z){R[T]=R[h];R[D]=R[Y]}else{R[h]=R[T];R[Y]=R[D]}R.collapsed=H}function B(Z){g(Z);v(Z)}function J(Z){r(Z,0);u(Z,Z.nodeType===1?Z.childNodes.length:Z.nodeValue.length)}function z(ad,Z){var ag=R[h],ab=R[Y],af=R[T],aa=R[D],ae=Z.startContainer,ai=Z.startOffset,ac=Z.endContainer,ah=Z.endOffset;if(ad===0){return K(ag,ab,ae,ai)}if(ad===1){return K(af,aa,ae,ai)}if(ad===2){return K(af,aa,ac,ah)}if(ad===3){return K(ag,ab,ac,ah)}}function q(){m(k)}function L(){return m(W)}function d(){return m(I)}function G(ad){var aa=this[h],Z=this[Y],ac,ab;if((aa.nodeType===3||aa.nodeType===4)&&aa.nodeValue){if(!Z){aa.parentNode.insertBefore(ad,aa)}else{if(Z>=aa.nodeValue.length){c.insertAfter(ad,aa)}else{ac=aa.splitText(Z);aa.parentNode.insertBefore(ad,ac)}}}else{if(aa.childNodes.length>0){ab=aa.childNodes[Z]}if(ab){aa.insertBefore(ad,ab)}else{aa.appendChild(ad)}}}function Q(aa){var Z=R.extractContents();R.insertNode(aa);aa.appendChild(Z);R.selectNode(aa)}function O(){return l(new b(c),{startContainer:R[h],startOffset:R[Y],endContainer:R[T],endOffset:R[D],collapsed:R.collapsed,commonAncestorContainer:R.commonAncestorContainer})}function S(Z,aa){var ab;if(Z.nodeType==3){return Z}if(aa<0){return Z}ab=Z.firstChild;while(ab&&aa>0){--aa;ab=ab.nextSibling}if(ab){return ab}return Z}function n(){return(R[h]==R[T]&&R[Y]==R[D])}function K(ac,ae,aa,ad){var af,ab,Z,ag,ai,ah;if(ac==aa){if(ae==ad){return 0}if(ae<ad){return -1}return 1}af=aa;while(af&&af.parentNode!=ac){af=af.parentNode}if(af){ab=0;Z=ac.firstChild;while(Z!=af&&ab<ae){ab++;Z=Z.nextSibling}if(ae<=ab){return -1}return 1}af=ac;while(af&&af.parentNode!=aa){af=af.parentNode}if(af){ab=0;Z=aa.firstChild;while(Z!=af&&ab<ad){ab++;Z=Z.nextSibling}if(ab<ad){return -1}return 1}ag=c.findCommonAncestor(ac,aa);ai=ac;while(ai&&ai.parentNode!=ag){ai=ai.parentNode}if(!ai){ai=ag}ah=aa;while(ah&&ah.parentNode!=ag){ah=ah.parentNode}if(!ah){ah=ag}if(ai==ah){return 0}Z=ag.firstChild;while(Z){if(Z==ai){return -1}if(Z==ah){return 1}Z=Z.nextSibling}}function F(aa,ad,ac){var Z,ab;if(aa){R[h]=ad;R[Y]=ac}else{R[T]=ad;R[D]=ac}Z=R[T];while(Z.parentNode){Z=Z.parentNode}ab=R[h];while(ab.parentNode){ab=ab.parentNode}if(ab==Z){if(K(R[h],R[Y],R[T],R[D])>0){R.collapse(aa)}}else{R.collapse(aa)}R.collapsed=n();R.commonAncestorContainer=c.findCommonAncestor(R[h],R[T])}function m(ag){var af,ac=0,ai=0,aa,ae,ab,ad,Z,ah;if(R[h]==R[T]){return f(ag)}for(af=R[T],aa=af.parentNode;aa;af=aa,aa=aa.parentNode){if(aa==R[h]){return s(af,ag)}++ac}for(af=R[h],aa=af.parentNode;aa;af=aa,aa=aa.parentNode){if(aa==R[T]){return X(af,ag)}++ai}ae=ai-ac;ab=R[h];while(ae>0){ab=ab.parentNode;ae--}ad=R[T];while(ae<0){ad=ad.parentNode;ae++}for(Z=ab.parentNode,ah=ad.parentNode;Z!=ah;Z=Z.parentNode,ah=ah.parentNode){ab=Z;ad=ah}return p(ab,ad,ag)}function f(af){var ah,ai,Z,ab,ac,ag,ad,aa,ae;if(af!=k){ah=A()}if(R[Y]==R[D]){return ah}if(R[h].nodeType==3){ai=R[h].nodeValue;Z=ai.substring(R[Y],R[D]);if(af!=I){ab=R[h];aa=R[Y];ae=R[D]-R[Y];if(aa===0&&ae>=ab.nodeValue.length-1){ab.parentNode.removeChild(ab)}else{ab.deleteData(aa,ae)}R.collapse(H)}if(af==k){return}if(Z.length>0){ah.appendChild(e.createTextNode(Z))}return ah}ab=S(R[h],R[Y]);ac=R[D]-R[Y];while(ab&&ac>0){ag=ab.nextSibling;ad=C(ab,af);if(ah){ah.appendChild(ad)}--ac;ab=ag}if(af!=I){R.collapse(H)}return ah}function s(ag,ad){var af,ae,aa,Z,ac,ab;if(ad!=k){af=A()}ae=j(ag,ad);if(af){af.appendChild(ae)}aa=o(ag);Z=aa-R[Y];if(Z<=0){if(ad!=I){R.setEndBefore(ag);R.collapse(V)}return af}ae=ag.previousSibling;while(Z>0){ac=ae.previousSibling;ab=C(ae,ad);if(af){af.insertBefore(ab,af.firstChild)}--Z;ae=ac}if(ad!=I){R.setEndBefore(ag);R.collapse(V)}return af}function X(ae,ad){var ag,aa,af,Z,ac,ab;if(ad!=k){ag=A()}af=U(ae,ad);if(ag){ag.appendChild(af)}aa=o(ae);++aa;Z=R[D]-aa;af=ae.nextSibling;while(af&&Z>0){ac=af.nextSibling;ab=C(af,ad);if(ag){ag.appendChild(ab)}--Z;af=ac}if(ad!=I){R.setStartAfter(ae);R.collapse(H)}return ag}function p(ae,Z,ah){var ab,aj,ad,af,ag,aa,ai,ac;if(ah!=k){aj=A()}ab=U(ae,ah);if(aj){aj.appendChild(ab)}ad=ae.parentNode;af=o(ae);ag=o(Z);++af;aa=ag-af;ai=ae.nextSibling;while(aa>0){ac=ai.nextSibling;ab=C(ai,ah);if(aj){aj.appendChild(ab)}ai=ac;--aa}ab=j(Z,ah);if(aj){aj.appendChild(ab)}if(ah!=I){R.setStartAfter(ae);R.collapse(H)}return aj}function j(af,ag){var ab=S(R[T],R[D]-1),ah,ae,ad,Z,aa,ac=ab!=R[T];if(ab==af){return P(ab,ac,V,ag)}ah=ab.parentNode;ae=P(ah,V,V,ag);while(ah){while(ab){ad=ab.previousSibling;Z=P(ab,ac,V,ag);if(ag!=k){ae.insertBefore(Z,ae.firstChild)}ac=H;ab=ad}if(ah==af){return ae}ab=ah.previousSibling;ah=ah.parentNode;aa=P(ah,V,V,ag);if(ag!=k){aa.appendChild(ae)}ae=aa}}function U(af,ag){var ac=S(R[h],R[Y]),ad=ac!=R[h],ah,ae,ab,Z,aa;if(ac==af){return P(ac,ad,H,ag)}ah=ac.parentNode;ae=P(ah,V,H,ag);while(ah){while(ac){ab=ac.nextSibling;Z=P(ac,ad,H,ag);if(ag!=k){ae.appendChild(Z)}ad=H;ac=ab}if(ah==af){return ae}ac=ah.nextSibling;ah=ah.parentNode;aa=P(ah,V,H,ag);if(ag!=k){aa.appendChild(ae)}ae=aa}}function P(Z,ad,ag,ah){var ac,ab,ae,aa,af;if(ad){return C(Z,ah)}if(Z.nodeType==3){ac=Z.nodeValue;if(ag){aa=R[Y];ab=ac.substring(aa);ae=ac.substring(0,aa)}else{aa=R[D];ab=ac.substring(0,aa);ae=ac.substring(aa)}if(ah!=I){Z.nodeValue=ae}if(ah==k){return}af=c.clone(Z,V);af.nodeValue=ab;return af}if(ah==k){return}return c.clone(Z,V)}function C(aa,Z){if(Z!=k){return Z==I?c.clone(aa,H):aa}aa.parentNode.removeChild(aa)}}a.Range=b})(tinymce.dom);(function(){function a(d){var b=this,h=d.dom,c=true,f=false;function e(j,k){var l,v=0,r,o,n,m,p,s,q=-1,u;l=j.duplicate();l.collapse(k);u=l.parentElement();if(u.ownerDocument!==d.dom.doc){return}while(u.contentEditable==="false"){u=u.parentNode}if(!u.hasChildNodes()){return{node:u,inside:1}}n=u.children;r=n.length-1;while(v<=r){s=Math.floor((v+r)/2);m=n[s];l.moveToElementText(m);q=l.compareEndPoints(k?"StartToStart":"EndToEnd",j);if(q>0){r=s-1}else{if(q<0){v=s+1}else{return{node:m}}}}if(q<0){if(!m){l.moveToElementText(u);l.collapse(true);m=u;o=true}else{l.collapse(false)}p=0;while(l.compareEndPoints(k?"StartToStart":"StartToEnd",j)!==0){if(l.move("character",1)===0||u!=l.parentElement()){break}p++}}else{l.collapse(true);p=0;while(l.compareEndPoints(k?"StartToStart":"StartToEnd",j)!==0){if(l.move("character",-1)===0||u!=l.parentElement()){break}p++}}return{node:m,position:q,offset:p,inside:o}}function g(){var j=d.getRng(),s=h.createRng(),m,l,q,r,n,k;m=j.item?j.item(0):j.parentElement();if(m.ownerDocument!=h.doc){return s}l=d.isCollapsed();if(j.item){s.setStart(m.parentNode,h.nodeIndex(m));s.setEnd(s.startContainer,s.startOffset+1);return s}function p(E){var z=e(j,E),u,C,D=0,B,A,v;u=z.node;C=z.offset;if(z.inside&&!u.hasChildNodes()){s[E?"setStart":"setEnd"](u,0);return}if(C===A){s[E?"setStartBefore":"setEndAfter"](u);return}if(z.position<0){B=z.inside?u.firstChild:u.nextSibling;if(!B){s[E?"setStartAfter":"setEndAfter"](u);return}if(!C){if(B.nodeType==3){s[E?"setStart":"setEnd"](B,0)}else{s[E?"setStartBefore":"setEndBefore"](B)}return}while(B){v=B.nodeValue;D+=v.length;if(D>=C){u=B;D-=C;D=v.length-D;break}B=B.nextSibling}}else{B=u.previousSibling;if(!B){return s[E?"setStartBefore":"setEndBefore"](u)}if(!C){if(u.nodeType==3){s[E?"setStart":"setEnd"](B,u.nodeValue.length)}else{s[E?"setStartAfter":"setEndAfter"](B)}return}while(B){D+=B.nodeValue.length;if(D>=C){u=B;D-=C;break}B=B.previousSibling}}s[E?"setStart":"setEnd"](u,D)}try{p(true);if(!l){p()}}catch(o){if(o.number==-2147024809){n=b.getBookmark(2);q=j.duplicate();q.collapse(true);m=q.parentElement();if(!l){q=j.duplicate();q.collapse(false);r=q.parentElement();r.innerHTML=r.innerHTML}m.innerHTML=m.innerHTML;b.moveToBookmark(n);j=d.getRng();p(true);if(!l){p()}}else{throw o}}return s}this.getBookmark=function(n){var k=d.getRng(),p,j,m={};function o(z){var v,q,u,s,r=[];v=z.parentNode;q=h.getRoot().parentNode;while(v!=q&&v.nodeType!==9){u=v.children;s=u.length;while(s--){if(z===u[s]){r.push(s);break}}z=v;v=v.parentNode}return r}function l(r){var q;q=e(k,r);if(q){return{position:q.position,offset:q.offset,indexes:o(q.node),inside:q.inside}}}if(n===2){if(!k.item){m.start=l(true);if(!d.isCollapsed()){m.end=l()}}else{m.start={ctrl:true,indexes:o(k.item(0))}}}return m};this.moveToBookmark=function(l){var k,j=h.doc.body;function n(p){var s,r,o,q;s=h.getRoot();for(r=p.length-1;r>=0;r--){q=s.children;o=p[r];if(o<=q.length-1){s=q[o]}}return s}function m(s){var o=l[s?"start":"end"],r,q,p;if(o){r=o.position>0;q=j.createTextRange();q.moveToElementText(n(o.indexes));offset=o.offset;if(offset!==p){q.collapse(o.inside||r);q.moveStart("character",r?-offset:offset)}else{q.collapse(s)}k.setEndPoint(s?"StartToStart":"EndToStart",q);if(s){k.collapse(true)}}}if(l.start){if(l.start.ctrl){k=j.createControlRange();k.addElement(n(l.start.indexes));k.select()}else{k=j.createTextRange();m(true);m();k.select()}}};this.addRange=function(j){var o,m,l,q,u,r,s=d.dom.doc,n=s.body;function k(D){var z,C,v,B,A;v=h.create("a");z=D?l:u;C=D?q:r;B=o.duplicate();if(z==s||z==s.documentElement){z=n;C=0}if(z.nodeType==3){z.parentNode.insertBefore(v,z);B.moveToElementText(v);B.moveStart("character",C);h.remove(v);o.setEndPoint(D?"StartToStart":"EndToEnd",B)}else{A=z.childNodes;if(A.length){if(C>=A.length){h.insertAfter(v,A[A.length-1])}else{z.insertBefore(v,A[C])}B.moveToElementText(v)}else{if(z.canHaveHTML){z.innerHTML="<span>\uFEFF</span>";v=z.firstChild;B.moveToElementText(v);B.collapse(f)}}o.setEndPoint(D?"StartToStart":"EndToEnd",B);h.remove(v)}}l=j.startContainer;q=j.startOffset;u=j.endContainer;r=j.endOffset;o=n.createTextRange();if(l==u&&l.nodeType==1){if(q==r&&!l.hasChildNodes()){if(l.canHaveHTML){l.innerHTML="<span>\uFEFF</span><span>\uFEFF</span>";o.moveToElementText(l.lastChild);o.select();h.doc.selection.clear();l.innerHTML="";return}else{q=h.nodeIndex(l);l=l.parentNode}}if(q==r-1){try{m=n.createControlRange();m.addElement(l.childNodes[q]);m.select();return}catch(p){}}}k(true);k();o.select()};this.getRangeAt=g}tinymce.dom.TridentSelection=a})();(function(){var o=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,j="sizcache",p=0,s=Object.prototype.toString,h=false,g=true,r=/\\/g,z=/\r\n/g,B=/\W/;[0,0].sort(function(){g=false;return 0});var d=function(G,e,J,K){J=J||[];e=e||document;var M=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!G||typeof G!=="string"){return J}var D,O,R,C,N,Q,P,I,F=true,E=d.isXML(e),H=[],L=G;do{o.exec("");D=o.exec(L);if(D){L=D[3];H.push(D[1]);if(D[2]){C=D[3];break}}}while(D);if(H.length>1&&k.exec(G)){if(H.length===2&&l.relative[H[0]]){O=u(H[0]+H[1],e,K)}else{O=l.relative[H[0]]?[e]:d(H.shift(),e);while(H.length){G=H.shift();if(l.relative[G]){G+=H.shift()}O=u(G,O,K)}}}else{if(!K&&H.length>1&&e.nodeType===9&&!E&&l.match.ID.test(H[0])&&!l.match.ID.test(H[H.length-1])){N=d.find(H.shift(),e,E);e=N.expr?d.filter(N.expr,N.set)[0]:N.set[0]}if(e){N=K?{expr:H.pop(),set:m(K)}:d.find(H.pop(),H.length===1&&(H[0]==="~"||H[0]==="+")&&e.parentNode?e.parentNode:e,E);O=N.expr?d.filter(N.expr,N.set):N.set;if(H.length>0){R=m(O)}else{F=false}while(H.length){Q=H.pop();P=Q;if(!l.relative[Q]){Q=""}else{P=H.pop()}if(P==null){P=e}l.relative[Q](R,P,E)}}else{R=H=[]}}if(!R){R=O}if(!R){d.error(Q||G)}if(s.call(R)==="[object Array]"){if(!F){J.push.apply(J,R)}else{if(e&&e.nodeType===1){for(I=0;R[I]!=null;I++){if(R[I]&&(R[I]===true||R[I].nodeType===1&&d.contains(e,R[I]))){J.push(O[I])}}}else{for(I=0;R[I]!=null;I++){if(R[I]&&R[I].nodeType===1){J.push(O[I])}}}}}else{m(R,J)}if(C){d(C,M,J,K);d.uniqueSort(J)}return J};d.uniqueSort=function(C){if(q){h=g;C.sort(q);if(h){for(var e=1;e<C.length;e++){if(C[e]===C[e-1]){C.splice(e--,1)}}}}return C};d.matches=function(e,C){return d(e,null,null,C)};d.matchesSelector=function(e,C){return d(C,null,null,[e]).length>0};d.find=function(I,e,J){var H,D,F,E,G,C;if(!I){return[]}for(D=0,F=l.order.length;D<F;D++){G=l.order[D];if((E=l.leftMatch[G].exec(I))){C=E[1];E.splice(1,1);if(C.substr(C.length-1)!=="\\"){E[1]=(E[1]||"").replace(r,"");H=l.find[G](E,e,J);if(H!=null){I=I.replace(l.match[G],"");break}}}}if(!H){H=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:H,expr:I}};d.filter=function(M,L,P,F){var H,e,K,R,O,C,E,G,N,D=M,Q=[],J=L,I=L&&L[0]&&d.isXML(L[0]);while(M&&L.length){for(K in l.filter){if((H=l.leftMatch[K].exec(M))!=null&&H[2]){C=l.filter[K];E=H[1];e=false;H.splice(1,1);if(E.substr(E.length-1)==="\\"){continue}if(J===Q){Q=[]}if(l.preFilter[K]){H=l.preFilter[K](H,J,P,Q,F,I);if(!H){e=R=true}else{if(H===true){continue}}}if(H){for(G=0;(O=J[G])!=null;G++){if(O){R=C(O,H,G,J);N=F^R;if(P&&R!=null){if(N){e=true}else{J[G]=false}}else{if(N){Q.push(O);e=true}}}}}if(R!==undefined){if(!P){J=Q}M=M.replace(l.match[K],"");if(!e){return[]}break}}}if(M===D){if(e==null){d.error(M)}else{break}}D=M}return J};d.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var b=d.getText=function(F){var D,E,e=F.nodeType,C="";if(e){if(e===1||e===9||e===11){if(typeof F.textContent==="string"){return F.textContent}else{if(typeof F.innerText==="string"){return F.innerText.replace(z,"")}else{for(F=F.firstChild;F;F=F.nextSibling){C+=b(F)}}}}else{if(e===3||e===4){return F.nodeValue}}}else{for(D=0;(E=F[D]);D++){if(E.nodeType!==8){C+=b(E)}}}return C};var l=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(H,C){var E=typeof C==="string",G=E&&!B.test(C),I=E&&!G;if(G){C=C.toLowerCase()}for(var D=0,e=H.length,F;D<e;D++){if((F=H[D])){while((F=F.previousSibling)&&F.nodeType!==1){}H[D]=I||F&&F.nodeName.toLowerCase()===C?F||false:F===C}}if(I){d.filter(C,H,true)}},">":function(H,C){var G,F=typeof C==="string",D=0,e=H.length;if(F&&!B.test(C)){C=C.toLowerCase();for(;D<e;D++){G=H[D];if(G){var E=G.parentNode;H[D]=E.nodeName.toLowerCase()===C?E:false}}}else{for(;D<e;D++){G=H[D];if(G){H[D]=F?G.parentNode:G.parentNode===C}}if(F){d.filter(C,H,true)}}},"":function(E,C,G){var F,D=p++,e=v;if(typeof C==="string"&&!B.test(C)){C=C.toLowerCase();F=C;e=a}e("parentNode",C,D,E,F,G)},"~":function(E,C,G){var F,D=p++,e=v;if(typeof C==="string"&&!B.test(C)){C=C.toLowerCase();F=C;e=a}e("previousSibling",C,D,E,F,G)}},find:{ID:function(C,D,E){if(typeof D.getElementById!=="undefined"&&!E){var e=D.getElementById(C[1]);return e&&e.parentNode?[e]:[]}},NAME:function(D,G){if(typeof G.getElementsByName!=="undefined"){var C=[],F=G.getElementsByName(D[1]);for(var E=0,e=F.length;E<e;E++){if(F[E].getAttribute("name")===D[1]){C.push(F[E])}}return C.length===0?null:C}},TAG:function(e,C){if(typeof C.getElementsByTagName!=="undefined"){return C.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(E,C,D,e,H,I){E=" "+E[1].replace(r,"")+" ";if(I){return E}for(var F=0,G;(G=C[F])!=null;F++){if(G){if(H^(G.className&&(" "+G.className+" ").replace(/[\t\n\r]/g," ").indexOf(E)>=0)){if(!D){e.push(G)}}else{if(D){C[F]=false}}}}return false},ID:function(e){return e[1].replace(r,"")},TAG:function(C,e){return C[1].replace(r,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){d.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var C=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(C[1]+(C[2]||1))-0;e[3]=C[3]-0}else{if(e[2]){d.error(e[0])}}e[0]=p++;return e},ATTR:function(F,C,D,e,G,H){var E=F[1]=F[1].replace(r,"");if(!H&&l.attrMap[E]){F[1]=l.attrMap[E]}F[4]=(F[4]||F[5]||"").replace(r,"");if(F[2]==="~="){F[4]=" "+F[4]+" "}return F},PSEUDO:function(F,C,D,e,G){if(F[1]==="not"){if((o.exec(F[3])||"").length>1||/^\w/.test(F[3])){F[3]=d(F[3],null,null,C)}else{var E=d.filter(F[3],C,D,true^G);if(!D){e.push.apply(e,E)}return false}}else{if(l.match.POS.test(F[0])||l.match.CHILD.test(F[0])){return true}}return F},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(D,C,e){return !!d(e[3],D).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(D){var e=D.getAttribute("type"),C=D.type;return D.nodeName.toLowerCase()==="input"&&"text"===C&&(e===C||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(C){var e=C.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===C.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(C){var e=C.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===C.type},button:function(C){var e=C.nodeName.toLowerCase();return e==="input"&&"button"===C.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(C,e){return e===0},last:function(D,C,e,E){return C===E.length-1},even:function(C,e){return e%2===0},odd:function(C,e){return e%2===1},lt:function(D,C,e){return C<e[3]-0},gt:function(D,C,e){return C>e[3]-0},nth:function(D,C,e){return e[3]-0===C},eq:function(D,C,e){return e[3]-0===C}},filter:{PSEUDO:function(D,I,H,J){var e=I[1],C=l.filters[e];if(C){return C(D,H,I,J)}else{if(e==="contains"){return(D.textContent||D.innerText||b([D])||"").indexOf(I[3])>=0}else{if(e==="not"){var E=I[3];for(var G=0,F=E.length;G<F;G++){if(E[G]===D){return false}}return true}else{d.error(e)}}}},CHILD:function(D,F){var E,L,H,K,e,G,J,I=F[1],C=D;switch(I){case"only":case"first":while((C=C.previousSibling)){if(C.nodeType===1){return false}}if(I==="first"){return true}C=D;case"last":while((C=C.nextSibling)){if(C.nodeType===1){return false}}return true;case"nth":E=F[2];L=F[3];if(E===1&&L===0){return true}H=F[0];K=D.parentNode;if(K&&(K[j]!==H||!D.nodeIndex)){G=0;for(C=K.firstChild;C;C=C.nextSibling){if(C.nodeType===1){C.nodeIndex=++G}}K[j]=H}J=D.nodeIndex-L;if(E===0){return J===0}else{return(J%E===0&&J/E>=0)}}},ID:function(C,e){return C.nodeType===1&&C.getAttribute("id")===e},TAG:function(C,e){return(e==="*"&&C.nodeType===1)||!!C.nodeName&&C.nodeName.toLowerCase()===e},CLASS:function(C,e){return(" "+(C.className||C.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(G,E){var D=E[1],e=d.attr?d.attr(G,D):l.attrHandle[D]?l.attrHandle[D](G):G[D]!=null?G[D]:G.getAttribute(D),H=e+"",F=E[2],C=E[4];return e==null?F==="!=":!F&&d.attr?e!=null:F==="="?H===C:F==="*="?H.indexOf(C)>=0:F==="~="?(" "+H+" ").indexOf(C)>=0:!C?H&&e!==false:F==="!="?H!==C:F==="^="?H.indexOf(C)===0:F==="$="?H.substr(H.length-C.length)===C:F==="|="?H===C||H.substr(0,C.length+1)===C+"-":false},POS:function(F,C,D,G){var e=C[2],E=l.setFilters[e];if(E){return E(F,D,C,G)}}}};var k=l.match.POS,c=function(C,e){return"\\"+(e-0+1)};for(var f in l.match){l.match[f]=new RegExp(l.match[f].source+(/(?![^\[]*\])(?![^\(]*\))/.source));l.leftMatch[f]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[f].source.replace(/\\(\d+)/g,c))}l.match.globalPOS=k;var m=function(C,e){C=Array.prototype.slice.call(C,0);if(e){e.push.apply(e,C);return e}return C};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(A){m=function(F,E){var D=0,C=E||[];if(s.call(F)==="[object Array]"){Array.prototype.push.apply(C,F)}else{if(typeof F.length==="number"){for(var e=F.length;D<e;D++){C.push(F[D])}}else{for(;F[D];D++){C.push(F[D])}}}return C}}var q,n;if(document.documentElement.compareDocumentPosition){q=function(C,e){if(C===e){h=true;return 0}if(!C.compareDocumentPosition||!e.compareDocumentPosition){return C.compareDocumentPosition?-1:1}return C.compareDocumentPosition(e)&4?-1:1}}else{q=function(J,I){if(J===I){h=true;return 0}else{if(J.sourceIndex&&I.sourceIndex){return J.sourceIndex-I.sourceIndex}}var G,C,D=[],e=[],F=J.parentNode,H=I.parentNode,K=F;if(F===H){return n(J,I)}else{if(!F){return -1}else{if(!H){return 1}}}while(K){D.unshift(K);K=K.parentNode}K=H;while(K){e.unshift(K);K=K.parentNode}G=D.length;C=e.length;for(var E=0;E<G&&E<C;E++){if(D[E]!==e[E]){return n(D[E],e[E])}}return E===G?n(J,e[E],-1):n(D[E],I,1)};n=function(C,e,D){if(C===e){return D}var E=C.nextSibling;while(E){if(E===e){return -1}E=E.nextSibling}return 1}}(function(){var C=document.createElement("div"),D="script"+(new Date()).getTime(),e=document.documentElement;C.innerHTML="<a name='"+D+"'/>";e.insertBefore(C,e.firstChild);if(document.getElementById(D)){l.find.ID=function(F,G,H){if(typeof G.getElementById!=="undefined"&&!H){var E=G.getElementById(F[1]);return E?E.id===F[1]||typeof E.getAttributeNode!=="undefined"&&E.getAttributeNode("id").nodeValue===F[1]?[E]:undefined:[]}};l.filter.ID=function(G,E){var F=typeof G.getAttributeNode!=="undefined"&&G.getAttributeNode("id");return G.nodeType===1&&F&&F.nodeValue===E}}e.removeChild(C);e=C=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){l.find.TAG=function(C,G){var F=G.getElementsByTagName(C[1]);if(C[1]==="*"){var E=[];for(var D=0;F[D];D++){if(F[D].nodeType===1){E.push(F[D])}}F=E}return F}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){l.attrHandle.href=function(C){return C.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=d,E=document.createElement("div"),D="__sizzle__";E.innerHTML="<p class='TEST'></p>";if(E.querySelectorAll&&E.querySelectorAll(".TEST").length===0){return}d=function(P,G,K,O){G=G||document;if(!O&&!d.isXML(G)){var N=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(P);if(N&&(G.nodeType===1||G.nodeType===9)){if(N[1]){return m(G.getElementsByTagName(P),K)}else{if(N[2]&&l.find.CLASS&&G.getElementsByClassName){return m(G.getElementsByClassName(N[2]),K)}}}if(G.nodeType===9){if(P==="body"&&G.body){return m([G.body],K)}else{if(N&&N[3]){var J=G.getElementById(N[3]);if(J&&J.parentNode){if(J.id===N[3]){return m([J],K)}}else{return m([],K)}}}try{return m(G.querySelectorAll(P),K)}catch(L){}}else{if(G.nodeType===1&&G.nodeName.toLowerCase()!=="object"){var H=G,I=G.getAttribute("id"),F=I||D,R=G.parentNode,Q=/^\s*[+~]/.test(P);if(!I){G.setAttribute("id",F)}else{F=F.replace(/'/g,"\\$&")}if(Q&&R){G=G.parentNode}try{if(!Q||R){return m(G.querySelectorAll("[id='"+F+"'] "+P),K)}}catch(M){}finally{if(!I){H.removeAttribute("id")}}}}}return e(P,G,K,O)};for(var C in e){d[C]=e[C]}E=null})()}(function(){var e=document.documentElement,D=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(D){var F=!D.call(document.createElement("div"),"div"),C=false;try{D.call(document.documentElement,"[test!='']:sizzle")}catch(E){C=true}d.matchesSelector=function(H,J){J=J.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!d.isXML(H)){try{if(C||!l.match.PSEUDO.test(J)&&!/!=/.test(J)){var G=D.call(H,J);if(G||!F||H.document&&H.document.nodeType!==11){return G}}}catch(I){}}return d(J,null,null,[H]).length>0}}})();(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}l.order.splice(1,0,"CLASS");l.find.CLASS=function(C,D,E){if(typeof D.getElementsByClassName!=="undefined"&&!E){return D.getElementsByClassName(C[1])}};e=null})();function a(C,H,G,K,I,J){for(var E=0,D=K.length;E<D;E++){var e=K[E];if(e){var F=false;e=e[C];while(e){if(e[j]===G){F=K[e.sizset];break}if(e.nodeType===1&&!J){e[j]=G;e.sizset=E}if(e.nodeName.toLowerCase()===H){F=e;break}e=e[C]}K[E]=F}}}function v(C,H,G,K,I,J){for(var E=0,D=K.length;E<D;E++){var e=K[E];if(e){var F=false;e=e[C];while(e){if(e[j]===G){F=K[e.sizset];break}if(e.nodeType===1){if(!J){e[j]=G;e.sizset=E}if(typeof H!=="string"){if(e===H){F=true;break}}else{if(d.filter(H,[e]).length>0){F=e;break}}}e=e[C]}K[E]=F}}}if(document.documentElement.contains){d.contains=function(C,e){return C!==e&&(C.contains?C.contains(e):true)}}else{if(document.documentElement.compareDocumentPosition){d.contains=function(C,e){return !!(C.compareDocumentPosition(e)&16)}}else{d.contains=function(){return false}}}d.isXML=function(e){var C=(e?e.ownerDocument||e:0).documentElement;return C?C.nodeName!=="HTML":false};var u=function(D,e,H){var G,I=[],F="",J=e.nodeType?[e]:e;while((G=l.match.PSEUDO.exec(D))){F+=G[0];D=D.replace(l.match.PSEUDO,"")}D=l.relative[D]?D+"*":D;for(var E=0,C=J.length;E<C;E++){d(D,J[E],I,H)}return d.filter(F,I)};window.tinymce.dom.Sizzle=d})();(function(a){a.dom.Element=function(f,d){var b=this,e,c;b.settings=d=d||{};b.id=f;b.dom=e=d.dom||a.DOM;if(!a.isIE){c=e.get(b.id)}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(g){b[g]=function(){var h=[f],j;for(j=0;j<arguments.length;j++){h.push(arguments[j])}h=e[g].apply(e,h);b.update(g);return h}});a.extend(b,{on:function(j,h,g){return a.dom.Event.add(b.id,j,h,g)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle("width")||g.clientWidth),h:parseInt(b.getStyle("height")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,j){var h=b.getXY();b.moveTo(h.x+g,h.y+j)},resizeTo:function(g,j){b.setStyles({width:g,height:j})},resizeBy:function(g,k){var j=b.getSize();b.resizeTo(j.w+g,j.h+k)},update:function(h){var g;if(a.isIE6&&d.blocker){h=h||"";if(h.indexOf("get")===0||h.indexOf("has")===0||h.indexOf("is")===0){return}if(h=="remove"){e.remove(b.blocker);return}if(!b.blocker){b.blocker=e.uniqueId();g=e.add(d.container||e.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});e.setStyle(g,"opacity",0)}else{g=e.get(b.blocker)}e.setStyles(g,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(d){function f(g){return g.replace(/[\n\r]+/g,"")}var c=d.is,b=d.isIE,e=d.each,a=d.dom.TreeWalker;d.create("tinymce.dom.Selection",{Selection:function(k,j,h){var g=this;g.dom=k;g.win=j;g.serializer=h;e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(l){g[l]=new d.util.Dispatcher(g)});if(!g.win.getSelection){g.tridentSel=new d.dom.TridentSelection(g)}if(d.isIE&&k.boxModel){this._fixIESelection()}d.addUnload(g.destroy,g)},setCursorLocation:function(j,k){var g=this;var h=g.dom.createRng();h.setStart(j,k);h.setEnd(j,k);g.setRng(h);g.collapse(false)},getContent:function(h){var g=this,j=g.getRng(),o=g.dom.create("body"),l=g.getSel(),k,m,p;h=h||{};k=m="";h.get=true;h.format=h.format||"html";h.forced_root_block="";g.onBeforeGetContent.dispatch(g,h);if(h.format=="text"){return g.isCollapsed()?"":(j.text||(l.toString?l.toString():""))}if(j.cloneContents){p=j.cloneContents();if(p){o.appendChild(p)}}else{if(c(j.item)||c(j.htmlText)){o.innerHTML="<br>"+(j.item?j.item(0).outerHTML:j.htmlText);o.removeChild(o.firstChild)}else{o.innerHTML=j.toString()}}if(/^\s/.test(o.innerHTML)){k=" "}if(/\s+$/.test(o.innerHTML)){m=" "}h.getInner=true;h.content=g.isCollapsed()?"":k+g.serializer.serialize(o,h)+m;g.onGetContent.dispatch(g,h);return h.content},setContent:function(h,k){var p=this,g=p.getRng(),l,m=p.win.document,o,n;k=k||{format:"html"};k.set=true;h=k.content=h;if(!k.no_events){p.onBeforeSetContent.dispatch(p,k)}h=k.content;if(g.insertNode){h+='<span id="__caret">_</span>';if(g.startContainer==m&&g.endContainer==m){m.body.innerHTML=h}else{g.deleteContents();if(m.body.childNodes.length===0){m.body.innerHTML=h}else{if(g.createContextualFragment){g.insertNode(g.createContextualFragment(h))}else{o=m.createDocumentFragment();n=m.createElement("div");o.appendChild(n);n.outerHTML=h;g.insertNode(o)}}}l=p.dom.get("__caret");g=m.createRange();g.setStartBefore(l);g.setEndBefore(l);p.setRng(g);p.dom.remove("__caret");try{p.setRng(g)}catch(j){}}else{if(g.item){m.execCommand("Delete",false,null);g=p.getRng()}if(/^\s+/.test(h)){g.pasteHTML('<span id="__mce_tmp">_</span>'+h);p.dom.remove("__mce_tmp")}else{g.pasteHTML(h)}}if(!k.no_events){p.onSetContent.dispatch(p,k)}},getStart:function(){var h=this.getRng(),j,g,l,k;if(h.duplicate||h.item){if(h.item){return h.item(0)}l=h.duplicate();l.collapse(1);j=l.parentElement();g=k=h.parentElement();while(k=k.parentNode){if(k==j){j=g;break}}return j}else{j=h.startContainer;if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[Math.min(j.childNodes.length-1,h.startOffset)]}if(j&&j.nodeType==3){return j.parentNode}return j}},getEnd:function(){var h=this,j=h.getRng(),k,g;if(j.duplicate||j.item){if(j.item){return j.item(0)}j=j.duplicate();j.collapse(0);k=j.parentElement();if(k&&k.nodeName=="BODY"){return k.lastChild||k}return k}else{k=j.endContainer;g=j.endOffset;if(k.nodeType==1&&k.hasChildNodes()){k=k.childNodes[g>0?g-1:g]}if(k&&k.nodeType==3){return k.parentNode}return k}},getBookmark:function(u,v){var A=this,o=A.dom,h,l,k,p,j,q,r,n="\uFEFF",z;function g(C,D){var B=0;e(o.select(C),function(F,E){if(F==D){B=E}});return B}function m(){var C=A.getRng(true),B=o.getRoot(),D={};function E(H,M){var G=H[M?"startContainer":"endContainer"],L=H[M?"startOffset":"endOffset"],F=[],I,K,J=0;if(G.nodeType==3){if(v){for(I=G.previousSibling;I&&I.nodeType==3;I=I.previousSibling){L+=I.nodeValue.length}}F.push(L)}else{K=G.childNodes;if(L>=K.length&&K.length){J=1;L=Math.max(0,K.length-1)}F.push(A.dom.nodeIndex(K[L],v)+J)}for(;G&&G!=B;G=G.parentNode){F.push(A.dom.nodeIndex(G,v))}return F}D.start=E(C,true);if(!A.isCollapsed()){D.end=E(C)}return D}if(u==2){if(A.tridentSel){return A.tridentSel.getBookmark(u)}return m()}if(u){return{rng:A.getRng()}}h=A.getRng();k=o.uniqueId();p=tinyMCE.activeEditor.selection.isCollapsed();z="overflow:hidden;line-height:0px";if(h.duplicate||h.item){if(!h.item){l=h.duplicate();try{h.collapse();h.pasteHTML('<span data-mce-type="bookmark" id="'+k+'_start" style="'+z+'">'+n+"</span>");if(!p){l.collapse(false);h.moveToElementText(l.parentElement());if(h.compareEndPoints("StartToEnd",l)===0){l.move("character",-1)}l.pasteHTML('<span data-mce-type="bookmark" id="'+k+'_end" style="'+z+'">'+n+"</span>")}}catch(s){return null}}else{q=h.item(0);j=q.nodeName;return{name:j,index:g(j,q)}}}else{q=A.getNode();j=q.nodeName;if(j=="IMG"){return{name:j,index:g(j,q)}}if(h.startContainer.nodeType==9){return}l=h.cloneRange();if(!p){l.collapse(false);l.insertNode(o.create("span",{"data-mce-type":"bookmark",id:k+"_end",style:z},n))}h.collapse(true);h.insertNode(o.create("span",{"data-mce-type":"bookmark",id:k+"_start",style:z},n))}A.moveToBookmark({id:k,keep:1});return{id:k}},moveToBookmark:function(p){var u=this,n=u.dom,k,j,g,s,l,v,q,r;function h(E){var z=p[E?"start":"end"],B,C,D,A;if(z){D=z[0];for(C=s,B=z.length-1;B>=1;B--){A=C.childNodes;if(z[B]>A.length-1){return}C=A[z[B]]}if(C.nodeType===3){D=Math.min(z[0],C.nodeValue.length)}if(C.nodeType===1){D=Math.min(z[0],C.childNodes.length)}if(E){g.setStart(C,D)}else{g.setEnd(C,D)}}return true}function m(F){var A=n.get(p.id+"_"+F),E,z,C,D,B=p.keep;if(A){E=A.parentNode;if(F=="start"){if(!B){z=n.nodeIndex(A)}else{E=A.firstChild;z=1}l=v=E;q=r=z}else{if(!B){z=n.nodeIndex(A)}else{E=A.firstChild;z=1}v=E;r=z}if(!B){D=A.previousSibling;C=A.nextSibling;e(d.grep(A.childNodes),function(G){if(G.nodeType==3){G.nodeValue=G.nodeValue.replace(/\uFEFF/g,"")}});while(A=n.get(p.id+"_"+F)){n.remove(A,1)}if(D&&C&&D.nodeType==C.nodeType&&D.nodeType==3&&!d.isOpera){z=D.nodeValue.length;D.appendData(C.nodeValue);n.remove(C);if(F=="start"){l=v=D;q=r=z}else{v=D;r=z}}}}}function o(z){if(n.isBlock(z)&&!z.innerHTML&&!b){z.innerHTML='<br data-mce-bogus="1" />'}return z}if(p){if(p.start){g=n.createRng();s=n.getRoot();if(u.tridentSel){return u.tridentSel.moveToBookmark(p)}if(h(true)&&h()){u.setRng(g)}}else{if(p.id){m("start");m("end");if(l){g=n.createRng();g.setStart(o(l),q);g.setEnd(o(v),r);u.setRng(g)}}else{if(p.name){u.select(n.select(p.name)[p.index])}else{if(p.rng){u.setRng(p.rng)}}}}}},select:function(m,l){var k=this,n=k.dom,h=n.createRng(),g;function j(o,q){var p=new a(o,o);do{if(o.nodeType==3&&d.trim(o.nodeValue).length!==0){if(q){h.setStart(o,0)}else{h.setEnd(o,o.nodeValue.length)}return}if(o.nodeName=="BR"){if(q){h.setStartBefore(o)}else{h.setEndBefore(o)}return}}while(o=(q?p.next():p.prev()))}if(m){g=n.nodeIndex(m);h.setStart(m.parentNode,g);h.setEnd(m.parentNode,g+1);if(l){j(m,1);j(m)}k.setRng(h)}return m},isCollapsed:function(){var g=this,j=g.getRng(),h=g.getSel();if(!j||j.item){return false}if(j.compareEndPoints){return j.compareEndPoints("StartToEnd",j)===0}return !h||j.collapsed},collapse:function(g){var j=this,h=j.getRng(),k;if(h.item){k=h.item(0);h=j.win.document.body.createTextRange();h.moveToElementText(k)}h.collapse(!!g);j.setRng(h)},getSel:function(){var h=this,g=this.win;return g.getSelection?g.getSelection():g.document.selection},getRng:function(n){var h=this,j,k,m,l=h.win.document;if(n&&h.tridentSel){return h.tridentSel.getRangeAt(0)}try{if(j=h.getSel()){k=j.rangeCount>0?j.getRangeAt(0):(j.createRange?j.createRange():l.createRange())}}catch(g){}if(d.isIE&&k&&k.setStart&&l.selection.createRange().item){m=l.selection.createRange().item(0);k=l.createRange();k.setStartBefore(m);k.setEndAfter(m)}if(!k){k=l.createRange?l.createRange():l.body.createTextRange()}if(h.selectedRange&&h.explicitRange){if(k.compareBoundaryPoints(k.START_TO_START,h.selectedRange)===0&&k.compareBoundaryPoints(k.END_TO_END,h.selectedRange)===0){k=h.explicitRange}else{h.selectedRange=null;h.explicitRange=null}}return k},setRng:function(k){var j,h=this;if(!h.tridentSel){j=h.getSel();if(j){h.explicitRange=k;try{j.removeAllRanges()}catch(g){}j.addRange(k);h.selectedRange=j.rangeCount>0?j.getRangeAt(0):null}}else{if(k.cloneRange){try{h.tridentSel.addRange(k);return}catch(g){}}try{k.select()}catch(g){}}},setNode:function(h){var g=this;g.setContent(g.dom.getOuterHTML(h));return h},getNode:function(){var j=this,h=j.getRng(),k=j.getSel(),n,m=h.startContainer,g=h.endContainer;function l(q,o){var p=q;while(q&&q.nodeType===3&&q.length===0){q=o?q.nextSibling:q.previousSibling}return q||p}if(!h){return j.dom.getRoot()}if(h.setStart){n=h.commonAncestorContainer;if(!h.collapsed){if(h.startContainer==h.endContainer){if(h.endOffset-h.startOffset<2){if(h.startContainer.hasChildNodes()){n=h.startContainer.childNodes[h.startOffset]}}}if(m.nodeType===3&&g.nodeType===3){if(m.length===h.startOffset){m=l(m.nextSibling,true)}else{m=m.parentNode}if(h.endOffset===0){g=l(g.previousSibling,false)}else{g=g.parentNode}if(m&&m===g){return m}}}if(n&&n.nodeType==3){return n.parentNode}return n}return h.item?h.item(0):h.parentElement()},getSelectedBlocks:function(q,h){var p=this,l=p.dom,o,m,j,k=[];o=l.getParent(q||p.getStart(),l.isBlock);m=l.getParent(h||p.getEnd(),l.isBlock);if(o){k.push(o)}if(o&&m&&o!=m){j=o;var g=new a(o,l.getRoot());while((j=g.next())&&j!=m){if(l.isBlock(j)){k.push(j)}}}if(m&&o!=m){k.push(m)}return k},normalize:function(){var h=this,g,l,k;function j(o){var n,q,m,r=h.dom,u=r.getRoot(),p,s,v;function z(C,A){var D,B;A=A||n;D=new a(A,r.getParent(A.parentNode,r.isBlock)||u);while(p=D[C?"prev":"next"]()){if(p.nodeType===3&&p.nodeValue.length>0){n=p;q=C?p.nodeValue.length:0;l=true;return}if(r.isBlock(p)||s[p.nodeName.toLowerCase()]){return}B=p}if(k&&B){n=B;l=true;q=0}}n=g[(o?"start":"end")+"Container"];q=g[(o?"start":"end")+"Offset"];s=r.schema.getNonEmptyElements();if(n.nodeType===9){n=n.body;q=0}if(n===u){if(o){p=n.childNodes[q>0?q-1:0];if(p){v=p.nodeName.toLowerCase();if(s[p.nodeName]||p.nodeName=="TABLE"){return}}}if(n.hasChildNodes()){n=n.childNodes[Math.min(!o&&q>0?q-1:q,n.childNodes.length-1)];q=0;if(n.hasChildNodes()){p=n;m=new a(n,u);do{if(p.nodeType===3&&p.nodeValue.length>0){q=o?0:p.nodeValue.length;n=p;l=true;break}if(s[p.nodeName.toLowerCase()]){q=r.nodeIndex(p);n=p.parentNode;if(p.nodeName=="IMG"&&!o){q++}l=true;break}}while(p=(o?m.next():m.prev()))}}}if(k){if(n.nodeType===3&&q===0){z(true)}if(n.nodeType===1&&n.childNodes[q]&&n.childNodes[q].nodeName==="BR"){z(true,n.childNodes[q])}}if(o&&!k&&n.nodeType===3&&q===n.nodeValue.length){z(false)}if(l){g["set"+(o?"Start":"End")](n,q)}}if(d.isIE){return}g=h.getRng();k=g.collapsed;j(true);if(!k){j()}if(l){if(k){g.collapse(true)}h.setRng(g)}},destroy:function(h){var g=this;g.win=null;if(!h){d.removeUnload(g.destroy)}},_fixIESelection:function(){var h=this.dom,o=h.doc,j=o.body,l,p,g;function k(q,u){var r=j.createTextRange();try{r.moveToPoint(q,u)}catch(s){r=null}return r}function n(r){var q;if(r.button){q=k(r.x,r.y);if(q){if(q.compareEndPoints("StartToStart",p)>0){q.setEndPoint("StartToStart",p)}else{q.setEndPoint("EndToEnd",p)}q.select()}}else{m()}}function m(){var q=o.selection.createRange();if(p&&!q.item&&q.compareEndPoints("StartToEnd",q)===0){p.select()}h.unbind(o,"mouseup",m);h.unbind(o,"mousemove",n);p=l=0}o.documentElement.unselectable=true;h.bind(o,["mousedown","contextmenu"],function(q){if(q.target.nodeName==="HTML"){if(l){m()}g=o.documentElement;if(g.scrollHeight>g.clientHeight){return}l=1;p=k(q.x,q.y);if(p){h.bind(o,"mouseup",m);h.bind(o,"mousemove",n);h.win.focus();p.select()}}})}})})(tinymce);(function(a){a.dom.Serializer=function(e,j,f){var h,b,d=a.isIE,g=a.each,c;if(!e.apply_source_formatting){e.indent=false}j=j||a.DOM;f=f||new a.html.Schema(e);e.entity_encoding=e.entity_encoding||"named";e.remove_trailing_brs="remove_trailing_brs" in e?e.remove_trailing_brs:true;h=new a.util.Dispatcher(self);b=new a.util.Dispatcher(self);c=new a.html.DomParser(e,f);c.addAttributeFilter("src,href,style",function(l,k){var p=l.length,m,r,o="data-mce-"+k,q=e.url_converter,s=e.url_converter_scope,n;while(p--){m=l[p];r=m.attributes.map[o];if(r!==n){m.attr(k,r.length>0?r:null);m.attr(o,null)}else{r=m.attributes.map[k];if(k==="style"){r=j.serializeStyle(j.parseStyle(r),m.name)}else{if(q){r=q.call(s,r,k,m.name)}}m.attr(k,r.length>0?r:null)}}});c.addAttributeFilter("class",function(k,l){var m=k.length,n,o;while(m--){n=k[m];o=n.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,"");n.attr("class",o.length>0?o:null)}});c.addAttributeFilter("data-mce-type",function(k,m,l){var n=k.length,o;while(n--){o=k[n];if(o.attributes.map["data-mce-type"]==="bookmark"&&!l.cleanup){o.remove()}}});c.addAttributeFilter("data-mce-expando",function(k,m,l){var n=k.length;while(n--){k[n].attr(m,null)}});c.addNodeFilter("script,style",function(l,m){var n=l.length,o,p;function k(q){return q.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}while(n--){o=l[n];p=o.firstChild?o.firstChild.value:"";if(m==="script"){o.attr("type",(o.attr("type")||"text/javascript").replace(/^mce\-/,""));if(p.length>0){o.firstChild.value="// <![CDATA[\n"+k(p)+"\n// ]]>"}}else{if(p.length>0){o.firstChild.value="<!--\n"+k(p)+"\n-->"}}}});c.addNodeFilter("#comment",function(k,l){var m=k.length,n;while(m--){n=k[m];if(n.value.indexOf("[CDATA[")===0){n.name="#cdata";n.type=4;n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")}else{if(n.value.indexOf("mce:protected ")===0){n.name="#text";n.type=3;n.raw=true;n.value=unescape(n.value).substr(14)}}}});c.addNodeFilter("xml:namespace,input",function(k,l){var m=k.length,n;while(m--){n=k[m];if(n.type===7){n.remove()}else{if(n.type===1){if(l==="input"&&!("type" in n.attributes.map)){n.attr("type","text")}}}}});if(e.fix_list_elements){c.addNodeFilter("ul,ol",function(l,m){var n=l.length,o,k;while(n--){o=l[n];k=o.parent;if(k.name==="ul"||k.name==="ol"){if(o.prev&&o.prev.name==="li"){o.prev.append(o)}}}})}c.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(k,l){var m=k.length;while(m--){k[m].attr(l,null)}});return{schema:f,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,onPreProcess:h,onPostProcess:b,serialize:function(p,n){var m,q,l,k,o;if(d&&j.select("script,style,select,map").length>0){o=p.innerHTML;p=p.cloneNode(false);j.setHTML(p,o)}else{p=p.cloneNode(true)}m=p.ownerDocument.implementation;if(m.createHTMLDocument){q=m.createHTMLDocument("");g(p.nodeName=="BODY"?p.childNodes:[p],function(r){q.body.appendChild(q.importNode(r,true))});if(p.nodeName!="BODY"){p=q.body.firstChild}else{p=q.body}l=j.doc;j.doc=q}n=n||{};n.format=n.format||"html";if(!n.no_events){n.node=p;h.dispatch(self,n)}k=new a.html.Serializer(e,f);n.content=k.serialize(c.parse(a.trim(n.getInner?p.innerHTML:j.getOuterHTML(p)),n));if(!n.cleanup){n.content=n.content.replace(/\uFEFF|\u200B/g,"")}if(!n.no_events){b.dispatch(self,n)}if(l){j.doc=l}n.node=null;return n.content},addRules:function(k){f.addValidElements(k)},setRules:function(k){f.setValidElements(k)}}}})(tinymce);(function(a){a.dom.ScriptLoader=function(h){var c=0,l=1,j=2,m={},k=[],e={},d=[],g=0,f;function b(n,z){var A=this,r=a.DOM,u,p,s,o;function q(){r.remove(o);if(u){u.onreadystatechange=u.onload=u=null}z()}function v(){if(typeof(console)!=="undefined"&&console.log){console.log("Failed to load: "+n)}}o=r.uniqueId();if(a.isIE6){p=new a.util.URI(n);s=location;if(p.host==s.hostname&&p.port==s.port&&(p.protocol+":")==s.protocol&&p.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(p.getURI()),success:function(C){var B=r.create("script",{type:"text/javascript"});B.text=C;document.getElementsByTagName("head")[0].appendChild(B);r.remove(B);q()},error:v});return}}u=r.create("script",{id:o,type:"text/javascript",src:a._addVer(n)});if(!a.isIE){u.onload=q}u.onerror=v;if(!a.isOpera){u.onreadystatechange=function(){var B=u.readyState;if(B=="complete"||B=="loaded"){q()}}}(document.getElementsByTagName("head")[0]||document.body).appendChild(u)}this.isDone=function(n){return m[n]==j};this.markDone=function(n){m[n]=j};this.add=this.load=function(n,r,o){var p,q=m[n];if(q==f){k.push(n);m[n]=c}if(r){if(!e[n]){e[n]=[]}e[n].push({func:r,scope:o||this})}};this.loadQueue=function(o,n){this.loadScripts(k,o,n)};this.loadScripts=function(n,r,q){var p;function o(s){a.each(e[s],function(u){u.func.call(u.scope)});e[s]=f}d.push({func:r,scope:q||this});p=function(){var s=a.grep(n);n.length=0;a.each(s,function(u){if(m[u]==j){o(u);return}if(m[u]!=l){m[u]=l;g++;b(u,function(){m[u]=j;g--;o(u);p()})}});if(!g){a.each(d,function(u){u.func.call(u.scope)});d.length=0}};p()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);(function(a){a.dom.RangeUtils=function(c){var b="\uFEFF";this.walk=function(d,u){var j=d.startContainer,m=d.startOffset,v=d.endContainer,n=d.endOffset,k,g,p,h,s,r,e;e=c.select("td.mceSelected,th.mceSelected");if(e.length>0){a.each(e,function(z){u([z])});return}function f(z){var A;A=z[0];if(A.nodeType===3&&A===j&&m>=A.nodeValue.length){z.splice(0,1)}A=z[z.length-1];if(n===0&&z.length>0&&A===v&&A.nodeType===3){z.splice(z.length-1,1)}return z}function q(B,A,z){var C=[];for(;B&&B!=z;B=B[A]){C.push(B)}return C}function o(A,z){do{if(A.parentNode==z){return A}A=A.parentNode}while(A)}function l(B,A,C){var z=C?"nextSibling":"previousSibling";for(h=B,s=h.parentNode;h&&h!=A;h=s){s=h.parentNode;r=q(h==B?h:h[z],z);if(r.length){if(!C){r.reverse()}u(f(r))}}}if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[m]}if(v.nodeType==1&&v.hasChildNodes()){v=v.childNodes[Math.min(n-1,v.childNodes.length-1)]}if(j==v){return u(f([j]))}k=c.findCommonAncestor(j,v);for(h=j;h;h=h.parentNode){if(h===v){return l(j,k,true)}if(h===k){break}}for(h=v;h;h=h.parentNode){if(h===j){return l(v,k)}if(h===k){break}}g=o(j,k)||j;p=o(v,k)||v;l(j,g,true);r=q(g==j?g:g.nextSibling,"nextSibling",p==v?p.nextSibling:p);if(r.length){u(f(r))}l(v,p)};this.split=function(e){var h=e.startContainer,d=e.startOffset,j=e.endContainer,g=e.endOffset;function f(k,l){return k.splitText(l)}if(h==j&&h.nodeType==3){if(d>0&&d<h.nodeValue.length){j=f(h,d);h=j.previousSibling;if(g>d){g=g-d;h=j=f(j,g).previousSibling;g=j.nodeValue.length;d=0}else{g=0}}}else{if(h.nodeType==3&&d>0&&d<h.nodeValue.length){h=f(h,d);d=0}if(j.nodeType==3&&g>0&&g<j.nodeValue.length){j=f(j,g).previousSibling;g=j.nodeValue.length}}return{startContainer:h,startOffset:d,endContainer:j,endOffset:g}}};a.dom.RangeUtils.compareRanges=function(c,b){if(c&&b){if(c.item||c.duplicate){if(c.item&&b.item&&c.item(0)===b.item(0)){return true}if(c.isEqual&&b.isEqual&&b.isEqual(c)){return true}}else{return c.startContainer==b.startContainer&&c.startOffset==b.startOffset}}return false}})(tinymce);(function(b){var a=b.dom.Event,c=b.each;b.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(e,f){var q=this,n=e.root,m=e.items,o=e.enableUpDown,j=e.enableLeftRight||!e.enableUpDown,l=e.excludeFromTabOrder,k,h,p,d,g;f=f||b.DOM;k=function(r){g=r.target.id};h=function(r){f.setAttrib(r.target.id,"tabindex","-1")};d=function(r){var s=f.get(g);f.setAttrib(s,"tabindex","0");s.focus()};q.focus=function(){f.get(g).focus()};q.destroy=function(){c(m,function(r){f.unbind(f.get(r.id),"focus",k);f.unbind(f.get(r.id),"blur",h)});f.unbind(f.get(n),"focus",d);f.unbind(f.get(n),"keydown",p);m=f=n=q.focus=k=h=p=d=null;q.destroy=function(){}};q.moveFocus=function(z,s){var r=-1,v=q.controls,u;if(!g){return}c(m,function(B,A){if(B.id===g){r=A;return false}});r+=z;if(r<0){r=m.length-1}else{if(r>=m.length){r=0}}u=m[r];f.setAttrib(g,"tabindex","-1");f.setAttrib(u.id,"tabindex","0");f.get(u.id).focus();if(e.actOnFocus){e.onAction(u.id)}if(s){a.cancel(s)}};p=function(C){var z=37,v=39,B=38,D=40,r=27,u=14,s=13,A=32;switch(C.keyCode){case z:if(j){q.moveFocus(-1)}break;case v:if(j){q.moveFocus(1)}break;case B:if(o){q.moveFocus(-1)}break;case D:if(o){q.moveFocus(1)}break;case r:if(e.onCancel){e.onCancel();a.cancel(C)}break;case u:case s:case A:if(e.onAction){e.onAction(g);a.cancel(C)}break}};c(m,function(u,r){var s;if(!u.id){u.id=f.uniqueId("_mce_item_")}if(l){f.bind(u.id,"blur",h);s="-1"}else{s=(r===0?"0":"-1")}f.setAttrib(u.id,"tabindex",s);f.bind(f.get(u.id),"focus",k)});if(m[0]){g=m[0].id}f.setAttrib(n,"tabindex","-1");f.bind(f.get(n),"focus",d);f.bind(f.get(n),"keydown",p)}})})(tinymce);(function(c){var b=c.DOM,a=c.is;c.create("tinymce.ui.Control",{Control:function(f,e,d){this.id=f;this.settings=e=e||{};this.rendered=false;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=e.scope||this;this.disabled=0;this.active=0;this.editor=d},setAriaProperty:function(f,e){var d=b.get(this.id+"_aria")||b.get(this.id);if(d){b.setAttrib(d,"aria-"+f,!!e)}},focus:function(){b.get(this.id).focus()},setDisabled:function(d){if(d!=this.disabled){this.setAriaProperty("disabled",d);this.setState("Disabled",d);this.setState("Enabled",!d);this.disabled=d}},isDisabled:function(){return this.disabled},setActive:function(d){if(d!=this.active){this.setState("Active",d);this.active=d;this.setAriaProperty("pressed",d)}},isActive:function(){return this.active},setState:function(f,d){var e=b.get(this.id);f=this.classPrefix+f;if(d){b.addClass(e,f)}else{b.removeClass(e,f)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){b.setHTML(d,this.renderHTML())},postRender:function(){var e=this,d;if(a(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d)}if(a(e.active)){d=e.active;e.active=-1;e.setActive(d)}},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,b,a){this.parent(c,b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(g,f){this.parent(g,f);this.classPrefix="mceMenuItem"},setSelected:function(f){this.setState("Selected",f);this.setAriaProperty("checked",!!f);this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent();if(c(f.selected)){f.setSelected(f.selected)}}})})(tinymce);(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,g){var f=this;f.parent(h,g);f.items={};f.collapsed=false;f.menuCount=0;f.onAddItem=new d.util.Dispatcher(this)},expand:function(g){var f=this;if(g){a(f,function(h){if(h.expand){h.expand()}},"items",f)}f.collapsed=false},collapse:function(g){var f=this;if(g){a(f,function(h){if(h.collapse){h.collapse()}},"items",f)}f.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(f){if(!f.settings){f=new d.ui.MenuItem(f.id||b.uniqueId(),f)}this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:true})},addMenu:function(f){if(!f.collapse){f=this.createMenu(f)}this.menuCount++;return this.add(f)},hasMenus:function(){return this.menuCount!==0},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){if(g.removeAll){g.removeAll()}else{g.remove()}g.destroy()},"items",f);f.items={}},createMenu:function(g){var f=new d.ui.Menu(g.id||b.uniqueId(),g);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f}})})(tinymce);(function(e){var d=e.is,c=e.DOM,f=e.each,a=e.dom.Event,b=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,g){g=g||{};g.container=g.container||c.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(d(g.icons)&&!g.icons){g["class"]+=" mceNoIcons"}this.parent(h,g);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(k){var h=this,j=h.settings,g;k.container=k.container||j.container;k.parent=h;k.constrain=k.constrain||j.constrain;k["class"]=k["class"]||j["class"];k.vp_offset_x=k.vp_offset_x||j.vp_offset_x;k.vp_offset_y=k.vp_offset_y||j.vp_offset_y;k.keyboard_focus=j.keyboard_focus;g=new e.ui.DropMenu(k.id||c.uniqueId(),k);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);return g},focus:function(){var g=this;if(g.keyboardNav){g.keyboardNav.focus()}},update:function(){var j=this,k=j.settings,g=c.get("menu_"+j.id+"_tbl"),m=c.get("menu_"+j.id+"_co"),h,l;h=k.max_width?Math.min(g.clientWidth,k.max_width):g.clientWidth;l=k.max_height?Math.min(g.clientHeight,k.max_height):g.clientHeight;if(!c.boxModel){j.element.setStyles({width:h+2,height:l+2})}else{j.element.setStyles({width:h,height:l})}if(k.max_width){c.setStyle(m,"width",h)}if(k.max_height){c.setStyle(m,"height",l);if(g.clientHeight<k.max_height){c.setStyle(m,"overflow","hidden")}}},showMenu:function(q,o,u){var A=this,B=A.settings,p,g=c.getViewPort(),v,m,z,r,j=2,l,k,n=A.classPrefix;A.collapse(1);if(A.isMenuVisible){return}if(!A.rendered){p=c.add(A.settings.container,A.renderNode());f(A.items,function(h){h.postRender()});A.element=new b("menu_"+A.id,{blocker:1,container:B.container})}else{p=c.get("menu_"+A.id)}if(!e.isOpera){c.setStyles(p,{left:-65535,top:-65535})}c.show(p);A.update();q+=B.offset_x||0;o+=B.offset_y||0;g.w-=4;g.h-=4;if(B.constrain){v=p.clientWidth-j;m=p.clientHeight-j;z=g.x+g.w;r=g.y+g.h;if((q+B.vp_offset_x+v)>z){q=u?u-v:Math.max(0,(z-B.vp_offset_x)-v)}if((o+B.vp_offset_y+m)>r){o=Math.max(0,(r-B.vp_offset_y)-m)}}c.setStyles(p,{left:q,top:o});A.element.update();A.isMenuVisible=1;A.mouseClickFunc=a.add(p,"click",function(s){var h;s=s.target;if(s&&(s=c.getParent(s,"tr"))&&!c.hasClass(s,n+"ItemSub")){h=A.items[s.id];if(h.isDisabled()){return}l=A;while(l){if(l.hideMenu){l.hideMenu()}l=l.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return false}});if(A.hasMenus()){A.mouseOverFunc=a.add(p,"mouseover",function(D){var h,C,s;D=D.target;if(D&&(D=c.getParent(D,"tr"))){h=A.items[D.id];if(A.lastMenu){A.lastMenu.collapse(1)}if(h.isDisabled()){return}if(D&&c.hasClass(D,n+"ItemSub")){C=c.getRect(D);h.showMenu((C.x+C.w-j),C.y-j,C.x);A.lastMenu=h;c.addClass(c.get(h.id).firstChild,n+"ItemActive")}}})}a.add(p,"keydown",A._keyHandler,A);A.onShowMenu.dispatch(A);if(B.keyboard_focus){A._setupKeyboardNav()}},hideMenu:function(k){var g=this,j=c.get("menu_"+g.id),h;if(!g.isMenuVisible){return}if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(j,"mouseover",g.mouseOverFunc);a.remove(j,"click",g.mouseClickFunc);a.remove(j,"keydown",g._keyHandler);c.hide(j);g.isMenuVisible=0;if(!k){g.collapse(1)}if(g.element){g.element.hide()}if(h=c.get(g.id)){c.removeClass(h.firstChild,g.classPrefix+"ItemActive")}g.onHideMenu.dispatch(g)},add:function(j){var g=this,h;j=g.parent(j);if(g.isRendered&&(h=c.get("menu_"+g.id))){g._add(c.select("tbody",h)[0],j)}return j},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){c.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=this,h=c.get("menu_"+g.id);if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(h,"mouseover",g.mouseOverFunc);a.remove(c.select("a",h),"focus",g.mouseOverFunc);a.remove(h,"click",g.mouseClickFunc);a.remove(h,"keydown",g._keyHandler);if(g.element){g.element.remove()}c.remove(h)},renderNode:function(){var j=this,k=j.settings,m,h,l,g;g=c.create("div",{role:"listbox",id:"menu_"+j.id,"class":k["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});if(j.settings.parent){c.setAttrib(g,"aria-parent","menu_"+j.settings.parent.id)}l=c.add(g,"div",{role:"presentation",id:"menu_"+j.id+"_co","class":j.classPrefix+(k["class"]?" "+k["class"]:"")});j.element=new b("menu_"+j.id,{blocker:1,container:k.container});if(k.menu_line){c.add(l,"span",{"class":j.classPrefix+"Line"})}m=c.add(l,"table",{role:"presentation",id:"menu_"+j.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});h=c.add(m,"tbody");f(j.items,function(n){j._add(h,n)});j.rendered=true;return g},_setupKeyboardNav:function(){var j,h,g=this;j=c.get("menu_"+g.id);h=c.select("a[role=option]","menu_"+g.id);h.splice(0,0,j);g.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+g.id,items:h,onCancel:function(){g.hideMenu()},enableUpDown:true});j.focus()},_keyHandler:function(g){var h=this,j;switch(g.keyCode){case 37:if(h.settings.parent){h.hideMenu();h.settings.parent.focus();a.cancel(g)}break;case 39:if(h.mouseOverFunc){h.mouseOverFunc(g)}break}},_add:function(k,h){var j,r=h.settings,q,m,l,p=this.classPrefix,g;if(r.separator){m=c.add(k,"tr",{id:h.id,"class":p+"ItemSeparator"});c.add(m,"td",{"class":p+"ItemSeparator"});if(j=m.previousSibling){c.addClass(j,"mceLast")}return}j=m=c.add(k,"tr",{id:h.id,"class":p+"Item "+p+"ItemEnabled"});j=l=c.add(j,r.titleItem?"th":"td");j=q=c.add(j,"a",{id:h.id+"_aria",role:r.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(r.parent){c.setAttrib(q,"aria-haspopup","true");c.setAttrib(q,"aria-owns","menu_"+h.id)}c.addClass(l,r["class"]);g=c.add(j,"span",{"class":"mceIcon"+(r.icon?" mce_"+r.icon:"")});if(r.icon_src){c.add(g,"img",{src:r.icon_src})}j=c.add(j,r.element||"span",{"class":"mceText",title:h.settings.title},h.settings.title);if(h.settings.style){if(typeof h.settings.style=="function"){h.settings.style=h.settings.style()}c.setAttrib(j,"style",h.settings.style)}if(k.childNodes.length==1){c.addClass(m,"mceFirst")}if((j=m.previousSibling)&&c.hasClass(j,p+"ItemSeparator")){c.addClass(m,"mceFirst")}if(h.collapse){c.addClass(m,p+"ItemSub")}if(j=m.previousSibling){c.removeClass(j,"mceLast")}c.addClass(m,"mceLast")}})})(tinymce);(function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,d,c){this.parent(e,d,c);this.classPrefix="mceButton"},renderHTML:function(){var f=this.classPrefix,e=this.settings,d,c;c=a.encode(e.label||"");d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+e["class"]+(c?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+a.encode(e.title)+'">';if(e.image&&!(this.editor&&this.editor.forcedHighContrastMode)){d+='<img class="mceIcon" src="'+e.image+'" alt="'+a.encode(e.title)+'" />'+c}else{d+='<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":"")}d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+e.title+"</span>";d+="</a>";return d},postRender:function(){var d=this,e=d.settings,c;if(b.isIE&&d.editor){b.dom.Event.add(d.id,"mousedown",function(f){var g=d.editor.selection.getNode().nodeName;c=g==="IMG"?d.editor.selection.getBookmark():null})}b.dom.Event.add(d.id,"click",function(f){if(!d.isDisabled()){if(b.isIE&&d.editor&&c!==null){d.editor.selection.moveToBookmark(c)}return e.onclick.call(e.scope,f)}});b.dom.Event.add(d.id,"keyup",function(f){if(!d.isDisabled()&&f.keyCode==b.VK.SPACEBAR){return e.onclick.call(e.scope,f)}})}})})(tinymce);(function(e){var d=e.DOM,b=e.dom.Event,f=e.each,a=e.util.Dispatcher,c;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(k,j,g){var h=this;h.parent(k,j,g);h.items=[];h.onChange=new a(h);h.onPostRender=new a(h);h.onAdd=new a(h);h.onRenderMenu=new e.util.Dispatcher(this);h.classPrefix="mceListBox";h.marked={}},select:function(h){var g=this,k,j;g.marked={};if(h==c){return g.selectByIndex(-1)}if(h&&typeof(h)=="function"){j=h}else{j=function(l){return l==h}}if(h!=g.selectedValue){f(g.items,function(m,l){if(j(m.value)){k=1;g.selectByIndex(l);return false}});if(!k){g.selectByIndex(-1)}}},selectByIndex:function(g){var j=this,k,l,h;j.marked={};if(g!=j.selectedIndex){k=d.get(j.id+"_text");h=d.get(j.id+"_voiceDesc");l=j.items[g];if(l){j.selectedValue=l.value;j.selectedIndex=g;d.setHTML(k,d.encode(l.title));d.setHTML(h,j.settings.title+" - "+l.title);d.removeClass(k,"mceTitle");d.setAttrib(j.id,"aria-valuenow",l.title)}else{d.setHTML(k,d.encode(j.settings.title));d.setHTML(h,d.encode(j.settings.title));d.addClass(k,"mceTitle");j.selectedValue=j.selectedIndex=null;d.setAttrib(j.id,"aria-valuenow",j.settings.title)}k=0}},mark:function(g){this.marked[g]=true},add:function(k,g,j){var h=this;j=j||{};j=e.extend(j,{title:k,value:g});h.items.push(j);h.onAdd.dispatch(h,j)},getLength:function(){return this.items.length},renderHTML:function(){var k="",g=this,j=g.settings,l=g.classPrefix;k='<span role="listbox" aria-haspopup="true" aria-labelledby="'+g.id+'_voiceDesc" aria-describedby="'+g.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+g.id+'" cellpadding="0" cellspacing="0" class="'+l+" "+l+"Enabled"+(j["class"]?(" "+j["class"]):"")+'"><tbody><tr>';k+="<td>"+d.createHTML("span",{id:g.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},g.settings.title);k+=d.createHTML("a",{id:g.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},d.encode(g.settings.title))+"</td>";k+="<td>"+d.createHTML("a",{id:g.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span></span>')+"</td>";k+="</tr></tbody></table></span>";return k},showMenu:function(){var h=this,k,j=d.get(this.id),g;if(h.isDisabled()||h.items.length===0){return}if(h.menu&&h.menu.isMenuVisible){return h.hideMenu()}if(!h.isMenuRendered){h.renderMenu();h.isMenuRendered=true}k=d.getPos(j);g=h.menu;g.settings.offset_x=k.x;g.settings.offset_y=k.y;g.settings.keyboard_focus=!e.isOpera;f(h.items,function(l){if(g.items[l.id]){g.items[l.id].setSelected(0)}});f(h.items,function(l){if(g.items[l.id]&&h.marked[l.value]){g.items[l.id].setSelected(1)}if(l.value===h.selectedValue){g.items[l.id].setSelected(1)}});g.showMenu(0,j.clientHeight);b.add(d.doc,"mousedown",h.hideMenu,h);d.addClass(h.id,h.classPrefix+"Selected")},hideMenu:function(h){var g=this;if(g.menu&&g.menu.isMenuVisible){d.removeClass(g.id,g.classPrefix+"Selected");if(h&&h.type=="mousedown"&&(h.target.id==g.id+"_text"||h.target.id==g.id+"_open")){return}if(!h||!d.getParent(h.target,".mceMenu")){d.removeClass(g.id,g.classPrefix+"Selected");b.remove(d.doc,"mousedown",g.hideMenu,g);g.menu.hideMenu()}}},renderMenu:function(){var h=this,g;g=h.settings.control_manager.createDropMenu(h.id+"_menu",{menu_line:1,"class":h.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});g.onHideMenu.add(function(){h.hideMenu();h.focus()});g.add({title:h.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(h.settings.onselect("")!==false){h.select("")}}});f(h.items,function(j){if(j.value===c){g.add({title:j.title,role:"option","class":"mceMenuItemTitle",onclick:function(){if(h.settings.onselect("")!==false){h.select("")}}})}else{j.id=d.uniqueId();j.role="option";j.onclick=function(){if(h.settings.onselect(j.value)!==false){h.select(j.value)}};g.add(j)}});h.onRenderMenu.dispatch(h,g);h.menu=g},postRender:function(){var g=this,h=g.classPrefix;b.add(g.id,"click",g.showMenu,g);b.add(g.id,"keydown",function(j){if(j.keyCode==32){g.showMenu(j);b.cancel(j)}});b.add(g.id,"focus",function(){if(!g._focused){g.keyDownHandler=b.add(g.id,"keydown",function(j){if(j.keyCode==40){g.showMenu();b.cancel(j)}});g.keyPressHandler=b.add(g.id,"keypress",function(k){var j;if(k.keyCode==13){j=g.selectedValue;g.selectedValue=null;b.cancel(k);g.settings.onselect(j)}})}g._focused=1});b.add(g.id,"blur",function(){b.remove(g.id,"keydown",g.keyDownHandler);b.remove(g.id,"keypress",g.keyPressHandler);g._focused=0});if(e.isIE6||!d.boxModel){b.add(g.id,"mouseover",function(){if(!d.hasClass(g.id,h+"Disabled")){d.addClass(g.id,h+"Hover")}});b.add(g.id,"mouseout",function(){if(!d.hasClass(g.id,h+"Disabled")){d.removeClass(g.id,h+"Hover")}})}g.onPostRender.dispatch(g,d.get(g.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(e){var d=e.DOM,b=e.dom.Event,f=e.each,a=e.util.Dispatcher,c;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(h,g){this.parent(h,g);this.classPrefix="mceNativeListBox"},setDisabled:function(g){d.get(this.id).disabled=g;this.setAriaProperty("disabled",g)},isDisabled:function(){return d.get(this.id).disabled},select:function(h){var g=this,k,j;if(h==c){return g.selectByIndex(-1)}if(h&&typeof(h)=="function"){j=h}else{j=function(l){return l==h}}if(h!=g.selectedValue){f(g.items,function(m,l){if(j(m.value)){k=1;g.selectByIndex(l);return false}});if(!k){g.selectByIndex(-1)}}},selectByIndex:function(g){d.get(this.id).selectedIndex=g+1;this.selectedValue=this.items[g]?this.items[g].value:null},add:function(l,h,g){var k,j=this;g=g||{};g.value=h;if(j.isRendered()){d.add(d.get(this.id),"option",g,l)}k={title:l,value:h,attribs:g};j.items.push(k);j.onAdd.dispatch(j,k)},getLength:function(){return this.items.length},renderHTML:function(){var j,g=this;j=d.createHTML("option",{value:""},"-- "+g.settings.title+" --");f(g.items,function(h){j+=d.createHTML("option",{value:h.value},h.title)});j=d.createHTML("select",{id:g.id,"class":"mceNativeListBox","aria-labelledby":g.id+"_aria"},j);j+=d.createHTML("span",{id:g.id+"_aria",style:"display: none"},g.settings.title);return j},postRender:function(){var h=this,j,k=true;h.rendered=true;function g(m){var l=h.items[m.target.selectedIndex-1];if(l&&(l=l.value)){h.onChange.dispatch(h,l);if(h.settings.onselect){h.settings.onselect(l)}}}b.add(h.id,"change",g);b.add(h.id,"keydown",function(m){var l;b.remove(h.id,"change",j);k=false;l=b.add(h.id,"blur",function(){if(k){return}k=true;b.add(h.id,"change",g);b.remove(h.id,"blur",l)});if(e.isWebKit&&(m.keyCode==37||m.keyCode==39)){return b.prevent(m)}if(m.keyCode==13||m.keyCode==32){g(m);return b.cancel(m)}});h.onPostRender.dispatch(h,d.get(h.id))}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,f,e){this.parent(g,f,e);this.onRenderMenu=new c.util.Dispatcher(this);f.menu_container=f.menu_container||b.doc.body},showMenu:function(){var g=this,k,j,h=b.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}k=b.getPos(g.settings.menu_container);j=b.getPos(h);f=g.menu;f.settings.offset_x=j.x;f.settings.offset_y=j.y;f.settings.vp_offset_x=j.x;f.settings.vp_offset_y=j.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.firstChild.clientHeight);a.add(b.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);g.isMenuVisible=1},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons});e.onHideMenu.add(function(){f.hideMenu();f.focus()});f.onRenderMenu.dispatch(f,e);f.menu=e},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!b.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(b.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var e=this,f=e.settings;a.add(e.id,"click",function(){if(!e.isDisabled()){if(f.onclick){f.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(g,f,e){this.parent(g,f,e);this.classPrefix="mceSplitButton"},renderHTML:function(){var j,f=this,g=f.settings,e;j="<tbody><tr>";if(g.image){e=b.createHTML("img ",{src:g.image,role:"presentation","class":"mceAction "+g["class"]})}else{e=b.createHTML("span",{"class":"mceAction "+g["class"]},"")}e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:f.id+"_voice",style:"display:none;"},g.title);j+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";e=b.createHTML("span",{"class":"mceOpen "+g["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span>');j+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";j+="</tr></tbody>";j=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+g["class"],cellpadding:"0",cellspacing:"0",title:g.title},j);return b.createHTML("div",{id:f.id,role:"button",tabindex:"0","aria-labelledby":f.id+"_voice","aria-haspopup":"true"},j)},postRender:function(){var e=this,g=e.settings,f;if(g.onclick){f=function(h){if(!e.isDisabled()){g.onclick(e.value);a.cancel(h)}};a.add(e.id+"_action","click",f);a.add(e.id,["click","keydown"],function(h){var l=32,n=14,j=13,k=38,m=40;if((h.keyCode===32||h.keyCode===13||h.keyCode===14)&&!h.altKey&&!h.ctrlKey&&!h.metaKey){f();a.cancel(h)}else{if(h.type==="click"||h.keyCode===m){e.showMenu();a.cancel(h)}}})}a.add(e.id+"_open","click",function(h){e.showMenu();a.cancel(h)});a.add([e.id,e.id+"_open"],"focus",function(){e._focused=1});a.add([e.id,e.id+"_open"],"blur",function(){e._focused=0});if(c.isIE6||!b.boxModel){a.add(e.id,"mouseover",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.addClass(e.id,"mceSplitButtonHover")}});a.add(e.id,"mouseout",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.removeClass(e.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open");a.clear(this.id)}})})(tinymce);(function(d){var c=d.DOM,a=d.dom.Event,b=d.is,e=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(j,h,f){var g=this;g.parent(j,h,f);g.settings=h=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},g.settings);g.onShowMenu=new d.util.Dispatcher(g);g.onHideMenu=new d.util.Dispatcher(g);g.value=h.default_color},showMenu:function(){var f=this,g,k,j,h;if(f.isDisabled()){return}if(!f.isMenuRendered){f.renderMenu();f.isMenuRendered=true}if(f.isMenuVisible){return f.hideMenu()}j=c.get(f.id);c.show(f.id+"_menu");c.addClass(j,"mceSplitButtonSelected");h=c.getPos(j);c.setStyles(f.id+"_menu",{left:h.x,top:h.y+j.firstChild.clientHeight,zIndex:200000});j=0;a.add(c.doc,"mousedown",f.hideMenu,f);f.onShowMenu.dispatch(f);if(f._focused){f._keyHandler=a.add(f.id+"_menu","keydown",function(l){if(l.keyCode==27){f.hideMenu()}});c.select("a",f.id+"_menu")[0].focus()}f.isMenuVisible=1},hideMenu:function(g){var f=this;if(f.isMenuVisible){if(g&&g.type=="mousedown"&&c.getParent(g.target,function(h){return h.id===f.id+"_open"})){return}if(!g||!c.getParent(g.target,".mceSplitButtonMenu")){c.removeClass(f.id,"mceSplitButtonSelected");a.remove(c.doc,"mousedown",f.hideMenu,f);a.remove(f.id+"_menu","keydown",f._keyHandler);c.hide(f.id+"_menu")}f.isMenuVisible=0;f.onHideMenu.dispatch()}},renderMenu:function(){var p=this,h,k=0,q=p.settings,g,j,l,o,f;o=c.add(q.menu_container,"div",{role:"listbox",id:p.id+"_menu","class":q.menu_class+" "+q["class"],style:"position:absolute;left:0;top:-1000px;"});h=c.add(o,"div",{"class":q["class"]+" mceSplitButtonMenu"});c.add(h,"span",{"class":"mceMenuLine"});g=c.add(h,"table",{role:"presentation","class":"mceColorSplitMenu"});j=c.add(g,"tbody");k=0;e(b(q.colors,"array")?q.colors:q.colors.split(","),function(n){n=n.replace(/^#/,"");if(!k--){l=c.add(j,"tr");k=q.grid_width-1}g=c.add(l,"td");var m={href:"javascript:;",style:{backgroundColor:"#"+n},title:p.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};if(!d.isIE){m.role="option"}g=c.add(g,"a",m);if(p.editor.forcedHighContrastMode){g=c.add(g,"canvas",{width:16,height:16,"aria-hidden":"true"});if(g.getContext&&(f=g.getContext("2d"))){f.fillStyle="#"+n;f.fillRect(0,0,16,16)}else{c.remove(g)}}});if(q.more_colors_func){g=c.add(j,"tr");g=c.add(g,"td",{colspan:q.grid_width,"class":"mceMoreColors"});g=c.add(g,"a",{role:"option",id:p.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},q.more_colors_title);a.add(g,"click",function(m){q.more_colors_func.call(q.more_colors_scope||this);return a.cancel(m)})}c.addClass(h,"mceColorSplitMenu");new d.ui.KeyboardNavigation({root:p.id+"_menu",items:c.select("a",p.id+"_menu"),onCancel:function(){p.hideMenu();p.focus()}});a.add(p.id+"_menu","mousedown",function(m){return a.cancel(m)});a.add(p.id+"_menu","click",function(m){var n;m=c.getParent(m.target,"a",j);if(m&&m.nodeName.toLowerCase()=="a"&&(n=m.getAttribute("data-mce-color"))){p.setColor(n)}return false});return o},setColor:function(f){this.displayColor(f);this.hideMenu();this.settings.onselect(f)},displayColor:function(g){var f=this;c.setStyle(f.id+"_preview","backgroundColor",g);f.value=g},postRender:function(){var f=this,g=f.id;f.parent();c.add(g+"_action","div",{id:g+"_preview","class":"mceColorPreview"});c.setStyle(f.id+"_preview","backgroundColor",f.value)},destroy:function(){this.parent();a.clear(this.id+"_menu");a.clear(this.id+"_more");c.remove(this.id+"_menu")}})})(tinymce);(function(b){var d=b.DOM,c=b.each,a=b.dom.Event;b.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var f=this,j=[],e=f.controls,k=b.each,g=f.settings;j.push('<div id="'+f.id+'" role="group" aria-labelledby="'+f.id+'_voice">');j.push("<span role='application'>");j.push('<span id="'+f.id+'_voice" class="mceVoiceLabel" style="display:none;">'+d.encode(g.name)+"</span>");k(e,function(h){j.push(h.renderHTML())});j.push("</span>");j.push("</div>");return j.join("")},focus:function(){var e=this;d.get(e.id).focus()},postRender:function(){var f=this,e=[];c(f.controls,function(g){c(g.controls,function(h){if(h.id){e.push(h)}})});f.keyNav=new b.ui.KeyboardNavigation({root:f.id,items:e,onCancel:function(){if(b.isWebKit){d.get(f.editor.id+"_ifr").focus()}f.editor.focus()},excludeFromTabOrder:!f.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent();e.keyNav.destroy();a.clear(e.id)}})})(tinymce);(function(a){var c=a.DOM,b=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var m=this,f="",j,k,n=m.settings,e,d,g,l;l=m.controls;for(e=0;e<l.length;e++){k=l[e];d=l[e-1];g=l[e+1];if(e===0){j="mceToolbarStart";if(k.Button){j+=" mceToolbarStartButton"}else{if(k.SplitButton){j+=" mceToolbarStartSplitButton"}else{if(k.ListBox){j+=" mceToolbarStartListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"))}if(d&&k.ListBox){if(d.Button||d.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarEnd"},c.createHTML("span",null,"<!-- IE -->"))}}if(c.stdMode){f+='<td style="position: relative">'+k.renderHTML()+"</td>"}else{f+="<td>"+k.renderHTML()+"</td>"}if(g&&k.ListBox){if(g.Button||g.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarStart"},c.createHTML("span",null,"<!-- IE -->"))}}}j="mceToolbarEnd";if(k.Button){j+=" mceToolbarEndButton"}else{if(k.SplitButton){j+=" mceToolbarEndSplitButton"}else{if(k.ListBox){j+=" mceToolbarEndListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"));return c.createHTML("table",{id:m.id,"class":"mceToolbar"+(n["class"]?" "+n["class"]:""),cellpadding:"0",cellspacing:"0",align:m.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+f+"</tr></tbody>")}})})(tinymce);(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{AddOnManager:function(){var d=this;d.items=[];d.urls={};d.lookup={};d.onAdd=new a(d)},get:function(d){if(this.lookup[d]){return this.lookup[d].instance}else{return undefined}},dependencies:function(e){var d;if(this.lookup[e]){d=this.lookup[e].dependencies}return d||[]},requireLangPack:function(e){var d=b.settings;if(d&&d.language&&d.language_load!==false){b.ScriptLoader.add(this.urls[e]+"/langs/"+d.language+".js")}},add:function(f,e,d){this.items.push(e);this.lookup[f]={instance:e,dependencies:d};this.onAdd.dispatch(this,f,e);return e},createUrl:function(d,e){if(typeof e==="object"){return e}else{return{prefix:d.prefix,resource:e,suffix:d.suffix}}},addComponents:function(f,d){var e=this.urls[f];b.each(d,function(g){b.ScriptLoader.add(e+"/"+g)})},load:function(k,f,d,h){var g=this,e=f;function j(){var l=g.dependencies(k);b.each(l,function(n){var m=g.createUrl(f,n);g.load(m.resource,m,undefined,undefined)});if(d){if(h){d.call(h)}else{d.call(b.ScriptLoader)}}}if(g.urls[k]){return}if(typeof f==="object"){e=f.prefix+f.resource+f.suffix}if(e.indexOf("/")!==0&&e.indexOf("://")==-1){e=b.baseURL+"/"+e}g.urls[k]=e.substring(0,e.lastIndexOf("/"));if(g.lookup[k]){j()}else{b.ScriptLoader.add(e,j,h)}}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(k){var g=k.each,d=k.extend,l=k.DOM,j=k.dom.Event,f=k.ThemeManager,b=k.PluginManager,e=k.explode,h=k.util.Dispatcher,a,c=0;k.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(k.documentBaseURL)){k.documentBaseURL+="/"}k.baseURL=new k.util.URI(k.documentBaseURL).toAbsolute(k.baseURL);k.baseURI=new k.util.URI(k.baseURL);k.onBeforeUnload=new h(k);j.add(window,"beforeunload",function(m){k.onBeforeUnload.dispatch(k,m)});k.onAddEditor=new h(k);k.onRemoveEditor=new h(k);k.EditorManager=d(k,{editors:[],i18n:{},activeEditor:null,init:function(A){var z=this,p,o=k.ScriptLoader,v,m=[],u;function r(B){var s=B.id;if(!s){s=B.name;if(s&&!l.get(s)){s=B.name}else{s=l.uniqueId()}B.setAttribute("id",s)}return s}function n(D,E,B){var C=D[E];if(!C){return}if(k.is(C,"string")){B=C.replace(/\.\w+$/,"");B=B?k.resolve(B):0;C=k.resolve(C)}return C.apply(B||this,Array.prototype.slice.call(arguments,2))}function q(B,s){return s.constructor===RegExp?s.test(B.className):l.hasClass(B,s)}A=d({theme:"simple",language:"en"},A);z.settings=A;j.bind(window,"ready",function(){var s,B;n(A,"onpageload");switch(A.mode){case"exact":s=A.elements||"";if(s.length>0){g(e(s),function(C){if(l.get(C)){u=new k.Editor(C,A);m.push(u);u.render(1)}else{g(document.forms,function(D){g(D.elements,function(E){if(E.name===C){C="mce_editor_"+c++;l.setAttrib(E,"id",C);u=new k.Editor(C,A);m.push(u);u.render(1)}})})}})}break;case"textareas":case"specific_textareas":g(l.select("textarea"),function(C){if(A.editor_deselector&&q(C,A.editor_deselector)){return}if(!A.editor_selector||q(C,A.editor_selector)){u=new k.Editor(r(C),A);m.push(u);u.render(1)}});break;default:if(A.types){g(A.types,function(C){g(l.select(C.selector),function(E){var D=new k.Editor(r(E),k.extend({},A,C));m.push(D);D.render(1)})})}else{if(A.selector){g(l.select(A.selector),function(D){var C=new k.Editor(r(D),A);m.push(C);C.render(1)})}}}if(A.oninit){s=B=0;g(m,function(C){B++;if(!C.initialized){C.onInit.add(function(){s++;if(s==B){n(A,"oninit")}})}else{s++}if(s==B){n(A,"oninit")}})}})},get:function(m){if(m===a){return this.editors}return this.editors[m]},getInstanceById:function(m){return this.get(m)},add:function(n){var m=this,o=m.editors;o[n.id]=n;o.push(n);m._setActive(n);m.onAddEditor.dispatch(m,n);return n},remove:function(o){var n=this,m,p=n.editors;if(!p[o.id]){return null}delete p[o.id];for(m=0;m<p.length;m++){if(p[m]==o){p.splice(m,1);break}}if(n.activeEditor==o){n._setActive(p[0])}o.destroy();n.onRemoveEditor.dispatch(n,o);return o},execCommand:function(s,q,p){var r=this,o=r.get(p),m;function n(){o.destroy();m.detachEvent("onunload",n);m=m.tinyMCE=m.tinymce=null}switch(s){case"mceFocus":o.focus();return true;case"mceAddEditor":case"mceAddControl":if(!r.get(p)){new k.Editor(p,r.settings).render()}return true;case"mceAddFrameControl":m=p.window;m.tinyMCE=tinyMCE;m.tinymce=k;k.DOM.doc=m.document;k.DOM.win=m;o=new k.Editor(p.element_id,p);o.render();if(k.isIE){m.attachEvent("onunload",n)}p.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(o){o.remove()}return true;case"mceToggleEditor":if(!o){r.execCommand("mceAddControl",0,p);return true}if(o.isHidden()){o.show()}else{o.hide()}return true}if(r.activeEditor){return r.activeEditor.execCommand(s,q,p)}return false},execInstanceCommand:function(q,p,o,n){var m=this.get(q);if(m){return m.execCommand(p,o,n)}return false},triggerSave:function(){g(this.editors,function(m){m.save()})},addI18n:function(q,r){var m,n=this.i18n;if(!k.is(q,"string")){g(q,function(s,p){g(s,function(v,u){g(v,function(A,z){if(u==="common"){n[p+"."+z]=A}else{n[p+"."+u+"."+z]=A}})})})}else{g(r,function(s,p){n[q+"."+p]=s})}},_setActive:function(m){this.selectedInstance=this.activeEditor=m}})})(tinymce);(function(l){var m=l.DOM,k=l.dom.Event,f=l.extend,j=l.each,a=l.isGecko,b=l.isIE,e=l.isWebKit,d=l.is,h=l.ThemeManager,c=l.PluginManager,g=l.explode;l.create("tinymce.Editor",{Editor:function(q,p){var n=this,o=true;n.settings=p=f({id:q,language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:l.documentBaseURL,add_form_submit_trigger:o,submit_patch:o,add_unload_trigger:o,convert_urls:o,relative_urls:o,remove_script_host:o,table_inline_editing:false,object_resizing:o,accessibility_focus:o,doctype:l.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:o,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:o,directionality:"ltr",forced_root_block:"p",hidden_input:o,padd_empty_editor:o,render_ui:o,indentation:"30px",fix_table_elements:o,inline_styles:o,convert_fonts_to_spans:o,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure",validate:o,entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:o},p);n.id=n.editorId=q;n.isNotDirty=false;n.plugins={};n.documentBaseURI=new l.util.URI(p.document_base_url||l.documentBaseURL,{base_uri:tinyMCE.baseURI});n.baseURI=l.baseURI;n.contentCSS=[];n.setupEvents();n.execCommands={};n.queryStateCommands={};n.queryValueCommands={};n.execCallback("setup",n)},render:function(p){var q=this,r=q.settings,u=q.id,n=l.ScriptLoader;if(!k.domLoaded){k.add(window,"ready",function(){q.render()});return}tinyMCE.settings=r;if(!q.getElement()){return}if(l.isIDevice&&!l.isIOS5){return}if(!/TEXTAREA|INPUT/i.test(q.getElement().nodeName)&&r.hidden_input&&m.getParent(u,"form")){m.insertAfter(m.create("input",{type:"hidden",name:u}),u)}if(l.WindowManager){q.windowManager=new l.WindowManager(q)}if(r.encoding=="xml"){q.onGetContent.add(function(s,v){if(v.save){v.content=m.encode(v.content)}})}if(r.add_form_submit_trigger){q.onSubmit.addToTop(function(){if(q.initialized){q.save();q.isNotDirty=1}})}if(r.add_unload_trigger){q._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(q.initialized&&!q.destroyed&&!q.isHidden()){q.save({format:"raw",no_events:true})}})}l.addUnload(q.destroy,q);if(r.submit_patch){q.onBeforeRenderUI.add(function(){var s=q.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){q.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){l.triggerSave();q.isNotDirty=1;return q.formElement._mceOldSubmit(q.formElement)}}s=null})}function o(){if(r.language&&r.language_load!==false){n.add(l.baseURL+"/langs/"+r.language+".js")}if(r.theme&&r.theme.charAt(0)!="-"&&!h.urls[r.theme]){h.load(r.theme,"themes/"+r.theme+"/editor_template"+l.suffix+".js")}j(g(r.plugins),function(v){if(v&&!c.urls[v]){if(v.charAt(0)=="-"){v=v.substr(1,v.length);var s=c.dependencies(v);j(s,function(A){var z={prefix:"plugins/",resource:A,suffix:"/editor_plugin"+l.suffix+".js"};A=c.createUrl(z,A);c.load(A.resource,A)})}else{if(v=="safari"){return}c.load(v,{prefix:"plugins/",resource:v,suffix:"/editor_plugin"+l.suffix+".js"})}}});n.loadQueue(function(){if(!q.removed){q.init()}})}o()},init:function(){var r,I=this,J=I.settings,F,B,E=I.getElement(),q,p,G,z,D,H,A,v=[];l.add(I);J.aria_label=J.aria_label||m.getAttrib(E,"aria-label",I.getLang("aria.rich_text_area"));if(J.theme){J.theme=J.theme.replace(/-/,"");q=h.get(J.theme);I.theme=new q();if(I.theme.init){I.theme.init(I,h.urls[J.theme]||l.documentBaseURL.replace(/\/$/,""))}}function C(s){var K=c.get(s),o=c.urls[s]||l.documentBaseURL.replace(/\/$/,""),n;if(K&&l.inArray(v,s)===-1){j(c.dependencies(s),function(u){C(u)});n=new K(I,o);I.plugins[s]=n;if(n.init){n.init(I,o);v.push(s)}}}j(g(J.plugins.replace(/\-/g,"")),C);if(J.popup_css!==false){if(J.popup_css){J.popup_css=I.documentBaseURI.toAbsolute(J.popup_css)}else{J.popup_css=I.baseURI.toAbsolute("themes/"+J.theme+"/skins/"+J.skin+"/dialog.css")}}if(J.popup_css_add){J.popup_css+=","+I.documentBaseURI.toAbsolute(J.popup_css_add)}I.controlManager=new l.ControlManager(I);I.onExecCommand.add(function(n,o){if(!/^(FontName|FontSize)$/.test(o)){I.nodeChanged()}});I.onBeforeRenderUI.dispatch(I,I.controlManager);if(J.render_ui&&I.theme){F=J.width||E.style.width||E.offsetWidth;B=J.height||E.style.height||E.offsetHeight;I.orgDisplay=E.style.display;H=/^[0-9\.]+(|px)$/i;if(H.test(""+F)){F=Math.max(parseInt(F,10)+(q.deltaWidth||0),100)}if(H.test(""+B)){B=Math.max(parseInt(B,10)+(q.deltaHeight||0),100)}q=I.theme.renderUI({targetNode:E,width:F,height:B,deltaWidth:J.delta_width,deltaHeight:J.delta_height});I.editorContainer=q.editorContainer}if(J.content_css){j(g(J.content_css),function(n){I.contentCSS.push(I.documentBaseURI.toAbsolute(n))})}if(J.content_editable){E=r=q=null;return I.initContentBody()}if(document.domain&&location.hostname!=document.domain){l.relaxedDomain=document.domain}m.setStyles(q.sizeContainer||q.editorContainer,{width:F,height:B});B=(q.iframeHeight||B)+(typeof(B)=="number"?(q.deltaHeight||0):"");if(B<100){B=100}I.iframeHTML=J.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(J.document_base_url!=l.documentBaseURL){I.iframeHTML+='<base href="'+I.documentBaseURI.getURI()+'" />'}if(J.ie7_compat){I.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}else{I.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}I.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(A=0;A<I.contentCSS.length;A++){I.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+I.contentCSS[A]+'" />'}I.contentCSS=[];z=J.body_id||"tinymce";if(z.indexOf("=")!=-1){z=I.getParam("body_id","","hash");z=z[I.id]||z}D=J.body_class||"";if(D.indexOf("=")!=-1){D=I.getParam("body_class","","hash");D=D[I.id]||""}I.iframeHTML+='</head><body id="'+z+'" class="mceContentBody '+D+'" onload="window.parent.tinyMCE.get(\''+I.id+"').onLoad.dispatch();\"><br></body></html>";if(l.relaxedDomain&&(b||(l.isOpera&&parseFloat(opera.version())<11))){G='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+I.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'}r=m.add(q.iframeContainer,"iframe",{id:I.id+"_ifr",src:G||'javascript:""',frameBorder:"0",allowTransparency:"true",title:J.aria_label,style:{width:"100%",height:B,display:"block"}});I.contentAreaContainer=q.iframeContainer;m.get(q.editorContainer).style.display=I.orgDisplay;m.get(I.id).style.display="none";m.setAttrib(I.id,"aria-hidden",true);if(!l.relaxedDomain||!G){I.initContentBody()}E=r=q=null},initContentBody:function(){var o=this,q=o.settings,r=m.get(o.id),s=o.getDoc(),p,n;if((!b||!l.relaxedDomain)&&!q.content_editable){s.open();s.write(o.iframeHTML);s.close();if(l.relaxedDomain){s.domain=l.relaxedDomain}}if(q.content_editable){m.addClass(r,"mceContentBody");o.contentDocument=s=q.content_document||document;o.contentWindow=q.content_window||window;o.bodyElement=r;q.content_document=q.content_window=null}n=o.getBody();n.disabled=true;if(!q.readonly){n.contentEditable=o.getParam("content_editable_state",true)}n.disabled=false;o.schema=new l.html.Schema(q);o.dom=new l.dom.DOMUtils(s,{keep_values:true,url_converter:o.convertURL,url_converter_scope:o,hex_colors:q.force_hex_style_colors,class_filter:q.class_filter,update_styles:true,root_element:q.content_editable?o.id:null,schema:o.schema});o.parser=new l.html.DomParser(q,o.schema);o.parser.addAttributeFilter("src,href,style",function(u,v){var z=u.length,B,D=o.dom,C,A;while(z--){B=u[z];C=B.attr(v);A="data-mce-"+v;if(!B.attributes.map[A]){if(v==="style"){B.attr(A,D.serializeStyle(D.parseStyle(C),B.name))}else{B.attr(A,o.convertURL(C,v,B.name))}}}});o.parser.addNodeFilter("script",function(u,v){var z=u.length,A;while(z--){A=u[z];A.attr("type","mce-"+(A.attr("type")||"text/javascript"))}});o.parser.addNodeFilter("#cdata",function(u,v){var z=u.length,A;while(z--){A=u[z];A.type=8;A.name="#comment";A.value="[CDATA["+A.value+"]]"}});o.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(v,z){var A=v.length,B,u=o.schema.getNonEmptyElements();while(A--){B=v[A];if(B.isEmpty(u)){B.empty().append(new l.html.Node("br",1)).shortEnded=true}}});o.serializer=new l.dom.Serializer(q,o.dom,o.schema);o.selection=new l.dom.Selection(o.dom,o.getWin(),o.serializer);o.formatter=new l.Formatter(o);o.undoManager=new l.UndoManager(o);o.forceBlocks=new l.ForceBlocks(o);o.enterKey=new l.EnterKey(o);o.editorCommands=new l.EditorCommands(o);o.serializer.onPreProcess.add(function(u,v){return o.onPreProcess.dispatch(o,v,u)});o.serializer.onPostProcess.add(function(u,v){return o.onPostProcess.dispatch(o,v,u)});o.onPreInit.dispatch(o);if(!q.gecko_spellcheck){s.body.spellcheck=false}if(!q.readonly){o.bindNativeEvents()}o.controlManager.onPostRender.dispatch(o,o.controlManager);o.onPostRender.dispatch(o);o.quirks=l.util.Quirks(o);if(q.directionality){n.dir=q.directionality}if(q.nowrap){n.style.whiteSpace="nowrap"}if(q.protect){o.onBeforeSetContent.add(function(u,v){j(q.protect,function(z){v.content=v.content.replace(z,function(A){return"<!--mce:protected "+escape(A)+"-->"})})})}o.onSetContent.add(function(){o.addVisual(o.getBody())});if(q.padd_empty_editor){o.onPostProcess.add(function(u,v){v.content=v.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}o.load({initial:true,format:"html"});o.startContent=o.getContent({format:"raw"});o.initialized=true;o.onInit.dispatch(o);o.execCallback("setupcontent_callback",o.id,n,s);o.execCallback("init_instance_callback",o);o.focus(true);o.nodeChanged({initial:true});j(o.contentCSS,function(u){o.dom.loadCSS(u)});if(q.auto_focus){setTimeout(function(){var u=l.get(q.auto_focus);u.selection.select(u.getBody(),1);u.selection.collapse(1);u.getBody().focus();u.getWin().focus()},100)}r=s=n=null},focus:function(q){var p,z=this,v=z.selection,r=z.settings.content_editable,o,s,u=z.getDoc(),n;if(!q){o=v.getRng();if(o.item){s=o.item(0)}z._refreshContentEditable();if(!r){z.getWin().focus()}if(l.isGecko||r){n=z.getBody();if(n.setActive){n.setActive()}else{n.focus()}if(r){v.normalize()}}if(s&&s.ownerDocument==u){o=u.body.createControlRange();o.addElement(s);o.select()}}if(l.activeEditor!=z){if((p=l.activeEditor)!=null){p.onDeactivate.dispatch(p,z)}z.onActivate.dispatch(z,p)}l._setActive(z)},execCallback:function(r){var o=this,q=o.settings[r],p;if(!q){return}if(o.callbackLookup&&(p=o.callbackLookup[r])){q=p.func;p=p.scope}if(d(q,"string")){p=q.replace(/\.\w+$/,"");p=p?l.resolve(p):0;q=l.resolve(q);o.callbackLookup=o.callbackLookup||{};o.callbackLookup[r]={func:q,scope:p}}return q.apply(p||o,Array.prototype.slice.call(arguments,1))},translate:function(n){var p=this.settings.language||"en",o=l.i18n;if(!n){return""}return o[p+"."+n]||n.replace(/\{\#([^\}]+)\}/g,function(r,q){return o[p+"."+q]||"{#"+q+"}"})},getLang:function(p,o){return l.i18n[(this.settings.language||"en")+"."+p]||(d(o)?o:"{#"+p+"}")},getParam:function(z,r,p){var s=l.trim,q=d(this.settings[z])?this.settings[z]:r,u;if(p==="hash"){u={};if(d(q,"string")){j(q.indexOf("=")>0?q.split(/[;,](?![^=;,]*(?:[;,]|$))/):q.split(","),function(n){n=n.split("=");if(n.length>1){u[s(n[0])]=s(n[1])}else{u[s(n[0])]=s(n)}})}else{u=q}return u}return q},nodeChanged:function(r){var n=this,p=n.selection,q;if(n.initialized){r=r||{};p.normalize();q=p.getStart()||n.getBody();q=b&&q.ownerDocument!=n.getDoc()?n.getBody():q;r.parents=[];n.dom.getParent(q,function(o){if(o.nodeName=="BODY"){return true}r.parents.push(o)});n.onNodeChange.dispatch(n,r?r.controlManager||n.controlManager:n.controlManager,q,p.isCollapsed(),r)}},addButton:function(o,p){var n=this;n.buttons=n.buttons||{};n.buttons[o]=p},addCommand:function(n,p,o){this.execCommands[n]={func:p,scope:o||this}},addQueryStateHandler:function(n,p,o){this.queryStateCommands[n]={func:p,scope:o||this}},addQueryValueHandler:function(n,p,o){this.queryValueCommands[n]={func:p,scope:o||this}},addShortcut:function(p,r,n,q){var o=this,s;if(o.settings.custom_shortcuts===false){return false}o.shortcuts=o.shortcuts||{};if(d(n,"string")){s=n;n=function(){o.execCommand(s,false,null)}}if(d(n,"object")){s=n;n=function(){o.execCommand(s[0],s[1],s[2])}}j(g(p),function(u){var v={func:n,scope:q||this,desc:o.translate(r),alt:false,ctrl:false,shift:false};j(g(u,"+"),function(z){switch(z){case"alt":case"ctrl":case"shift":v[z]=true;break;default:v.charCode=z.charCodeAt(0);v.keyCode=z.toUpperCase().charCodeAt(0)}});o.shortcuts[(v.ctrl?"ctrl":"")+","+(v.alt?"alt":"")+","+(v.shift?"shift":"")+","+v.keyCode]=v});return true},execCommand:function(v,u,A,n){var q=this,r=0,z,p;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(v)&&(!n||!n.skip_focus)){q.focus()}n=f({},n);q.onBeforeExecCommand.dispatch(q,v,u,A,n);if(n.terminate){return false}if(q.execCallback("execcommand_callback",q.id,q.selection.getNode(),v,u,A)){q.onExecCommand.dispatch(q,v,u,A,n);return true}if(z=q.execCommands[v]){p=z.func.call(z.scope,u,A);if(p!==true){q.onExecCommand.dispatch(q,v,u,A,n);return p}}j(q.plugins,function(o){if(o.execCommand&&o.execCommand(v,u,A)){q.onExecCommand.dispatch(q,v,u,A,n);r=1;return false}});if(r){return true}if(q.theme&&q.theme.execCommand&&q.theme.execCommand(v,u,A)){q.onExecCommand.dispatch(q,v,u,A,n);return true}if(q.editorCommands.execCommand(v,u,A)){q.onExecCommand.dispatch(q,v,u,A,n);return true}q.getDoc().execCommand(v,u,A);q.onExecCommand.dispatch(q,v,u,A,n)},queryCommandState:function(r){var p=this,u,q;if(p._isHidden()){return}if(u=p.queryStateCommands[r]){q=u.func.call(u.scope);if(q!==true){return q}}u=p.editorCommands.queryCommandState(r);if(u!==-1){return u}try{return this.getDoc().queryCommandState(r)}catch(n){}},queryCommandValue:function(u){var p=this,r,q;if(p._isHidden()){return}if(r=p.queryValueCommands[u]){q=r.func.call(r.scope);if(q!==true){return q}}r=p.editorCommands.queryCommandValue(u);if(d(r)){return r}try{return this.getDoc().queryCommandValue(u)}catch(n){}},show:function(){var n=this;m.show(n.getContainer());m.hide(n.id);n.load()},hide:function(){var n=this,o=t.getDoc();if(b&&o){o.execCommand("SelectAll")}n.save();m.hide(n.getContainer());m.setStyle(n.id,"display",n.orgDisplay)},isHidden:function(){return !m.isHidden(this.id)},setProgressState:function(n,p,q){this.onSetProgressState.dispatch(this,n,p,q);return n},load:function(r){var n=this,q=n.getElement(),p;if(q){r=r||{};r.load=true;p=n.setContent(d(q.value)?q.value:q.innerHTML,r);r.element=q;if(!r.no_events){n.onLoadContent.dispatch(n,r)}r.element=q=null;return p}},save:function(s){var n=this,r=n.getElement(),p,q;if(!r||!n.initialized){return}s=s||{};s.save=true;s.element=r;p=s.content=n.getContent(s);if(!s.no_events){n.onSaveContent.dispatch(n,s)}p=s.content;if(!/TEXTAREA|INPUT/i.test(r.nodeName)){r.innerHTML=p;if(q=m.getParent(n.id,"form")){j(q.elements,function(o){if(o.name==n.id){o.value=p;return false}})}}else{r.value=p}s.element=r=null;return p},setContent:function(s,q){var p=this,o,n=p.getBody(),r;q=q||{};q.format=q.format||"html";q.set=true;q.content=s;if(!q.no_events){p.onBeforeSetContent.dispatch(p,q)}s=q.content;if(!l.isIE&&(s.length===0||/^\s+$/.test(s))){r=p.settings.forced_root_block;if(r){s="<"+r+'><br data-mce-bogus="1"></'+r+">"}else{s='<br data-mce-bogus="1">'}n.innerHTML=s;p.selection.select(n,true);p.selection.collapse(true);return}if(q.format!=="raw"){s=new l.html.Serializer({},p.schema).serialize(p.parser.parse(s))}q.content=l.trim(s);p.dom.setHTML(n,q.content);if(!q.no_events){p.onSetContent.dispatch(p,q)}p.selection.normalize();return q.content},getContent:function(o){var n=this,p;o=o||{};o.format=o.format||"html";o.get=true;o.getInner=true;if(!o.no_events){n.onBeforeGetContent.dispatch(n,o)}if(o.format=="raw"){p=n.getBody().innerHTML}else{p=n.serializer.serialize(n.getBody(),o)}o.content=l.trim(p);if(!o.no_events){n.onGetContent.dispatch(n,o)}return o.content},isDirty:function(){var n=this;return l.trim(n.startContent)!=l.trim(n.getContent({format:"raw",no_events:1}))&&!n.isNotDirty},getContainer:function(){var n=this;if(!n.container){n.container=m.get(n.editorContainer||n.id+"_parent")}return n.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return m.get(this.settings.content_element||this.id)},getWin:function(){var n=this,o;if(!n.contentWindow){o=m.get(n.id+"_ifr");if(o){n.contentWindow=o.contentWindow}}return n.contentWindow},getDoc:function(){var n=this,o;if(!n.contentDocument){o=n.getWin();if(o){n.contentDocument=o.document}}return n.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(p,o,r){var n=this,q=n.settings;if(q.urlconverter_callback){return n.execCallback("urlconverter_callback",p,r,true,o)}if(!q.convert_urls||(r&&r.nodeName=="LINK")||p.indexOf("file:")===0){return p}if(q.relative_urls){return n.documentBaseURI.toRelative(p)}p=n.documentBaseURI.toAbsolute(p,q.remove_script_host);return p},addVisual:function(r){var o=this,p=o.settings,q=o.dom,n;r=r||o.getBody();if(!d(o.hasVisual)){o.hasVisual=p.visual}j(q.select("table,a",r),function(u){var s;switch(u.nodeName){case"TABLE":n=p.visual_table_class||"mceItemTable";s=q.getAttrib(u,"border");if(!s||s=="0"){if(o.hasVisual){q.addClass(u,n)}else{q.removeClass(u,n)}}return;case"A":s=q.getAttrib(u,"name");n="mceItemAnchor";if(s){if(o.hasVisual){q.addClass(u,n)}else{q.removeClass(u,n)}}return}});o.onVisualAid.dispatch(o,r,o.hasVisual)},remove:function(){var n=this,o=n.getContainer();if(!n.removed){n.removed=1;n.hide();if(!n.settings.content_editable){k.clear(n.getWin());k.clear(n.getDoc())}k.clear(n.getBody());k.clear(n.formElement);k.unbind(o);n.execCallback("remove_instance_callback",n);n.onRemove.dispatch(n);n.onExecCommand.listeners=[];l.remove(n);m.remove(o)}},destroy:function(o){var n=this;if(n.destroyed){return}if(a){k.unbind(n.getDoc());k.unbind(n.getWin());k.unbind(n.getBody())}if(!o){l.removeUnload(n.destroy);tinyMCE.onBeforeUnload.remove(n._beforeUnload);if(n.theme&&n.theme.destroy){n.theme.destroy()}n.controlManager.destroy();n.selection.destroy();n.dom.destroy()}if(n.formElement){n.formElement.submit=n.formElement._mceOldSubmit;n.formElement._mceOldSubmit=null}n.contentAreaContainer=n.formElement=n.container=n.settings.content_element=n.bodyElement=n.contentDocument=n.contentWindow=null;if(n.selection){n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null}n.destroyed=1},_refreshContentEditable:function(){var o=this,n,p;if(o._isHidden()){n=o.getBody();p=n.parentNode;p.removeChild(n);p.appendChild(n);n.focus()}},_isHidden:function(){var n;if(!a){return 0}n=this.selection.getSel();return(!n||!n.rangeCount||n.rangeCount===0)}})})(tinymce);(function(a){var b=a.each;a.Editor.prototype.setupEvents=function(){var c=this,d=c.settings;b(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(e){c[e]=new a.util.Dispatcher(c)});if(d.cleanup_callback){c.onBeforeSetContent.add(function(e,f){f.content=e.execCallback("cleanup_callback","insert_to_editor",f.content,f)});c.onPreProcess.add(function(e,f){if(f.set){e.execCallback("cleanup_callback","insert_to_editor_dom",f.node,f)}if(f.get){e.execCallback("cleanup_callback","get_from_editor_dom",f.node,f)}});c.onPostProcess.add(function(e,f){if(f.set){f.content=e.execCallback("cleanup_callback","insert_to_editor",f.content,f)}if(f.get){f.content=e.execCallback("cleanup_callback","get_from_editor",f.content,f)}})}if(d.save_callback){c.onGetContent.add(function(e,f){if(f.save){f.content=e.execCallback("save_callback",e.id,f.content,e.getBody())}})}if(d.handle_event_callback){c.onEvent.add(function(f,g,h){if(c.execCallback("handle_event_callback",g,f,h)===false){Event.cancel(g)}})}if(d.handle_node_change_callback){c.onNodeChange.add(function(f,e,g){f.execCallback("handle_node_change_callback",f.id,g,-1,-1,true,f.selection.isCollapsed())})}if(d.save_callback){c.onSaveContent.add(function(e,g){var f=e.execCallback("save_callback",e.id,g.content,e.getBody());if(f){g.content=f}})}if(d.onchange_callback){c.onChange.add(function(f,e){f.execCallback("onchange_callback",f,e)})}};a.Editor.prototype.bindNativeEvents=function(){var c=this,f,g=c.settings,j=c.dom,k;k={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function e(l,m){var n=l.type;if(c.removed){return}if(c.onEvent.dispatch(c,l,m)!==false){c[k[l.fakeType||l.type]].dispatch(c,l,m)}}function h(l){c.focus(true)}b(k,function(m,n){var l=g.content_editable?c.getBody():c.getDoc();switch(n){case"contextmenu":j.bind(l,n,e);break;case"paste":j.bind(c.getBody(),n,e);break;case"submit":case"reset":j.bind(c.getElement().form||a.DOM.getParent(c.id,"form"),n,e);break;default:j.bind(l,n,e)}});j.bind(g.content_editable?c.getBody():(a.isGecko?c.getDoc():c.getWin()),"focus",function(l){c.focus(true)});if(g.content_editable&&a.isOpera){j.bind(c.getBody(),"click",h);j.bind(c.getBody(),"keydown",h)}c.onMouseUp.add(c.nodeChanged);c.onKeyUp.add(function(l,n){var m=n.keyCode;if((m>=33&&m<=36)||(m>=37&&m<=40)||m==13||m==45||m==46||m==8||(a.isMac&&(m==91||m==93))||n.ctrlKey){c.nodeChanged()}});c.onReset.add(function(){c.setContent(c.startContent,{format:"raw"})});function d(m,l){if(m.altKey||m.ctrlKey||m.metaKey){b(c.shortcuts,function(n){var o=a.isMac?m.metaKey:m.ctrlKey;if(n.ctrl!=o||n.alt!=m.altKey||n.shift!=m.shiftKey){return}if(m.keyCode==n.keyCode||(m.charCode&&m.charCode==n.charCode)){m.preventDefault();if(l){n.func.call(n.scope)}return true}})}}c.onKeyUp.add(function(l,m){d(m)});c.onKeyPress.add(function(l,m){d(m)});c.onKeyDown.add(function(l,m){d(m,true)});if(a.isOpera){c.onClick.add(function(l,m){m.preventDefault()})}}})(tinymce);(function(d){var e=d.each,b,a=true,c=false;d.EditorCommands=function(o){var n=o.dom,q=o.selection,k={state:{},exec:{},value:{}},l=o.settings,r=o.formatter,p;function s(D,C,B){var A;D=D.toLowerCase();if(A=k.exec[D]){A(D,C,B);return a}return c}function m(B){var A;B=B.toLowerCase();if(A=k.state[B]){return A(B)}return -1}function h(B){var A;B=B.toLowerCase();if(A=k.value[B]){return A(B)}return c}function z(A,B){B=B||"exec";e(A,function(D,C){e(C.toLowerCase().split(","),function(E){k[B][E]=D})})}d.extend(this,{execCommand:s,queryCommandState:m,queryCommandValue:h,addCommands:z});function f(C,B,A){if(B===b){B=c}if(A===b){A=null}return o.getDoc().execCommand(C,B,A)}function v(A){return r.match(A)}function u(A,B){r.toggle(A,B?{value:B}:b)}function j(A){p=q.getBookmark(A)}function g(){q.moveToBookmark(p)}z({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){o.undoManager.add()},"Cut,Copy,Paste":function(D){var C=o.getDoc(),A;try{f(D)}catch(B){A=a}if(A||!C.queryCommandSupported(D)){if(d.isGecko){o.windowManager.confirm(o.getLang("clipboard_msg"),function(E){if(E){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{o.windowManager.alert(o.getLang("clipboard_no_support"))}}},unlink:function(A){if(q.isCollapsed()){q.select(q.getNode())}f(A);q.collapse(c)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(A){var B=A.substring(7);e("left,center,right,full".split(","),function(C){if(B!=C){r.remove("align"+C)}});u("align"+B);s("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(C){var A,B;f(C);A=n.getParent(q.getNode(),"ol,ul");if(A){B=A.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(B.nodeName)){j();n.split(B,A);g()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(A){u(A)},"ForeColor,HiliteColor,FontName":function(C,B,A){u(C,A)},FontSize:function(D,C,B){var A,E;if(B>=1&&B<=7){E=d.explode(l.font_size_style_values);A=d.explode(l.font_size_classes);if(A){B=A[B-1]||B}else{B=E[B-1]||B}}u(D,B)},RemoveFormat:function(A){r.remove(A)},mceBlockQuote:function(A){u("blockquote")},FormatBlock:function(C,B,A){return u(A||"p")},mceCleanup:function(){var A=q.getBookmark();o.setContent(o.getContent({cleanup:a}),{cleanup:a});q.moveToBookmark(A)},mceRemoveNode:function(D,C,B){var A=B||q.getNode();if(A!=o.getBody()){j();o.dom.remove(A,a);g()}},mceSelectNodeDepth:function(D,C,B){var A=0;n.getParent(q.getNode(),function(E){if(E.nodeType==1&&A++==B){q.select(E);return c}},o.getBody())},mceSelectNode:function(C,B,A){q.select(A)},mceInsertContent:function(F,M,O){var C,N,I,D,J,K,H,G,P,B,E,Q,A,L;C=o.parser;N=new d.html.Serializer({},o.schema);A='<span id="mce_marker" data-mce-type="bookmark">\uFEFF</span>';K={content:O,format:"html"};q.onBeforeSetContent.dispatch(q,K);O=K.content;if(O.indexOf("{$caret}")==-1){O+="{$caret}"}O=O.replace(/\{\$caret\}/,A);if(!q.isCollapsed()){o.getDoc().execCommand("Delete",false,null)}I=q.getNode();K={context:I.nodeName.toLowerCase()};J=C.parse(O,K);E=J.lastChild;if(E.attr("id")=="mce_marker"){H=E;for(E=E.prev;E;E=E.walk(true)){if(E.type==3||!n.isBlock(E.name)){E.parent.insert(H,E,E.name==="br");break}}}if(!K.invalid){O=N.serialize(J);E=I.firstChild;Q=I.lastChild;if(!E||(E===Q&&E.nodeName==="BR")){n.setHTML(I,O)}else{q.setContent(O)}}else{q.setContent(A);I=o.selection.getNode();D=o.getBody();if(I.nodeType==9){I=E=D}else{E=I}while(E!==D){I=E;E=E.parentNode}O=I==D?D.innerHTML:n.getOuterHTML(I);O=N.serialize(C.parse(O.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return N.serialize(J)})));if(I==D){n.setHTML(D,O)}else{n.setOuterHTML(I,O)}}H=n.get("mce_marker");G=n.getRect(H);P=n.getViewPort(o.getWin());if((G.y+G.h>P.y+P.h||G.y<P.y)||(G.x>P.x+P.w||G.x<P.x)){L=d.isIE?o.getDoc().documentElement:o.getBody();L.scrollLeft=G.x;L.scrollTop=G.y-P.h+25}B=n.createRng();E=H.previousSibling;if(E&&E.nodeType==3){B.setStart(E,E.nodeValue.length)}else{B.setStartBefore(H);B.setEndBefore(H)}n.remove(H);q.setRng(B);q.onSetContent.dispatch(q,K);o.addVisual()},mceInsertRawHTML:function(C,B,A){q.setContent("tiny_mce_marker");o.setContent(o.getContent().replace(/tiny_mce_marker/g,function(){return A}))},mceSetContent:function(C,B,A){o.setContent(A)},"Indent,Outdent":function(D){var B,A,C;B=l.indentation;A=/[a-z%]+$/i.exec(B);B=parseInt(B);if(!m("InsertUnorderedList")&&!m("InsertOrderedList")){if(!l.forced_root_block&&!n.getParent(q.getNode(),n.isBlock)){r.apply("div")}e(q.getSelectedBlocks(),function(E){if(D=="outdent"){C=Math.max(0,parseInt(E.style.paddingLeft||0)-B);n.setStyle(E,"paddingLeft",C?C+A:"")}else{n.setStyle(E,"paddingLeft",(parseInt(E.style.paddingLeft||0)+B)+A)}})}else{f(D)}},mceRepaint:function(){var B;if(d.isGecko){try{j(a);if(q.getSel()){q.getSel().selectAllChildren(o.getBody())}q.collapse(a);g()}catch(A){}}},mceToggleFormat:function(C,B,A){r.toggle(A)},InsertHorizontalRule:function(){o.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){o.hasVisual=!o.hasVisual;o.addVisual()},mceReplaceContent:function(C,B,A){o.execCommand("mceInsertContent",false,A.replace(/\{\$selection\}/g,q.getContent({format:"text"})))},mceInsertLink:function(D,C,B){var A;if(typeof(B)=="string"){B={href:B}}A=n.getParent(q.getNode(),"a");B.href=B.href.replace(" ","%20");if(!A||!B.href){r.remove("link")}if(B.href){r.apply("link",B,A)}},selectAll:function(){var B=n.getRoot(),A=n.createRng();A.setStart(B,0);A.setEnd(B,B.childNodes.length);o.selection.setRng(A)}});z({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(D){var B="align"+D.substring(7);var A=q.isCollapsed()?[q.getNode()]:q.getSelectedBlocks();var C=d.map(A,function(E){return !!r.matchNode(E,B)});return d.inArray(C,a)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(A){return v(A)},mceBlockQuote:function(){return v("blockquote")},Outdent:function(){var A;if(l.inline_styles){if((A=n.getParent(q.getStart(),n.isBlock))&&parseInt(A.style.paddingLeft)>0){return a}if((A=n.getParent(q.getEnd(),n.isBlock))&&parseInt(A.style.paddingLeft)>0){return a}}return m("InsertUnorderedList")||m("InsertOrderedList")||(!l.inline_styles&&!!n.getParent(q.getNode(),"BLOCKQUOTE"))},"InsertUnorderedList,InsertOrderedList":function(A){return n.getParent(q.getNode(),A=="insertunorderedlist"?"UL":"OL")}},"state");z({"FontSize,FontName":function(C){var B=0,A;if(A=n.getParent(q.getNode(),"span")){if(C=="fontsize"){B=A.style.fontSize}else{B=A.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return B}},"value");z({Undo:function(){o.undoManager.undo()},Redo:function(){o.undoManager.redo()}})}})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(h){var m,j=0,e=[],g,l,k,f;function c(){return b.trim(h.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function d(){m.typing=false;m.add()}l=new a(m);k=new a(m);f=new a(m);l.add(function(n,o){if(n.hasUndo()){return h.onChange.dispatch(h,o,n)}});k.add(function(n,o){return h.onUndo.dispatch(h,o,n)});f.add(function(n,o){return h.onRedo.dispatch(h,o,n)});h.onInit.add(function(){m.add()});h.onBeforeExecCommand.add(function(n,q,p,r,o){if(q!="Undo"&&q!="Redo"&&q!="mceRepaint"&&(!o||!o.skip_undo)){m.beforeChange()}});h.onExecCommand.add(function(n,q,p,r,o){if(q!="Undo"&&q!="Redo"&&q!="mceRepaint"&&(!o||!o.skip_undo)){m.add()}});h.onSaveContent.add(d);h.dom.bind(h.dom.getRoot(),"dragend",d);h.dom.bind(h.getDoc(),b.isGecko?"blur":"focusout",function(n){if(!h.removed&&m.typing){d()}});h.onKeyUp.add(function(n,p){var o=p.keyCode;if((o>=33&&o<=36)||(o>=37&&o<=40)||o==45||o==13||p.ctrlKey){d()}});h.onKeyDown.add(function(n,p){var o=p.keyCode;if((o>=33&&o<=36)||(o>=37&&o<=40)||o==45){if(m.typing){d()}return}if((o<16||o>20)&&o!=224&&o!=91&&!m.typing){m.beforeChange();m.typing=true;m.add()}});h.onMouseDown.add(function(n,o){if(m.typing){d()}});h.addShortcut("ctrl+z","undo_desc","Undo");h.addShortcut("ctrl+y","redo_desc","Redo");m={data:e,typing:false,onAdd:l,onUndo:k,onRedo:f,beforeChange:function(){g=h.selection.getBookmark(2,true)},add:function(q){var n,o=h.settings,p;q=q||{};q.content=c();p=e[j];if(p&&p.content==q.content){return null}if(e[j]){e[j].beforeBookmark=g}if(o.custom_undo_redo_levels){if(e.length>o.custom_undo_redo_levels){for(n=0;n<e.length-1;n++){e[n]=e[n+1]}e.length--;j=e.length}}q.bookmark=h.selection.getBookmark(2,true);if(j<e.length-1){e.length=j+1}e.push(q);j=e.length-1;m.onAdd.dispatch(m,q);h.isNotDirty=0;return q},undo:function(){var o,n;if(m.typing){m.add();m.typing=false}if(j>0){o=e[--j];h.setContent(o.content,{format:"raw"});h.selection.moveToBookmark(o.beforeBookmark);m.onUndo.dispatch(m,o)}return o},redo:function(){var n;if(j<e.length-1){n=e[++j];h.setContent(n.content,{format:"raw"});h.selection.moveToBookmark(n.bookmark);m.onRedo.dispatch(m,n)}return n},clear:function(){e=[];j=0;m.typing=false},hasUndo:function(){return j>0||this.typing},hasRedo:function(){return j<e.length-1&&!this.typing}};return m}})(tinymce);tinymce.ForceBlocks=function(c){var b=c.settings,e=c.dom,a=c.selection,d=c.schema.getBlockElements();function f(){var k=a.getStart(),h=c.getBody(),g,l,p,r,q,j,m,n=-16777215;if(!k||k.nodeType!==1||!b.forced_root_block){return}while(k!=h){if(d[k.nodeName]){return}k=k.parentNode}g=a.getRng();if(g.setStart){l=g.startContainer;p=g.startOffset;r=g.endContainer;q=g.endOffset}else{if(g.item){k=g.item(0);g=c.getDoc().body.createTextRange();g.moveToElementText(k)}tmpRng=g.duplicate();tmpRng.collapse(true);p=tmpRng.move("character",n)*-1;if(!tmpRng.collapsed){tmpRng=g.duplicate();tmpRng.collapse(false);q=(tmpRng.move("character",n)*-1)-p}}k=h.firstChild;while(k){if(k.nodeType===3||(k.nodeType==1&&!d[k.nodeName])){if(!j){j=e.create(b.forced_root_block);k.parentNode.insertBefore(j,k)}m=k;k=k.nextSibling;j.appendChild(m)}else{j=null;k=k.nextSibling}}if(g.setStart){g.setStart(l,p);g.setEnd(r,q);a.setRng(g)}else{try{g=c.getDoc().body.createTextRange();g.moveToElementText(h);g.collapse(true);g.moveStart("character",p);if(q>0){g.moveEnd("character",q)}g.select()}catch(o){}}c.nodeChanged()}if(b.forced_root_block){c.onKeyUp.add(f);c.onClick.add(f)}};(function(c){var b=c.DOM,a=c.dom.Event,d=c.each,e=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(f,j){var h=this,g;j=j||{};h.editor=f;h.controls={};h.onAdd=new c.util.Dispatcher(h);h.onPostRender=new c.util.Dispatcher(h);h.prefix=j.prefix||f.id+"_";h._cls={};h.onPostRender.add(function(){d(h.controls,function(k){k.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;if(g=this.get(h)){g.setActive(f)}return g},setDisabled:function(h,f){var g=null;if(g=this.get(h)){g.setDisabled(f)}return g},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f)}return g},createControl:function(j){var h,g=this,f=g.editor;d(f.plugins,function(k){if(k.createControl){h=k.createControl(j,g);if(h){return false}}});switch(j){case"|":case"separator":return g.createSeparator()}if(!h&&f.buttons&&(h=f.buttons[j])){return g.createButton(j,h)}return g.add(h)},createDropMenu:function(f,o,h){var n=this,j=n.editor,k,g,l,m;o=e({"class":"mceDropDown",constrain:j.settings.constrain_menus},o);o["class"]=o["class"]+" "+j.getParam("skin")+"Skin";if(l=j.getParam("skin_variant")){o["class"]+=" "+j.getParam("skin")+"Skin"+l.substring(0,1).toUpperCase()+l.substring(1)}f=n.prefix+f;m=h||n._cls.dropmenu||c.ui.DropMenu;k=n.controls[f]=new m(f,o);k.onAddItem.add(function(r,q){var p=q.settings;p.title=j.getLang(p.title,p.title);if(!p.onclick){p.onclick=function(s){if(p.cmd){j.execCommand(p.cmd,p.ui||false,p.value)}}}});j.onRemove.add(function(){k.destroy()});if(c.isIE){k.onShowMenu.add(function(){j.focus();g=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(g){j.selection.moveToBookmark(g);g=0}})}return n.add(k)},createListBox:function(f,o,h){var m=this,k=m.editor,j,l,n;if(m.get(f)){return null}o.title=k.translate(o.title);o.scope=o.scope||k;if(!o.onselect){o.onselect=function(p){k.execCommand(o.cmd,o.ui||false,p||o.value)}}o=e({title:o.title,"class":"mce_"+f,scope:o.scope,control_manager:m},o);f=m.prefix+f;function g(p){return p.settings.use_accessible_selects&&!c.isGecko}if(k.settings.use_native_selects||g(k)){l=new c.ui.NativeListBox(f,o)}else{n=h||m._cls.listbox||c.ui.ListBox;l=new n(f,o,k)}m.controls[f]=l;if(c.isWebKit){l.onPostRender.add(function(q,p){a.add(p,"mousedown",function(){k.bookmark=k.selection.getBookmark(1)});a.add(p,"focus",function(){k.selection.moveToBookmark(k.bookmark);k.bookmark=null})})}if(l.hideMenu){k.onMouseDown.add(l.hideMenu,l)}return m.add(l)},createButton:function(n,j,m){var h=this,g=h.editor,k,l,f;if(h.get(n)){return null}j.title=g.translate(j.title);j.label=g.translate(j.label);j.scope=j.scope||g;if(!j.onclick&&!j.menu_button){j.onclick=function(){g.execCommand(j.cmd,j.ui||false,j.value)}}j=e({title:j.title,"class":"mce_"+n,unavailable_prefix:g.getLang("unavailable",""),scope:j.scope,control_manager:h},j);n=h.prefix+n;if(j.menu_button){f=m||h._cls.menubutton||c.ui.MenuButton;l=new f(n,j,g);g.onMouseDown.add(l.hideMenu,l)}else{f=h._cls.button||c.ui.Button;l=new f(n,j,g)}return h.add(l)},createMenuButton:function(h,f,g){f=f||{};f.menu_button=1;return this.createButton(h,f,g)},createSplitButton:function(n,j,m){var h=this,g=h.editor,k,l,f;if(h.get(n)){return null}j.title=g.translate(j.title);j.scope=j.scope||g;if(!j.onclick){j.onclick=function(o){g.execCommand(j.cmd,j.ui||false,o||j.value)}}if(!j.onselect){j.onselect=function(o){g.execCommand(j.cmd,j.ui||false,o||j.value)}}j=e({title:j.title,"class":"mce_"+n,scope:j.scope,control_manager:h},j);n=h.prefix+n;f=m||h._cls.splitbutton||c.ui.SplitButton;l=h.add(new f(n,j,g));g.onMouseDown.add(l.hideMenu,l);return l},createColorSplitButton:function(f,o,h){var m=this,k=m.editor,j,l,n,g;if(m.get(f)){return null}o.title=k.translate(o.title);o.scope=o.scope||k;if(!o.onclick){o.onclick=function(p){if(c.isIE){g=k.selection.getBookmark(1)}k.execCommand(o.cmd,o.ui||false,p||o.value)}}if(!o.onselect){o.onselect=function(p){k.execCommand(o.cmd,o.ui||false,p||o.value)}}o=e({title:o.title,"class":"mce_"+f,menu_class:k.getParam("skin")+"Skin",scope:o.scope,more_colors_title:k.getLang("more_colors")},o);f=m.prefix+f;n=h||m._cls.colorsplitbutton||c.ui.ColorSplitButton;l=new n(f,o,k);k.onMouseDown.add(l.hideMenu,l);k.onRemove.add(function(){l.destroy()});if(c.isIE){l.onShowMenu.add(function(){k.focus();g=k.selection.getBookmark(1)});l.onHideMenu.add(function(){if(g){k.selection.moveToBookmark(g);g=0}})}return m.add(l)},createToolbar:function(l,h,k){var j,g=this,f;l=g.prefix+l;f=k||g._cls.toolbar||c.ui.Toolbar;j=new f(l,h,g.editor);if(g.get(l)){return null}return g.add(j)},createToolbarGroup:function(l,h,k){var j,g=this,f;l=g.prefix+l;f=k||this._cls.toolbarGroup||c.ui.ToolbarGroup;j=new f(l,h,g.editor);if(g.get(l)){return null}return g.add(j)},createSeparator:function(g){var f=g||this._cls.separator||c.ui.Separator;return new f()},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()});this.controls=null}})})(tinymce);(function(d){var a=d.util.Dispatcher,e=d.each,c=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={}},open:function(A,h){var z=this,l="",o,n,j=z.editor.settings.dialog_type=="modal",r,q,k,g=d.DOM.getViewPort(),v;A=A||{};h=h||{};q=b?g.w:screen.width;k=b?g.h:screen.height;A.name=A.name||"mc_"+new Date().getTime();A.width=parseInt(A.width||320);A.height=parseInt(A.height||240);A.resizable=true;A.left=A.left||parseInt(q/2)-(A.width/2);A.top=A.top||parseInt(k/2)-(A.height/2);h.inline=false;h.mce_width=A.width;h.mce_height=A.height;h.mce_auto_focus=A.auto_focus;if(j){if(c){A.center=true;A.help=false;A.dialogWidth=A.width+"px";A.dialogHeight=A.height+"px";A.scroll=A.scrollbars||false}}e(A,function(p,f){if(d.is(p,"boolean")){p=p?"yes":"no"}if(!/^(name|url)$/.test(f)){if(c&&j){l+=(l?";":"")+f+":"+p}else{l+=(l?",":"")+f+"="+p}}});z.features=A;z.params=h;z.onOpen.dispatch(z,A,h);v=A.url||A.file;v=d._addVer(v);try{if(c&&j){r=1;window.showModalDialog(v,window,l)}else{r=window.open(v,A.name,l)}}catch(m){}if(!r){alert(z.editor.getLang("popup_blocked"))}},close:function(f){f.close();this.onClose.dispatch(this)},createInstance:function(j,h,g,n,m,l){var k=d.resolve(j);return new k(h,g,n,m,l)},confirm:function(h,f,j,g){g=g||window;f.call(j||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,k,g){var j=this;g=g||window;g.alert(j._decode(j.editor.getLang(h,h)));if(f){f.call(k||j)}},resizeBy:function(f,g,h){h.resizeBy(f,g)},_decode:function(f){return d.DOM.decode(f).replace(/\\n/g,"\n")}})}(tinymce));(function(a){a.Formatter=function(ac){var S={},V=a.each,c=ac.dom,s=ac.selection,v=a.dom.TreeWalker,Q=new a.dom.RangeUtils(c),d=ac.schema.isValidChild,L=c.isBlock,n=ac.settings.forced_root_block,u=c.nodeIndex,K=a.isGecko?"\u200B":"\uFEFF",e=/^(src|href|style)$/,Z=false,G=true,H,B=c.getContentEditable;function E(ad){return ad instanceof Array}function o(ae,ad){return c.getParents(ae,ad,c.getRoot())}function b(ad){return ad.nodeType===1&&ad.id==="_mce_caret"}function k(){m({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(ad){return true},onformat:function(af,ad,ae){V(ae,function(ah,ag){c.setAttrib(af,ag,ah)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});V("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(ad){m(ad,{block:ad,remove:"all"})});m(ac.settings.formats)}function Y(){ac.addShortcut("ctrl+b","bold_desc","Bold");ac.addShortcut("ctrl+i","italic_desc","Italic");ac.addShortcut("ctrl+u","underline_desc","Underline");for(var ad=1;ad<=6;ad++){ac.addShortcut("ctrl+"+ad,"",["FormatBlock",false,"h"+ad])}ac.addShortcut("ctrl+7","",["FormatBlock",false,"p"]);ac.addShortcut("ctrl+8","",["FormatBlock",false,"div"]);ac.addShortcut("ctrl+9","",["FormatBlock",false,"address"])}function X(ad){return ad?S[ad]:S}function m(ad,ae){if(ad){if(typeof(ad)!=="string"){V(ad,function(ag,af){m(af,ag)})}else{ae=ae.length?ae:[ae];V(ae,function(af){if(af.deep===H){af.deep=!af.selector}if(af.split===H){af.split=!af.selector||af.inline}if(af.remove===H&&af.selector&&!af.inline){af.remove="none"}if(af.selector&&af.inline){af.mixed=true;af.block_expand=true}if(typeof(af.classes)==="string"){af.classes=af.classes.split(/\s+/)}});S[ad]=ae}}}var j=function(ae){var ad;ac.dom.getParent(ae,function(af){ad=ac.dom.getStyle(af,"text-decoration");return ad&&ad!=="none"});return ad};var O=function(ad){var ae;if(ad.nodeType===1&&ad.parentNode&&ad.parentNode.nodeType===1){ae=j(ad.parentNode);if(ac.dom.getStyle(ad,"color")&&ae){ac.dom.setStyle(ad,"text-decoration",ae)}else{if(ac.dom.getStyle(ad,"textdecoration")===ae){ac.dom.setStyle(ad,"text-decoration",null)}}}};function aa(ag,an,ai){var aj=X(ag),ao=aj[0],am,ae,al,ak=s.isCollapsed();function ad(at,ar){ar=ar||ao;if(at){if(ar.onformat){ar.onformat(at,ar,an,ai)}V(ar.styles,function(av,au){c.setStyle(at,au,r(av,an))});V(ar.attributes,function(av,au){c.setAttrib(at,au,r(av,an))});V(ar.classes,function(au){au=r(au,an);if(!c.hasClass(at,au)){c.addClass(at,au)}})}}function ah(){function au(aA,ay){var az=new v(ay);for(ai=az.current();ai;ai=az.prev()){if(ai.childNodes.length>1||ai==aA||ai.tagName=="BR"){return ai}}}var at=ac.selection.getRng();var ax=at.startContainer;var ar=at.endContainer;if(ax!=ar&&at.endOffset===0){var aw=au(ax,ar);var av=aw.nodeType==3?aw.length:aw.childNodes.length;at.setEnd(aw,av)}return at}function af(av,aA,ay,ax,at){var ar=[],au=-1,az,aC=-1,aw=-1,aB;V(av.childNodes,function(aE,aD){if(aE.nodeName==="UL"||aE.nodeName==="OL"){au=aD;az=aE;return false}});V(av.childNodes,function(aE,aD){if(aE.nodeName==="SPAN"&&c.getAttrib(aE,"data-mce-type")=="bookmark"){if(aE.id==aA.id+"_start"){aC=aD}else{if(aE.id==aA.id+"_end"){aw=aD}}}});if(au<=0||(aC<au&&aw>au)){V(a.grep(av.childNodes),at);return 0}else{aB=c.clone(ay,Z);V(a.grep(av.childNodes),function(aE,aD){if((aC<au&&aD<au)||(aC>au&&aD>au)){ar.push(aE);aE.parentNode.removeChild(aE)}});if(aC<au){av.insertBefore(aB,az)}else{if(aC>au){av.insertBefore(aB,az.nextSibling)}}ax.push(aB);V(ar,function(aD){aB.appendChild(aD)});return aB}}function ap(at,av,ay){var ar=[],ax,au,aw=true;ax=ao.inline||ao.block;au=c.create(ax);ad(au);Q.walk(at,function(az){var aA;function aB(aC){var aH,aF,aD,aE,aG;aG=aw;aH=aC.nodeName.toLowerCase();aF=aC.parentNode.nodeName.toLowerCase();if(aC.nodeType===1&&B(aC)){aG=aw;aw=B(aC)==="true";aE=true}if(g(aH,"br")){aA=0;if(ao.block){c.remove(aC)}return}if(ao.wrapper&&C(aC,ag,an)){aA=0;return}if(aw&&!aE&&ao.block&&!ao.wrapper&&M(aH)){aC=c.rename(aC,ax);ad(aC);ar.push(aC);aA=0;return}if(ao.selector){V(aj,function(aI){if("collapsed" in aI&&aI.collapsed!==ak){return}if(c.is(aC,aI.selector)&&!b(aC)){ad(aC,aI);aD=true}});if(!ao.inline||aD){aA=0;return}}if(aw&&!aE&&d(ax,aH)&&d(aF,ax)&&!(!ay&&aC.nodeType===3&&aC.nodeValue.length===1&&aC.nodeValue.charCodeAt(0)===65279)&&!b(aC)){if(!aA){aA=c.clone(au,Z);aC.parentNode.insertBefore(aA,aC);ar.push(aA)}aA.appendChild(aC)}else{if(aH=="li"&&av){aA=af(aC,av,au,ar,aB)}else{aA=0;V(a.grep(aC.childNodes),aB);if(aE){aw=aG}aA=0}}}V(az,aB)});if(ao.wrap_links===false){V(ar,function(az){function aA(aE){var aD,aC,aB;if(aE.nodeName==="A"){aC=c.clone(au,Z);ar.push(aC);aB=a.grep(aE.childNodes);for(aD=0;aD<aB.length;aD++){aC.appendChild(aB[aD])}aE.appendChild(aC)}V(a.grep(aE.childNodes),aA)}aA(az)})}V(ar,function(aB){var az;function aC(aE){var aD=0;V(aE.childNodes,function(aF){if(!f(aF)&&!N(aF)){aD++}});return aD}function aA(aD){var aF,aE;V(aD.childNodes,function(aG){if(aG.nodeType==1&&!N(aG)&&!b(aG)){aF=aG;return Z}});if(aF&&h(aF,ao)){aE=c.clone(aF,Z);ad(aE);c.replace(aE,aD,G);c.remove(aF,1)}return aE||aD}az=aC(aB);if((ar.length>1||!L(aB))&&az===0){c.remove(aB,1);return}if(ao.inline||ao.wrapper){if(!ao.exact&&az===1){aB=aA(aB)}V(aj,function(aD){V(c.select(aD.inline,aB),function(aF){var aE;if(aD.wrap_links===false){aE=aF.parentNode;do{if(aE.nodeName==="A"){return}}while(aE=aE.parentNode)}ab(aD,an,aF,aD.exact?aF:null)})});if(C(aB.parentNode,ag,an)){c.remove(aB,1);aB=0;return G}if(ao.merge_with_parents){c.getParent(aB.parentNode,function(aD){if(C(aD,ag,an)){c.remove(aB,1);aB=0;return G}})}if(aB&&ao.merge_siblings!==false){aB=z(I(aB),aB);aB=z(aB,I(aB,G))}}})}if(ao){if(ai){if(ai.nodeType){ae=c.createRng();ae.setStartBefore(ai);ae.setEndAfter(ai);ap(q(ae,aj),null,true)}else{ap(ai,null,true)}}else{if(!ak||!ao.inline||c.select("td.mceSelected,th.mceSelected").length){var aq=ac.selection.getNode();if(!n&&aj[0].defaultBlock&&!c.getParent(aq,c.isBlock)){aa(aj[0].defaultBlock)}ac.selection.setRng(ah());am=s.getBookmark();ap(q(s.getRng(G),aj),am);if(ao.styles&&(ao.styles.color||ao.styles.textDecoration)){a.walk(aq,O,"childNodes");O(aq)}s.moveToBookmark(am);T(s.getRng(G));ac.nodeChanged()}else{W("apply",ag,an)}}}}function F(af,ao,ah){var ai=X(af),aq=ai[0],am,al,ae,an=true;function ag(ax){var aw,av,au,at,az,ay;if(ax.nodeType===1&&B(ax)){az=an;an=B(ax)==="true";ay=true}aw=a.grep(ax.childNodes);if(an&&!ay){for(av=0,au=ai.length;av<au;av++){if(ab(ai[av],ao,ax,ax)){break}}}if(aq.deep){if(aw.length){for(av=0,au=aw.length;av<au;av++){ag(aw[av])}if(ay){an=az}}}}function aj(at){var au;V(o(at.parentNode).reverse(),function(av){var aw;if(!au&&av.id!="_start"&&av.id!="_end"){aw=C(av,af,ao);if(aw&&aw.split!==false){au=av}}});return au}function ad(aw,at,ay,aB){var aC,aA,az,av,ax,au;if(aw){au=aw.parentNode;for(aC=at.parentNode;aC&&aC!=au;aC=aC.parentNode){aA=c.clone(aC,Z);for(ax=0;ax<ai.length;ax++){if(ab(ai[ax],ao,aA,aA)){aA=0;break}}if(aA){if(az){aA.appendChild(az)}if(!av){av=aA}az=aA}}if(aB&&(!aq.mixed||!L(aw))){at=c.split(aw,at)}if(az){ay.parentNode.insertBefore(az,ay);av.appendChild(ay)}}return at}function ap(at){return ad(aj(at),at,at,true)}function ak(av){var au=c.get(av?"_start":"_end"),at=au[av?"firstChild":"lastChild"];if(N(at)){at=at[av?"firstChild":"lastChild"]}c.remove(au,true);return at}function ar(at){var av,aw,au;at=q(at,ai,G);if(aq.split){av=P(at,G);aw=P(at);if(av!=aw){au=av.firstChild;if(av.nodeName=="TD"&&au){av=au}av=U(av,"span",{id:"_start","data-mce-type":"bookmark"});aw=U(aw,"span",{id:"_end","data-mce-type":"bookmark"});ap(av);ap(aw);av=ak(G);aw=ak()}else{av=aw=ap(av)}at.startContainer=av.parentNode;at.startOffset=u(av);at.endContainer=aw.parentNode;at.endOffset=u(aw)+1}Q.walk(at,function(ax){V(ax,function(ay){ag(ay);if(ay.nodeType===1&&ac.dom.getStyle(ay,"text-decoration")==="underline"&&ay.parentNode&&j(ay.parentNode)==="underline"){ab({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,ay)}})})}if(ah){if(ah.nodeType){ae=c.createRng();ae.setStartBefore(ah);ae.setEndAfter(ah);ar(ae)}else{ar(ah)}return}if(!s.isCollapsed()||!aq.inline||c.select("td.mceSelected,th.mceSelected").length){am=s.getBookmark();ar(s.getRng(G));s.moveToBookmark(am);if(aq.inline&&l(af,ao,s.getStart())){T(s.getRng(true))}ac.nodeChanged()}else{W("remove",af,ao)}}function J(ae,ag,af){var ad=X(ae);if(l(ae,ag,af)&&(!("toggle" in ad[0])||ad[0].toggle)){F(ae,ag,af)}else{aa(ae,ag,af)}}function C(ae,ad,aj,ah){var af=X(ad),ak,ai,ag;function al(ap,ar,at){var ao,aq,am=ar[at],an;if(ar.onmatch){return ar.onmatch(ap,ar,at)}if(am){if(am.length===H){for(ao in am){if(am.hasOwnProperty(ao)){if(at==="attributes"){aq=c.getAttrib(ap,ao)}else{aq=R(ap,ao)}if(ah&&!aq&&!ar.exact){return}if((!ah||ar.exact)&&!g(aq,r(am[ao],aj))){return}}}}else{for(an=0;an<am.length;an++){if(at==="attributes"?c.getAttrib(ap,am[an]):R(ap,am[an])){return ar}}}}return ar}if(af&&ae){for(ai=0;ai<af.length;ai++){ak=af[ai];if(h(ae,ak)&&al(ae,ak,"attributes")&&al(ae,ak,"styles")){if(ag=ak.classes){for(ai=0;ai<ag.length;ai++){if(!c.hasClass(ae,ag[ai])){return}}}return ak}}}}function l(af,ah,ag){var ae;function ad(ai){ai=c.getParent(ai,function(aj){return !!C(aj,af,ah,true)});return C(ai,af,ah)}if(ag){return ad(ag)}ag=s.getNode();if(ad(ag)){return G}ae=s.getStart();if(ae!=ag){if(ad(ae)){return G}}return Z}function A(ak,aj){var ah,ai=[],ag={},af,ae,ad;ah=s.getStart();c.getParent(ah,function(an){var am,al;for(am=0;am<ak.length;am++){al=ak[am];if(!ag[al]&&C(an,al,aj)){ag[al]=true;ai.push(al)}}});return ai}function D(ah){var aj=X(ah),ag,af,ai,ae,ad;if(aj){ag=s.getStart();af=o(ag);for(ae=aj.length-1;ae>=0;ae--){ad=aj[ae].selector;if(!ad){return G}for(ai=af.length-1;ai>=0;ai--){if(c.is(af[ai],ad)){return G}}}}return Z}a.extend(this,{get:X,register:m,apply:aa,remove:F,toggle:J,match:l,matchAll:A,matchNode:C,canApply:D});k();Y();function h(ad,ae){if(g(ad,ae.inline)){return G}if(g(ad,ae.block)){return G}if(ae.selector){return c.is(ad,ae.selector)}}function g(ae,ad){ae=ae||"";ad=ad||"";ae=""+(ae.nodeName||ae);ad=""+(ad.nodeName||ad);return ae.toLowerCase()==ad.toLowerCase()}function R(ae,ad){var af=c.getStyle(ae,ad);if(ad=="color"||ad=="backgroundColor"){af=c.toHex(af)}if(ad=="fontWeight"&&af==700){af="bold"}return""+af}function r(ad,ae){if(typeof(ad)!="string"){ad=ad(ae)}else{if(ae){ad=ad.replace(/%(\w+)/g,function(ag,af){return ae[af]||ag})}}return ad}function f(ad){return ad&&ad.nodeType===3&&/^([\t \r\n]+|)$/.test(ad.nodeValue)}function U(af,ae,ad){var ag=c.create(ae,ad);af.parentNode.insertBefore(ag,af);ag.appendChild(af);return ag}function q(ad,ao,ag){var ar,ap,aj,an,af=ad.startContainer,ak=ad.startOffset,au=ad.endContainer,am=ad.endOffset;function aq(aB){var aw,az,aA,ay,ax,av;aw=az=aB?af:au;ax=aB?"previousSibling":"nextSibling";av=c.getRoot();if(aw.nodeType==3&&!f(aw)){if(aB?ak>0:am<aw.nodeValue.length){return aw}}for(;;){if(!ao[0].block_expand&&L(az)){return az}for(ay=az[ax];ay;ay=ay[ax]){if(!N(ay)&&!f(ay)){return az}}if(az.parentNode==av){aw=az;break}az=az.parentNode}return aw}function ai(av,aw){if(aw===H){aw=av.nodeType===3?av.length:av.childNodes.length}while(av&&av.hasChildNodes()){av=av.childNodes[aw];if(av){aw=av.nodeType===3?av.length:av.childNodes.length}}return{node:av,offset:aw}}if(af.nodeType==1&&af.hasChildNodes()){ap=af.childNodes.length-1;af=af.childNodes[ak>ap?ap:ak];if(af.nodeType==3){ak=0}}if(au.nodeType==1&&au.hasChildNodes()){ap=au.childNodes.length-1;au=au.childNodes[am>ap?ap:am-1];if(au.nodeType==3){am=au.nodeValue.length}}function at(aw){var av=aw;while(av){if(av.nodeType===1&&B(av)){return B(av)==="false"?av:aw}av=av.parentNode}return aw}function al(aw,aA,aC){var az,ax,aB,av;function ay(aE,aG){var aH,aD,aF=aE.nodeValue;if(typeof(aG)=="undefined"){aG=aC?aF.length:0}if(aC){aH=aF.lastIndexOf(" ",aG);aD=aF.lastIndexOf("\u00a0",aG);aH=aH>aD?aH:aD;if(aH!==-1&&!ag){aH++}}else{aH=aF.indexOf(" ",aG);aD=aF.indexOf("\u00a0",aG);aH=aH!==-1&&(aD===-1||aH<aD)?aH:aD}return aH}if(aw.nodeType===3){aB=ay(aw,aA);if(aB!==-1){return{container:aw,offset:aB}}av=aw}az=new v(aw,c.getParent(aw,L)||ac.getBody());while(ax=az[aC?"prev":"next"]()){if(ax.nodeType===3){av=ax;aB=ay(ax);if(aB!==-1){return{container:ax,offset:aB}}}else{if(L(ax)){break}}}if(av){if(aC){aA=0}else{aA=av.length}return{container:av,offset:aA}}}function ah(aw,av){var ax,ay,aA,az;if(aw.nodeType==3&&aw.nodeValue.length===0&&aw[av]){aw=aw[av]}ax=o(aw);for(ay=0;ay<ax.length;ay++){for(aA=0;aA<ao.length;aA++){az=ao[aA];if("collapsed" in az&&az.collapsed!==ad.collapsed){continue}if(c.is(ax[ay],az.selector)){return ax[ay]}}}return aw}function ae(aw,av,ay){var ax;if(!ao[0].wrapper){ax=c.getParent(aw,ao[0].block)}if(!ax){ax=c.getParent(aw.nodeType==3?aw.parentNode:aw,L)}if(ax&&ao[0].wrapper){ax=o(ax,"ul,ol").reverse()[0]||ax}if(!ax){ax=aw;while(ax[av]&&!L(ax[av])){ax=ax[av];if(g(ax,"br")){break}}}return ax||aw}af=at(af);au=at(au);if(N(af.parentNode)||N(af)){af=N(af)?af:af.parentNode;af=af.nextSibling||af;if(af.nodeType==3){ak=0}}if(N(au.parentNode)||N(au)){au=N(au)?au:au.parentNode;au=au.previousSibling||au;if(au.nodeType==3){am=au.length}}if(ao[0].inline){if(ad.collapsed){an=al(af,ak,true);if(an){af=an.container;ak=an.offset}an=al(au,am);if(an){au=an.container;am=an.offset}}aj=ai(au,am);if(aj.node){while(aj.node&&aj.offset===0&&aj.node.previousSibling){aj=ai(aj.node.previousSibling)}if(aj.node&&aj.offset>0&&aj.node.nodeType===3&&aj.node.nodeValue.charAt(aj.offset-1)===" "){if(aj.offset>1){au=aj.node;au.splitText(aj.offset-1)}}}}if(ao[0].inline||ao[0].block_expand){if(!ao[0].inline||(af.nodeType!=3||ak===0)){af=aq(true)}if(!ao[0].inline||(au.nodeType!=3||am===au.nodeValue.length)){au=aq()}}if(ao[0].selector&&ao[0].expand!==Z&&!ao[0].inline){af=ah(af,"previousSibling");au=ah(au,"nextSibling")}if(ao[0].block||ao[0].selector){af=ae(af,"previousSibling");au=ae(au,"nextSibling");if(ao[0].block){if(!L(af)){af=aq(true)}if(!L(au)){au=aq()}}}if(af.nodeType==1){ak=u(af);af=af.parentNode}if(au.nodeType==1){am=u(au)+1;au=au.parentNode}return{startContainer:af,startOffset:ak,endContainer:au,endOffset:am}}function ab(aj,ai,ag,ad){var af,ae,ah;if(!h(ag,aj)){return Z}if(aj.remove!="all"){V(aj.styles,function(al,ak){al=r(al,ai);if(typeof(ak)==="number"){ak=al;ad=0}if(!ad||g(R(ad,ak),al)){c.setStyle(ag,ak,"")}ah=1});if(ah&&c.getAttrib(ag,"style")==""){ag.removeAttribute("style");ag.removeAttribute("data-mce-style")}V(aj.attributes,function(am,ak){var al;am=r(am,ai);if(typeof(ak)==="number"){ak=am;ad=0}if(!ad||g(c.getAttrib(ad,ak),am)){if(ak=="class"){am=c.getAttrib(ag,ak);if(am){al="";V(am.split(/\s+/),function(an){if(/mce\w+/.test(an)){al+=(al?" ":"")+an}});if(al){c.setAttrib(ag,ak,al);return}}}if(ak=="class"){ag.removeAttribute("className")}if(e.test(ak)){ag.removeAttribute("data-mce-"+ak)}ag.removeAttribute(ak)}});V(aj.classes,function(ak){ak=r(ak,ai);if(!ad||c.hasClass(ad,ak)){c.removeClass(ag,ak)}});ae=c.getAttribs(ag);for(af=0;af<ae.length;af++){if(ae[af].nodeName.indexOf("_")!==0){return Z}}}if(aj.remove!="none"){p(ag,aj);return G}}function p(af,ag){var ad=af.parentNode,ae;function ah(aj,ai,ak){aj=I(aj,ai,ak);return !aj||(aj.nodeName=="BR"||L(aj))}if(ag.block){if(!n){if(L(af)&&!L(ad)){if(!ah(af,Z)&&!ah(af.firstChild,G,1)){af.insertBefore(c.create("br"),af.firstChild)}if(!ah(af,G)&&!ah(af.lastChild,Z,1)){af.appendChild(c.create("br"))}}}else{if(ad==c.getRoot()){if(!ag.list_block||!g(af,ag.list_block)){V(a.grep(af.childNodes),function(ai){if(d(n,ai.nodeName.toLowerCase())){if(!ae){ae=U(ai,n)}else{ae.appendChild(ai)}}else{ae=0}})}}}}if(ag.selector&&ag.inline&&!g(ag.inline,af)){return}c.remove(af,1)}function I(ae,ad,af){if(ae){ad=ad?"nextSibling":"previousSibling";for(ae=af?ae:ae[ad];ae;ae=ae[ad]){if(ae.nodeType==1||!f(ae)){return ae}}}}function N(ad){return ad&&ad.nodeType==1&&ad.getAttribute("data-mce-type")=="bookmark"}function z(ah,ag){var ad,af,ae;function aj(am,al){if(am.nodeName!=al.nodeName){return Z}function ak(ao){var ap={};V(c.getAttribs(ao),function(aq){var ar=aq.nodeName.toLowerCase();if(ar.indexOf("_")!==0&&ar!=="style"){ap[ar]=c.getAttrib(ao,ar)}});return ap}function an(ar,aq){var ap,ao;for(ao in ar){if(ar.hasOwnProperty(ao)){ap=aq[ao];if(ap===H){return Z}if(ar[ao]!=ap){return Z}delete aq[ao]}}for(ao in aq){if(aq.hasOwnProperty(ao)){return Z}}return G}if(!an(ak(am),ak(al))){return Z}if(!an(c.parseStyle(c.getAttrib(am,"style")),c.parseStyle(c.getAttrib(al,"style")))){return Z}return G}function ai(al,ak){for(af=al;af;af=af[ak]){if(af.nodeType==3&&af.nodeValue.length!==0){return al}if(af.nodeType==1&&!N(af)){return af}}return al}if(ah&&ag){ah=ai(ah,"previousSibling");ag=ai(ag,"nextSibling");if(aj(ah,ag)){for(af=ah.nextSibling;af&&af!=ag;){ae=af;af=af.nextSibling;ah.appendChild(ae)}c.remove(ag);V(a.grep(ag.childNodes),function(ak){ah.appendChild(ak)});return ah}}return ag}function M(ad){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(ad)}function P(ae,ai){var ad,ah,af,ag;ad=ae[ai?"startContainer":"endContainer"];ah=ae[ai?"startOffset":"endOffset"];if(ad.nodeType==1){af=ad.childNodes.length-1;if(!ai&&ah){ah--}ad=ad.childNodes[ah>af?af:ah]}if(ad.nodeType===3&&ai&&ah>=ad.nodeValue.length){ad=new v(ad,ac.getBody()).next()||ad}if(ad.nodeType===3&&!ai&&ah===0){ad=new v(ad,ac.getBody()).prev()||ad}return ad}function W(am,ad,ak){var an="_mce_caret",ae=ac.settings.caret_debug;function af(aq){var ap=c.create("span",{id:an,"data-mce-bogus":true,style:ae?"color:red":""});if(aq){ap.appendChild(ac.getDoc().createTextNode(K))}return ap}function al(aq,ap){while(aq){if((aq.nodeType===3&&aq.nodeValue!==K)||aq.childNodes.length>1){return false}if(ap&&aq.nodeType===1){ap.push(aq)}aq=aq.firstChild}return true}function ai(ap){while(ap){if(ap.id===an){return ap}ap=ap.parentNode}}function ah(ap){var aq;if(ap){aq=new v(ap,ap);for(ap=aq.current();ap;ap=aq.next()){if(ap.nodeType===3){return ap}}}}function ag(ar,aq){var at,ap;if(!ar){ar=ai(s.getStart());if(!ar){while(ar=c.get(an)){ag(ar,false)}}}else{ap=s.getRng(true);if(al(ar)){if(aq!==false){ap.setStartBefore(ar);ap.setEndBefore(ar)}c.remove(ar)}else{at=ah(ar);if(at.nodeValue.charAt(0)===K){at=at.deleteData(0,1)}c.remove(ar,1)}s.setRng(ap)}}function aj(){var ar,ap,aw,av,at,aq,au;ar=s.getRng(true);av=ar.startOffset;aq=ar.startContainer;au=aq.nodeValue;ap=ai(s.getStart());if(ap){aw=ah(ap)}if(au&&av>0&&av<au.length&&/\w/.test(au.charAt(av))&&/\w/.test(au.charAt(av-1))){at=s.getBookmark();ar.collapse(true);ar=q(ar,X(ad));ar=Q.split(ar);aa(ad,ak,ar);s.moveToBookmark(at)}else{if(!ap||aw.nodeValue!==K){ap=af(true);aw=ap.firstChild;ar.insertNode(ap);av=1;aa(ad,ak,ap)}else{aa(ad,ak,ap)}s.setCursorLocation(aw,av)}}function ao(){var ap=s.getRng(true),aq,at,aw,av,ar,az,ay=[],au,ax;aq=ap.startContainer;at=ap.startOffset;ar=aq;if(aq.nodeType==3){if(at!=aq.nodeValue.length||aq.nodeValue===K){av=true}ar=ar.parentNode}while(ar){if(C(ar,ad,ak)){az=ar;break}if(ar.nextSibling){av=true}ay.push(ar);ar=ar.parentNode}if(!az){return}if(av){aw=s.getBookmark();ap.collapse(true);ap=q(ap,X(ad),true);ap=Q.split(ap);F(ad,ak,ap);s.moveToBookmark(aw)}else{ax=af();ar=ax;for(au=ay.length-1;au>=0;au--){ar.appendChild(c.clone(ay[au],false));ar=ar.firstChild}ar.appendChild(c.doc.createTextNode(K));ar=ar.firstChild;c.insertAfter(ax,az);s.setCursorLocation(ar,1)}}if(!self._hasCaretEvents){ac.onBeforeGetContent.addToTop(function(){var ap=[],aq;if(al(ai(s.getStart()),ap)){aq=ap.length;while(aq--){c.setAttrib(ap[aq],"data-mce-bogus","1")}}});a.each("onMouseUp onKeyUp".split(" "),function(ap){ac[ap].addToTop(function(){ag()})});ac.onKeyDown.addToTop(function(ap,ar){var aq=ar.keyCode;if(aq==8||aq==37||aq==39){ag(ai(s.getStart()))}});self._hasCaretEvents=true}if(am=="apply"){aj()}else{ao()}}function T(ae){var ad=ae.startContainer,ak=ae.startOffset,ag,aj,ai,af,ah;if(ad.nodeType==3&&ak>=ad.nodeValue.length){ak=u(ad);ad=ad.parentNode;ag=true}if(ad.nodeType==1){af=ad.childNodes;ad=af[Math.min(ak,af.length-1)];aj=new v(ad,c.getParent(ad,c.isBlock));if(ak>af.length-1||ag){aj.next()}for(ai=aj.current();ai;ai=aj.next()){if(ai.nodeType==3&&!f(ai)){ah=c.create("a",null,K);ai.parentNode.insertBefore(ah,ai);ae.setStart(ai,0);s.setRng(ae);c.remove(ah);return}}}}}})(tinymce);tinymce.onAddEditor.add(function(e,a){var d,h,g,c=a.settings;function b(k,j){e.each(j,function(m,l){if(m){g.setStyle(k,l,m)}});g.rename(k,"span")}function f(j,k){g=j.dom;if(c.convert_fonts_to_spans){e.each(g.select("font,u,strike",k.node),function(l){d[l.nodeName.toLowerCase()](a.dom,l)})}}if(c.inline_styles){h=e.explode(c.font_size_legacy_values);d={font:function(k,j){b(j,{backgroundColor:j.style.backgroundColor,color:j.color,fontFamily:j.face,fontSize:h[parseInt(j.size,10)-1]})},u:function(k,j){b(j,{textDecoration:"underline"})},strike:function(k,j){b(j,{textDecoration:"line-through"})}};a.onPreProcess.add(f);a.onSetContent.add(f);a.onInit.add(function(){a.selection.onSetContent.add(f)})}});(function(b){var a=b.dom.TreeWalker;b.EnterKey=function(e){var h=e.dom,d=e.selection,c=e.settings,g=e.undoManager;function f(C){var z=d.getRng(true),G,j,B,v,p,L,o,k,m,u,I,A,D;function F(M){return M&&h.isBlock(M)&&!/^(TD|TH|CAPTION)$/.test(M.nodeName)&&!/^(fixed|absolute)/i.test(M.style.position)&&h.getContentEditable(M)!=="true"}function n(N){var S,Q,M,T,R,P=N,O;M=h.createRng();if(N.hasChildNodes()){S=new a(N,N);while(Q=S.current()){if(Q.nodeType==3){M.setStart(Q,0);M.setEnd(Q,0);break}if(/^(BR|IMG)$/.test(Q.nodeName)){M.setStartBefore(Q);M.setEndBefore(Q);break}P=Q;Q=S.next()}if(!Q){M.setStart(P,0);M.setEnd(P,0)}}else{if(N.nodeName=="BR"){if(N.nextSibling&&h.isBlock(N.nextSibling)){if(!L||L<9){O=h.create("br");N.parentNode.insertBefore(O,N)}M.setStartBefore(N);M.setEndBefore(N)}else{M.setStartAfter(N);M.setEndAfter(N)}}else{M.setStart(N,0);M.setEnd(N,0)}}d.setRng(M);h.remove(O);R=h.getViewPort(e.getWin());T=h.getPos(N).y;if(T<R.y||T+25>R.y+R.h){e.getWin().scrollTo(0,T<R.y?T:T-R.h+25)}}function r(N){var O=B,Q,P,M;Q=N||u=="TABLE"?h.create(N||A):p.cloneNode(false);M=Q;if(c.keep_styles!==false){do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(O.nodeName)){P=O.cloneNode(false);h.setAttrib(P,"id","");if(Q.hasChildNodes()){P.appendChild(Q.firstChild);Q.appendChild(P)}else{M=P;Q.appendChild(P)}}}while(O=O.parentNode)}if(!b.isIE){M.innerHTML="<br>"}return Q}function q(P){var O,N,M;if(B.nodeType==3&&(P?v>0:v<B.nodeValue.length)){return false}if(B.parentNode==p&&D&&!P){return true}if(B.nodeName==="TABLE"||(B.previousSibling&&B.previousSibling.nodeName=="TABLE")){return(D&&!P)||(!D&&P)}O=new a(B,p);while(N=(P?O.prev():O.next())){if(N.nodeType===1){if(N.getAttribute("data-mce-bogus")){continue}M=N.nodeName.toLowerCase();if(M==="IMG"){return false}}else{if(N.nodeType===3&&!/^[ \t\r\n]*$/.test(N.nodeValue)){return false}}}return true}function l(M,S){var T,R,O,Q,P,N=A||"P";R=h.getParent(M,h.isBlock);if(!R||!F(R)){R=R||j;if(!R.hasChildNodes()){T=h.create(N);R.appendChild(T);z.setStart(T,0);z.setEnd(T,0);return T}Q=M;while(Q.parentNode!=R){Q=Q.parentNode}while(Q&&!h.isBlock(Q)){O=Q;Q=Q.previousSibling}if(O){T=h.create(N);O.parentNode.insertBefore(T,O);Q=O;while(Q&&!h.isBlock(Q)){P=Q.nextSibling;T.appendChild(Q);Q=P}z.setStart(M,S);z.setEnd(M,S)}}return M}function H(){function M(O){var N=m[O?"firstChild":"lastChild"];while(N){if(N.nodeType==1){break}N=N[O?"nextSibling":"previousSibling"]}return N===p}o=A?r(A):h.create("BR");if(M(true)&&M()){h.replace(o,m)}else{if(M(true)){m.parentNode.insertBefore(o,m)}else{if(M()){h.insertAfter(o,m)}else{G=z.cloneRange();G.setStartAfter(p);G.setEndAfter(m);k=G.extractContents();h.insertAfter(k,m);h.insertAfter(o,m)}}}h.remove(p);n(o);g.add()}function E(){var N=new a(B,p),M;while(M=N.current()){if(M.nodeName=="BR"){return true}M=N.next()}}function K(){var N,M;if(B&&B.nodeType==3&&v>=B.nodeValue.length){if(!b.isIE&&!E()){N=h.create("br");z.insertNode(N);z.setStartAfter(N);z.setEndAfter(N);M=true}}N=h.create("br");z.insertNode(N);if(b.isIE&&u=="PRE"&&(!L||L<8)){N.parentNode.insertBefore(h.doc.createTextNode("\r"),N)}if(!M){z.setStartAfter(N);z.setEndAfter(N)}else{z.setStartBefore(N);z.setEndBefore(N)}d.setRng(z);g.add()}function s(M){do{if(M.nodeType===3){M.nodeValue=M.nodeValue.replace(/^[\r\n]+/,"")}M=M.firstChild}while(M)}function J(O){var M=h.getRoot(),N,P;N=O;while(N!==M&&h.getContentEditable(N)!=="false"){if(h.getContentEditable(N)==="true"){P=N}N=N.parentNode}return N!==M?P:M}if(!z.collapsed){e.execCommand("Delete");return}if(C.isDefaultPrevented()){return}B=z.startContainer;v=z.startOffset;A=c.forced_root_block;A=A?A.toUpperCase():"";L=h.doc.documentMode;if(B.nodeType==1&&B.hasChildNodes()){D=v>B.childNodes.length-1;B=B.childNodes[Math.min(v,B.childNodes.length-1)]||B;v=0}j=J(B);if(!j){return}g.beforeChange();if(!h.isBlock(j)&&j!=h.getRoot()){if(!A||C.shiftKey){K()}return}if((A&&!C.shiftKey)||(!A&&C.shiftKey)){B=l(B,v)}p=h.getParent(B,h.isBlock);m=p?h.getParent(p.parentNode,h.isBlock):null;u=p?p.nodeName.toUpperCase():"";I=m?m.nodeName.toUpperCase():"";if(u=="LI"&&h.isEmpty(p)){if(/^(UL|OL|LI)$/.test(m.parentNode.nodeName)){return false}H();return}if(u=="PRE"&&c.br_in_pre!==false){if(!C.shiftKey){K();return}}else{if((!A&&!C.shiftKey&&u!="LI")||(A&&C.shiftKey)){K();return}}A=A||"P";if(q()){if(/^(H[1-6]|PRE)$/.test(u)&&I!="HGROUP"){o=r(A)}else{o=r()}if(c.end_container_on_empty_block&&F(m)&&h.isEmpty(p)){o=h.split(m,p)}else{h.insertAfter(o,p)}}else{if(q(true)){o=p.parentNode.insertBefore(r(),p)}else{G=z.cloneRange();G.setEndAfter(p);k=G.extractContents();s(k);o=k.firstChild;h.insertAfter(k,p)}}h.setAttrib(o,"id","");n(o);g.add()}e.onKeyDown.add(function(k,j){if(j.keyCode==13){if(f(j)!==false){j.preventDefault()}}})}})(tinymce);tinyMCE.addI18n({en:{common:{more_colors:"More Colors...",invalid_data:"Error: Invalid values entered, these are marked in red.",popup_blocked:"Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.",clipboard_no_support:"Currently not supported by your browser, use keyboard shortcuts instead.",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",not_set:"-- Not Set --",class_name:"Class",browse:"Browse",close:"Close",cancel:"Cancel",update:"Update",insert:"Insert",apply:"Apply",edit_confirm:"Do you want to use the WYSIWYG mode for this textarea?",invalid_data_number:"{#field} must be a number",invalid_data_min:"{#field} must be a number greater than {#min}",invalid_data_size:"{#field} must be a number or percentage",value:"(value)"},contextmenu:{full:"Full",right:"Right",center:"Center",left:"Left",align:"Alignment"},insertdatetime:{day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sun",day_long:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday",months_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",months_long:"January,February,March,April,May,June,July,August,September,October,November,December",inserttime_desc:"Insert Time",insertdate_desc:"Insert Date",time_fmt:"%H:%M:%S",date_fmt:"%Y-%m-%d"},print:{print_desc:"Print"},preview:{preview_desc:"Preview"},directionality:{rtl_desc:"Direction Right to Left",ltr_desc:"Direction Left to Right"},layer:{content:"New layer...",absolute_desc:"Toggle Absolute Positioning",backward_desc:"Move Backward",forward_desc:"Move Forward",insertlayer_desc:"Insert New Layer"},save:{save_desc:"Save",cancel_desc:"Cancel All Changes"},nonbreaking:{nonbreaking_desc:"Insert Non-Breaking Space Character"},iespell:{download:"ieSpell not detected. Do you want to install it now?",iespell_desc:"Check Spelling"},advhr:{delta_height:"",delta_width:"",advhr_desc:"Insert Horizontal Line"},emotions:{delta_height:"",delta_width:"",emotions_desc:"Emotions"},searchreplace:{replace_desc:"Find/Replace",delta_width:"",delta_height:"",search_desc:"Find"},advimage:{delta_width:"",image_desc:"Insert/Edit Image",delta_height:""},advlink:{delta_height:"",delta_width:"",link_desc:"Insert/Edit Link"},xhtmlxtras:{attribs_delta_height:"",attribs_delta_width:"",ins_delta_height:"",ins_delta_width:"",del_delta_height:"",del_delta_width:"",acronym_delta_height:"",acronym_delta_width:"",abbr_delta_height:"",abbr_delta_width:"",cite_delta_height:"",cite_delta_width:"",attribs_desc:"Insert/Edit Attributes",ins_desc:"Insertion",del_desc:"Deletion",acronym_desc:"Acronym",abbr_desc:"Abbreviation",cite_desc:"Citation"},style:{delta_height:"",delta_width:"",desc:"Edit CSS Style"},paste:{plaintext_mode_stick:"Paste is now in plain text mode. Click again to toggle back to regular paste mode.",plaintext_mode:"Paste is now in plain text mode. Click again to toggle back to regular paste mode. After you paste something you will be returned to regular paste mode.",selectall_desc:"Select All",paste_word_desc:"Paste from Word",paste_text_desc:"Paste as Plain Text"},paste_dlg:{word_title:"Use Ctrl+V on your keyboard to paste the text into the window.",text_linebreaks:"Keep Linebreaks",text_title:"Use Ctrl+V on your keyboard to paste the text into the window."},table:{merge_cells_delta_height:"",merge_cells_delta_width:"",table_delta_height:"",table_delta_width:"",cellprops_delta_height:"",cellprops_delta_width:"",rowprops_delta_height:"",rowprops_delta_width:"",cell:"Cell",col:"Column",row:"Row",del:"Delete Table",copy_row_desc:"Copy Table Row",cut_row_desc:"Cut Table Row",paste_row_after_desc:"Paste Table Row After",paste_row_before_desc:"Paste Table Row Before",props_desc:"Table Properties",cell_desc:"Table Cell Properties",row_desc:"Table Row Properties",merge_cells_desc:"Merge Table Cells",split_cells_desc:"Split Merged Table Cells",delete_col_desc:"Delete Column",col_after_desc:"Insert Column After",col_before_desc:"Insert Column Before",delete_row_desc:"Delete Row",row_after_desc:"Insert Row After",row_before_desc:"Insert Row Before",desc:"Insert/Edit Table"},autosave:{warning_message:"If you restore the saved content, you will lose all the content that is currently in the editor.\n\nAre you sure you want to restore the saved content?",restore_content:"Restore auto-saved content.",unload_msg:"The changes you made will be lost if you navigate away from this page."},fullscreen:{desc:"Toggle Full Screen Mode"},media:{delta_height:"",delta_width:"",edit:"Edit Embedded Media",desc:"Insert/Edit Embedded Media"},fullpage:{desc:"Document Properties",delta_width:"",delta_height:""},template:{desc:"Insert Predefined Template Content"},visualchars:{desc:"Show/Hide Visual Control Characters"},spellchecker:{desc:"Toggle Spell Checker",menu:"Spell Checker Settings",ignore_word:"Ignore Word",ignore_words:"Ignore All",langs:"Languages",wait:"Please wait...",sug:"Suggestions",no_sug:"No Suggestions",no_mpell:"No misspellings found.",learn_word:"Learn word"},pagebreak:{desc:"Insert Page Break for Printing"},advlist:{types:"Types",def:"Default",lower_alpha:"Lower Alpha",lower_greek:"Lower Greek",lower_roman:"Lower Roman",upper_alpha:"Upper Alpha",upper_roman:"Upper Roman",circle:"Circle",disc:"Disc",square:"Square"},colors:{"333300":"Dark olive","993300":"Burnt orange","000000":"Black","003300":"Dark green","003366":"Dark azure","000080":"Navy Blue","333399":"Indigo","333333":"Very dark gray","800000":"Maroon",FF6600:"Orange","808000":"Olive","008000":"Green","008080":"Teal","0000FF":"Blue","666699":"Grayish blue","808080":"Gray",FF0000:"Red",FF9900:"Amber","99CC00":"Yellow green","339966":"Sea green","33CCCC":"Turquoise","3366FF":"Royal blue","800080":"Purple","999999":"Medium gray",FF00FF:"Magenta",FFCC00:"Gold",FFFF00:"Yellow","00FF00":"Lime","00FFFF":"Aqua","00CCFF":"Sky blue","993366":"Brown",C0C0C0:"Silver",FF99CC:"Pink",FFCC99:"Peach",FFFF99:"Light yellow",CCFFCC:"Pale green",CCFFFF:"Pale cyan","99CCFF":"Light sky blue",CC99FF:"Plum",FFFFFF:"White"},aria:{rich_text_area:"Rich Text Area"},wordcount:{words:"Words:"},visualblocks:{desc:"Show/hide block elements"}}});(function(h){var j=h.DOM,g=h.dom.Event,c=h.extend,f=h.each,a=h.util.Cookie,e,d=h.explode;function b(n,l){var r,q=n.dom,o="",p,m;previewStyles=n.settings.preview_styles;if(previewStyles===false){return""}if(!previewStyles){previewStyles="font-family font-size font-weight text-decoration text-transform color background-color"}function k(s){return s.replace(/%(\w+)/g,"")}name=l.block||l.inline||"span";r=q.create(name);f(l.styles,function(u,s){u=k(u);if(u){q.setStyle(r,s,u)}});f(l.attributes,function(u,s){u=k(u);if(u){q.setAttrib(r,s,u)}});f(l.classes,function(s){s=k(s);if(!q.hasClass(r,s)){q.addClass(r,s)}});q.setStyles(r,{position:"absolute",left:-65535});n.getBody().appendChild(r);p=q.getStyle(n.getBody(),"fontSize",true);p=/px$/.test(p)?parseInt(p,10):0;f(previewStyles.split(" "),function(s){var u=q.getStyle(r,s,true);if(s=="font-size"){if(/em|%$/.test(u)){if(p===0){return}u=parseFloat(u,10)/(/%$/.test(u)?100:1);u=(u*p)+"px"}}o+=s+":"+u+";"});q.remove(r);return o}h.ThemeManager.requireLangPack("advanced");h.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(l,m){var n=this,p,k,q;n.editor=l;n.url=m;n.onResolveName=new h.util.Dispatcher(this);l.forcedHighContrastMode=l.settings.detect_highcontrast&&n._isHighContrast();l.settings.skin=l.forcedHighContrastMode?"highcontrast":l.settings.skin;n.settings=p=c({theme_advanced_path:true,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:l.settings.readonly},l.settings);if(!p.font_size_style_values){p.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"}if(h.is(p.theme_advanced_font_sizes,"string")){p.font_size_style_values=h.explode(p.font_size_style_values);p.font_size_classes=h.explode(p.font_size_classes||"");q={};l.settings.theme_advanced_font_sizes=p.theme_advanced_font_sizes;f(l.getParam("theme_advanced_font_sizes","","hash"),function(s,r){var o;if(r==s&&s>=1&&s<=7){r=s+" ("+n.sizes[s-1]+"pt)";o=p.font_size_classes[s-1];s=p.font_size_style_values[s-1]||(n.sizes[s-1]+"pt")}if(/^\s*\./.test(s)){o=s.replace(/\./g,"")}q[r]=o?{"class":o}:{fontSize:s}});p.theme_advanced_font_sizes=q}if((k=p.theme_advanced_path_location)&&k!="none"){p.theme_advanced_statusbar_location=p.theme_advanced_path_location}if(p.theme_advanced_statusbar_location=="none"){p.theme_advanced_statusbar_location=0}if(l.settings.content_css!==false){l.contentCSS.push(l.baseURI.toAbsolute(m+"/skins/"+l.settings.skin+"/content.css"))}l.onInit.add(function(){if(!l.settings.readonly){l.onNodeChange.add(n._nodeChanged,n);l.onKeyUp.add(n._updateUndoStatus,n);l.onMouseUp.add(n._updateUndoStatus,n);l.dom.bind(l.dom.getRoot(),"dragend",function(){n._updateUndoStatus(l)})}});l.onSetProgressState.add(function(s,o,u){var v,z=s.id,r;if(o){n.progressTimer=setTimeout(function(){v=s.getContainer();v=v.insertBefore(j.create("DIV",{style:"position:relative"}),v.firstChild);r=j.get(s.id+"_tbl");j.add(v,"div",{id:z+"_blocker","class":"mceBlocker",style:{width:r.clientWidth+2,height:r.clientHeight+2}});j.add(v,"div",{id:z+"_progress","class":"mceProgress",style:{left:r.clientWidth/2,top:r.clientHeight/2}})},u||0)}else{j.remove(z+"_blocker");j.remove(z+"_progress");clearTimeout(n.progressTimer)}});j.loadCSS(p.editor_css?l.documentBaseURI.toAbsolute(p.editor_css):m+"/skins/"+l.settings.skin+"/ui.css");if(p.skin_variant){j.loadCSS(m+"/skins/"+l.settings.skin+"/ui_"+p.skin_variant+".css")}},_isHighContrast:function(){var k,l=j.add(j.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});k=(j.getStyle(l,"background-color",true)+"").toLowerCase().replace(/ /g,"");j.remove(l);return k!="rgb(171,239,86)"&&k!="#abef56"},createControl:function(o,k){var l,m;if(m=k.createControl(o)){return m}switch(o){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if((l=this.controls[o])){return k.createButton(o,{title:"advanced."+l[0],cmd:l[1],ui:l[2],value:l[3]})}},execCommand:function(m,l,n){var k=this["_"+m];if(k){k.call(this,l,n);return true}return false},_importClasses:function(m){var k=this.editor,l=k.controlManager.get("styleselect");if(l.getLength()==0){f(k.dom.getClasses(),function(r,n){var q="style_"+n,p;p={inline:"span",attributes:{"class":r["class"]},selector:"*"};k.formatter.register(q,p);l.add(r["class"],q,{style:function(){return b(k,p)}})})}},_createStyleSelect:function(p){var m=this,k=m.editor,l=k.controlManager,o;o=l.createListBox("styleselect",{title:"advanced.style_select",onselect:function(r){var s,n=[],q;f(o.items,function(u){n.push(u.value)});k.focus();k.undoManager.add();s=k.formatter.matchAll(n);h.each(s,function(u){if(!r||u==r){if(u){k.formatter.remove(u)}q=true}});if(!q){k.formatter.apply(r)}k.undoManager.add();k.nodeChanged();return false}});k.onPreInit.add(function(){var q=0,n=k.getParam("style_formats");if(n){f(n,function(r){var s,u=0;f(r,function(){u++});if(u>1){s=r.name=r.name||"style_"+(q++);k.formatter.register(s,r);o.add(r.title,s,{style:function(){return b(k,r)}})}else{o.add(r.title)}})}else{f(k.getParam("theme_advanced_styles","","hash"),function(v,u){var s,r;if(v){s="style_"+(q++);r={inline:"span",classes:v,selector:"*"};k.formatter.register(s,r);o.add(m.editor.translate(u),s,{style:function(){return b(k,r)}})}})}});if(o.getLength()==0){o.onPostRender.add(function(q,r){if(!o.NativeListBox){g.add(r.id+"_text","focus",m._importClasses,m);g.add(r.id+"_text","mousedown",m._importClasses,m);g.add(r.id+"_open","focus",m._importClasses,m);g.add(r.id+"_open","mousedown",m._importClasses,m)}else{g.add(r.id,"focus",m._importClasses,m)}})}return o},_createFontSelect:function(){var m,l=this,k=l.editor;m=k.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(n){var o=m.items[m.selectedIndex];if(!n&&o){k.execCommand("FontName",false,o.value);return}k.execCommand("FontName",false,n);m.select(function(p){return n==p});if(o&&o.value==n){m.select(null)}return false}});if(m){f(k.getParam("theme_advanced_fonts",l.settings.theme_advanced_fonts,"hash"),function(o,n){m.add(k.translate(n),o,{style:o.indexOf("dings")==-1?"font-family:"+o:""})})}return m},_createFontSizeSelect:function(){var n=this,l=n.editor,o,m=0,k=[];o=l.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(p){var q=o.items[o.selectedIndex];if(!p&&q){q=q.value;if(q["class"]){l.formatter.toggle("fontsize_class",{value:q["class"]});l.undoManager.add();l.nodeChanged()}else{l.execCommand("FontSize",false,q.fontSize)}return}if(p["class"]){l.focus();l.undoManager.add();l.formatter.toggle("fontsize_class",{value:p["class"]});l.undoManager.add();l.nodeChanged()}else{l.execCommand("FontSize",false,p.fontSize)}o.select(function(r){return p==r});if(q&&(q.value.fontSize==p.fontSize||q.value["class"]&&q.value["class"]==p["class"])){o.select(null)}return false}});if(o){f(n.settings.theme_advanced_font_sizes,function(q,p){var r=q.fontSize;if(r>=1&&r<=7){r=n.sizes[parseInt(r)-1]+"pt"}o.add(p,q,{style:"font-size:"+r,"class":"mceFontSize"+(m++)+(" "+(q["class"]||""))})})}return o},_createBlockFormats:function(){var m,k={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},l=this;m=l.editor.controlManager.createListBox("formatselect",{title:"advanced.block",onselect:function(n){l.editor.execCommand("FormatBlock",false,n);return false}});if(m){f(l.editor.getParam("theme_advanced_blockformats",l.settings.theme_advanced_blockformats,"hash"),function(o,n){m.add(l.editor.translate(n!=o?n:k[o]),o,{"class":"mce_formatPreview mce_"+o,style:function(){return b(l.editor,{block:o})}})})}return m},_createForeColorMenu:function(){var p,l=this,m=l.settings,n={},k;if(m.theme_advanced_more_colors){n.more_colors_func=function(){l._mceColorPicker(0,{color:p.value,func:function(o){p.setColor(o)}})}}if(k=m.theme_advanced_text_colors){n.colors=k}if(m.theme_advanced_default_foreground_color){n.default_color=m.theme_advanced_default_foreground_color}n.title="advanced.forecolor_desc";n.cmd="ForeColor";n.scope=this;p=l.editor.controlManager.createColorSplitButton("forecolor",n);return p},_createBackColorMenu:function(){var p,l=this,m=l.settings,n={},k;if(m.theme_advanced_more_colors){n.more_colors_func=function(){l._mceColorPicker(0,{color:p.value,func:function(o){p.setColor(o)}})}}if(k=m.theme_advanced_background_colors){n.colors=k}if(m.theme_advanced_default_background_color){n.default_color=m.theme_advanced_default_background_color}n.title="advanced.backcolor_desc";n.cmd="HiliteColor";n.scope=this;p=l.editor.controlManager.createColorSplitButton("backcolor",n);return p},renderUI:function(m){var r,q,u,A=this,v=A.editor,B=A.settings,z,l,k;if(v.settings){v.settings.aria_label=B.aria_label+v.getLang("advanced.help_shortcut")}r=l=j.create("span",{role:"application","aria-labelledby":v.id+"_voice",id:v.id+"_parent","class":"mceEditor "+v.settings.skin+"Skin"+(B.skin_variant?" "+v.settings.skin+"Skin"+A._ufirst(B.skin_variant):"")});j.add(r,"span",{"class":"mceVoiceLabel",style:"display:none;",id:v.id+"_voice"},B.aria_label);if(!j.boxModel){r=j.add(r,"div",{"class":"mceOldBoxModel"})}r=z=j.add(r,"table",{role:"presentation",id:v.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});r=u=j.add(r,"tbody");switch((B.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":q=A._rowLayout(B,u,m);break;case"customlayout":q=v.execCallback("theme_advanced_custom_layout",B,u,m,l);break;default:q=A._simpleLayout(B,u,m,l)}r=m.targetNode;k=z.rows;j.addClass(k[0],"mceFirst");j.addClass(k[k.length-1],"mceLast");f(j.select("tr",u),function(o){j.addClass(o.firstChild,"mceFirst");j.addClass(o.childNodes[o.childNodes.length-1],"mceLast")});if(j.get(B.theme_advanced_toolbar_container)){j.get(B.theme_advanced_toolbar_container).appendChild(l)}else{j.insertAfter(l,r)}g.add(v.id+"_path_row","click",function(n){n=n.target;if(n.nodeName=="A"){A._sel(n.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return false}});if(!v.getParam("accessibility_focus")){g.add(j.add(l,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(v.id).focus()})}if(B.theme_advanced_toolbar_location=="external"){m.deltaHeight=0}A.deltaHeight=m.deltaHeight;m.targetNode=null;v.onKeyDown.add(function(p,n){var s=121,o=122;if(n.altKey){if(n.keyCode===s){if(h.isWebKit){window.focus()}A.toolbarGroup.focus();return g.cancel(n)}else{if(n.keyCode===o){j.get(p.id+"_path_row").focus();return g.cancel(n)}}}});v.addShortcut("alt+0","","mceShortcuts",A);return{iframeContainer:q,editorContainer:v.id+"_parent",sizeContainer:z,deltaHeight:m.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:h.majorVersion+"."+h.minorVersion}},resizeBy:function(k,l){var m=j.get(this.editor.id+"_ifr");this.resizeTo(m.clientWidth+k,m.clientHeight+l)},resizeTo:function(k,o,m){var l=this.editor,n=this.settings,p=j.get(l.id+"_tbl"),q=j.get(l.id+"_ifr");k=Math.max(n.theme_advanced_resizing_min_width||100,k);o=Math.max(n.theme_advanced_resizing_min_height||100,o);k=Math.min(n.theme_advanced_resizing_max_width||65535,k);o=Math.min(n.theme_advanced_resizing_max_height||65535,o);j.setStyle(p,"height","");j.setStyle(q,"height",o);if(n.theme_advanced_resize_horizontal){j.setStyle(p,"width","");j.setStyle(q,"width",k);if(k<p.clientWidth){k=p.clientWidth;j.setStyle(q,"width",p.clientWidth)}}if(m&&n.theme_advanced_resizing_use_cookie){a.setHash("TinyMCE_"+l.id+"_size",{cw:k,ch:o})}},destroy:function(){var k=this.editor.id;g.clear(k+"_resize");g.clear(k+"_path_row");g.clear(k+"_external_close")},_simpleLayout:function(D,v,m,k){var C=this,z=C.editor,A=D.theme_advanced_toolbar_location,r=D.theme_advanced_statusbar_location,q,l,u,B;if(D.readonly){q=j.add(v,"tr");q=l=j.add(q,"td",{"class":"mceIframeContainer"});return l}if(A=="top"){C._addToolbars(v,m)}if(A=="external"){q=B=j.create("div",{style:"position:relative"});q=j.add(q,"div",{id:z.id+"_external","class":"mceExternalToolbar"});j.add(q,"a",{id:z.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});q=j.add(q,"table",{id:z.id+"_tblext",cellSpacing:0,cellPadding:0});u=j.add(q,"tbody");if(k.firstChild.className=="mceOldBoxModel"){k.firstChild.appendChild(B)}else{k.insertBefore(B,k.firstChild)}C._addToolbars(u,m);z.onMouseUp.add(function(){var o=j.get(z.id+"_external");j.show(o);j.hide(e);var n=g.add(z.id+"_external_close","click",function(){j.hide(z.id+"_external");g.remove(z.id+"_external_close","click",n)});j.show(o);j.setStyle(o,"top",0-j.getRect(z.id+"_tblext").h-1);j.hide(o);j.show(o);o.style.filter="";e=z.id+"_external";o=null})}if(r=="top"){C._addStatusBar(v,m)}if(!D.theme_advanced_toolbar_container){q=j.add(v,"tr");q=l=j.add(q,"td",{"class":"mceIframeContainer"})}if(A=="bottom"){C._addToolbars(v,m)}if(r=="bottom"){C._addStatusBar(v,m)}return l},_rowLayout:function(B,q,m){var A=this,r=A.editor,z,C,k=r.controlManager,p,l,v,u;z=B.theme_advanced_containers_default_class||"";C=B.theme_advanced_containers_default_align||"center";f(d(B.theme_advanced_containers||""),function(s,o){var n=B["theme_advanced_container_"+s]||"";switch(s.toLowerCase()){case"mceeditor":p=j.add(q,"tr");p=l=j.add(p,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":A._addStatusBar(q,m);break;default:u=(B["theme_advanced_container_"+s+"_align"]||C).toLowerCase();u="mce"+A._ufirst(u);p=j.add(j.add(q,"tr"),"td",{"class":"mceToolbar "+(B["theme_advanced_container_"+s+"_class"]||z)+" "+u||C});v=k.createToolbar("toolbar"+o);A._addControls(n,v);j.setHTML(p,v.renderHTML());m.deltaHeight-=B.theme_advanced_row_height}});return l},_addControls:function(l,k){var m=this,n=m.settings,o,p=m.editor.controlManager;if(n.theme_advanced_disable&&!m._disabled){o={};f(d(n.theme_advanced_disable),function(q){o[q]=1});m._disabled=o}else{o=m._disabled}f(d(l),function(r){var q;if(o&&o[r]){return}if(r=="tablecontrols"){f(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(s){s=m.createControl(s,p);if(s){k.add(s)}});return}q=m.createControl(r,p);if(q){k.add(q)}})},_addToolbars:function(B,l){var E=this,q,p,u=E.editor,F=E.settings,D,k=u.controlManager,z,m,r=[],C,A;A=k.createToolbarGroup("toolbargroup",{name:u.getLang("advanced.toolbar"),tab_focus_toolbar:u.getParam("theme_advanced_tab_focus_toolbar")});E.toolbarGroup=A;C=F.theme_advanced_toolbar_align.toLowerCase();C="mce"+E._ufirst(C);m=j.add(j.add(B,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+C,role:"presentation"});for(q=1;(D=F["theme_advanced_buttons"+q]);q++){p=k.createToolbar("toolbar"+q,{"class":"mceToolbarRow"+q});if(F["theme_advanced_buttons"+q+"_add"]){D+=","+F["theme_advanced_buttons"+q+"_add"]}if(F["theme_advanced_buttons"+q+"_add_before"]){D=F["theme_advanced_buttons"+q+"_add_before"]+","+D}E._addControls(D,p);A.add(p);l.deltaHeight-=F.theme_advanced_row_height}r.push(A.renderHTML());r.push(j.createHTML("a",{href:"#",accesskey:"z",title:u.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+u.id+"').focus();"},"<!-- IE -->"));j.setHTML(m,r.join(""))},_addStatusBar:function(q,l){var m,A=this,u=A.editor,B=A.settings,k,v,z,p;m=j.add(q,"tr");m=p=j.add(m,"td",{"class":"mceStatusbar"});m=j.add(m,"div",{id:u.id+"_path_row",role:"group","aria-labelledby":u.id+"_path_voice"});if(B.theme_advanced_path){j.add(m,"span",{id:u.id+"_path_voice"},u.translate("advanced.path"));j.add(m,"span",{},": ")}else{j.add(m,"span",{},"&#160;")}if(B.theme_advanced_resizing){j.add(p,"a",{id:u.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize",tabIndex:"-1"});if(B.theme_advanced_resizing_use_cookie){u.onPostRender.add(function(){var n=a.getHash("TinyMCE_"+u.id+"_size"),r=j.get(u.id+"_tbl");if(!n){return}A.resizeTo(n.cw,n.ch)})}u.onPostRender.add(function(){g.add(u.id+"_resize","click",function(n){n.preventDefault()});g.add(u.id+"_resize","mousedown",function(J){var C,r,s,o,I,F,G,L,n,K,D;function E(M){M.preventDefault();n=G+(M.screenX-I);K=L+(M.screenY-F);A.resizeTo(n,K)}function H(M){g.remove(j.doc,"mousemove",C);g.remove(u.getDoc(),"mousemove",r);g.remove(j.doc,"mouseup",s);g.remove(u.getDoc(),"mouseup",o);n=G+(M.screenX-I);K=L+(M.screenY-F);A.resizeTo(n,K,true)}J.preventDefault();I=J.screenX;F=J.screenY;D=j.get(A.editor.id+"_ifr");G=n=D.clientWidth;L=K=D.clientHeight;C=g.add(j.doc,"mousemove",E);r=g.add(u.getDoc(),"mousemove",E);s=g.add(j.doc,"mouseup",H);o=g.add(u.getDoc(),"mouseup",H)})})}l.deltaHeight-=21;m=q=null},_updateUndoStatus:function(l){var k=l.controlManager,m=l.undoManager;k.setDisabled("undo",!m.hasUndo()&&!m.typing);k.setDisabled("redo",!m.hasRedo())},_nodeChanged:function(q,z,I,u,J){var D=this,H,K=0,C,L,E=D.settings,B,m,A,G,o,l,k;h.each(D.stateControls,function(n){z.setActive(n,q.queryCommandState(D.controls[n][1]))});function r(p){var s,n=J.parents,v=p;if(typeof(p)=="string"){v=function(M){return M.nodeName==p}}for(s=0;s<n.length;s++){if(v(n[s])){return n[s]}}}z.setActive("visualaid",q.hasVisual);D._updateUndoStatus(q);z.setDisabled("outdent",!q.queryCommandState("Outdent"));H=r("A");if(L=z.get("link")){if(!H||!H.name){L.setDisabled(!H&&u);L.setActive(!!H)}}if(L=z.get("unlink")){L.setDisabled(!H&&u);L.setActive(!!H&&!H.name)}if(L=z.get("anchor")){L.setActive(!u&&!!H&&H.name)}H=r("IMG");if(L=z.get("image")){L.setActive(!u&&!!H&&I.className.indexOf("mceItem")==-1)}if(L=z.get("styleselect")){D._importClasses();l=[];f(L.items,function(n){l.push(n.value)});k=q.formatter.matchAll(l);L.select(k[0]);h.each(k,function(p,n){if(n>0){L.mark(p)}})}if(L=z.get("formatselect")){H=r(q.dom.isBlock);if(H){L.select(H.nodeName.toLowerCase())}}r(function(p){if(p.nodeName==="SPAN"){if(!B&&p.className){B=p.className}}if(q.dom.is(p,E.theme_advanced_font_selector)){if(!m&&p.style.fontSize){m=p.style.fontSize}if(!A&&p.style.fontFamily){A=p.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()}if(!G&&p.style.color){G=p.style.color}if(!o&&p.style.backgroundColor){o=p.style.backgroundColor}}return false});if(L=z.get("fontselect")){L.select(function(n){return n.replace(/^([^,]+).*/,"$1").toLowerCase()==A})}if(L=z.get("fontsizeselect")){if(E.theme_advanced_runtime_fontsize&&!m&&!B){m=q.dom.getStyle(I,"fontSize",true)}L.select(function(n){if(n.fontSize&&n.fontSize===m){return true}if(n["class"]&&n["class"]===B){return true}})}if(E.theme_advanced_show_current_color){function F(p,n){if(L=z.get(p)){if(!n){n=L.settings.default_color}if(n!==L.value){L.displayColor(n)}}}F("forecolor",G);F("backcolor",o)}if(E.theme_advanced_show_current_color){function F(p,n){if(L=z.get(p)){if(!n){n=L.settings.default_color}if(n!==L.value){L.displayColor(n)}}}F("forecolor",G);F("backcolor",o)}if(E.theme_advanced_path&&E.theme_advanced_statusbar_location){H=j.get(q.id+"_path")||j.add(q.id+"_path_row","span",{id:q.id+"_path"});if(D.statusKeyboardNavigation){D.statusKeyboardNavigation.destroy();D.statusKeyboardNavigation=null}j.setHTML(H,"");r(function(N){var p=N.nodeName.toLowerCase(),s,M,v="";if(N.nodeType!=1||p==="br"||N.getAttribute("data-mce-bogus")||j.hasClass(N,"mceItemHidden")||j.hasClass(N,"mceItemRemoved")){return}if(h.isIE&&N.scopeName!=="HTML"&&N.scopeName){p=N.scopeName+":"+p}p=p.replace(/mce\:/g,"");switch(p){case"b":p="strong";break;case"i":p="em";break;case"img":if(C=j.getAttrib(N,"src")){v+="src: "+C+" "}break;case"a":if(C=j.getAttrib(N,"name")){v+="name: "+C+" ";p+="#"+C}if(C=j.getAttrib(N,"href")){v+="href: "+C+" "}break;case"font":if(C=j.getAttrib(N,"face")){v+="font: "+C+" "}if(C=j.getAttrib(N,"size")){v+="size: "+C+" "}if(C=j.getAttrib(N,"color")){v+="color: "+C+" "}break;case"span":if(C=j.getAttrib(N,"style")){v+="style: "+C+" "}break}if(C=j.getAttrib(N,"id")){v+="id: "+C+" "}if(C=N.className){C=C.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(C){v+="class: "+C+" ";if(q.dom.isBlock(N)||p=="img"||p=="span"){p+="."+C}}}p=p.replace(/(html:)/g,"");p={name:p,node:N,title:v};D.onResolveName.dispatch(D,p);v=p.title;p=p.name;M=j.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:v,"class":"mcePath_"+(K++)},p);if(H.hasChildNodes()){H.insertBefore(j.create("span",{"aria-hidden":"true"},"\u00a0\u00bb "),H.firstChild);H.insertBefore(M,H.firstChild)}else{H.appendChild(M)}},q.getBody());if(j.select("a",H).length>0){D.statusKeyboardNavigation=new h.ui.KeyboardNavigation({root:q.id+"_path_row",items:j.select("a",H),excludeFromTabOrder:true,onCancel:function(){q.focus()}},j)}}},_sel:function(k){this.editor.execCommand("mceSelectNodeDepth",false,k)},_mceInsertAnchor:function(m,l){var k=this.editor;k.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(k.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(k.getLang("advanced.anchor_delta_height",0)),inline:true},{theme_url:this.url})},_mceCharMap:function(){var k=this.editor;k.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(k.getLang("advanced.charmap_delta_width",0)),height:265+parseInt(k.getLang("advanced.charmap_delta_height",0)),inline:true},{theme_url:this.url})},_mceHelp:function(){var k=this.editor;k.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceShortcuts:function(){var k=this.editor;k.windowManager.open({url:this.url+"/shortcuts.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(m,l){var k=this.editor;l=l||{};k.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(k.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(k.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:l.color,func:l.func,theme_url:this.url})},_mceCodeEditor:function(l,m){var k=this.editor;k.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(k.getParam("theme_advanced_source_editor_width",720)),height:parseInt(k.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceImage:function(l,m){var k=this.editor;if(k.dom.getAttrib(k.selection.getNode(),"class","").indexOf("mceItem")!=-1){return}k.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(k.getLang("advanced.image_delta_width",0)),height:275+parseInt(k.getLang("advanced.image_delta_height",0)),inline:true},{theme_url:this.url})},_mceLink:function(l,m){var k=this.editor;k.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(k.getLang("advanced.link_delta_width",0)),height:200+parseInt(k.getLang("advanced.link_delta_height",0)),inline:true},{theme_url:this.url})},_mceNewDocument:function(){var k=this.editor;k.windowManager.confirm("advanced.newdocument",function(l){if(l){k.execCommand("mceSetContent",false,"")}})},_mceForeColor:function(){var k=this;this._mceColorPicker(0,{color:k.fgColor,func:function(l){k.fgColor=l;k.editor.execCommand("ForeColor",false,l)}})},_mceBackColor:function(){var k=this;this._mceColorPicker(0,{color:k.bgColor,func:function(l){k.bgColor=l;k.editor.execCommand("HiliteColor",false,l)}})},_ufirst:function(k){return k.substring(0,1).toUpperCase()+k.substring(1)}});h.ThemeManager.add("advanced",h.themes.AdvancedTheme)}(tinymce));tinyMCE.addI18n("en.advanced",{underline_desc:"Underline (Ctrl+U)",italic_desc:"Italic (Ctrl+I)",bold_desc:"Bold (Ctrl+B)",dd:"Definition Description",dt:"Definition Term ",samp:"Code Sample",code:"Code",blockquote:"Block Quote",h6:"Heading 6",h5:"Heading 5",h4:"Heading 4",h3:"Heading 3",h2:"Heading 2",h1:"Heading 1",pre:"Preformatted",address:"Address",div:"DIV",paragraph:"Paragraph",block:"Format",fontdefault:"Font Family",font_size:"Font Size",style_select:"Styles",anchor_delta_height:"",anchor_delta_width:"",charmap_delta_height:"",charmap_delta_width:"",colorpicker_delta_height:"",colorpicker_delta_width:"",link_delta_height:"",link_delta_width:"",image_delta_height:"",image_delta_width:"",more_colors:"More Colors...",toolbar_focus:"Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X",newdocument:"Are you sure you want clear all contents?",path:"Path",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",blockquote_desc:"Block Quote",help_desc:"Help",newdocument_desc:"New Document",image_props_desc:"Image Properties",paste_desc:"Paste (Ctrl+V)",copy_desc:"Copy (Ctrl+C)",cut_desc:"Cut (Ctrl+X)",anchor_desc:"Insert/Edit Anchor",visualaid_desc:"show/Hide Guidelines/Invisible Elements",charmap_desc:"Insert Special Character",backcolor_desc:"Select Background Color",forecolor_desc:"Select Text Color",custom1_desc:"Your Custom Description Here",removeformat_desc:"Remove Formatting",hr_desc:"Insert Horizontal Line",sup_desc:"Superscript",sub_desc:"Subscript",code_desc:"Edit HTML Source",cleanup_desc:"Cleanup Messy Code",image_desc:"Insert/Edit Image",unlink_desc:"Unlink",link_desc:"Insert/Edit Link",redo_desc:"Redo (Ctrl+Y)",undo_desc:"Undo (Ctrl+Z)",indent_desc:"Increase Indent",outdent_desc:"Decrease Indent",numlist_desc:"Insert/Remove Numbered List",bullist_desc:"Insert/Remove Bulleted List",justifyfull_desc:"Align Full",justifyright_desc:"Align Right",justifycenter_desc:"Align Center",justifyleft_desc:"Align Left",striketrough_desc:"Strikethrough",help_shortcut:"Press ALT-F10 for toolbar. Press ALT-0 for help",rich_text_area:"Rich Text Area",shortcuts_desc:"Accessability Help",toolbar:"Toolbar"});(function(){var c=tinymce.each,a={paste_auto_cleanup_on_paste:true,paste_enable_default_filters:true,paste_block_drop:false,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:false,paste_remove_styles:false,paste_remove_styles_if_webkit:true,paste_convert_middot_lists:true,paste_convert_headers_to_strong:false,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:false,paste_text_sticky:false,paste_text_sticky_default:false,paste_text_notifyalways:false,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};function b(d,e){return d.getParam(e,a[e])}tinymce.create("tinymce.plugins.PastePlugin",{init:function(d,e){var f=this;f.editor=d;f.url=e;f.onPreProcess=new tinymce.util.Dispatcher(f);f.onPostProcess=new tinymce.util.Dispatcher(f);f.onPreProcess.add(f._preProcess);f.onPostProcess.add(f._postProcess);f.onPreProcess.add(function(j,k){d.execCallback("paste_preprocess",j,k)});f.onPostProcess.add(function(j,k){d.execCallback("paste_postprocess",j,k)});d.onKeyDown.addToTop(function(j,k){if(((tinymce.isMac?k.metaKey:k.ctrlKey)&&k.keyCode==86)||(k.shiftKey&&k.keyCode==45)){return false}});d.pasteAsPlainText=b(d,"paste_text_sticky_default");function h(m,k){var l=d.dom,j;f.onPreProcess.dispatch(f,m);m.node=l.create("div",0,m.content);if(tinymce.isGecko){j=d.selection.getRng(true);if(j.startContainer==j.endContainer&&j.startContainer.nodeType==3){if(m.node.childNodes.length===1&&/^(p|h[1-6]|pre)$/i.test(m.node.firstChild.nodeName)&&m.content.indexOf("__MCE_ITEM__")===-1){l.remove(m.node.firstChild,true)}}}f.onPostProcess.dispatch(f,m);m.content=d.serializer.serialize(m.node,{getInner:1,forced_root_block:""});if((!k)&&(d.pasteAsPlainText)){f._insertPlainText(m.content);if(!b(d,"paste_text_sticky")){d.pasteAsPlainText=false;d.controlManager.setActive("pastetext",false)}}else{f._insert(m.content)}}d.addCommand("mceInsertClipboardContent",function(j,k){h(k,true)});if(!b(d,"paste_text_use_dialog")){d.addCommand("mcePasteText",function(k,j){var l=tinymce.util.Cookie;d.pasteAsPlainText=!d.pasteAsPlainText;d.controlManager.setActive("pastetext",d.pasteAsPlainText);if((d.pasteAsPlainText)&&(!l.get("tinymcePasteText"))){if(b(d,"paste_text_sticky")){d.windowManager.alert(d.translate("paste.plaintext_mode_sticky"))}else{d.windowManager.alert(d.translate("paste.plaintext_mode"))}if(!b(d,"paste_text_notifyalways")){l.set("tinymcePasteText","1",new Date(new Date().getFullYear()+1,12,31))}}})}d.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"});d.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"});function g(u){var m,q,k,v,l=d.selection,p=d.dom,r=d.getBody(),j,s;if(u.clipboardData||p.doc.dataTransfer){s=(u.clipboardData||p.doc.dataTransfer).getData("Text");if(d.pasteAsPlainText){u.preventDefault();h({content:p.encode(s).replace(/\r?\n/g,"<br />")});return}}if(p.get("_mcePaste")){return}m=p.add(r,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"\uFEFF\uFEFF");if(r!=d.getDoc().body){j=p.getPos(d.selection.getStart(),r).y}else{j=r.scrollTop+p.getViewPort(d.getWin()).y}p.setStyles(m,{position:"absolute",left:tinymce.isGecko?-40:0,top:j-25,width:1,height:1,overflow:"hidden"});if(tinymce.isIE){v=l.getRng();k=p.doc.body.createTextRange();k.moveToElementText(m);k.execCommand("Paste");p.remove(m);if(m.innerHTML==="\uFEFF\uFEFF"){d.execCommand("mcePasteWord");u.preventDefault();return}l.setRng(v);l.setContent("");setTimeout(function(){h({content:m.innerHTML})},0);return tinymce.dom.Event.cancel(u)}else{function o(n){n.preventDefault()}p.bind(d.getDoc(),"mousedown",o);p.bind(d.getDoc(),"keydown",o);q=d.selection.getRng();m=m.firstChild;k=d.getDoc().createRange();k.setStart(m,0);k.setEnd(m,2);l.setRng(k);window.setTimeout(function(){var z="",n;if(!p.select("div.mcePaste > div.mcePaste").length){n=p.select("div.mcePaste");c(n,function(B){var A=B.firstChild;if(A&&A.nodeName=="DIV"&&A.style.marginTop&&A.style.backgroundColor){p.remove(A,1)}c(p.select("span.Apple-style-span",B),function(C){p.remove(C,1)});c(p.select("br[data-mce-bogus]",B),function(C){p.remove(C)});if(B.parentNode.className!="mcePaste"){z+=B.innerHTML}})}else{z="<p>"+p.encode(s).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>"}c(p.select("div.mcePaste"),function(A){p.remove(A)});if(q){l.setRng(q)}h({content:z});p.unbind(d.getDoc(),"mousedown",o);p.unbind(d.getDoc(),"keydown",o)},0)}}if(b(d,"paste_auto_cleanup_on_paste")){if(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)){d.onKeyDown.addToTop(function(j,k){if(((tinymce.isMac?k.metaKey:k.ctrlKey)&&k.keyCode==86)||(k.shiftKey&&k.keyCode==45)){g(k)}})}else{d.onPaste.addToTop(function(j,k){return g(k)})}}d.onInit.add(function(){d.controlManager.setActive("pastetext",d.pasteAsPlainText);if(b(d,"paste_block_drop")){d.dom.bind(d.getBody(),["dragend","dragover","draggesture","dragdrop","drop","drag"],function(j){j.preventDefault();j.stopPropagation();return false})}});f._legacySupport()},getInfo:function(){return{longname:"Paste text/word",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(g,e){var l=this.editor,k=e.content,q=tinymce.grep,p=tinymce.explode,f=tinymce.trim,m,j;function d(h){c(h,function(o){if(o.constructor==RegExp){k=k.replace(o,"")}else{k=k.replace(o[0],o[1])}})}if(l.settings.paste_enable_default_filters==false){return}if(tinymce.isIE&&document.documentMode>=9&&/<(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)/.test(e.content)){d([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"]]);d([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(k)||e.wordContent){e.wordContent=true;d([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]);if(b(l,"paste_convert_headers_to_strong")){k=k.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>")}if(b(l,"paste_convert_middot_lists")){d([[/<!--\[if !supportLists\]-->/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]])}d([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"]]);do{m=k.length;k=k.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1")}while(m!=k.length);if(b(l,"paste_retain_style_properties").replace(/^none$/i,"").length==0){k=k.replace(/<\/?span[^>]*>/gi,"")}else{d([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(o,h){return(h.length>0)?h.replace(/./," ").slice(Math.floor(h.length/2)).split("").join("\u00a0"):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(v,h,u){var z=[],o=0,r=p(f(u).replace(/&quot;/gi,"'"),";");c(r,function(s){var A,C,D=p(s,":");function B(E){return E+((E!=="0")&&(/\d$/.test(E)))?"px":""}if(D.length==2){A=D[0].toLowerCase();C=D[1].toLowerCase();switch(A){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":z[o++]=A.replace(/^mso-|-alt$/g,"")+":"+B(C);return;case"horiz-align":z[o++]="text-align:"+C;return;case"vert-align":z[o++]="vertical-align:"+C;return;case"font-color":case"mso-foreground":z[o++]="color:"+C;return;case"mso-background":case"mso-highlight":z[o++]="background:"+C;return;case"mso-default-height":z[o++]="min-height:"+B(C);return;case"mso-default-width":z[o++]="min-width:"+B(C);return;case"mso-padding-between-alt":z[o++]="border-collapse:separate;border-spacing:"+B(C);return;case"text-line-through":if((C=="single")||(C=="double")){z[o++]="text-decoration:line-through"}return;case"mso-zero-height":if(C=="yes"){z[o++]="display:none"}return}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(A)){return}z[o++]=A+":"+D[1]}});if(o>0){return h+' style="'+z.join(";")+'"'}else{return h}}]])}}if(b(l,"paste_convert_headers_to_strong")){d([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]])}d([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]);j=b(l,"paste_strip_class_attributes");if(j!=="none"){function n(r,o){if(j==="all"){return""}var h=q(p(o.replace(/^(["'])(.*)\1$/,"$2")," "),function(s){return(/^(?!mso)/i.test(s))});return h.length?' class="'+h.join(" ")+'"':""}k=k.replace(/ class="([^"]+)"/gi,n);k=k.replace(/ class=([\-\w]+)/gi,n)}if(b(l,"paste_remove_spans")){k=k.replace(/<\/?span[^>]*>/gi,"")}e.content=k},_postProcess:function(g,j){var f=this,e=f.editor,h=e.dom,d;if(e.settings.paste_enable_default_filters==false){return}if(j.wordContent){c(h.select("a",j.node),function(k){if(!k.href||k.href.indexOf("#_Toc")!=-1){h.remove(k,1)}});if(b(e,"paste_convert_middot_lists")){f._convertLists(g,j)}d=b(e,"paste_retain_style_properties");if((tinymce.is(d,"string"))&&(d!=="all")&&(d!=="*")){d=tinymce.explode(d.replace(/^none$/i,""));c(h.select("*",j.node),function(n){var o={},l=0,m,p,k;if(d){for(m=0;m<d.length;m++){p=d[m];k=h.getStyle(n,p);if(k){o[p]=k;l++}}}h.setAttrib(n,"style","");if(d&&l>0){h.setStyles(n,o)}else{if(n.nodeName=="SPAN"&&!n.className){h.remove(n,true)}}})}}if(b(e,"paste_remove_styles")||(b(e,"paste_remove_styles_if_webkit")&&tinymce.isWebKit)){c(h.select("*[style]",j.node),function(k){k.removeAttribute("style");k.removeAttribute("data-mce-style")})}else{if(tinymce.isWebKit){c(h.select("*",j.node),function(k){k.removeAttribute("data-mce-style")})}}},_convertLists:function(g,e){var j=g.editor.dom,h,m,d=-1,f,n=[],l,k;c(j.select("p",e.node),function(v){var r,z="",u,s,o,q;for(r=v.firstChild;r&&r.nodeType==3;r=r.nextSibling){z+=r.nodeValue}z=v.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g,"\u00a0");if(/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(z)){u="ul"}if(/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(z)){u="ol"}if(u){f=parseFloat(v.style.marginLeft||0);if(f>d){n.push(f)}if(!h||u!=l){h=j.create(u);j.insertAfter(h,v)}else{if(f>d){h=m.appendChild(j.create(u))}else{if(f<d){o=tinymce.inArray(n,f);q=j.getParents(h.parentNode,u);h=q[q.length-1-o]||h}}}c(j.select("span",v),function(A){var p=A.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");if(u=="ul"&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(p)){j.remove(A)}else{if(/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(p)){j.remove(A)}}});s=v.innerHTML;if(u=="ul"){s=v.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,"")}else{s=v.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,"")}m=h.appendChild(j.create("li",0,s));j.remove(v);d=f;l=u}else{h=d=0}});k=e.node.innerHTML;if(k.indexOf("__MCE_ITEM__")!=-1){e.node.innerHTML=k.replace(/__MCE_ITEM__/g,"")}},_insert:function(f,d){var e=this.editor,g=e.selection.getRng();if(!e.selection.isCollapsed()&&g.startContainer!=g.endContainer){e.getDoc().execCommand("Delete",false,null)}e.execCommand("mceInsertContent",false,f,{skip_undo:d})},_insertPlainText:function(g){var d=this.editor,e=b(d,"paste_text_linebreaktype"),j=b(d,"paste_text_replacements"),f=tinymce.is;function h(k){c(k,function(l){if(l.constructor==RegExp){g=g.replace(l,"")}else{g=g.replace(l[0],l[1])}})}if((typeof(g)==="string")&&(g.length>0)){if(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(g)){h([/[\n\r]+/g])}else{h([/\r+/g])}h([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"]]);g=d.dom.decode(tinymce.html.Entities.encodeRaw(g));if(f(j,"array")){h(j)}else{if(f(j,"string")){h(new RegExp(j,"gi"))}}if(e=="none"){h([[/\n+/g," "]])}else{if(e=="br"){h([[/\n/g,"<br />"]])}else{if(e=="p"){h([[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]])}else{h([[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]])}}}d.execCommand("mceInsertContent",false,g)}},_legacySupport:function(){var e=this,d=e.editor;d.addCommand("mcePasteWord",function(){d.windowManager.open({file:e.url+"/pasteword.htm",width:parseInt(b(d,"paste_dialog_width")),height:parseInt(b(d,"paste_dialog_height")),inline:1})});if(b(d,"paste_text_use_dialog")){d.addCommand("mcePasteText",function(){d.windowManager.open({file:e.url+"/pastetext.htm",width:parseInt(b(d,"paste_dialog_width")),height:parseInt(b(d,"paste_dialog_height")),inline:1})})}d.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}});tinymce.PluginManager.add("paste",tinymce.plugins.PastePlugin)})();(function(){var a=tinymce.util.JSONRequest,c=tinymce.each,b=tinymce.DOM;tinymce.create("tinymce.plugins.SpellcheckerPlugin",{getInfo:function(){return{longname:"Spellchecker",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/spellchecker",version:tinymce.majorVersion+"."+tinymce.minorVersion}},init:function(e,f){var g=this,d;g.url=f;g.editor=e;g.rpcUrl=e.getParam("spellchecker_rpc_url","{backend}");if(g.rpcUrl=="{backend}"){if(tinymce.isIE){return}g.hasSupport=true;e.onContextMenu.addToTop(function(h,j){if(g.active){return false}})}e.addCommand("mceSpellCheck",function(){if(g.rpcUrl=="{backend}"){g.editor.getBody().spellcheck=g.active=!g.active;return}if(!g.active){e.setProgressState(1);g._sendRPC("checkWords",[g.selectedLang,g._getWords()],function(h){if(h.length>0){g.active=1;g._markWords(h);e.setProgressState(0);e.nodeChanged()}else{e.setProgressState(0);if(e.getParam("spellchecker_report_no_misspellings",true)){e.windowManager.alert("spellchecker.no_mpell")}}})}else{g._done()}});if(e.settings.content_css!==false){e.contentCSS.push(f+"/css/content.css")}e.onClick.add(g._showMenu,g);e.onContextMenu.add(g._showMenu,g);e.onBeforeGetContent.add(function(){if(g.active){g._removeWords()}});e.onNodeChange.add(function(j,h){h.setActive("spellchecker",g.active)});e.onSetContent.add(function(){g._done()});e.onBeforeGetContent.add(function(){g._done()});e.onBeforeExecCommand.add(function(h,j){if(j=="mceFullScreen"){g._done()}});g.languages={};c(e.getParam("spellchecker_languages","+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv","hash"),function(j,h){if(h.indexOf("+")===0){h=h.substring(1);g.selectedLang=j}g.languages[h]=j})},createControl:function(h,d){var f=this,g,e=f.editor;if(h=="spellchecker"){if(f.rpcUrl=="{backend}"){if(f.hasSupport){g=d.createButton(h,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:f})}return g}g=d.createSplitButton(h,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:f});g.onRenderMenu.add(function(k,j){j.add({title:"spellchecker.langs","class":"mceMenuItemTitle"}).setDisabled(1);c(f.languages,function(n,m){var p={icon:1},l;p.onclick=function(){if(n==f.selectedLang){return}l.setSelected(1);f.selectedItem.setSelected(0);f.selectedItem=l;f.selectedLang=n};p.title=m;l=j.add(p);l.setSelected(n==f.selectedLang);if(n==f.selectedLang){f.selectedItem=l}})});return g}},_walk:function(j,g){var h=this.editor.getDoc(),e;if(h.createTreeWalker){e=h.createTreeWalker(j,NodeFilter.SHOW_TEXT,null,false);while((j=e.nextNode())!=null){g.call(this,j)}}else{tinymce.walk(j,g,"childNodes")}},_getSeparators:function(){var e="",d,f=this.editor.getParam("spellchecker_word_separator_chars",'\\s!"#$%&()*+,-./:;<=>?@[]^_{|}\u201d\u201c');for(d=0;d<f.length;d++){e+="\\"+f.charAt(d)}return e},_getWords:function(){var e=this.editor,g=[],d="",f={},h=[];this._walk(e.getBody(),function(j){if(j.nodeType==3){d+=j.nodeValue+" "}});if(e.getParam("spellchecker_word_pattern")){h=d.match("("+e.getParam("spellchecker_word_pattern")+")","gi")}else{d=d.replace(new RegExp("([0-9]|["+this._getSeparators()+"])","g")," ");d=tinymce.trim(d.replace(/(\s+)/g," "));h=d.split(" ")}c(h,function(j){if(!f[j]){g.push(j);f[j]=1}});return g},_removeWords:function(d){var e=this.editor,h=e.dom,g=e.selection,f=g.getRng(true);c(h.select("span").reverse(),function(j){if(j&&(h.hasClass(j,"mceItemHiddenSpellWord")||h.hasClass(j,"mceItemHidden"))){if(!d||h.decode(j.innerHTML)==d){h.remove(j,1)}}});g.setRng(f)},_markWords:function(m){var h=this.editor,g=h.dom,k=h.getDoc(),j=h.selection,d=j.getRng(true),e=[],l=m.join("|"),n=this._getSeparators(),f=new RegExp("(^|["+n+"])("+l+")(?=["+n+"]|$)","g");this._walk(h.getBody(),function(o){if(o.nodeType==3){e.push(o)}});c(e,function(u){var r,q,o,s,p=u.nodeValue;if(f.test(p)){p=g.encode(p);q=g.create("span",{"class":"mceItemHidden"});if(tinymce.isIE){p=p.replace(f,"$1<mcespell>$2</mcespell>");while((s=p.indexOf("<mcespell>"))!=-1){o=p.substring(0,s);if(o.length){r=k.createTextNode(g.decode(o));q.appendChild(r)}p=p.substring(s+10);s=p.indexOf("</mcespell>");o=p.substring(0,s);p=p.substring(s+11);q.appendChild(g.create("span",{"class":"mceItemHiddenSpellWord"},o))}if(p.length){r=k.createTextNode(g.decode(p));q.appendChild(r)}}else{q.innerHTML=p.replace(f,'$1<span class="mceItemHiddenSpellWord">$2</span>')}g.replace(q,u)}});j.setRng(d)},_showMenu:function(h,k){var j=this,h=j.editor,d=j._menu,n,l=h.dom,g=l.getViewPort(h.getWin()),f=k.target;k=0;if(!d){d=h.controlManager.createDropMenu("spellcheckermenu",{"class":"mceNoIcons"});j._menu=d}if(l.hasClass(f,"mceItemHiddenSpellWord")){d.removeAll();d.add({title:"spellchecker.wait","class":"mceMenuItemTitle"}).setDisabled(1);j._sendRPC("getSuggestions",[j.selectedLang,l.decode(f.innerHTML)],function(m){var e;d.removeAll();if(m.length>0){d.add({title:"spellchecker.sug","class":"mceMenuItemTitle"}).setDisabled(1);c(m,function(o){d.add({title:o,onclick:function(){l.replace(h.getDoc().createTextNode(o),f);j._checkDone()}})});d.addSeparator()}else{d.add({title:"spellchecker.no_sug","class":"mceMenuItemTitle"}).setDisabled(1)}if(h.getParam("show_ignore_words",true)){e=j.editor.getParam("spellchecker_enable_ignore_rpc","");d.add({title:"spellchecker.ignore_word",onclick:function(){var o=f.innerHTML;l.remove(f,1);j._checkDone();if(e){h.setProgressState(1);j._sendRPC("ignoreWord",[j.selectedLang,o],function(p){h.setProgressState(0)})}}});d.add({title:"spellchecker.ignore_words",onclick:function(){var o=f.innerHTML;j._removeWords(l.decode(o));j._checkDone();if(e){h.setProgressState(1);j._sendRPC("ignoreWords",[j.selectedLang,o],function(p){h.setProgressState(0)})}}})}if(j.editor.getParam("spellchecker_enable_learn_rpc")){d.add({title:"spellchecker.learn_word",onclick:function(){var o=f.innerHTML;l.remove(f,1);j._checkDone();h.setProgressState(1);j._sendRPC("learnWord",[j.selectedLang,o],function(p){h.setProgressState(0)})}})}d.update()});n=b.getPos(h.getContentAreaContainer());d.settings.offset_x=n.x;d.settings.offset_y=n.y;h.selection.select(f);n=l.getPos(f);d.showMenu(n.x,n.y+f.offsetHeight-g.y);return tinymce.dom.Event.cancel(k)}else{d.hideMenu()}},_checkDone:function(){var e=this,d=e.editor,g=d.dom,f;c(g.select("span"),function(h){if(h&&g.hasClass(h,"mceItemHiddenSpellWord")){f=true;return false}});if(!f){e._done()}},_done:function(){var d=this,e=d.active;if(d.active){d.active=0;d._removeWords();if(d._menu){d._menu.hideMenu()}if(e){d.editor.nodeChanged()}}},_sendRPC:function(e,g,d){var f=this;a.sendRPC({url:f.rpcUrl,method:e,params:g,success:d,error:function(j,h){f.editor.setProgressState(0);f.editor.windowManager.alert(j.errstr||("Error response: "+h.responseText))}})}});tinymce.PluginManager.add("spellchecker",tinymce.plugins.SpellcheckerPlugin)})();(function(){var a=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(b,c){var d=this;d.editor=b;function e(g){var f=[];a(g.split(/,/),function(h){f.push({title:"advlist."+(h=="default"?"def":h.replace(/-/g,"_")),styles:{listStyleType:h=="default"?"":h}})});return f}d.numlist=b.getParam("advlist_number_styles")||e("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");d.bullist=b.getParam("advlist_bullet_styles")||e("default,circle,disc,square");if(tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)){d.isIE7=true}},createControl:function(d,b){var f=this,e,j,g=f.editor;if(d=="numlist"||d=="bullist"){if(f[d][0].title=="advlist.def"){j=f[d][0]}function c(k,m){var l=true;a(m.styles,function(o,n){if(g.dom.getStyle(k,n)!=o){l=false;return false}});return l}function h(){var l,m=g.dom,k=g.selection;l=m.getParent(k.getNode(),"ol,ul");if(!l||l.nodeName==(d=="bullist"?"OL":"UL")||c(l,j)){g.execCommand(d=="bullist"?"InsertUnorderedList":"InsertOrderedList")}if(j){l=m.getParent(k.getNode(),"ol,ul");if(l){m.setStyles(l,j.styles);l.removeAttribute("data-mce-style")}}g.focus()}e=b.createSplitButton(d,{title:"advanced."+d+"_desc","class":"mce_"+d,onclick:function(){h()}});e.onRenderMenu.add(function(k,l){l.onHideMenu.add(function(){if(f.bookmark){g.selection.moveToBookmark(f.bookmark);f.bookmark=0}});l.onShowMenu.add(function(){var o=g.dom,n=o.getParent(g.selection.getNode(),"ol,ul"),m;if(n||j){m=f[d];a(l.items,function(p){var q=true;p.setSelected(0);if(n&&!p.isDisabled()){a(m,function(r){if(r.id==p.id){if(!c(n,r)){q=false;return false}}});if(q){p.setSelected(1)}}});if(!n){l.items[j.id].setSelected(1)}}g.focus();if(tinymce.isIE){f.bookmark=g.selection.getBookmark(1)}});l.add({id:g.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:true}).setDisabled(1);a(f[d],function(m){if(f.isIE7&&m.styles.listStyleType=="lower-greek"){return}m.id=g.dom.uniqueId();l.add({id:m.id,title:m.title,onclick:function(){j=m;h()}})})});return e}},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)})();(function(){var e=tinymce.each,s=tinymce.dom.Event,g;function q(v,u){while(v&&(v.nodeType===8||(v.nodeType===3&&/^[ \t\n\r]*$/.test(v.nodeValue)))){v=u(v)}return v}function b(u){return q(u,function(v){return v.previousSibling})}function j(u){return q(u,function(v){return v.nextSibling})}function d(u,z,v){return u.dom.getParent(z,function(A){return tinymce.inArray(v,A)!==-1})}function o(u){return u&&(u.tagName==="OL"||u.tagName==="UL")}function c(z,A){var v,B,u;v=b(z.lastChild);while(o(v)){B=v;v=b(B.previousSibling)}if(B){u=A.create("li",{style:"list-style-type: none;"});A.split(z,B);A.insertAfter(u,B);u.appendChild(B);u.appendChild(B);z=u.previousSibling}return z}function n(v,u,z){v=a(v,u,z);return p(v,u,z)}function a(z,u,A){var v=b(z.previousSibling);if(v){return h(v,z,u?v:false,A)}else{return z}}function p(z,v,A){var u=j(z.nextSibling);if(u){return h(z,u,v?u:false,A)}else{return z}}function h(z,u,v,A){if(m(z,u,!!v,A)){return f(z,u,v)}else{if(z&&z.tagName==="LI"&&o(u)){z.appendChild(u)}}return u}function m(z,v,u,A){if(!z||!v){return false}else{if(z.tagName==="LI"&&v.tagName==="LI"){return v.style.listStyleType==="none"||k(v)}else{if(o(z)){return(z.tagName===v.tagName&&(u||z.style.listStyleType===v.style.listStyleType))||r(v)}else{return A&&z.tagName==="P"&&v.tagName==="P"}}}}function r(v){var u=j(v.firstChild),z=b(v.lastChild);return u&&z&&o(v)&&u===z&&(o(u)||u.style.listStyleType==="none"||k(u))}function k(z){var v=j(z.firstChild),u=b(z.lastChild);return v&&u&&v===u&&o(v)}function f(B,A,u){var z=b(B.lastChild),v=j(A.firstChild);if(B.tagName==="P"){B.appendChild(B.ownerDocument.createElement("br"))}while(A.firstChild){B.appendChild(A.firstChild)}if(u){B.style.listStyleType=u.style.listStyleType}A.parentNode.removeChild(A);h(z,v,false);return B}function l(v,z){var u;if(!z.is(v,"li,ol,ul")){u=z.getParent(v,"li");if(u){v=u}}return v}tinymce.create("tinymce.plugins.Lists",{init:function(D){var A="TABBING";var u="EMPTY";var O="ESCAPE";var E="PARAGRAPH";var S="UNKNOWN";var C=S;function J(Z){return Z.keyCode===tinymce.VK.TAB&&!(Z.altKey||Z.ctrlKey)&&(D.queryCommandState("InsertUnorderedList")||D.queryCommandState("InsertOrderedList"))}function B(){var Z=G();var ab=Z.parentNode.parentNode;var aa=Z.parentNode.lastChild===Z;return aa&&!v(ab)&&U(Z)}function v(Z){if(o(Z)){return Z.parentNode&&Z.parentNode.tagName==="LI"}else{return Z.tagName==="LI"}}function K(){return D.selection.isCollapsed()&&U(G())}function G(){var Z=D.selection.getStart();return((Z.tagName=="BR"||Z.tagName=="")&&Z.parentNode.tagName=="LI")?Z.parentNode:Z}function U(Z){var aa=Z.childNodes.length;if(Z.tagName==="LI"){return aa==0?true:aa==1&&(Z.firstChild.tagName==""||Z.firstChild.tagName=="BR"||M(Z))}return false}function M(Z){var aa=tinymce.grep(Z.parentNode.childNodes,function(ad){return ad.tagName=="LI"});var ab=Z==aa[aa.length-1];var ac=Z.firstChild;return tinymce.isIE9&&ab&&(ac.nodeValue==String.fromCharCode(160)||ac.nodeValue==String.fromCharCode(32))}function Y(Z){return Z.keyCode===tinymce.VK.ENTER}function F(Z){return Y(Z)&&!Z.shiftKey}function R(Z){if(J(Z)){return A}else{if(F(Z)&&B()){return S}else{if(F(Z)&&K()){return u}else{return S}}}}function I(Z,aa){if(C==A||C==u||tinymce.isGecko&&C==O){s.cancel(aa)}}function H(){var Z=D.selection.getRng(true);var aa=Z.startContainer;if(aa.nodeType==3){var ab=aa.nodeValue;if(tinymce.isIE9&&ab.length>1&&ab.charCodeAt(ab.length-1)==32){return(Z.endOffset==ab.length-1)}else{return(Z.endOffset==ab.length)}}else{if(aa.nodeType==1){return Z.endOffset==aa.childNodes.length}}return false}function N(){var ab=D.selection.getNode();var aa="h1,h2,h3,h4,h5,h6,p,div";var Z=D.dom.is(ab,aa)&&ab.parentNode.tagName==="LI"&&ab.parentNode.lastChild===ab;return D.selection.isCollapsed()&&Z&&H()}function P(ab,ad){if(F(ad)&&N()){var ac=ab.selection.getNode();var aa=ab.dom.create("li");var Z=ab.dom.getParent(ac,"li");ab.dom.insertAfter(aa,Z);if(tinymce.isIE6||tinymce.isIE7||tinyMCE.isIE8){ab.selection.setCursorLocation(aa,1)}else{ab.selection.setCursorLocation(aa,0)}ad.preventDefault()}}function z(ac,ae){var ah;if(!tinymce.isGecko){return}var aa=ac.selection.getStart();if(ae.keyCode!=tinymce.VK.BACKSPACE||aa.tagName!=="IMG"){return}function ab(al){var am=al.firstChild;var ak=null;do{if(!am){break}if(am.tagName==="LI"){ak=am}}while(am=am.nextSibling);return ak}function aj(al,ak){while(al.childNodes.length>0){ak.appendChild(al.childNodes[0])}}ah=aa.parentNode.previousSibling;if(!ah){return}var af;if(ah.tagName==="UL"||ah.tagName==="OL"){af=ah}else{if(ah.previousSibling&&(ah.previousSibling.tagName==="UL"||ah.previousSibling.tagName==="OL")){af=ah.previousSibling}else{return}}var ai=ab(af);var Z=ac.dom.createRng();Z.setStart(ai,1);Z.setEnd(ai,1);ac.selection.setRng(Z);ac.selection.collapse(true);var ad=ac.selection.getBookmark();var ag=aa.parentNode.cloneNode(true);if(ag.tagName==="P"||ag.tagName==="DIV"){aj(ag,ai)}else{ai.appendChild(ag)}aa.parentNode.parentNode.removeChild(aa.parentNode);ac.selection.moveToBookmark(ad)}function L(Z){var aa=D.dom.getParent(Z,"ol,ul");if(aa!=null){var ab=aa.lastChild;D.selection.setCursorLocation(ab,0)}}this.ed=D;D.addCommand("Indent",this.indent,this);D.addCommand("Outdent",this.outdent,this);D.addCommand("InsertUnorderedList",function(){this.applyList("UL","OL")},this);D.addCommand("InsertOrderedList",function(){this.applyList("OL","UL")},this);D.onInit.add(function(){D.editorCommands.addCommands({outdent:function(){var aa=D.selection,ab=D.dom;function Z(ac){ac=ab.getParent(ac,ab.isBlock);return ac&&(parseInt(D.dom.getStyle(ac,"margin-left")||0,10)+parseInt(D.dom.getStyle(ac,"padding-left")||0,10))>0}return Z(aa.getStart())||Z(aa.getEnd())||D.queryCommandState("InsertOrderedList")||D.queryCommandState("InsertUnorderedList")}},"state")});D.onKeyUp.add(function(aa,ab){if(C==A){aa.execCommand(ab.shiftKey?"Outdent":"Indent",true,null);C=S;return s.cancel(ab)}else{if(C==u){var Z=G();var ad=aa.settings.list_outdent_on_enter===true||ab.shiftKey;aa.execCommand(ad?"Outdent":"Indent",true,null);if(tinymce.isIE){L(Z)}return s.cancel(ab)}else{if(C==O){if(tinymce.isIE6||tinymce.isIE7||tinymce.isIE8){var ac=aa.getDoc().createTextNode("\uFEFF");aa.selection.getNode().appendChild(ac)}else{if(tinymce.isIE9||tinymce.isGecko){aa.execCommand("Outdent");return s.cancel(ab)}}}}}});function Q(aa,Z){var ab=D.getDoc().createTextNode("\uFEFF");aa.insertBefore(ab,Z);D.selection.setCursorLocation(ab,0);D.execCommand("mceRepaint")}function W(aa,ac){if(Y(ac)){var Z=G();if(Z){var ab=Z.parentNode;var ad=ab&&ab.parentNode;if(ad&&ad.nodeName=="LI"&&ad.firstChild==ab&&Z==ab.firstChild){Q(ad,ab)}}}}function X(aa,ac){if(Y(ac)){var Z=G();if(aa.dom.select("ul li",Z).length===1){var ab=Z.firstChild;Q(Z,ab)}}}function V(aa,ae){function ab(ai,af){var ah=[];var aj=new tinymce.dom.TreeWalker(af,ai);for(var ag=aj.current();ag;ag=aj.next()){if(aa.dom.is(ag,"ol,ul,li")){ah.push(ag)}}return ah}if(ae.keyCode==tinymce.VK.BACKSPACE){var Z=G();if(Z){var ad=aa.dom.getParent(Z,"ol,ul");if(ad&&ad.firstChild===Z){var ac=ab(ad,Z);aa.execCommand("Outdent",false,ac);aa.undoManager.add();return s.cancel(ae)}}}}function T(aa,ac){var Z=G();if(ac.keyCode===tinymce.VK.BACKSPACE&&aa.dom.is(Z,"li")&&Z.parentNode.firstChild!==Z){if(aa.dom.select("ul,ol",Z).length===1){var ae=Z.previousSibling;aa.dom.remove(aa.dom.select("br",Z));aa.dom.remove(Z,true);var ab=tinymce.grep(ae.childNodes,function(af){return af.nodeType===3});if(ab.length===1){var ad=ab[0];aa.selection.setCursorLocation(ad,ad.length)}aa.undoManager.add();return s.cancel(ac)}}}D.onKeyDown.add(function(Z,aa){C=R(aa)});D.onKeyDown.add(I);D.onKeyDown.add(z);D.onKeyDown.add(P);if(tinymce.isGecko){D.onKeyUp.add(W)}if(tinymce.isIE8){D.onKeyUp.add(X)}if(tinymce.isGecko||tinymce.isWebKit){D.onKeyDown.add(V)}if(tinymce.isWebKit){D.onKeyDown.add(T)}},applyList:function(C,z){var G=this,D=G.ed,M=D.dom,u=[],L=false,v=false,A=false,F,K=D.selection.getSelectedBlocks();function I(P){if(P&&P.tagName==="BR"){M.remove(P)}}function J(R){var S=M.create(C),P;function Q(T){if(T.style.marginLeft||T.style.paddingLeft){G.adjustPaddingFunction(false)(T)}}if(R.tagName==="LI"){}else{if(R.tagName==="P"||R.tagName==="DIV"||R.tagName==="BODY"){O(R,function(U,T){N(U,T,R.tagName==="BODY"?null:U.parentNode);P=U.parentNode;Q(P);I(T)});if(P){if(P.tagName==="LI"&&(R.tagName==="P"||K.length>1)){M.split(P.parentNode.parentNode,P.parentNode)}n(P.parentNode,true)}return}else{P=M.create("li");M.insertAfter(P,R);P.appendChild(R);Q(R);R=P}}M.insertAfter(S,R);S.appendChild(R);n(S,true);u.push(R)}function N(U,Q,S){var P,T=U,R;while(!M.isBlock(U.parentNode)&&U.parentNode!==M.getRoot()){U=M.split(U.parentNode,U.previousSibling);U=U.nextSibling;T=U}if(S){P=S.cloneNode(true);U.parentNode.insertBefore(P,U);while(P.firstChild){M.remove(P.firstChild)}P=M.rename(P,"li")}else{P=M.create("li");U.parentNode.insertBefore(P,U)}while(T&&T!=Q){R=T.nextSibling;P.appendChild(T);T=R}if(P.childNodes.length===0){P.innerHTML='<br _mce_bogus="1" />'}J(P)}function O(V,Y){var S,W,T=3,Q=1,P="br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl";function U(ac,Z){var aa=M.createRng(),ab;g.keep=true;D.selection.moveToBookmark(g);g.keep=false;ab=D.selection.getRng(true);if(!Z){Z=ac.parentNode.lastChild}aa.setStartBefore(ac);aa.setEndAfter(Z);return !(aa.compareBoundaryPoints(T,ab)>0||aa.compareBoundaryPoints(Q,ab)<=0)}function X(Z){if(Z.nextSibling){return Z.nextSibling}if(!M.isBlock(Z.parentNode)&&Z.parentNode!==M.getRoot()){return X(Z.parentNode)}}S=V.firstChild;var R=false;e(M.select(P,V),function(Z){if(Z.hasAttribute&&Z.hasAttribute("_mce_bogus")){return true}if(U(S,Z)){M.addClass(Z,"_mce_tagged_br");S=X(Z)}});R=(S&&U(S,undefined));S=V.firstChild;e(M.select(P,V),function(aa){var Z=X(aa);if(aa.hasAttribute&&aa.hasAttribute("_mce_bogus")){return true}if(M.hasClass(aa,"_mce_tagged_br")){Y(S,aa,W);W=null}else{W=aa}S=Z});if(R){Y(S,undefined,W)}}function H(P){O(P,function(R,Q,S){N(R,Q);I(Q);I(S)})}function E(P){if(tinymce.inArray(u,P)!==-1){return}if(P.parentNode.tagName===z){M.split(P.parentNode,P);J(P);p(P.parentNode,false)}u.push(P)}function B(R){var T,S,Q,P;if(tinymce.inArray(u,R)!==-1){return}R=c(R,M);while(M.is(R.parentNode,"ol,ul,li")){M.split(R.parentNode,R)}u.push(R);R=M.rename(R,"p");Q=n(R,false,D.settings.force_br_newlines);if(Q===R){T=R.firstChild;while(T){if(M.isBlock(T)){T=M.split(T.parentNode,T);P=true;S=T.nextSibling&&T.nextSibling.firstChild}else{S=T.nextSibling;if(P&&T.tagName==="BR"){M.remove(T)}P=false}T=S}}}e(K,function(P){P=l(P,M);if(P.tagName===z||(P.tagName==="LI"&&P.parentNode.tagName===z)){v=true}else{if(P.tagName===C||(P.tagName==="LI"&&P.parentNode.tagName===C)){L=true}else{A=true}}});if(A&&!L||v||K.length===0){F={LI:E,H1:J,H2:J,H3:J,H4:J,H5:J,H6:J,P:J,BODY:J,DIV:K.length>1?J:H,defaultAction:H,elements:this.selectedBlocks()}}else{F={defaultAction:B,elements:this.selectedBlocks()}}this.process(F)},indent:function(){var z=this.ed,B=z.dom,C=[];function u(E){var D=B.create("li",{style:"list-style-type: none;"});B.insertAfter(D,E);return D}function v(G){var D=u(G),I=B.getParent(G,"ol,ul"),H=I.tagName,J=B.getStyle(I,"list-style-type"),F={},E;if(J!==""){F.style="list-style-type: "+J+";"}E=B.create(H,F);D.appendChild(E);return E}function A(E){if(!d(z,E,C)){E=c(E,B);var D=v(E);D.appendChild(E);n(D.parentNode,false);n(D,false);C.push(E)}}this.process({LI:A,defaultAction:this.adjustPaddingFunction(true),elements:this.selectedBlocks()})},outdent:function(C,B){var A=this,v=A.ed,D=v.dom,u=[];function E(F){var H,G,I;if(!d(v,F,u)){if(D.getStyle(F,"margin-left")!==""||D.getStyle(F,"padding-left")!==""){return A.adjustPaddingFunction(false)(F)}I=D.getStyle(F,"text-align",true);if(I==="center"||I==="right"){D.setStyle(F,"text-align","left");return}F=c(F,D);H=F.parentNode;G=F.parentNode.parentNode;if(G.tagName==="P"){D.split(G,F.parentNode)}else{D.split(H,F);if(G.tagName==="LI"){D.split(G,F)}else{if(!D.is(G,"ol,ul")){D.rename(F,"p")}}}u.push(F)}}var z=B&&tinymce.is(B,"array")?B:this.selectedBlocks();this.process({LI:E,defaultAction:this.adjustPaddingFunction(false),elements:z});e(u,n)},process:function(B){var I=this,z=I.ed.selection,C=I.ed.dom,H,u;function E(L){var K=tinymce.grep(L.childNodes,function(M){return !(M.nodeName==="BR"||M.nodeName==="SPAN"&&C.getAttrib(M,"data-mce-type")=="bookmark"||M.nodeType==3&&(M.nodeValue==String.fromCharCode(160)||M.nodeValue==""))});return K.length===0}function A(K){C.removeClass(K,"_mce_act_on");if(!K||K.nodeType!==1||H.length>1&&E(K)){return}K=l(K,C);var L=B[K.tagName];if(!L){L=B.defaultAction}L(K)}function v(K){I.splitSafeEach(K.childNodes,A)}function F(K,L){return L>=0&&K.hasChildNodes()&&L<K.childNodes.length&&K.childNodes[L].tagName==="BR"}function G(){var L=z.getNode();var K=C.getParent(L,"td");return K!==null}H=B.elements;u=z.getRng(true);if(!u.collapsed){if(F(u.endContainer,u.endOffset-1)){u.setEnd(u.endContainer,u.endOffset-1);z.setRng(u)}if(F(u.startContainer,u.startOffset)){u.setStart(u.startContainer,u.startOffset+1);z.setRng(u)}}if(tinymce.isIE8){var J=I.ed.selection.getNode();if(J.tagName==="LI"&&!(J.parentNode.lastChild===J)){var D=I.ed.getDoc().createTextNode("\uFEFF");J.appendChild(D)}}g=z.getBookmark();B.OL=B.UL=v;I.splitSafeEach(H,A);z.moveToBookmark(g);g=null;if(!G()){I.ed.execCommand("mceRepaint")}},splitSafeEach:function(v,u){if(tinymce.isGecko&&(/Firefox\/[12]\.[0-9]/.test(navigator.userAgent)||/Firefox\/3\.[0-4]/.test(navigator.userAgent))){this.classBasedEach(v,u)}else{e(v,u)}},classBasedEach:function(A,z){var B=this.ed.dom,u,v;e(A,function(C){B.addClass(C,"_mce_act_on")});u=B.select("._mce_act_on");while(u.length>0){v=u.shift();B.removeClass(v,"_mce_act_on");z(v);u=B.select("._mce_act_on")}},adjustPaddingFunction:function(z){var u,A,v=this.ed;u=v.settings.indentation;A=/[a-z%]+/i.exec(u);u=parseInt(u,10);return function(B){var D,C;D=parseInt(v.dom.getStyle(B,"margin-left")||0,10)+parseInt(v.dom.getStyle(B,"padding-left")||0,10);if(z){C=D+u}else{C=D-u}v.dom.setStyle(B,"padding-left","");v.dom.setStyle(B,"margin-left",C>0?C+A:"")}},selectedBlocks:function(){var u=this.ed;var v=u.selection.getSelectedBlocks();return v.length==0?[u.dom.getRoot()]:v},getInfo:function(){return{longname:"Lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/lists",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("lists",tinymce.plugins.Lists)}());(function(){tinymce.create("tinymce.plugins.Print",{init:function(a,b){a.addCommand("mcePrint",function(){a.getWin().print()});a.addButton("print",{title:"print.print_desc",cmd:"mcePrint"})},getInfo:function(){return{longname:"Print",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/print",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("print",tinymce.plugins.Print)})();(function(d){var e=d.each;function c(g,h){var j=h.ownerDocument,f=j.createRange(),k;f.setStartBefore(h);f.setEnd(g.endContainer,g.endOffset);k=j.createElement("body");k.appendChild(f.cloneContents());return k.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length==0}function a(g,f){return parseInt(g.getAttribute(f)||1)}function b(J,I,M){var g,N,F,o;u();o=I.getParent(M.getStart(),"th,td");if(o){N=H(o);F=K();o=B(N.x,N.y)}function C(P,O){P=P.cloneNode(O);P.removeAttribute("id");return P}function u(){var O=0;g=[];e(["thead","tbody","tfoot"],function(P){var Q=I.select("> "+P+" tr",J);e(Q,function(R,S){S+=O;e(I.select("> td, > th",R),function(Y,T){var U,V,W,X;if(g[S]){while(g[S][T]){T++}}W=a(Y,"rowspan");X=a(Y,"colspan");for(V=S;V<S+W;V++){if(!g[V]){g[V]=[]}for(U=T;U<T+X;U++){g[V][U]={part:P,real:V==S&&U==T,elm:Y,rowspan:W,colspan:X}}}})});O+=Q.length})}function B(O,Q){var P;P=g[Q];if(P){return P[O]}}function s(Q,O,P){if(Q){P=parseInt(P);if(P===1){Q.removeAttribute(O,1)}else{Q.setAttribute(O,P,1)}}}function j(O){return O&&(I.hasClass(O.elm,"mceSelected")||O==o)}function k(){var O=[];e(J.rows,function(P){e(P.cells,function(Q){if(I.hasClass(Q,"mceSelected")||Q==o.elm){O.push(P);return false}})});return O}function r(){var O=I.createRng();O.setStartAfter(J);O.setEndAfter(J);M.setRng(O);I.remove(J)}function f(O){var P;d.walk(O,function(R){var Q;if(R.nodeType==3){e(I.getParents(R.parentNode,null,O).reverse(),function(S){S=C(S,false);if(!P){P=Q=S}else{if(Q){Q.appendChild(S)}}Q=S});if(Q){Q.innerHTML=d.isIE?"&nbsp;":'<br data-mce-bogus="1" />'}return false}},"childNodes");O=C(O,false);s(O,"rowSpan",1);s(O,"colSpan",1);if(P){O.appendChild(P)}else{if(!d.isIE){O.innerHTML='<br data-mce-bogus="1" />'}}return O}function q(){var O=I.createRng();e(I.select("tr",J),function(P){if(P.cells.length==0){I.remove(P)}});if(I.select("tr",J).length==0){O.setStartAfter(J);O.setEndAfter(J);M.setRng(O);I.remove(J);return}e(I.select("thead,tbody,tfoot",J),function(P){if(P.rows.length==0){I.remove(P)}});u();row=g[Math.min(g.length-1,N.y)];if(row){M.select(row[Math.min(row.length-1,N.x)].elm,true);M.collapse(true)}}function v(U,S,W,T){var R,P,O,Q,V;R=g[S][U].elm.parentNode;for(O=1;O<=W;O++){R=I.getNext(R,"tr");if(R){for(P=U;P>=0;P--){V=g[S+O][P].elm;if(V.parentNode==R){for(Q=1;Q<=T;Q++){I.insertAfter(f(V),V)}break}}if(P==-1){for(Q=1;Q<=T;Q++){R.insertBefore(f(R.cells[0]),R.cells[0])}}}}}function E(){e(g,function(O,P){e(O,function(R,Q){var U,T,V,S;if(j(R)){R=R.elm;U=a(R,"colspan");T=a(R,"rowspan");if(U>1||T>1){s(R,"rowSpan",1);s(R,"colSpan",1);for(S=0;S<U-1;S++){I.insertAfter(f(R),R)}v(Q,P,T-1,U)}}})})}function p(X,U,aa){var R,Q,Z,Y,W,T,V,O,X,P,S;if(X){pos=H(X);R=pos.x;Q=pos.y;Z=R+(U-1);Y=Q+(aa-1)}else{R=N.x;Q=N.y;Z=F.x;Y=F.y}V=B(R,Q);O=B(Z,Y);if(V&&O&&V.part==O.part){E();u();V=B(R,Q).elm;s(V,"colSpan",(Z-R)+1);s(V,"rowSpan",(Y-Q)+1);for(T=Q;T<=Y;T++){for(W=R;W<=Z;W++){if(!g[T]||!g[T][W]){continue}X=g[T][W].elm;if(X!=V){P=d.grep(X.childNodes);e(P,function(ab){V.appendChild(ab)});if(P.length){P=d.grep(V.childNodes);S=0;e(P,function(ab){if(ab.nodeName=="BR"&&I.getAttrib(ab,"data-mce-bogus")&&S++<P.length-1){V.removeChild(ab)}})}I.remove(X)}}}q()}}function l(S){var O,U,R,T,V,W,P,X,Q;e(g,function(Y,Z){e(Y,function(ab,aa){if(j(ab)){ab=ab.elm;V=ab.parentNode;W=C(V,false);O=Z;if(S){return false}}});if(S){return !O}});for(T=0;T<g[0].length;T++){if(!g[O][T]){continue}U=g[O][T].elm;if(U!=R){if(!S){Q=a(U,"rowspan");if(Q>1){s(U,"rowSpan",Q+1);continue}}else{if(O>0&&g[O-1][T]){X=g[O-1][T].elm;Q=a(X,"rowSpan");if(Q>1){s(X,"rowSpan",Q+1);continue}}}P=f(U);s(P,"colSpan",U.colSpan);W.appendChild(P);R=U}}if(W.hasChildNodes()){if(!S){I.insertAfter(W,V)}else{V.parentNode.insertBefore(W,V)}}}function h(P){var Q,O;e(g,function(R,S){e(R,function(U,T){if(j(U)){Q=T;if(P){return false}}});if(P){return !Q}});e(g,function(U,V){var R,S,T;if(!U[Q]){return}R=U[Q].elm;if(R!=O){T=a(R,"colspan");S=a(R,"rowspan");if(T==1){if(!P){I.insertAfter(f(R),R);v(Q,V,S-1,T)}else{R.parentNode.insertBefore(f(R),R);v(Q,V,S-1,T)}}else{s(R,"colSpan",R.colSpan+1)}O=R}})}function n(){var O=[];e(g,function(P,Q){e(P,function(S,R){if(j(S)&&d.inArray(O,R)===-1){e(g,function(V){var T=V[R].elm,U;U=a(T,"colSpan");if(U>1){s(T,"colSpan",U-1)}else{I.remove(T)}});O.push(R)}})});q()}function m(){var P;function O(S){var R,T,Q;R=I.getNext(S,"tr");e(S.cells,function(U){var V=a(U,"rowSpan");if(V>1){s(U,"rowSpan",V-1);T=H(U);v(T.x,T.y,1,1)}});T=H(S.cells[0]);e(g[T.y],function(U){var V;U=U.elm;if(U!=Q){V=a(U,"rowSpan");if(V<=1){I.remove(U)}else{s(U,"rowSpan",V-1)}Q=U}})}P=k();e(P.reverse(),function(Q){O(Q)});q()}function G(){var O=k();I.remove(O);q();return O}function L(){var O=k();e(O,function(Q,P){O[P]=C(Q,true)});return O}function D(Q,P){var R=k(),O=R[P?0:R.length-1],S=O.cells.length;e(g,function(U){var T;S=0;e(U,function(W,V){if(W.real){S+=W.colspan}if(W.elm.parentNode==O){T=1}});if(T){return false}});if(!P){Q.reverse()}e(Q,function(V){var U=V.cells.length,T;for(i=0;i<U;i++){T=V.cells[i];s(T,"colSpan",1);s(T,"rowSpan",1)}for(i=U;i<S;i++){V.appendChild(f(V.cells[U-1]))}for(i=S;i<U;i++){I.remove(V.cells[i])}if(P){O.parentNode.insertBefore(V,O)}else{I.insertAfter(V,O)}})}function H(O){var P;e(g,function(Q,R){e(Q,function(T,S){if(T.elm==O){P={x:S,y:R};return false}});return !P});return P}function A(O){N=H(O)}function K(){var Q,P,O;P=O=0;e(g,function(R,S){e(R,function(U,T){var W,V;if(j(U)){U=g[S][T];if(T>P){P=T}if(S>O){O=S}if(U.real){W=U.colspan-1;V=U.rowspan-1;if(W){if(T+W>P){P=T+W}}if(V){if(S+V>O){O=S+V}}}}})});return{x:P,y:O}}function z(U){var R,Q,W,V,P,O,S,T;F=H(U);if(N&&F){R=Math.min(N.x,F.x);Q=Math.min(N.y,F.y);W=Math.max(N.x,F.x);V=Math.max(N.y,F.y);P=W;O=V;for(y=Q;y<=O;y++){U=g[y][R];if(!U.real){if(R-(U.colspan-1)<R){R-=U.colspan-1}}}for(x=R;x<=P;x++){U=g[Q][x];if(!U.real){if(Q-(U.rowspan-1)<Q){Q-=U.rowspan-1}}}for(y=Q;y<=V;y++){for(x=R;x<=W;x++){U=g[y][x];if(U.real){S=U.colspan-1;T=U.rowspan-1;if(S){if(x+S>P){P=x+S}}if(T){if(y+T>O){O=y+T}}}}}I.removeClass(I.select("td.mceSelected,th.mceSelected"),"mceSelected");for(y=Q;y<=O;y++){for(x=R;x<=P;x++){if(g[y][x]){I.addClass(g[y][x].elm,"mceSelected")}}}}}d.extend(this,{deleteTable:r,split:E,merge:p,insertRow:l,insertCol:h,deleteCols:n,deleteRows:m,cutRows:G,copyRows:L,pasteRows:D,getPos:H,setStartCell:A,setEndCell:z})}d.create("tinymce.plugins.TablePlugin",{init:function(g,h){var f,m,j=true;function l(p){var o=g.selection,n=g.dom.getParent(p||o.getNode(),"table");if(n){return new b(n,g.dom,o)}}function k(){g.getBody().style.webkitUserSelect="";if(j){g.dom.removeClass(g.dom.select("td.mceSelected,th.mceSelected"),"mceSelected");j=false}}e([["table","table.desc","mceInsertTable",true],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",true],["cell_props","table.cell_desc","mceTableCellProps",true],["split_cells","table.split_cells_desc","mceTableSplitCells",true],["merge_cells","table.merge_cells_desc","mceTableMergeCells",true]],function(n){g.addButton(n[0],{title:n[1],cmd:n[2],ui:n[3]})});if(!d.isIE){g.onClick.add(function(n,o){o=o.target;if(o.nodeName==="TABLE"){n.selection.select(o);n.nodeChanged()}})}g.onPreProcess.add(function(o,p){var n,q,r,u=o.dom,s;n=u.select("table",p.node);q=n.length;while(q--){r=n[q];u.setAttrib(r,"data-mce-style","");if((s=u.getAttrib(r,"width"))){u.setStyle(r,"width",s);u.setAttrib(r,"width","")}if((s=u.getAttrib(r,"height"))){u.setStyle(r,"height",s);u.setAttrib(r,"height","")}}});g.onNodeChange.add(function(q,o,s){var r;s=q.selection.getStart();r=q.dom.getParent(s,"td,th,caption");o.setActive("table",s.nodeName==="TABLE"||!!r);if(r&&r.nodeName==="CAPTION"){r=0}o.setDisabled("delete_table",!r);o.setDisabled("delete_col",!r);o.setDisabled("delete_table",!r);o.setDisabled("delete_row",!r);o.setDisabled("col_after",!r);o.setDisabled("col_before",!r);o.setDisabled("row_after",!r);o.setDisabled("row_before",!r);o.setDisabled("row_props",!r);o.setDisabled("cell_props",!r);o.setDisabled("split_cells",!r);o.setDisabled("merge_cells",!r)});g.onInit.add(function(r){var p,u,q=r.dom,v;f=r.windowManager;r.onMouseDown.add(function(A,B){if(B.button!=2){k();u=q.getParent(B.target,"td,th");p=q.getParent(u,"table")}});q.bind(r.getDoc(),"mouseover",function(E){var C,B,D=E.target;if(u&&(v||D!=u)&&(D.nodeName=="TD"||D.nodeName=="TH")){B=q.getParent(D,"table");if(B==p){if(!v){v=l(B);v.setStartCell(u);r.getBody().style.webkitUserSelect="none"}v.setEndCell(D);j=true}C=r.selection.getSel();try{if(C.removeAllRanges){C.removeAllRanges()}else{C.empty()}}catch(A){}E.preventDefault()}});r.onMouseUp.add(function(H,I){var B,D=H.selection,J,K=D.getSel(),A,E,C,G;if(u){if(v){H.getBody().style.webkitUserSelect=""}function F(L,N){var M=new d.dom.TreeWalker(L,L);do{if(L.nodeType==3&&d.trim(L.nodeValue).length!=0){if(N){B.setStart(L,0)}else{B.setEnd(L,L.nodeValue.length)}return}if(L.nodeName=="BR"){if(N){B.setStartBefore(L)}else{B.setEndBefore(L)}return}}while(L=(N?M.next():M.prev()))}J=q.select("td.mceSelected,th.mceSelected");if(J.length>0){B=q.createRng();E=J[0];G=J[J.length-1];B.setStartBefore(E);B.setEndAfter(E);F(E,1);A=new d.dom.TreeWalker(E,q.getParent(J[0],"table"));do{if(E.nodeName=="TD"||E.nodeName=="TH"){if(!q.hasClass(E,"mceSelected")){break}C=E}}while(E=A.next());F(C);D.setRng(B)}H.nodeChanged();u=v=p=null}});r.onKeyUp.add(function(A,B){k()});r.onKeyDown.add(function(A,B){n(A)});r.onMouseDown.add(function(A,B){if(B.button!=2){n(A)}});function o(F,B,C,H){var D=3,I=F.dom.getParent(B.startContainer,"TABLE"),E,A,G;if(I){E=I.parentNode}A=B.startContainer.nodeType==D&&B.startOffset==0&&B.endOffset==0&&H&&(C.nodeName=="TR"||C==E);G=(C.nodeName=="TD"||C.nodeName=="TH")&&!H;return A||G}function n(C){if(!d.isWebKit){return}var B=C.selection.getRng();var E=C.selection.getNode();var D=C.dom.getParent(B.startContainer,"TD,TH");if(!o(C,B,E,D)){return}if(!D){D=E}var A=D.lastChild;while(A.lastChild){A=A.lastChild}B.setEnd(A,A.nodeValue.length);C.selection.setRng(B)}r.plugins.table.fixTableCellSelection=n;if(r&&r.plugins.contextmenu){r.plugins.contextmenu.onContextMenu.add(function(C,A,E){var F,D=r.selection,B=D.getNode()||r.getBody();if(r.dom.getParent(E,"td")||r.dom.getParent(E,"th")||r.dom.select("td.mceSelected,th.mceSelected").length){A.removeAll();if(B.nodeName=="A"&&!r.dom.getAttrib(B,"name")){A.add({title:"advanced.link_desc",icon:"link",cmd:r.plugins.advlink?"mceAdvLink":"mceLink",ui:true});A.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"});A.addSeparator()}if(B.nodeName=="IMG"&&B.className.indexOf("mceItem")==-1){A.add({title:"advanced.image_desc",icon:"image",cmd:r.plugins.advimage?"mceAdvImage":"mceImage",ui:true});A.addSeparator()}A.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}});A.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"});A.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"});A.addSeparator();F=A.addMenu({title:"table.cell"});F.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"});F.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"});F.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"});F=A.addMenu({title:"table.row"});F.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"});F.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"});F.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"});F.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"});F.addSeparator();F.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"});F.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"});F.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!m);F.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!m);F=A.addMenu({title:"table.col"});F.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"});F.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"});F.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})}else{A.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})}})}if(d.isWebKit){function z(E,P){var N=d.VK;var S=P.keyCode;function Q(aa,W,U){var V=aa?"previousSibling":"nextSibling";var ab=E.dom.getParent(W,"tr");var Z=ab[V];if(Z){B(E,W,Z,aa);d.dom.Event.cancel(U);return true}else{var ac=E.dom.getParent(ab,"table");var Y=ab.parentNode;var T=Y.nodeName.toLowerCase();if(T==="tbody"||T===(aa?"tfoot":"thead")){var X=A(aa,ac,Y,"tbody");if(X!==null){return M(aa,X,W,U)}}return O(aa,ab,V,ac,U)}}function A(X,V,W,Z){var U=E.dom.select(">"+Z,V);var T=U.indexOf(W);if(X&&T===0||!X&&T===U.length-1){return D(X,V)}else{if(T===-1){var Y=W.tagName.toLowerCase()==="thead"?0:U.length-1;return U[Y]}else{return U[T+(X?-1:1)]}}}function D(W,V){var U=W?"thead":"tfoot";var T=E.dom.select(">"+U,V);return T.length!==0?T[0]:null}function M(X,V,U,W){var T=L(V,X);T&&B(E,U,T,X);d.dom.Event.cancel(W);return true}function O(aa,W,T,Z,Y){var U=Z[T];if(U){H(U);return true}else{var X=E.dom.getParent(Z,"td,th");if(X){return Q(aa,X,Y)}else{var V=L(W,!aa);H(V);return d.dom.Event.cancel(Y)}}}function L(U,T){var V=U&&U[T?"lastChild":"firstChild"];return V&&V.nodeName==="BR"?E.dom.getParent(V,"td,th"):V}function H(T){E.selection.setCursorLocation(T,0)}function C(){return S==N.UP||S==N.DOWN}function F(T){var V=T.selection.getNode();var U=T.dom.getParent(V,"tr");return U!==null}function R(U){var T=0;var V=U;while(V.previousSibling){V=V.previousSibling;T=T+a(V,"colspan")}return T}function G(V,T){var W=0;var U=0;e(V.children,function(X,Y){W=W+a(X,"colspan");U=Y;if(W>T){return false}});return U}function B(V,Y,aa,X){var Z=R(V.dom.getParent(Y,"td,th"));var U=G(aa,Z);var T=aa.childNodes[U];var W=L(T,X);H(W||T)}function J(T){var V=E.selection.getNode();var W=E.dom.getParent(V,"td,th");var U=E.dom.getParent(T,"td,th");return W&&W!==U&&K(W,U)}function K(U,T){return E.dom.getParent(U,"TABLE")===E.dom.getParent(T,"TABLE")}if(C()&&F(E)){var I=E.selection.getNode();setTimeout(function(){if(J(I)){Q(!P.shiftKey&&S===N.UP,I,P)}},0)}}r.onKeyDown.add(z)}if(!d.isIE){function s(){var A;for(A=r.getBody().lastChild;A&&A.nodeType==3&&!A.nodeValue.length;A=A.previousSibling){}if(A&&A.nodeName=="TABLE"){r.dom.add(r.getBody(),"p",null,'<br mce_bogus="1" />')}}if(d.isGecko){r.onKeyDown.add(function(B,D){var A,C,E=B.dom;if(D.keyCode==37||D.keyCode==38){A=B.selection.getRng();C=E.getParent(A.startContainer,"table");if(C&&B.getBody().firstChild==C){if(c(A,C)){A=E.createRng();A.setStartBefore(C);A.setEndBefore(C);B.selection.setRng(A);D.preventDefault()}}}})}r.onKeyUp.add(s);r.onSetContent.add(s);r.onVisualAid.add(s);r.onPreProcess.add(function(A,C){var B=C.node.lastChild;if(B&&B.childNodes.length==1&&B.firstChild.nodeName=="BR"){A.dom.remove(B)}});if(d.isGecko){r.onKeyDown.add(function(B,D){if(D.keyCode===d.VK.ENTER&&D.shiftKey){var C=B.selection.getRng().startContainer;var E=q.getParent(C,"td,th");if(E){var A=B.getDoc().createTextNode("\uFEFF");q.insertAfter(A,C)}}})}s();r.startContent=r.getContent({format:"raw"})}});e({mceTableSplitCells:function(n){n.split()},mceTableMergeCells:function(o){var p,q,n;n=g.dom.getParent(g.selection.getNode(),"th,td");if(n){p=n.rowSpan;q=n.colSpan}if(!g.dom.select("td.mceSelected,th.mceSelected").length){f.open({url:h+"/merge_cells.htm",width:240+parseInt(g.getLang("table.merge_cells_delta_width",0)),height:110+parseInt(g.getLang("table.merge_cells_delta_height",0)),inline:1},{rows:p,cols:q,onaction:function(r){o.merge(n,r.cols,r.rows)},plugin_url:h})}else{o.merge()}},mceTableInsertRowBefore:function(n){n.insertRow(true)},mceTableInsertRowAfter:function(n){n.insertRow()},mceTableInsertColBefore:function(n){n.insertCol(true)},mceTableInsertColAfter:function(n){n.insertCol()},mceTableDeleteCol:function(n){n.deleteCols()},mceTableDeleteRow:function(n){n.deleteRows()},mceTableCutRow:function(n){m=n.cutRows()},mceTableCopyRow:function(n){m=n.copyRows()},mceTablePasteRowBefore:function(n){n.pasteRows(m,true)},mceTablePasteRowAfter:function(n){n.pasteRows(m)},mceTableDelete:function(n){n.deleteTable()}},function(o,n){g.addCommand(n,function(){var p=l();if(p){o(p);g.execCommand("mceRepaint");k()}})});e({mceInsertTable:function(n){f.open({url:h+"/table.htm",width:400+parseInt(g.getLang("table.table_delta_width",0)),height:320+parseInt(g.getLang("table.table_delta_height",0)),inline:1},{plugin_url:h,action:n?n.action:0})},mceTableRowProps:function(){f.open({url:h+"/row.htm",width:400+parseInt(g.getLang("table.rowprops_delta_width",0)),height:295+parseInt(g.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:h})},mceTableCellProps:function(){f.open({url:h+"/cell.htm",width:400+parseInt(g.getLang("table.cellprops_delta_width",0)),height:295+parseInt(g.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:h})}},function(o,n){g.addCommand(n,function(p,q){o(q)})})}});d.PluginManager.add("table",d.plugins.TablePlugin)})(tinymce);