(function(b){var e,d,a=[],c=window;b.fn.tinysafe=function(k){var q=this,g,l,h,n,j,m="",o="";if(!q.length){return q}if(!k){return tinyMCE.get(q[0].id)}function p(){var t=[],s=0;q.each(function(v,z){var u,B=z.id,A=k.oninit;if(!B){z.id=B=tinymce.DOM.uniqueId()}u=new tinymce.Editor(B,k);t.push(u);if(A){u.onInit.add(function(){var C,D=A;if(++s==t.length){if(tinymce.is(D,"string")){C=(D.indexOf(".")===-1)?null:tinymce.resolve(D.replace(/\.\w+$/,""));D=tinymce.resolve(D)}D.apply(C||tinymce,t)}})}});b.each(t,function(v,u){u.render()})}var g=k.script_url;if(k.load_js===false){if(g.charAt(g.length-1)!="/"){g+="/"}g+="gzip"}if(k.load_editor_css===false){var r;b("link").each(function(){var s=b(this);if(s.attr("rel")=="stylesheet"&&(!s.attr("type")||s.attr("type")=="text/css")&&s.attr("href")&&(!s.attr("media")||s.attr("media")=="screen")){r=s.attr("href");return false}});if(!r){r="MISS"}k.editor_css=r}if((k.load_js===false)||(!c.tinymce&&!d&&g)){d=1;h=g.substring(0,g.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(g)){o="_src"}n=g.lastIndexOf("?");if(n!=-1){m=g.substring(n+1)}c.tinyMCEPreInit=c.tinyMCEPreInit||{base:h,suffix:o,query:m};if(g.indexOf("gzip")!=-1){j=k.language||"en";g=g+(/\?/.test(g)?"&":"?")+"js=true&core=true&suffix="+escape(o)+"&themes="+escape(k.theme)+"&plugins="+escape(k.plugins)+"&languages="+j;if(!c.tinyMCE_GZ){tinyMCE_GZ={start:function(){tinymce.suffix=o;function s(t){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(t))}s("langs/"+j+".js");s("themes/"+k.theme+"/editor_template"+o+".js");s("themes/"+k.theme+"/langs/"+j+".js");b.each(k.plugins.split(","),function(u,t){if(t){s("plugins/"+t+"/editor_plugin"+o+".js");s("plugins/"+t+"/langs/"+j+".js")}})},end:function(){}}}}if(k.load_js===false){tinymce.baseURL=new tinymce.util.URI(tinymce.documentBaseURL).toAbsolute(tinyMCEPreInit.base);if(tinymce.baseURL.charAt(tinymce.baseURL.length-1)=="/"){tinymce.baseURL=tinymce.baseURL.substr(0,tinymce.baseURL.length-1)}tinymce.baseURI=new tinymce.util.URI(tinymce.baseURL);tinymce.dom.Event.domLoaded=1;tinyMCE_GZ.start();if(k.script_loaded){k.script_loaded()}p()}(k.load_js!==false)&&b.ajax({type:"GET",url:g,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;d=2;if(k.script_loaded){k.script_loaded()}p();b.each(a,function(s,t){t()})}})}else{if(d===1){a.push(p)}else{p()}}return q};b.extend(b.expr[":"],{tinymce:function(g){return g.id&&!!tinyMCE.get(g.id)}});function f(){function j(m){if(m==="remove"){this.each(function(o,p){var n=h(p);if(n){n.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(o,p){var n=tinyMCE.get(p.id.replace(/_parent$/,""));if(n){n.remove()}})}function l(o){var n=this,m;if(o!==e){j.call(n);n.each(function(q,r){var p;if(p=tinyMCE.get(r.id)){p.setContent(o)}})}else{if(n.length>0){if(m=tinyMCE.get(n[0].id)){return m.getContent()}}}}function h(n){var m=null;(n)&&(n.id)&&(c.tinymce)&&(m=tinyMCE.get(n.id));return m}function g(m){return !!((m)&&(m.length)&&(c.tinymce)&&(m.is(":tinymce")))}var k={};b.each(["text","html","val"],function(o,m){var p=k[m]=b.fn[m],n=(m==="text");b.fn["tiny_"+m]=function(t){var q=this;if(!g(q)){return p.apply(q,arguments)}if(t!==e){l.call(q.filter(":tinymce"),t);p.apply(q.not(":tinymce"),arguments);return q}else{var s="";var r=arguments;(n?q:q.eq(0)).each(function(v,z){var u=h(z);s+=u?(n?u.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):u.getContent()):p.apply(b(z),r)});return s}}});b.each(["append","prepend"],function(o,n){var p=k[n]=b.fn[n],m=(n==="prepend");b.fn["tiny_"+n]=function(r){var q=this;if(!g(q)){return p.apply(q,arguments)}if(r!==e){q.filter(":tinymce").each(function(t,u){var s=h(u);s&&s.setContent(m?r+s.getContent():s.getContent()+r)});p.apply(q.not(":tinymce"),arguments);return q}}});b.each(["remove","replaceWith","replaceAll","empty"],function(n,m){var o=k[m]=b.fn[m];b.fn["tiny_"+m]=function(){j.call(this,m);return o.apply(this,arguments)}});k.attr=b.fn.attr;b.fn.tiny_attr=function(o,r,p){var n=this;if((!o)||(o!=="value")||(!g(n))){return k.attr.call(n,o,r,p)}if(r!==e){l.call(n.filter(":tinymce"),r);k.attr.call(n.not(":tinymce"),o,r,p);return n}else{var q=n[0],m=h(q);return m?m.getContent():k.attr.call(b(q),o,r,p)}}}if(f){f();f=null}})(jQuery);(function(d){var a=/^\s*|\s*$/g,e,c="B".replace(/A(.)|B/,"$1")==="$1";var b={majorVersion:"@@tinymce_major_version@@",minorVersion:"@@tinymce_minor_version@@",releaseDate:"@@tinymce_release_date@@",_init:function(){var s=this,q=document,o=navigator,g=o.userAgent,m,f,l,k,j,r;s.isOpera=d.opera&&opera.buildNumber;s.isWebKit=/WebKit/.test(g);s.isIE=!s.isWebKit&&!s.isOpera&&(/MSIE/gi).test(g)&&(/Explorer/gi).test(o.appName);s.isIE6=s.isIE&&/MSIE [56]/.test(g);s.isIE7=s.isIE&&/MSIE [7]/.test(g);s.isIE8=s.isIE&&/MSIE [8]/.test(g);s.isIE9=s.isIE&&/MSIE [9]/.test(g);s.isGecko=!s.isWebKit&&/Gecko/.test(g);s.isMac=g.indexOf("Mac")!=-1;s.isAir=/adobeair/i.test(g);s.isIDevice=/(iPad|iPhone)/.test(g);s.isIOS5=s.isIDevice&&g.match(/AppleWebKit\/(\d*)/)[1]>=534;if(d.tinyMCEPreInit){s.suffix=tinyMCEPreInit.suffix;s.baseURL=tinyMCEPreInit.base;s.query=tinyMCEPreInit.query;return}s.suffix="";f=q.getElementsByTagName("base");for(m=0;m<f.length;m++){if(r=f[m].href){if(/^https?:\/\/[^\/]+$/.test(r)){r+="/"}k=r?r.match(/.*\//)[0]:""}}function h(p){if(p.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(p.src)){if(/_(src|dev)\.js/g.test(p.src)){s.suffix="_src"}if((j=p.src.indexOf("?"))!=-1){s.query=p.src.substring(j+1)}s.baseURL=p.src.substring(0,p.src.lastIndexOf("/"));if(k&&s.baseURL.indexOf("://")==-1&&s.baseURL.indexOf("/")!==0){s.baseURL=k+s.baseURL}return s.baseURL}return null}f=q.getElementsByTagName("script");for(m=0;m<f.length;m++){if(h(f[m])){return}}l=q.getElementsByTagName("head")[0];if(l){f=l.getElementsByTagName("script");for(m=0;m<f.length;m++){if(h(f[m])){return}}}return},is:function(g,f){if(!f){return g!==e}if(f=="array"&&(g.hasOwnProperty&&g instanceof Array)){return true}return typeof(g)==f},makeMap:function(f,j,h){var g;f=f||[];j=j||",";if(typeof(f)=="string"){f=f.split(j)}h=h||{};g=f.length;while(g--){h[f[g]]={}}return h},each:function(j,f,h){var k,g;if(!j){return 0}h=h||j;if(j.length!==e){for(k=0,g=j.length;k<g;k++){if(f.call(h,j[k],k,j)===false){return 0}}}else{for(k in j){if(j.hasOwnProperty(k)){if(f.call(h,j[k],k,j)===false){return 0}}}}return 1},map:function(g,h){var j=[];b.each(g,function(f){j.push(h(f))});return j},grep:function(g,h){var j=[];b.each(g,function(f){if(!h||h(f)){j.push(f)}});return j},inArray:function(g,h){var j,f;if(g){for(j=0,f=g.length;j<f;j++){if(g[j]===h){return j}}}return -1},extend:function(k,j){var h,g,f=arguments;for(h=1,g=f.length;h<g;h++){j=f[h];b.each(j,function(l,m){if(l!==e){k[m]=l}})}return k},trim:function(f){return(f?""+f:"").replace(a,"")},create:function(q,f,k){var o=this,g,j,l,m,h,n=0;q=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(q);l=q[3].match(/(^|\.)(\w+)$/i)[2];j=o.createNS(q[3].replace(/\.\w+$/,""),k);if(j[l]){return}if(q[2]=="static"){j[l]=f;if(this.onCreate){this.onCreate(q[2],q[3],j[l])}return}if(!f[l]){f[l]=function(){};n=1}j[l]=f[l];o.extend(j[l].prototype,f);if(q[5]){g=o.resolve(q[5]).prototype;m=q[5].match(/\.(\w+)$/i)[1];h=j[l];if(n){j[l]=function(){return g[m].apply(this,arguments)}}else{j[l]=function(){this.parent=g[m];return h.apply(this,arguments)}}j[l].prototype[l]=j[l];o.each(g,function(p,r){j[l].prototype[r]=g[r]});o.each(f,function(p,r){if(g[r]){j[l].prototype[r]=function(){this.parent=g[r];return p.apply(this,arguments)}}else{if(r!=l){j[l].prototype[r]=p}}})}o.each(f["static"],function(p,r){j[l][r]=p});if(this.onCreate){this.onCreate(q[2],q[3],j[l].prototype)}},walk:function(j,h,k,g){g=g||this;if(j){if(k){j=j[k]}b.each(j,function(l,f){if(h.call(g,l,f,k)===false){return false}b.walk(l,h,k,g)})}},createNS:function(j,h){var g,f;h=h||d;j=j.split(".");for(g=0;g<j.length;g++){f=j[g];if(!h[f]){h[f]={}}h=h[f]}return h},resolve:function(j,h){var g,f;h=h||d;j=j.split(".");for(g=0,f=j.length;g<f;g++){h=h[j[g]];if(!h){break}}return h},addUnload:function(k,j){var h=this;k={func:k,scope:j||this};if(!h.unloads){function g(){var f=h.unloads,m,p;if(f){for(p in f){m=f[p];if(m&&m.func){m.func.call(m.scope,1)}}if(d.detachEvent){d.detachEvent("onbeforeunload",l);d.detachEvent("onunload",g)}else{if(d.removeEventListener){d.removeEventListener("unload",g,false)}}h.unloads=m=f=w=g=0;if(d.CollectGarbage){CollectGarbage()}}}function l(){var m=document;if(m.readyState=="interactive"){function f(){m.detachEvent("onstop",f);if(g){g()}m=0}if(m){m.attachEvent("onstop",f)}d.setTimeout(function(){if(m){m.detachEvent("onstop",f)}},0)}}if(d.attachEvent){d.attachEvent("onunload",g);d.attachEvent("onbeforeunload",l)}else{if(d.addEventListener){d.addEventListener("unload",g,false)}}h.unloads=[k]}else{h.unloads.push(k)}return k},removeUnload:function(j){var g=this.unloads,h=null;b.each(g,function(k,f){if(k&&k.func==j){g.splice(f,1);h=j;return false}});return h},explode:function(f,g){return f?b.map(f.split(g||","),b.trim):f},_addVer:function(g){var f;if(!this.query){return g}f=(g.indexOf("?")==-1?"?":"&")+this.query;if(g.indexOf("#")==-1){return g+f}return g.replace("#",f+"#")},_replace:function(h,f,g){if(c){return g.replace(h,function(){var l=f,j=arguments,k;for(k=0;k<j.length-2;k++){if(j[k]===e){l=l.replace(new RegExp("\\$"+k,"g"),"")}else{l=l.replace(new RegExp("\\$"+k,"g"),j[k])}}return l})}return g.replace(h,f)}};b._init();d.tinymce=d.tinyMCE=b})(window);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){this.listeners.unshift({cb:a,scope:b||this.scope});return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(e,d){if(a==e.cb){c=a;b.splice(d,1);return false}});return c},dispatch:function(){var f,d=arguments,e,b=this.listeners,g;for(e=0;e<b.length;e++){g=b[e];f=g.cb.apply(g.scope,d.length>0?d:[g.scope]);if(f===false){break}}return f}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,g){var f=this,j,d,c,h;e=tinymce.trim(e);g=f.settings=g||{};if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){f.source=e;return}if(e.indexOf("/")===0&&e.indexOf("//")!==0){e=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+e}if(!/^[\w-]*:?\/\//.test(e)){h=g.base_uri?g.base_uri.path:new tinymce.util.URI(location.href).directory;e=((g.base_uri&&g.base_uri.protocol)||"http")+"://mce_host"+f.toAbsPath(h,e)}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,k){var l=e[k];if(l){l=l.replace(/\(mce_at\)/g,"@@")}f[b]=l});if(c=g.base_uri){if(!f.protocol){f.protocol=c.protocol}if(!f.userInfo){f.userInfo=c.userInfo}if(!f.port&&f.host=="mce_host"){f.port=c.port}if(!f.host||f.host=="mce_host"){f.host=c.host}f.source=""}},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source="";b.getURI()},toRelative:function(b){var c=this,d;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:c});if((b.host!="mce_host"&&c.host!=b.host&&b.host)||c.port!=b.port||c.protocol!=b.protocol){return b.getURI()}d=c.toRelPath(c.path,b.path);if(b.query){d+="?"+b.query}if(b.anchor){d+="#"+b.anchor}return d},toAbsolute:function(b,c){var b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,f=0,d="",e,b;g=g.substring(0,g.lastIndexOf("/"));g=g.split("/");c=h.split("/");if(g.length>=c.length){for(e=0,b=g.length;e<b;e++){if(e>=c.length||g[e]!=c[e]){f=e+1;break}}}if(g.length<c.length){for(e=0,b=c.length;e<b;e++){if(e>=g.length||g[e]!=c[e]){f=e+1;break}}}if(f==1){return h}for(e=0,b=g.length-(f-1);e<b;e++){d+="../"}for(e=f-1,b=c.length;e<b;e++){if(e!=f-1){d+="/"+c[e]}else{d+=c[e]}}return d},toAbsPath:function(e,f){var c,b=0,h=[],d,g;d=/\/$/.test(f)?"/":"";e=e.split("/");f=f.split("/");a(e,function(j){if(j){h.push(j)}});e=h;for(c=f.length-1,h=[];c>=0;c--){if(f[c].length==0||f[c]=="."){continue}if(f[c]==".."){b++;continue}if(b>0){b--;continue}h.push(f[c])}c=e.length-b;if(c<=0){g=h.reverse().join("/")}else{g=e.slice(0,c).join("/")+"/"+h.reverse().join("/")}if(g.indexOf("/")!==0){g="/"+g}if(d&&g.lastIndexOf("/")!==g.length-1){g+=d}return g},getURI:function(d){var c,b=this;if(!b.source||d){c="";if(!d){if(b.protocol){c+=b.protocol+"://"}if(b.userInfo){c+=b.userInfo+"@"}if(b.host){c+=b.host}if(b.port){c+=":"+b.port}}if(b.path){c+=b.path}if(b.query){c+="?"+b.query}if(b.anchor){c+="#"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var b=this.get(d),c;if(b){a(b.split("&"),function(e){e=e.split("=");c=c||{};c[unescape(e[0])]=unescape(e[1])})}return c},setHash:function(k,b,g,f,j,c){var h="";a(b,function(e,d){h+=(!h?"":"&")+escape(d)+"="+escape(e)});this.set(k,h,g,f,j,c)},get:function(j){var h=document.cookie,g,f=j+"=",d;if(!h){return}d=h.indexOf("; "+f);if(d==-1){d=h.indexOf(f);if(d!=0){return null}}else{d+=2}g=h.indexOf(";",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(j,b,g,f,h,c){document.cookie=j+"="+escape(b)+((g)?"; expires="+g.toGMTString():"")+((f)?"; path="+escape(f):"")+((h)?"; domain="+h:"")+((c)?"; secure":"")},remove:function(e,b){var c=new Date();c.setTime(c.getTime()-1000);this.set(e,"",c,b,c)}})})();(function(){function serialize(o,quote){var i,v,t;quote=quote||'"';if(o==null){return"null"}t=typeof o;if(t=="string"){v="\bb\tt\nn\ff\rr\"\"''\\\\";return quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if(quote==='"'&&a==="'"){return a}i=v.indexOf(b);if(i+1){return"\\"+v.charAt(i+1)}a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+quote}if(t=="object"){if(o.hasOwnProperty&&o instanceof Array){for(i=0,v="[";i<o.length;i++){v+=(i>0?",":"")+serialize(o[i],quote)}return v+"]"}v="{";for(i in o){if(o.hasOwnProperty(i)){v+=typeof o[i]!="function"?(v.length>1?","+quote:quote)+i+quote+":"+serialize(o[i],quote):""}}return v+"}"}return""+o}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}})();tinymce.create("static tinymce.util.XHR",{send:function(g){var a,e,b=window,h=0;g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||"";function d(j){a=0;try{a=new ActiveXObject(j)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?"POST":"GET"),g.url,g.async);if(g.content_type){a.setRequestHeader("Content-Type",g.content_type)}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(g.data);function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,""+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?"TIMED_OUT":"GENERAL",a,g)}}a=null}else{b.setTimeout(f,10)}}if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var c=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=c({},d);this.count=0},send:function(f){var e=f.error,d=f.success;f=c(this.settings,f);f.success=function(h,g){h=b.parse(h);if(typeof(h)=="undefined"){h={error:"JSON Parse error."}}if(h.error){e.call(f.error_scope||f.scope,h.error,g)}else{d.call(f.success_scope||f.scope,h.result)}};f.error=function(h,g){if(e){e.call(f.error_scope||f.scope,h,g)}};f.data=b.serialize({id:f.id||"c"+(this.count++),method:f.method,params:f.params});f.content_type="application/json";a.send(f)},"static":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d)}}})}());(function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40,modifierPressed:function(b){return b.shiftKey||b.ctrlKey||b.altKey}}})(tinymce);(function(m){var k=m.VK,l=k.BACKSPACE,h=k.DELETE;function c(o){var q=o.dom,p=o.selection;o.onKeyDown.add(function(s,z){var r,A,u,v,t;t=z.keyCode==h;if((t||z.keyCode==l)&&!k.modifierPressed(z)){z.preventDefault();r=p.getRng();A=q.getParent(r.startContainer,q.isBlock);if(t){A=q.getNext(A,q.isBlock)}if(A){u=A.firstChild;while(u&&u.nodeType==3&&u.nodeValue.length==0){u=u.nextSibling}if(u&&u.nodeName==="SPAN"){v=u.cloneNode(false)}}s.getDoc().execCommand(t?"ForwardDelete":"Delete",false,null);A=q.getParent(r.startContainer,q.isBlock);m.each(q.select("span.Apple-style-span,font.Apple-style-span",A),function(B){var C=p.getBookmark();if(v){q.replace(v.cloneNode(false),B,true)}else{q.remove(B,true)}p.moveToBookmark(C)})}})}function d(o){o.onKeyUp.add(function(p,r){var q=r.keyCode;if(q==h||q==l){if(p.dom.isEmpty(p.getBody())){p.setContent("",{format:"raw"});p.nodeChanged();return}}})}function b(o){o.dom.bind(o.getDoc(),"focusin",function(){o.selection.setRng(o.selection.getRng())})}function e(o){o.onKeyDown.add(function(p,s){if(s.keyCode===l){if(p.selection.isCollapsed()&&p.selection.getRng(true).startOffset===0){var r=p.selection.getNode();var q=r.previousSibling;if(q&&q.nodeName&&q.nodeName.toLowerCase()==="hr"){p.dom.remove(q);m.dom.Event.cancel(s)}}}})}function g(o){if(!Range.prototype.getClientRects){o.onMouseDown.add(function(q,r){if(r.target.nodeName==="HTML"){var p=q.getBody();p.blur();setTimeout(function(){p.focus()},0)}})}}function f(o){o.onClick.add(function(p,q){q=q.target;if(/^(IMG|HR)$/.test(q.nodeName)){p.selection.getSel().setBaseAndExtent(q,0,q,1)}if(q.nodeName=="A"&&p.dom.hasClass(q,"mceItemAnchor")){p.selection.select(q)}p.nodeChanged()})}function j(o){o.onKeyDown.add(function(p,q){function r(s){var t=s.selection.getNode();var u="h1,h2,h3,h4,h5,h6";return s.dom.is(t,u)||s.dom.getParent(t,u)!==null}if(q.keyCode===k.ENTER&&!k.modifierPressed(q)&&r(p)){setTimeout(function(){var s=p.selection.getNode();if(p.dom.is(s,"p")){p.dom.setAttrib(s,"style",null);p.execCommand("mceCleanup")}},0)}})}function n(o){var q,p;o.dom.bind(o.getDoc(),"selectionchange",function(){if(p){clearTimeout(p);p=0}p=window.setTimeout(function(){var r=o.selection.getRng();if(!q||!m.dom.RangeUtils.compareRanges(r,q)){o.nodeChanged();q=r}},50)})}function a(o){document.body.setAttribute("role","application")}m.create("tinymce.util.Quirks",{Quirks:function(o){if(m.isWebKit){c(o);d(o);b(o);f(o);if(m.isIDevice){n(o)}}if(m.isIE){e(o);d(o);a(o);j(o)}if(m.isGecko){e(o);g(o)}}})})(tinymce);(function(k){var a,g,d,l=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,c=/&(#x|#)?([\w]+);/g,j={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};g={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};d={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};function h(m){var n;n=document.createElement("div");n.innerHTML=m;return n.textContent||n.innerText||m}function e(n,q){var o,p,m,r={};if(n){n=n.split(",");q=q||10;for(o=0;o<n.length;o+=2){p=String.fromCharCode(parseInt(n[o],q));if(!g[p]){m="&"+n[o+1]+";";r[p]=m;r[m]=p}}return r}}a=e("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);k.html=k.html||{};k.html.Entities={encodeRaw:function(n,m){return n.replace(m?l:b,function(o){return g[o]||o})},encodeAllRaw:function(m){return(""+m).replace(f,function(n){return g[n]||n})},encodeNumeric:function(n,m){return n.replace(m?l:b,function(o){if(o.length>1){return"&#"+(((o.charCodeAt(0)-55296)*1024)+(o.charCodeAt(1)-56320)+65536)+";"}return g[o]||"&#"+o.charCodeAt(0)+";"})},encodeNamed:function(o,m,n){n=n||a;return o.replace(m?l:b,function(p){return g[p]||n[p]||p})},getEncodeFunc:function(m,p){var q=k.html.Entities;p=e(p)||a;function n(s,r){return s.replace(r?l:b,function(t){return g[t]||p[t]||"&#"+t.charCodeAt(0)+";"||t})}function o(s,r){return q.encodeNamed(s,r,p)}m=k.makeMap(m.replace(/\+/g,","));if(m.named&&m.numeric){return n}if(m.named){if(p){return o}return q.encodeNamed}if(m.numeric){return q.encodeNumeric}return q.encodeRaw},decode:function(m){return m.replace(c,function(o,n,p){if(n){p=parseInt(p,n.length===2?16:10);if(p>65535){p-=65536;return String.fromCharCode(55296+(p>>10),56320+(p&1023))}else{return j[p]||String.fromCharCode(p)}}return d[o]||a[o]||h(o)})}}})(tinymce);tinymce.html.Styles=function(d,f){var k=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,h=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,m=/rgb/,e,g,a={},j;d=d||{};j="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(g=0;g<j.length;g++){a[j[g]]="\uFEFF"+g;a["\uFEFF"+g]=j[g]}function c(o,s,q,n){function p(r){r=parseInt(r).toString(16);return r.length>1?r:"0"+r}return"#"+p(s)+p(q)+p(n)}return{toHex:function(n){return n.replace(k,c)},parse:function(s){var B={},q,o,z,r,v=d.url_converter,A=d.url_converter_scope||this;function p(F,I){var H,E,D,G;H=B[F+"-top"+I];if(!H){return}E=B[F+"-right"+I];if(H!=E){return}D=B[F+"-bottom"+I];if(E!=D){return}G=B[F+"-left"+I];if(D!=G){return}B[F+I]=G;delete B[F+"-top"+I];delete B[F+"-right"+I];delete B[F+"-bottom"+I];delete B[F+"-left"+I]}function u(E){var F=B[E],D;if(!F||F.indexOf(" ")<0){return}F=F.split(" ");D=F.length;while(D--){if(F[D]!==F[0]){return false}}B[E]=F[0];return true}function C(F,E,D,G){if(!u(E)){return}if(!u(D)){return}if(!u(G)){return}B[F]=B[E]+" "+B[D]+" "+B[G];delete B[E];delete B[D];delete B[G]}function t(D){r=true;return a[D]}function n(E,D){if(r){E=E.replace(/\uFEFF[0-9]/g,function(F){return a[F]})}if(!D){E=E.replace(/\\([\'\";:])/g,"$1")}return E}if(s){s=s.replace(/\\[\"\';:\uFEFF]/g,t).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(D){return D.replace(/[;:]/g,t)});while(q=b.exec(s)){o=q[1].replace(l,"").toLowerCase();z=q[2].replace(l,"");if(o&&z.length>0){if(o==="font-weight"&&z==="700"){z="bold"}else{if(o==="color"||o==="background-color"){z=z.toLowerCase()}}z=z.replace(k,c);z=z.replace(h,function(E,D,H,G,I,F){I=I||F;if(I){I=n(I);return"'"+I.replace(/\'/g,"\\'")+"'"}D=n(D||H||G);if(v){D=v.call(A,D,"style")}return"url('"+D.replace(/\'/g,"\\'")+"')"});B[o]=r?n(z,true):z}b.lastIndex=q.index+q[0].length}p("border","");p("border","-width");p("border","-color");p("border","-style");p("padding","");p("margin","");C("border","border-width","border-style","border-color");if(B.border==="medium none"){delete B.border}}return B},serialize:function(q,s){var p="",o,r;function n(u){var A,v,t,z;A=f.styles[u];if(A){for(v=0,t=A.length;v<t;v++){u=A[v];z=q[u];if(z!==e&&z.length>0){p+=(p.length>0?" ":"")+u+": "+z+";"}}}}if(s&&f&&f.styles){n("*");n(s)}else{for(o in q){r=q[o];if(r!==e&&r.length>0){p+=(p.length>0?" ":"")+o+": "+r+";"}}}return p}}};(function(n){var h={},k,m,g,f,c={},b,e,d=n.makeMap,l=n.each;function j(p,o){return p.split(o||",")}function a(s,r){var p,q={};function o(t){return t.replace(/[A-Z]+/g,function(u){return o(s[u])})}for(p in s){if(s.hasOwnProperty(p)){s[p]=o(s[p])}}o(r).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(z,u,t,v){t=j(t,"|");q[u]={attributes:d(t),attributesOrder:t,children:d(v,"|",{"#comment":{}})}});return q}m="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";m=d(m,",",d(m.toUpperCase()));h=a({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]");k=d("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls");g=d("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");f=n.extend(d("td,th,iframe,video,audio,object"),g);b=d("pre,script,style,textarea");e=d("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");n.html.Schema=function(s){var D=this,o={},p={},B=[],r,q;s=s||{};if(s.verify_html===false){s.valid_elements="*[*]"}if(s.valid_styles){r={};l(s.valid_styles,function(F,E){r[E]=n.explode(F)})}q=s.whitespace_elements?d(s.whitespace_elements):b;function C(E){return new RegExp("^"+E.replace(/([?+*])/g,".$1")+"$")}function u(L){var K,G,Z,V,aa,F,I,U,X,Q,Y,ac,O,J,W,E,S,H,ab,ad,P,T,N=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,R=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,M=/[*?+]/;if(L){L=j(L);if(o["@"]){S=o["@"].attributes;H=o["@"].attributesOrder}for(K=0,G=L.length;K<G;K++){F=N.exec(L[K]);if(F){W=F[1];Q=F[2];E=F[3];X=F[4];O={};J=[];I={attributes:O,attributesOrder:J};if(W==="#"){I.paddEmpty=true}if(W==="-"){I.removeEmpty=true}if(S){for(ad in S){O[ad]=S[ad]}J.push.apply(J,H)}if(X){X=j(X,"|");for(Z=0,V=X.length;Z<V;Z++){F=R.exec(X[Z]);if(F){U={};ac=F[1];Y=F[2].replace(/::/g,":");W=F[3];T=F[4];if(ac==="!"){I.attributesRequired=I.attributesRequired||[];I.attributesRequired.push(Y);U.required=true}if(ac==="-"){delete O[Y];J.splice(n.inArray(J,Y),1);continue}if(W){if(W==="="){I.attributesDefault=I.attributesDefault||[];I.attributesDefault.push({name:Y,value:T});U.defaultValue=T}if(W===":"){I.attributesForced=I.attributesForced||[];I.attributesForced.push({name:Y,value:T});U.forcedValue=T}if(W==="<"){U.validValues=d(T,"?")}}if(M.test(Y)){I.attributePatterns=I.attributePatterns||[];U.pattern=C(Y);I.attributePatterns.push(U)}else{if(!O[Y]){J.push(Y)}O[Y]=U}}}}if(!S&&Q=="@"){S=O;H=J}if(E){I.outputName=Q;o[E]=I}if(M.test(Q)){I.pattern=C(Q);B.push(I)}else{o[Q]=I}}}}}function z(E){o={};B=[];u(E);l(h,function(G,F){p[F]=G.children})}function t(F){var E=/^(~)?(.+)$/;if(F){l(j(F),function(J){var H=E.exec(J),I=H[1]==="~",K=I?"span":"div",G=H[2];p[G]=p[K];c[G]=K;if(!I){m[G]={}}l(p,function(L,M){if(L[K]){L[G]=L[K]}})})}}function v(F){var E=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(F){l(j(F),function(J){var I=E.exec(J),G,H;if(I){H=I[1];if(H){G=p[I[2]]}else{G=p[I[2]]={"#comment":{}}}G=p[I[2]];l(j(I[3],"|"),function(K){if(H==="-"){delete G[K]}else{G[K]={}}})}})}}function A(E){var G=o[E],F;if(G){return G}F=B.length;while(F--){G=B[F];if(G.pattern.test(E)){return G}}}if(!s.valid_elements){l(h,function(F,E){o[E]={attributes:F.attributes,attributesOrder:F.attributesOrder};p[E]=F.children});l(j("strong/b,em/i"),function(E){E=j(E,"/");o[E[1]].outputName=E[0]});o.img.attributesDefault=[{name:"alt",value:""}];l(j("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(E){o[E].removeEmpty=true});l(j("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(E){o[E].paddEmpty=true})}else{z(s.valid_elements)}t(s.custom_elements);v(s.valid_children);u(s.extended_valid_elements);v("+ol[ul|ol],+ul[ul|ol]");if(!A("span")){u("span[!data-mce-type|*]")}if(s.invalid_elements){n.each(n.explode(s.invalid_elements),function(E){if(o[E]){delete o[E]}})}D.children=p;D.styles=r;D.getBoolAttrs=function(){return k};D.getBlockElements=function(){return m};D.getShortEndedElements=function(){return g};D.getSelfClosingElements=function(){return e};D.getNonEmptyElements=function(){return f};D.getWhiteSpaceElements=function(){return q};D.isValidChild=function(E,G){var F=p[E];return !!(F&&F[G])};D.getElementRule=A;D.getCustomElements=function(){return c};D.addValidElements=u;D.setValidElements=z;D.addCustomElements=t;D.addValidChildren=v};n.html.Schema.boolAttrMap=k;n.html.Schema.blockElementsMap=m})(tinymce);(function(a){a.html.SaxParser=function(c,e){var b=this,d=function(){};c=c||{};b.schema=e=e||new a.html.Schema();if(c.fix_self_closing!==false){c.fix_self_closing=true}a.each("comment cdata text start end pi doctype".split(" "),function(f){if(f){b[f]=c[f]||d}});b.parse=function(F){var n=this,g,H=0,J,C,B=[],O,R,D,q,A,r,N,I,P,u,m,k,s,S,o,Q,G,T,M,f,K,l,E,L,h,v=0,j=a.html.Entities.decode,z,p;function t(U){var W,V;W=B.length;while(W--){if(B[W].name===U){break}}if(W>=0){for(V=B.length-1;V>=W;V--){U=B[V];if(U.valid){n.end(U.name)}}B.length=W}}l=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g");E=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;L={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};N=e.getShortEndedElements();K=e.getSelfClosingElements();I=e.getBoolAttrs();u=c.validate;r=c.remove_internals;z=c.fix_self_closing;p=a.isIE;o=/^:/;while(g=l.exec(F)){if(H<g.index){n.text(j(F.substr(H,g.index-H)))}if(J=g[6]){J=J.toLowerCase();if(p&&o.test(J)){J=J.substr(1)}t(J)}else{if(J=g[7]){J=J.toLowerCase();if(p&&o.test(J)){J=J.substr(1)}P=J in N;if(z&&K[J]&&B.length>0&&B[B.length-1].name===J){t(J)}if(!u||(m=e.getElementRule(J))){k=true;if(u){Q=m.attributes;G=m.attributePatterns}if(S=g[8]){A=S.indexOf("data-mce-type")!==-1;if(A&&r){k=false}O=[];O.map={};S.replace(E,function(V,U,Z,Y,X){var aa,W;U=U.toLowerCase();Z=U in I?U:j(Z||Y||X||"");if(u&&!A&&U.indexOf("data-")!==0){aa=Q[U];if(!aa&&G){W=G.length;while(W--){aa=G[W];if(aa.pattern.test(U)){break}}if(W===-1){aa=null}}if(!aa){return}if(aa.validValues&&!(Z in aa.validValues)){return}}O.map[U]=Z;O.push({name:U,value:Z})})}else{O=[];O.map={}}if(u&&!A){T=m.attributesRequired;M=m.attributesDefault;f=m.attributesForced;if(f){R=f.length;while(R--){s=f[R];q=s.name;h=s.value;if(h==="{$uid}"){h="mce_"+v++}O.map[q]=h;O.push({name:q,value:h})}}if(M){R=M.length;while(R--){s=M[R];q=s.name;if(!(q in O.map)){h=s.value;if(h==="{$uid}"){h="mce_"+v++}O.map[q]=h;O.push({name:q,value:h})}}}if(T){R=T.length;while(R--){if(T[R] in O.map){break}}if(R===-1){k=false}}if(O.map["data-mce-bogus"]){k=false}}if(k){n.start(J,O,P)}}else{k=false}if(C=L[J]){C.lastIndex=H=g.index+g[0].length;if(g=C.exec(F)){if(k){D=F.substr(H,g.index-H)}H=g.index+g[0].length}else{D=F.substr(H);H=F.length}if(k&&D.length>0){n.text(D,true)}if(k){n.end(J)}l.lastIndex=H;continue}if(!P){if(!S||S.indexOf("/")!=S.length-1){B.push({name:J,valid:k})}else{if(k){n.end(J)}}}}else{if(J=g[1]){n.comment(J)}else{if(J=g[2]){n.cdata(J)}else{if(J=g[3]){n.doctype(J)}else{if(J=g[4]){n.pi(J,g[5])}}}}}}H=g.index+g[0].length}if(H<F.length){n.text(j(F.substr(H)))}for(R=B.length-1;R>=0;R--){J=B[R];if(J.valid){n.end(J.name)}}}}})(tinymce);(function(d){var c=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function a(l,m,k){var j,h,f=k?"lastChild":"firstChild",g=k?"prev":"next";if(l[f]){return l[f]}if(l!==m){j=l[g];if(j){return j}for(h=l.parent;h&&h!==m;h=h.parent){j=h[g];if(j){return j}}}}function b(f,g){this.name=f;this.type=g;if(g===1){this.attributes=[];this.attributes.map={}}}d.extend(b.prototype,{replace:function(g){var f=this;if(g.parent){g.remove()}f.insert(g,f);f.remove();return f},attr:function(h,l){var f=this,g,j,k;if(typeof h!=="string"){for(j in h){f.attr(j,h[j])}return f}if(g=f.attributes){if(l!==k){if(l===null){if(h in g.map){delete g.map[h];j=g.length;while(j--){if(g[j].name===h){g=g.splice(j,1);return f}}}return f}if(h in g.map){j=g.length;while(j--){if(g[j].name===h){g[j].value=l;break}}}else{g.push({name:h,value:l})}g.map[h]=l;return f}else{return g.map[h]}}},clone:function(){var g=this,n=new b(g.name,g.type),h,f,m,j,k;if(m=g.attributes){k=[];k.map={};for(h=0,f=m.length;h<f;h++){j=m[h];if(j.name!=="id"){k[k.length]={name:j.name,value:j.value};k.map[j.name]=j.value}}n.attributes=k}n.value=g.value;n.shortEnded=g.shortEnded;return n},wrap:function(g){var f=this;f.parent.insert(g,f);g.append(f);return f},unwrap:function(){var f=this,h,g;for(h=f.firstChild;h;){g=h.next;f.insert(h,f,true);h=g}f.remove()},remove:function(){var f=this,h=f.parent,g=f.next,j=f.prev;if(h){if(h.firstChild===f){h.firstChild=g;if(g){g.prev=null}}else{j.next=g}if(h.lastChild===f){h.lastChild=j;if(j){j.next=null}}else{g.prev=j}f.parent=f.next=f.prev=null}return f},append:function(h){var f=this,g;if(h.parent){h.remove()}g=f.lastChild;if(g){g.next=h;h.prev=g;f.lastChild=h}else{f.lastChild=f.firstChild=h}h.parent=f;return h},insert:function(h,f,j){var g;if(h.parent){h.remove()}g=f.parent||this;if(j){if(f===g.firstChild){g.firstChild=h}else{f.prev.next=h}h.prev=f.prev;h.next=f;f.prev=h}else{if(f===g.lastChild){g.lastChild=h}else{f.next.prev=h}h.next=f.next;h.prev=f;f.next=h}h.parent=g;return h},getAll:function(g){var f=this,h,j=[];for(h=f.firstChild;h;h=a(h,f)){if(h.name===g){j.push(h)}}return j},empty:function(){var g=this,f,h,j;if(g.firstChild){f=[];for(j=g.firstChild;j;j=a(j,g)){f.push(j)}h=f.length;while(h--){j=f[h];j.parent=j.firstChild=j.lastChild=j.next=j.prev=null}}g.firstChild=g.lastChild=null;return g},isEmpty:function(k){var f=this,j=f.firstChild,h,g;if(j){do{if(j.type===1){if(j.attributes.map["data-mce-bogus"]){continue}if(k[j.name]){return false}h=j.attributes.length;while(h--){g=j.attributes[h].name;if(g==="name"||g.indexOf("data-")===0){return false}}}if((j.type===3&&!c.test(j.value))){return false}}while(j=a(j,f))}return true},walk:function(f){return a(this,null,f)}});d.extend(b,{create:function(g,f){var j,h;j=new b(g,e[g]||1);if(f){for(h in f){j.attr(h,f[h])}}return j}});d.html.Node=b})(tinymce);(function(b){var a=b.html.Node;b.html.DomParser=function(g,h){var f=this,e={},d=[],j={},c={};g=g||{};g.validate="validate" in g?g.validate:true;g.root_name=g.root_name||"body";f.schema=h=h||new b.html.Schema();function k(n){var p,q,A,z,C,o,r,m,u,v,l,t,B,s;t=b.makeMap("tr,td,th,tbody,thead,tfoot,table");l=h.getNonEmptyElements();for(p=0;p<n.length;p++){q=n[p];if(!q.parent){continue}z=[q];for(A=q.parent;A&&!h.isValidChild(A.name,q.name)&&!t[A.name];A=A.parent){z.push(A)}if(A&&z.length>1){z.reverse();C=o=f.filterNode(z[0].clone());for(u=0;u<z.length-1;u++){if(h.isValidChild(o.name,z[u].name)){r=f.filterNode(z[u].clone());o.append(r)}else{r=o}for(m=z[u].firstChild;m&&m!=z[u+1];){s=m.next;r.append(m);m=s}o=r}if(!C.isEmpty(l)){A.insert(C,z[0],true);A.insert(q,C)}else{A.insert(q,z[0],true)}A=z[0];if(A.isEmpty(l)||A.firstChild===A.lastChild&&A.firstChild.name==="br"){A.empty().remove()}}else{if(q.parent){if(q.name==="li"){B=q.prev;if(B&&(B.name==="ul"||B.name==="ul")){B.append(q);continue}B=q.next;if(B&&(B.name==="ul"||B.name==="ul")){B.insert(q,B.firstChild,true);continue}q.wrap(f.filterNode(new a("ul",1)));continue}if(h.isValidChild(q.parent.name,"div")&&h.isValidChild("div",q.name)){q.wrap(f.filterNode(new a("div",1)))}else{if(q.name==="style"||q.name==="script"){q.empty().remove()}else{q.unwrap()}}}}}}f.filterNode=function(n){var m,l,o;if(l in e){o=j[l];if(o){o.push(n)}else{j[l]=[n]}}m=d.length;while(m--){l=d[m].name;if(l in n.attributes.map){o=c[l];if(o){o.push(n)}else{c[l]=[n]}}}return n};f.addNodeFilter=function(l,m){b.each(b.explode(l),function(n){var o=e[n];if(!o){e[n]=o=[]}o.push(m)})};f.addAttributeFilter=function(l,m){b.each(b.explode(l),function(n){var o;for(o=0;o<d.length;o++){if(d[o].name===n){d[o].callbacks.push(m);return}}d.push({name:n,callbacks:[m]})})};f.parse=function(z,n){var o,K,D,C,F,E,A,s,H,N,B,p,G,M=[],u,m,t,q,v,r;n=n||{};j={};c={};p=b.extend(b.makeMap("script,style,head,html,body,title,meta,param"),h.getBlockElements());v=h.getNonEmptyElements();q=h.children;B=g.validate;r="forced_root_block" in n?n.forced_root_block:g.forced_root_block;t=h.getWhiteSpaceElements();G=/^[ \t\r\n]+/;u=/[ \t\r\n]+$/;m=/[ \t\r\n]+/g;function I(){var O=K.firstChild,l,P;while(O){l=O.next;if(O.type==3||(O.type==1&&O.name!=="p"&&!p[O.name]&&!O.attr("data-mce-type"))){if(!P){P=L(r,1);K.insert(P,O);P.append(O)}else{P.append(O)}}else{P=null}O=l}}function L(l,O){var P=new a(l,O),Q;if(l in e){Q=j[l];if(Q){Q.push(P)}else{j[l]=[P]}}return P}function J(P){var Q,l,O;for(Q=P.prev;Q&&Q.type===3;){l=Q.value.replace(u,"");if(l.length>0){Q.value=l;Q=Q.prev}else{O=Q.prev;Q.remove();Q=O}}}o=new b.html.SaxParser({validate:B,fix_self_closing:!B,cdata:function(l){D.append(L("#cdata",4)).value=l},text:function(P,l){var O;if(!t[D.name]){P=P.replace(m," ");if(D.lastChild&&p[D.lastChild.name]){P=P.replace(G,"")}}if(P.length!==0){O=L("#text",3);O.raw=!!l;D.append(O).value=P}},comment:function(l){D.append(L("#comment",8)).value=l},pi:function(l,O){D.append(L(l,7)).value=O;J(D)},doctype:function(O){var l;l=D.append(L("#doctype",10));l.value=O;J(D)},start:function(l,W,P){var U,R,Q,O,S,X,V,T;Q=B?h.getElementRule(l):{};if(Q){U=L(Q.outputName||l,1);U.attributes=W;U.shortEnded=P;D.append(U);T=q[D.name];if(T&&q[U.name]&&!T[U.name]){M.push(U)}R=d.length;while(R--){S=d[R].name;if(S in W.map){H=c[S];if(H){H.push(U)}else{c[S]=[U]}}}if(p[l]){J(U)}if(!P){D=U}}},end:function(l){var S,P,R,O,Q;P=B?h.getElementRule(l):{};if(P){if(p[l]){if(!t[D.name]){for(S=D.firstChild;S&&S.type===3;){R=S.value.replace(G,"");if(R.length>0){S.value=R;S=S.next}else{O=S.next;S.remove();S=O}}for(S=D.lastChild;S&&S.type===3;){R=S.value.replace(u,"");if(R.length>0){S.value=R;S=S.prev}else{O=S.prev;S.remove();S=O}}}S=D.prev;if(S&&S.type===3){R=S.value.replace(G,"");if(R.length>0){S.value=R}else{S.remove()}}}if(P.removeEmpty||P.paddEmpty){if(D.isEmpty(v)){if(P.paddEmpty){D.empty().append(new a("#text","3")).value="\u00a0"}else{if(!D.attributes.map.name){Q=D.parent;D.empty().remove();D=Q;return}}}}D=D.parent}}},h);K=D=new a(n.context||g.root_name,11);o.parse(z);if(B&&M.length){if(!n.context){k(M)}else{n.invalid=true}}if(r&&K.name=="body"){I()}if(!n.invalid){for(N in j){H=e[N];C=j[N];A=C.length;while(A--){if(!C[A].parent){C.splice(A,1)}}for(F=0,E=H.length;F<E;F++){H[F](C,N,n)}}for(F=0,E=d.length;F<E;F++){H=d[F];if(H.name in c){C=c[H.name];A=C.length;while(A--){if(!C[A].parent){C.splice(A,1)}}for(A=0,s=H.callbacks.length;A<s;A++){H.callbacks[A](C,H.name,n)}}}}return K};if(g.remove_trailing_brs){f.addNodeFilter("br",function(o,n){var s,r=o.length,p,v=h.getBlockElements(),m=h.getNonEmptyElements(),t,q,u;v.body=1;for(s=0;s<r;s++){p=o[s];t=p.parent;if(v[p.parent.name]&&p===t.lastChild){q=p.prev;while(q){u=q.name;if(u!=="span"||q.attr("data-mce-type")!=="bookmark"){if(u!=="br"){break}if(u==="br"){p=null;break}}q=q.prev}if(p){p.remove();if(t.isEmpty(m)){elementRule=h.getElementRule(t.name);if(elementRule){if(elementRule.removeEmpty){t.remove()}else{if(elementRule.paddEmpty){t.empty().append(new b.html.Node("#text",3)).value="\u00a0"}}}}}}}})}}})(tinymce);tinymce.html.Writer=function(e){var c=[],a,b,d,f,g;e=e||{};a=e.indent;b=tinymce.makeMap(e.indent_before||"");d=tinymce.makeMap(e.indent_after||"");f=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities);g=e.element_format=="html";return{start:function(m,k,p){var n,j,h,o;if(a&&b[m]&&c.length>0){o=c[c.length-1];if(o.length>0&&o!=="\n"){c.push("\n")}}c.push("<",m);if(k){for(n=0,j=k.length;n<j;n++){h=k[n];c.push(" ",h.name,'="',f(h.value,true),'"')}}if(!p||g){c[c.length]=">"}else{c[c.length]=" />"}if(p&&a&&d[m]&&c.length>0){o=c[c.length-1];if(o.length>0&&o!=="\n"){c.push("\n")}}},end:function(h){var j;c.push("</",h,">");if(a&&d[h]&&c.length>0){j=c[c.length-1];if(j.length>0&&j!=="\n"){c.push("\n")}}},text:function(j,h){if(j.length>0){c[c.length]=h?j:f(j)}},cdata:function(h){c.push("<![CDATA[",h,"]]>")},comment:function(h){c.push("<!--",h,"-->")},pi:function(h,j){if(j){c.push("<?",h," ",j,"?>")}else{c.push("<?",h,"?>")}if(a){c.push("\n")}},doctype:function(h){c.push("<!DOCTYPE",h,">",a?"\n":"")},reset:function(){c.length=0},getContent:function(){return c.join("").replace(/\n$/,"")}}};(function(a){a.html.Serializer=function(c,d){var b=this,e=new a.html.Writer(c);c=c||{};c.validate="validate" in c?c.validate:true;b.schema=d=d||new a.html.Schema();b.writer=e;b.serialize=function(h){var g,j;j=c.validate;g={3:function(l,k){e.text(l.value,l.raw)},8:function(k){e.comment(k.value)},7:function(k){e.pi(k.name,k.value)},10:function(k){e.doctype(k.value)},4:function(k){e.cdata(k.value)},11:function(k){if((k=k.firstChild)){do{f(k)}while(k=k.next)}}};e.reset();function f(m){var u=g[m.type],k,p,t,s,q,v,o,n,r;if(!u){k=m.name;p=m.shortEnded;t=m.attributes;if(j&&t&&t.length>1){v=[];v.map={};r=d.getElementRule(m.name);for(o=0,n=r.attributesOrder.length;o<n;o++){s=r.attributesOrder[o];if(s in t.map){q=t.map[s];v.map[s]=q;v.push({name:s,value:q})}}for(o=0,n=t.length;o<n;o++){s=t[o].name;if(!(s in v.map)){q=t.map[s];v.map[s]=q;v.push({name:s,value:q})}}t=v}e.start(m.name,t,p);if(!p){if((m=m.firstChild)){do{f(m)}while(m=m.next)}e.end(k)}}else{u(m)}}if(h.type==1&&!c.inner){f(h)}else{g[11](h)}return e.getContent()}}})(tinymce);(function(h){var f=h.each,e=h.is,d=h.isWebKit,b=h.isIE,c=h.html.Entities,a=/^([a-z0-9],?)+$/i,g=h.html.Schema.blockElementsMap,j=/^[ \t\r\n]*$/;h.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(p,n){var m=this,k,l;m.doc=p;m.win=window;m.files={};m.cssFlicker=false;m.counter=0;m.stdMode=!h.isIE||p.documentMode>=8;m.boxModel=!h.isIE||p.compatMode=="CSS1Compat"||m.stdMode;m.hasOuterHTML="outerHTML" in p.createElement("a");m.settings=n=h.extend({keep_values:false,hex_colors:1},n);m.schema=n.schema;m.styles=new h.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema);if(h.isIE6){try{p.execCommand("BackgroundImageCache",false,true)}catch(o){m.cssFlicker=true}}if(b&&n.schema){("abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video").replace(/\w+/g,function(q){p.createElement(q)});for(l in n.schema.getCustomElements()){p.createElement(l)}}h.addUnload(m.destroy,m)},getRoot:function(){var k=this,l=k.settings;return(l&&k.get(l.root_element))||k.doc.body},getViewPort:function(l){var m,k;l=!l?this.win:l;m=l.document;k=this.boxModel?m.documentElement:m.body;return{x:l.pageXOffset||k.scrollLeft,y:l.pageYOffset||k.scrollTop,w:l.innerWidth||k.clientWidth,h:l.innerHeight||k.clientHeight}},getRect:function(n){var m,k=this,l;n=k.get(n);m=k.getPos(n);l=k.getSize(n);return{x:m.x,y:m.y,w:l.w,h:l.h}},getSize:function(n){var l=this,k,m;n=l.get(n);k=l.getStyle(n,"width");m=l.getStyle(n,"height");if(k.indexOf("px")===-1){k=0}if(m.indexOf("px")===-1){m=0}return{w:parseInt(k)||n.offsetWidth||n.clientWidth,h:parseInt(m)||n.offsetHeight||n.clientHeight}},getParent:function(m,l,k){return this.getParents(m,l,k,false)},getParents:function(v,q,m,u){var l=this,k,p=l.settings,s=[];v=l.get(v);u=u===undefined;if(p.strict_root){m=m||l.getRoot()}if(e(q,"string")){k=q;if(q==="*"){q=function(o){return o.nodeType==1}}else{q=function(o){return l.is(o,k)}}}while(v){if(v==m||!v.nodeType||v.nodeType===9){break}if(!q||q(v)){if(u){s.push(v)}else{return v}}v=v.parentNode}return u?s:null},get:function(k){var l;if(k&&this.doc&&typeof(k)=="string"){l=k;k=this.doc.getElementById(k);if(k&&k.id!==l){return this.doc.getElementsByName(l)[1]}}return k},getNext:function(l,k){return this._findSib(l,k,"nextSibling")},getPrev:function(l,k){return this._findSib(l,k,"previousSibling")},select:function(m,l){var k=this;return h.dom.Sizzle(m,k.get(l)||k.get(k.settings.root_element)||k.doc,[])},is:function(m,k){var l;if(m.length===undefined){if(k==="*"){return m.nodeType==1}if(a.test(k)){k=k.toLowerCase().split(/,/);m=m.nodeName.toLowerCase();for(l=k.length-1;l>=0;l--){if(k[l]==m){return true}}return false}}return h.dom.Sizzle.matches(k,m.nodeType?[m]:m).length>0},add:function(o,r,k,m,q){var l=this;return this.run(o,function(t){var s,n;s=e(r,"string")?l.doc.createElement(r):r;l.setAttribs(s,k);if(m){if(m.nodeType){s.appendChild(m)}else{l.setHTML(s,m)}}return !q?t.appendChild(s):s})},create:function(m,k,l){return this.add(this.doc.createElement(m),m,k,l,1)},createHTML:function(s,l,q){var r="",p=this,m;r+="<"+s;for(m in l){if(l.hasOwnProperty(m)){r+=" "+m+'="'+p.encode(l[m])+'"'}}if(typeof(q)!="undefined"){return r+">"+q+"</"+s+">"}return r+" />"},remove:function(k,l){return this.run(k,function(n){var o,m=n.parentNode;if(!m){return null}if(l){while(o=n.firstChild){if(!h.isIE||o.nodeType!==3||o.nodeValue){m.insertBefore(o,n)}else{n.removeChild(o)}}}return m.removeChild(n)})},setStyle:function(o,k,l){var m=this;return m.run(o,function(q){var p,n;p=q.style;k=k.replace(/-(\D)/g,function(s,r){return r.toUpperCase()});if(m.pixelStyles.test(k)&&(h.is(l,"number")||/^[\-0-9\.]+$/.test(l))){l+="px"}switch(k){case"opacity":if(b){p.filter=l===""?"":"alpha(opacity="+(l*100)+")";if(!o.currentStyle||!o.currentStyle.hasLayout){p.display="inline-block"}}p[k]=p["-moz-opacity"]=p["-khtml-opacity"]=l||"";break;case"float":b?p.styleFloat=l:p.cssFloat=l;break;default:p[k]=l||""}if(m.settings.update_styles){m.setAttrib(q,"data-mce-style")}})},getStyle:function(o,k,m){o=this.get(o);if(!o){return}if(this.doc.defaultView&&m){k=k.replace(/[A-Z]/g,function(n){return"-"+n});try{return this.doc.defaultView.getComputedStyle(o,null).getPropertyValue(k)}catch(l){return null}}k=k.replace(/-(\D)/g,function(p,n){return n.toUpperCase()});if(k=="float"){k=b?"styleFloat":"cssFloat"}if(o.currentStyle&&m){return o.currentStyle[k]}return o.style?o.style[k]:undefined},setStyles:function(n,p){var l=this,m=l.settings,k;k=m.update_styles;m.update_styles=0;f(p,function(o,q){l.setStyle(n,q,o)});m.update_styles=k;if(m.update_styles){l.setAttrib(n,m.cssText)}},removeAllAttribs:function(k){return this.run(k,function(n){var m,l=n.attributes;for(m=l.length-1;m>=0;m--){n.removeAttributeNode(l.item(m))}})},setAttrib:function(m,o,k){var l=this;if(!m||!o){return}if(l.settings.strict){o=o.toLowerCase()}return this.run(m,function(r){var q=l.settings;var n=r.getAttribute(o);if(k!==null){switch(o){case"style":if(!e(k,"string")){f(k,function(s,t){l.setStyle(r,t,s)});return}if(q.keep_values){if(k&&!l._isRes(k)){r.setAttribute("data-mce-style",k,2)}else{r.removeAttribute("data-mce-style",2)}}r.style.cssText=k;break;case"class":r.className=k||"";break;case"src":case"href":if(q.keep_values){if(q.url_converter){k=q.url_converter.call(q.url_converter_scope||l,k,o,r)}l.setAttrib(r,"data-mce-"+o,k,2)}break;case"shape":r.setAttribute("data-mce-style",k);break}}if(e(k)&&k!==null&&k.length!==0){r.setAttribute(o,""+k,2)}else{r.removeAttribute(o,2)}if(tinyMCE.activeEditor&&n!=k){var p=tinyMCE.activeEditor;p.onSetAttrib.dispatch(p,r,o,k)}})},setAttribs:function(l,m){var k=this;return this.run(l,function(n){f(m,function(o,p){k.setAttrib(n,p,o)})})},getAttrib:function(p,q,m){var k,l=this,o;p=l.get(p);if(!p||p.nodeType!==1){return m===o?false:m}if(!e(m)){m=""}if(/^(src|href|style|coords|shape)$/.test(q)){k=p.getAttribute("data-mce-"+q);if(k){return k}}if(b&&l.props[q]){k=p[l.props[q]];k=k&&k.nodeValue?k.nodeValue:k}if(!k){k=p.getAttribute(q,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(q)){if(p[l.props[q]]===true&&k===""){return q}return k?q:""}if(p.nodeName==="FORM"&&p.getAttributeNode(q)){return p.getAttributeNode(q).nodeValue}if(q==="style"){k=k||p.style.cssText;if(k){k=l.serializeStyle(l.parseStyle(k),p.nodeName);if(l.settings.keep_values&&!l._isRes(k)){p.setAttribute("data-mce-style",k)}}}if(d&&q==="class"&&k){k=k.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(b){switch(q){case"rowspan":case"colspan":if(k===1){k=""}break;case"size":if(k==="+0"||k===20||k===0){k=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(k===0){k=""}break;case"hspace":if(k===-1){k=""}break;case"maxlength":case"tabindex":if(k===32768||k===2147483647||k==="32768"){k=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(k===65535){return q}return m;case"shape":k=k.toLowerCase();break;default:if(q.indexOf("on")===0&&k){k=h._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+k)}}}return(k!==o&&k!==null&&k!=="")?""+k:m},getPos:function(u,o){var l=this,k=0,s=0,p,q=l.doc,m;u=l.get(u);o=o||q.body;if(u){if(u.getBoundingClientRect){u=u.getBoundingClientRect();p=l.boxModel?q.documentElement:q.body;k=u.left+(q.documentElement.scrollLeft||q.body.scrollLeft)-p.clientTop;s=u.top+(q.documentElement.scrollTop||q.body.scrollTop)-p.clientLeft;return{x:k,y:s}}m=u;while(m&&m!=o&&m.nodeType){k+=m.offsetLeft||0;s+=m.offsetTop||0;m=m.offsetParent}m=u.parentNode;while(m&&m!=o&&m.nodeType){k-=m.scrollLeft||0;s-=m.scrollTop||0;m=m.parentNode}}return{x:k,y:s}},parseStyle:function(k){return this.styles.parse(k)},serializeStyle:function(l,k){return this.styles.serialize(l,k)},loadCSS:function(k){var m=this,n=m.doc,l;if(!k){k=""}l=m.select("head")[0];f(k.split(","),function(o){var p;if(m.files[o]){return}m.files[o]=true;p=m.create("link",{rel:"stylesheet",href:h._addVer(o)});if(b&&n.documentMode&&n.recalc){p.onload=function(){if(n.recalc){n.recalc()}p.onload=null}}l.appendChild(p)})},addClass:function(k,l){return this.run(k,function(m){var n;if(!l){return 0}if(this.hasClass(m,l)){return m.className}n=this.removeClass(m,l);return m.className=(n!=""?(n+" "):"")+l})},removeClass:function(m,n){var k=this,l;return k.run(m,function(p){var o;if(k.hasClass(p,n)){if(!l){l=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")}o=p.className.replace(l," ");o=h.trim(o!=" "?o:"");p.className=o;if(!o){p.removeAttribute("class");p.removeAttribute("className")}return o}return p.className})},hasClass:function(l,k){l=this.get(l);if(!l||!k){return false}return(" "+l.className+" ").indexOf(" "+k+" ")!==-1},show:function(k){return this.setStyle(k,"display","block")},hide:function(k){return this.setStyle(k,"display","none")},isHidden:function(k){k=this.get(k);return !k||k.style.display=="none"||this.getStyle(k,"display")=="none"},uniqueId:function(k){return(!k?"mce_":k)+(this.counter++)},setHTML:function(m,l){var k=this;return k.run(m,function(o){if(b){while(o.firstChild){o.removeChild(o.firstChild)}try{o.innerHTML="<br />"+l;o.removeChild(o.firstChild)}catch(n){o=k.create("div");o.innerHTML="<br />"+l;f(o.childNodes,function(q,p){if(p){o.appendChild(q)}})}}else{o.innerHTML=l}return l})},getOuterHTML:function(m){var l,k=this;m=k.get(m);if(!m){return null}if(m.nodeType===1&&k.hasOuterHTML){return m.outerHTML}l=(m.ownerDocument||k.doc).createElement("body");l.appendChild(m.cloneNode(true));return l.innerHTML},setOuterHTML:function(n,l,o){var k=this;function m(q,p,s){var t,r;r=s.createElement("body");r.innerHTML=p;t=r.lastChild;while(t){k.insertAfter(t.cloneNode(true),q);t=t.previousSibling}k.remove(q)}return this.run(n,function(q){q=k.get(q);if(q.nodeType==1){o=o||q.ownerDocument||k.doc;if(b){try{if(b&&q.nodeType==1){q.outerHTML=l}else{m(q,l,o)}}catch(p){m(q,l,o)}}else{m(q,l,o)}}})},decode:c.decode,encode:c.encodeAllRaw,insertAfter:function(k,l){l=this.get(l);return this.run(k,function(n){var m,o;m=l.parentNode;o=l.nextSibling;if(o){m.insertBefore(n,o)}else{m.appendChild(n)}return n})},isBlock:function(l){var k=l.nodeType;if(k){return !!(k===1&&g[l.nodeName])}return !!g[l]},replace:function(q,p,l){var m=this;if(e(p,"array")){q=q.cloneNode(true)}return m.run(p,function(k){if(l){f(h.grep(k.childNodes),function(n){q.appendChild(n)})}return k.parentNode.replaceChild(q,k)})},rename:function(n,k){var m=this,l;if(n.nodeName!=k.toUpperCase()){l=m.create(k);f(m.getAttribs(n),function(o){m.setAttrib(l,o.nodeName,m.getAttrib(n,o.nodeName))});m.replace(l,n,1)}return l||n},findCommonAncestor:function(m,k){var n=m,l;while(n){l=k;while(l&&n!=l){l=l.parentNode}if(n==l){break}n=n.parentNode}if(!n&&m.ownerDocument){return m.ownerDocument.documentElement}return n},toHex:function(k){var m=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(k);function l(n){n=parseInt(n).toString(16);return n.length>1?n:"0"+n}if(m){k="#"+l(m[1])+l(m[2])+l(m[3]);return k}return k},getClasses:function(){var o=this,k=[],n,p={},q=o.settings.class_filter,m;if(o.classes){return o.classes}function r(t){f(t.imports,function(s){r(s)});f(t.cssRules||t.rules,function(s){switch(s.type||1){case 1:if(s.selectorText){f(s.selectorText.split(","),function(u){u=u.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(u)||!/\.[\w\-]+$/.test(u)){return}m=u;u=h._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",u);if(q&&!(u=q(u,m))){return}if(!p[u]){k.push({"class":u});p[u]=1}})}break;case 3:r(s.styleSheet);break}})}try{f(o.doc.styleSheets,r)}catch(l){}if(k.length>0){o.classes=k}return k},run:function(n,m,l){var k=this,p;if(k.doc&&typeof(n)==="string"){n=k.get(n)}if(!n){return false}l=l||this;if(!n.nodeType&&(n.length||n.length===0)){p=[];f(n,function(q,o){if(q){if(typeof(q)=="string"){q=k.doc.getElementById(q)}p.push(m.call(l,q,o))}});return p}return m.call(l,n)},getAttribs:function(l){var k;l=this.get(l);if(!l){return[]}if(b){k=[];if(l.nodeName=="OBJECT"){return l.attributes}if(l.nodeName==="OPTION"&&this.getAttrib(l,"selected")){k.push({specified:1,nodeName:"selected"})}l.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(m){k.push({specified:1,nodeName:m})});return k}return l.attributes},isEmpty:function(n,l){var s=this,p,o,r,k,m,q;n=n.firstChild;if(n){k=new h.dom.TreeWalker(n);l=l||s.schema?s.schema.getNonEmptyElements():null;do{r=n.nodeType;if(r===1){if(n.getAttribute("data-mce-bogus")){continue}m=n.nodeName.toLowerCase();if(l&&l[m]){q=n.parentNode;if(m==="br"&&s.isBlock(q)&&q.firstChild===n&&q.lastChild===n){continue}return false}o=s.getAttribs(n);p=n.attributes.length;while(p--){m=n.attributes[p].nodeName;if(m==="name"||m==="data-mce-bookmark"){return false}}}if((r===3&&!j.test(n.nodeValue))){return false}}while(n=k.next())}return true},destroy:function(l){var k=this;if(k.events){k.events.destroy()}k.win=k.doc=k.root=k.events=null;if(!l){h.removeUnload(k.destroy)}},createRng:function(){var k=this.doc;return k.createRange?k.createRange():new h.dom.Range(this)},nodeIndex:function(o,p){var k=0,m,n,l;if(o){for(m=o.nodeType,o=o.previousSibling,n=o;o;o=o.previousSibling){l=o.nodeType;if(p&&l==3){if(l==m||!o.nodeValue.length){continue}}k++;m=l}}return k},split:function(o,n,s){var u=this,k=u.createRng(),p,m,q;function l(A){var v,t=A.childNodes,z=A.nodeType;function B(E){var D=E.previousSibling&&E.previousSibling.nodeName=="SPAN";var C=E.nextSibling&&E.nextSibling.nodeName=="SPAN";return D&&C}if(z==1&&A.getAttribute("data-mce-type")=="bookmark"){return}for(v=t.length-1;v>=0;v--){l(t[v])}if(z!=9){if(z==3&&A.nodeValue.length>0){var r=h.trim(A.nodeValue).length;if(!u.isBlock(A.parentNode)||r>0||r==0&&B(A)){return}}else{if(z==1){t=A.childNodes;if(t.length==1&&t[0]&&t[0].nodeType==1&&t[0].getAttribute("data-mce-type")=="bookmark"){A.parentNode.insertBefore(t[0],A)}if(t.length||/^(br|hr|input|img)$/i.test(A.nodeName)){return}}}u.remove(A)}return A}if(o&&n){k.setStart(o.parentNode,u.nodeIndex(o));k.setEnd(n.parentNode,u.nodeIndex(n));p=k.extractContents();k=u.createRng();k.setStart(n.parentNode,u.nodeIndex(n)+1);k.setEnd(o.parentNode,u.nodeIndex(o)+1);m=k.extractContents();q=o.parentNode;q.insertBefore(l(p),o);if(s){q.replaceChild(s,n)}else{q.insertBefore(n,o)}q.insertBefore(l(m),o);u.remove(o);return s||n}},bind:function(o,k,n,m){var l=this;if(!l.events){l.events=new h.dom.EventUtils()}return l.events.add(o,k,n,m||this)},unbind:function(n,k,m){var l=this;if(!l.events){l.events=new h.dom.EventUtils()}return l.events.remove(n,k,m)},_findSib:function(n,k,l){var m=this,o=k;if(n){if(e(o,"string")){o=function(p){return m.is(p,k)}}for(n=n[l];n;n=n[l]){if(o(n)){return n}}}return null},_isRes:function(k){return/^(top|left|bottom|right|width|height)/i.test(k)||/;\s*(top|left|bottom|right|width|height)/i.test(k)}});h.DOM=new h.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(c){var Q=this,e=c.doc,V=0,H=1,k=2,G=true,U=false,X="startOffset",h="startContainer",S="endContainer",C="endOffset",l=tinymce.extend,o=c.nodeIndex;l(Q,{startContainer:e,startOffset:0,endContainer:e,endOffset:0,collapsed:G,commonAncestorContainer:e,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:u,setStartBefore:g,setStartAfter:L,setEndBefore:M,setEndAfter:v,collapse:D,selectNode:A,selectNodeContents:I,compareBoundaryPoints:z,deleteContents:q,extractContents:K,cloneContents:d,insertNode:F,surroundContents:P,cloneRange:N});function r(Y,t){E(G,Y,t)}function u(Y,t){E(U,Y,t)}function g(t){r(t.parentNode,o(t))}function L(t){r(t.parentNode,o(t)+1)}function M(t){u(t.parentNode,o(t))}function v(t){u(t.parentNode,o(t)+1)}function D(t){if(t){Q[S]=Q[h];Q[C]=Q[X]}else{Q[h]=Q[S];Q[X]=Q[C]}Q.collapsed=G}function A(t){g(t);v(t)}function I(t){r(t,0);u(t,t.nodeType===1?t.childNodes.length:t.nodeValue.length)}function z(ab,t){var ae=Q[h],Z=Q[X],ad=Q[S],Y=Q[C],ac=t.startContainer,ag=t.startOffset,aa=t.endContainer,af=t.endOffset;if(ab===0){return J(ae,Z,ac,ag)}if(ab===1){return J(ad,Y,ac,ag)}if(ab===2){return J(ad,Y,aa,af)}if(ab===3){return J(ae,Z,aa,af)}}function q(){n(k)}function K(){return n(V)}function d(){return n(H)}function F(ab){var Y=this[h],t=this[X],aa,Z;if((Y.nodeType===3||Y.nodeType===4)&&Y.nodeValue){if(!t){Y.parentNode.insertBefore(ab,Y)}else{if(t>=Y.nodeValue.length){c.insertAfter(ab,Y)}else{aa=Y.splitText(t);Y.parentNode.insertBefore(ab,aa)}}}else{if(Y.childNodes.length>0){Z=Y.childNodes[t]}if(Z){Y.insertBefore(ab,Z)}else{Y.appendChild(ab)}}}function P(Y){var t=Q.extractContents();Q.insertNode(Y);Y.appendChild(t);Q.selectNode(Y)}function N(){return l(new b(c),{startContainer:Q[h],startOffset:Q[X],endContainer:Q[S],endOffset:Q[C],collapsed:Q.collapsed,commonAncestorContainer:Q.commonAncestorContainer})}function R(t,Y){var Z;if(t.nodeType==3){return t}if(Y<0){return t}Z=t.firstChild;while(Z&&Y>0){--Y;Z=Z.nextSibling}if(Z){return Z}return t}function m(){return(Q[h]==Q[S]&&Q[X]==Q[C])}function J(aa,ac,Y,ab){var ad,Z,t,ae,ag,af;if(aa==Y){if(ac==ab){return 0}if(ac<ab){return -1}return 1}ad=Y;while(ad&&ad.parentNode!=aa){ad=ad.parentNode}if(ad){Z=0;t=aa.firstChild;while(t!=ad&&Z<ac){Z++;t=t.nextSibling}if(ac<=Z){return -1}return 1}ad=aa;while(ad&&ad.parentNode!=Y){ad=ad.parentNode}if(ad){Z=0;t=Y.firstChild;while(t!=ad&&Z<ab){Z++;t=t.nextSibling}if(Z<ab){return -1}return 1}ae=c.findCommonAncestor(aa,Y);ag=aa;while(ag&&ag.parentNode!=ae){ag=ag.parentNode}if(!ag){ag=ae}af=Y;while(af&&af.parentNode!=ae){af=af.parentNode}if(!af){af=ae}if(ag==af){return 0}t=ae.firstChild;while(t){if(t==ag){return -1}if(t==af){return 1}t=t.nextSibling}}function E(Y,ab,aa){var t,Z;if(Y){Q[h]=ab;Q[X]=aa}else{Q[S]=ab;Q[C]=aa}t=Q[S];while(t.parentNode){t=t.parentNode}Z=Q[h];while(Z.parentNode){Z=Z.parentNode}if(Z==t){if(J(Q[h],Q[X],Q[S],Q[C])>0){Q.collapse(Y)}}else{Q.collapse(Y)}Q.collapsed=m();Q.commonAncestorContainer=c.findCommonAncestor(Q[h],Q[S])}function n(ae){var ad,aa=0,ag=0,Y,ac,Z,ab,t,af;if(Q[h]==Q[S]){return f(ae)}for(ad=Q[S],Y=ad.parentNode;Y;ad=Y,Y=Y.parentNode){if(Y==Q[h]){return s(ad,ae)}++aa}for(ad=Q[h],Y=ad.parentNode;Y;ad=Y,Y=Y.parentNode){if(Y==Q[S]){return W(ad,ae)}++ag}ac=ag-aa;Z=Q[h];while(ac>0){Z=Z.parentNode;ac--}ab=Q[S];while(ac<0){ab=ab.parentNode;ac++}for(t=Z.parentNode,af=ab.parentNode;t!=af;t=t.parentNode,af=af.parentNode){Z=t;ab=af}return p(Z,ab,ae)}function f(ac){var ae,ab,aa,ad,t,Z,Y;if(ac!=k){ae=e.createDocumentFragment()}if(Q[X]==Q[C]){return ae}if(Q[h].nodeType==3){ab=Q[h].nodeValue;aa=ab.substring(Q[X],Q[C]);if(ac!=H){Q[h].deleteData(Q[X],Q[C]-Q[X]);Q.collapse(G)}if(ac==k){return}ae.appendChild(e.createTextNode(aa));return ae}ad=R(Q[h],Q[X]);t=Q[C]-Q[X];while(t>0){Z=ad.nextSibling;Y=B(ad,ac);if(ae){ae.appendChild(Y)}--t;ad=Z}if(ac!=H){Q.collapse(G)}return ae}function s(ae,ab){var ad,ac,Y,t,aa,Z;if(ab!=k){ad=e.createDocumentFragment()}ac=j(ae,ab);if(ad){ad.appendChild(ac)}Y=o(ae);t=Y-Q[X];if(t<=0){if(ab!=H){Q.setEndBefore(ae);Q.collapse(U)}return ad}ac=ae.previousSibling;while(t>0){aa=ac.previousSibling;Z=B(ac,ab);if(ad){ad.insertBefore(Z,ad.firstChild)}--t;ac=aa}if(ab!=H){Q.setEndBefore(ae);Q.collapse(U)}return ad}function W(ac,ab){var ae,Y,ad,t,aa,Z;if(ab!=k){ae=e.createDocumentFragment()}ad=T(ac,ab);if(ae){ae.appendChild(ad)}Y=o(ac);++Y;t=Q[C]-Y;ad=ac.nextSibling;while(t>0){aa=ad.nextSibling;Z=B(ad,ab);if(ae){ae.appendChild(Z)}--t;ad=aa}if(ab!=H){Q.setStartAfter(ac);Q.collapse(G)}return ae}function p(ac,t,af){var Z,ah,ab,ad,ae,Y,ag,aa;if(af!=k){ah=e.createDocumentFragment()}Z=T(ac,af);if(ah){ah.appendChild(Z)}ab=ac.parentNode;ad=o(ac);ae=o(t);++ad;Y=ae-ad;ag=ac.nextSibling;while(Y>0){aa=ag.nextSibling;Z=B(ag,af);if(ah){ah.appendChild(Z)}ag=aa;--Y}Z=j(t,af);if(ah){ah.appendChild(Z)}if(af!=H){Q.setStartAfter(ac);Q.collapse(G)}return ah}function j(ad,ae){var Z=R(Q[S],Q[C]-1),af,ac,ab,t,Y,aa=Z!=Q[S];if(Z==ad){return O(Z,aa,U,ae)}af=Z.parentNode;ac=O(af,U,U,ae);while(af){while(Z){ab=Z.previousSibling;t=O(Z,aa,U,ae);if(ae!=k){ac.insertBefore(t,ac.firstChild)}aa=G;Z=ab}if(af==ad){return ac}Z=af.previousSibling;af=af.parentNode;Y=O(af,U,U,ae);if(ae!=k){Y.appendChild(ac)}ac=Y}}function T(ad,ae){var aa=R(Q[h],Q[X]),ab=aa!=Q[h],af,ac,Z,t,Y;if(aa==ad){return O(aa,ab,G,ae)}af=aa.parentNode;ac=O(af,U,G,ae);while(af){while(aa){Z=aa.nextSibling;t=O(aa,ab,G,ae);if(ae!=k){ac.appendChild(t)}ab=G;aa=Z}if(af==ad){return ac}aa=af.nextSibling;af=af.parentNode;Y=O(af,U,G,ae);if(ae!=k){Y.appendChild(ac)}ac=Y}}function O(t,ab,ae,af){var aa,Z,ac,Y,ad;if(ab){return B(t,af)}if(t.nodeType==3){aa=t.nodeValue;if(ae){Y=Q[X];Z=aa.substring(Y);ac=aa.substring(0,Y)}else{Y=Q[C];Z=aa.substring(0,Y);ac=aa.substring(Y)}if(af!=H){t.nodeValue=ac}if(af==k){return}ad=t.cloneNode(U);ad.nodeValue=Z;return ad}if(af==k){return}return t.cloneNode(U)}function B(Y,t){if(t!=k){return t==H?Y.cloneNode(G):Y}Y.parentNode.removeChild(Y)}}a.Range=b})(tinymce.dom);(function(){function a(d){var b=this,h=d.dom,c=true,f=false;function e(j,k){var l,u=0,r,o,n,m,p,s,q=-1,t;l=j.duplicate();l.collapse(k);t=l.parentElement();if(t.ownerDocument!==d.dom.doc){return}while(t.contentEditable==="false"){t=t.parentNode}if(!t.hasChildNodes()){return{node:t,inside:1}}n=t.children;r=n.length-1;while(u<=r){s=Math.floor((u+r)/2);m=n[s];l.moveToElementText(m);q=l.compareEndPoints(k?"StartToStart":"EndToEnd",j);if(q>0){r=s-1}else{if(q<0){u=s+1}else{return{node:m}}}}if(q<0){if(!m){l.moveToElementText(t);l.collapse(true);m=t;o=true}else{l.collapse(false)}l.setEndPoint(k?"EndToStart":"EndToEnd",j);if(l.compareEndPoints(k?"StartToStart":"StartToEnd",j)>0){l=j.duplicate();l.collapse(k);p=-1;while(t==l.parentElement()){if(l.move("character",-1)==0){break}p++}}p=p||l.text.replace("\r\n"," ").length}else{l.collapse(true);l.setEndPoint(k?"StartToStart":"StartToEnd",j);p=l.text.replace("\r\n"," ").length}return{node:m,position:q,offset:p,inside:o}}function g(){var j=d.getRng(),s=h.createRng(),m,l,q,r,n,k;m=j.item?j.item(0):j.parentElement();if(m.ownerDocument!=h.doc){return s}l=d.isCollapsed();if(j.item){s.setStart(m.parentNode,h.nodeIndex(m));s.setEnd(s.startContainer,s.startOffset+1);return s}function p(D){var v=e(j,D),t,B,C=0,A,z,u;t=v.node;B=v.offset;if(v.inside&&!t.hasChildNodes()){s[D?"setStart":"setEnd"](t,0);return}if(B===z){s[D?"setStartBefore":"setEndAfter"](t);return}if(v.position<0){A=v.inside?t.firstChild:t.nextSibling;if(!A){s[D?"setStartAfter":"setEndAfter"](t);return}if(!B){if(A.nodeType==3){s[D?"setStart":"setEnd"](A,0)}else{s[D?"setStartBefore":"setEndBefore"](A)}return}while(A){u=A.nodeValue;C+=u.length;if(C>=B){t=A;C-=B;C=u.length-C;break}A=A.nextSibling}}else{A=t.previousSibling;if(!A){return s[D?"setStartBefore":"setEndBefore"](t)}if(!B){if(t.nodeType==3){s[D?"setStart":"setEnd"](A,t.nodeValue.length)}else{s[D?"setStartAfter":"setEndAfter"](A)}return}while(A){C+=A.nodeValue.length;if(C>=B){t=A;C-=B;break}A=A.previousSibling}}s[D?"setStart":"setEnd"](t,C)}try{p(true);if(!l){p()}}catch(o){if(o.number==-2147024809){n=b.getBookmark(2);q=j.duplicate();q.collapse(true);m=q.parentElement();if(!l){q=j.duplicate();q.collapse(false);r=q.parentElement();r.innerHTML=r.innerHTML}m.innerHTML=m.innerHTML;b.moveToBookmark(n);j=d.getRng();p(true);if(!l){p()}}else{throw o}}return s}this.getBookmark=function(n){var k=d.getRng(),p,j,m={};function o(v){var v,u,q,t,s,r=[];u=v.parentNode;q=h.getRoot().parentNode;while(u!=q&&u.nodeType!==9){t=u.children;s=t.length;while(s--){if(v===t[s]){r.push(s);break}}v=u;u=u.parentNode}return r}function l(r){var q;q=e(k,r);if(q){return{position:q.position,offset:q.offset,indexes:o(q.node),inside:q.inside}}}if(n===2){if(!k.item){m.start=l(true);if(!d.isCollapsed()){m.end=l()}}else{m.start={ctrl:true,indexes:o(k.item(0))}}}return m};this.moveToBookmark=function(l){var k,j=h.doc.body;function n(p){var s,r,o,q;s=h.getRoot();for(r=p.length-1;r>=0;r--){q=s.children;o=p[r];if(o<=q.length-1){s=q[o]}}return s}function m(s){var o=l[s?"start":"end"],r,q,p;if(o){r=o.position>0;q=j.createTextRange();q.moveToElementText(n(o.indexes));offset=o.offset;if(offset!==p){q.collapse(o.inside||r);q.moveStart("character",r?-offset:offset)}else{q.collapse(s)}k.setEndPoint(s?"StartToStart":"EndToStart",q);if(s){k.collapse(true)}}}if(l.start){if(l.start.ctrl){k=j.createControlRange();k.addElement(n(l.start.indexes));k.select()}else{k=j.createTextRange();m(true);m();k.select()}}};this.addRange=function(j){var o,m,l,q,t,r,s=d.dom.doc,n=s.body;function k(C){var v,B,u,A,z;u=h.create("a");v=C?l:t;B=C?q:r;A=o.duplicate();if(v==s||v==s.documentElement){v=n;B=0}if(v.nodeType==3){v.parentNode.insertBefore(u,v);A.moveToElementText(u);A.moveStart("character",B);h.remove(u);o.setEndPoint(C?"StartToStart":"EndToEnd",A)}else{z=v.childNodes;if(z.length){if(B>=z.length){h.insertAfter(u,z[z.length-1])}else{v.insertBefore(u,z[B])}A.moveToElementText(u)}else{u=s.createTextNode("\uFEFF");v.appendChild(u);A.moveToElementText(u.parentNode);A.collapse(c)}o.setEndPoint(C?"StartToStart":"EndToEnd",A);h.remove(u)}}l=j.startContainer;q=j.startOffset;t=j.endContainer;r=j.endOffset;o=n.createTextRange();if(l==t&&l.nodeType==1&&q==r-1){if(q==r-1){try{m=n.createControlRange();m.addElement(l.childNodes[q]);m.select();return}catch(p){}}}k(true);k();o.select()};this.getRangeAt=g}tinymce.dom.TridentSelection=a})();(function(){var q=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,k=0,d=Object.prototype.toString,p=false,j=true;[0,0].sort(function(){j=false;return 0});var b=function(z,e,C,D){C=C||[];e=e||document;var F=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!z||typeof z!=="string"){return C}var A=[],t,H,K,s,v=true,u=b.isXML(e),E=z,G,J,I,B;do{q.exec("");t=q.exec(E);if(t){E=t[3];A.push(t[1]);if(t[2]){s=t[3];break}}}while(t);if(A.length>1&&l.exec(z)){if(A.length===2&&f.relative[A[0]]){H=h(A[0]+A[1],e)}else{H=f.relative[A[0]]?[e]:b(A.shift(),e);while(A.length){z=A.shift();if(f.relative[z]){z+=A.shift()}H=h(z,H)}}}else{if(!D&&A.length>1&&e.nodeType===9&&!u&&f.match.ID.test(A[0])&&!f.match.ID.test(A[A.length-1])){G=b.find(A.shift(),e,u);e=G.expr?b.filter(G.expr,G.set)[0]:G.set[0]}if(e){G=D?{expr:A.pop(),set:a(D)}:b.find(A.pop(),A.length===1&&(A[0]==="~"||A[0]==="+")&&e.parentNode?e.parentNode:e,u);H=G.expr?b.filter(G.expr,G.set):G.set;if(A.length>0){K=a(H)}else{v=false}while(A.length){J=A.pop();I=J;if(!f.relative[J]){J=""}else{I=A.pop()}if(I==null){I=e}f.relative[J](K,I,u)}}else{K=A=[]}}if(!K){K=H}if(!K){b.error(J||z)}if(d.call(K)==="[object Array]"){if(!v){C.push.apply(C,K)}else{if(e&&e.nodeType===1){for(B=0;K[B]!=null;B++){if(K[B]&&(K[B]===true||K[B].nodeType===1&&b.contains(e,K[B]))){C.push(H[B])}}}else{for(B=0;K[B]!=null;B++){if(K[B]&&K[B].nodeType===1){C.push(H[B])}}}}}else{a(K,C)}if(s){b(s,F,C,D);b.uniqueSort(C)}return C};b.uniqueSort=function(s){if(c){p=j;s.sort(c);if(p){for(var e=1;e<s.length;e++){if(s[e]===s[e-1]){s.splice(e--,1)}}}}return s};b.matches=function(e,s){return b(e,null,null,s)};b.find=function(B,e,C){var A;if(!B){return[]}for(var u=0,t=f.order.length;u<t;u++){var z=f.order[u],v;if((v=f.leftMatch[z].exec(B))){var s=v[1];v.splice(1,1);if(s.substr(s.length-1)!=="\\"){v[1]=(v[1]||"").replace(/\\/g,"");A=f.find[z](v,e,C);if(A!=null){B=B.replace(f.match[z],"");break}}}}if(!A){A=e.getElementsByTagName("*")}return{set:A,expr:B}};b.filter=function(F,E,I,v){var t=F,K=[],C=E,A,e,B=E&&E[0]&&b.isXML(E[0]);while(F&&E.length){for(var D in f.filter){if((A=f.leftMatch[D].exec(F))!=null&&A[2]){var s=f.filter[D],J,H,u=A[1];e=false;A.splice(1,1);if(u.substr(u.length-1)==="\\"){continue}if(C===K){K=[]}if(f.preFilter[D]){A=f.preFilter[D](A,C,I,K,v,B);if(!A){e=J=true}else{if(A===true){continue}}}if(A){for(var z=0;(H=C[z])!=null;z++){if(H){J=s(H,A,z,C);var G=v^!!J;if(I&&J!=null){if(G){e=true}else{C[z]=false}}else{if(G){K.push(H);e=true}}}}}if(J!==undefined){if(!I){C=K}F=F.replace(f.match[D],"");if(!e){return[]}break}}}if(F===t){if(e==null){b.error(F)}else{break}}t=F}return C};b.error=function(e){throw"Syntax error, unrecognized expression: "+e};var f=b.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(A,s){var u=typeof s==="string",z=u&&!/\W/.test(s),B=u&&!z;if(z){s=s.toLowerCase()}for(var t=0,e=A.length,v;t<e;t++){if((v=A[t])){while((v=v.previousSibling)&&v.nodeType!==1){}A[t]=B||v&&v.nodeName.toLowerCase()===s?v||false:v===s}}if(B){b.filter(s,A,true)}},">":function(A,s){var v=typeof s==="string",z,t=0,e=A.length;if(v&&!/\W/.test(s)){s=s.toLowerCase();for(;t<e;t++){z=A[t];if(z){var u=z.parentNode;A[t]=u.nodeName.toLowerCase()===s?u:false}}}else{for(;t<e;t++){z=A[t];if(z){A[t]=v?z.parentNode:z.parentNode===s}}if(v){b.filter(s,A,true)}}},"":function(u,s,z){var t=k++,e=r,v;if(typeof s==="string"&&!/\W/.test(s)){s=s.toLowerCase();v=s;e=o}e("parentNode",s,t,u,v,z)},"~":function(u,s,z){var t=k++,e=r,v;if(typeof s==="string"&&!/\W/.test(s)){s=s.toLowerCase();v=s;e=o}e("previousSibling",s,t,u,v,z)}},find:{ID:function(s,t,u){if(typeof t.getElementById!=="undefined"&&!u){var e=t.getElementById(s[1]);return e?[e]:[]}},NAME:function(t,z){if(typeof z.getElementsByName!=="undefined"){var s=[],v=z.getElementsByName(t[1]);for(var u=0,e=v.length;u<e;u++){if(v[u].getAttribute("name")===t[1]){s.push(v[u])}}return s.length===0?null:s}},TAG:function(e,s){return s.getElementsByTagName(e[1])}},preFilter:{CLASS:function(u,s,t,e,A,B){u=" "+u[1].replace(/\\/g,"")+" ";if(B){return u}for(var v=0,z;(z=s[v])!=null;v++){if(z){if(A^(z.className&&(" "+z.className+" ").replace(/[\t\n]/g," ").indexOf(u)>=0)){if(!t){e.push(z)}}else{if(t){s[v]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(s,e){return s[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var s=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(s[1]+(s[2]||1))-0;e[3]=s[3]-0}e[0]=k++;return e},ATTR:function(v,s,t,e,z,A){var u=v[1].replace(/\\/g,"");if(!A&&f.attrMap[u]){v[1]=f.attrMap[u]}if(v[2]==="~="){v[4]=" "+v[4]+" "}return v},PSEUDO:function(v,s,t,e,z){if(v[1]==="not"){if((q.exec(v[3])||"").length>1||/^\w/.test(v[3])){v[3]=b(v[3],null,null,s)}else{var u=b.filter(v[3],s,t,true^z);if(!t){e.push.apply(e,u)}return false}}else{if(f.match.POS.test(v[0])||f.match.CHILD.test(v[0])){return true}}return v},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(t,s,e){return !!b(e[3],t).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(s,e){return e===0},last:function(t,s,e,u){return s===u.length-1},even:function(s,e){return e%2===0},odd:function(s,e){return e%2===1},lt:function(t,s,e){return s<e[3]-0},gt:function(t,s,e){return s>e[3]-0},nth:function(t,s,e){return e[3]-0===s},eq:function(t,s,e){return e[3]-0===s}},filter:{PSEUDO:function(t,B,A,C){var e=B[1],s=f.filters[e];if(s){return s(t,A,B,C)}else{if(e==="contains"){return(t.textContent||t.innerText||b.getText([t])||"").indexOf(B[3])>=0}else{if(e==="not"){var u=B[3];for(var z=0,v=u.length;z<v;z++){if(u[z]===t){return false}}return true}else{b.error("Syntax error, unrecognized expression: "+e)}}}},CHILD:function(e,u){var A=u[1],s=e;switch(A){case"only":case"first":while((s=s.previousSibling)){if(s.nodeType===1){return false}}if(A==="first"){return true}s=e;case"last":while((s=s.nextSibling)){if(s.nodeType===1){return false}}return true;case"nth":var t=u[2],D=u[3];if(t===1&&D===0){return true}var z=u[0],C=e.parentNode;if(C&&(C.sizcache!==z||!e.nodeIndex)){var v=0;for(s=C.firstChild;s;s=s.nextSibling){if(s.nodeType===1){s.nodeIndex=++v}}C.sizcache=z}var B=e.nodeIndex-D;if(t===0){return B===0}else{return(B%t===0&&B/t>=0)}}},ID:function(s,e){return s.nodeType===1&&s.getAttribute("id")===e},TAG:function(s,e){return(e==="*"&&s.nodeType===1)||s.nodeName.toLowerCase()===e},CLASS:function(s,e){return(" "+(s.className||s.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(z,u){var t=u[1],e=f.attrHandle[t]?f.attrHandle[t](z):z[t]!=null?z[t]:z.getAttribute(t),A=e+"",v=u[2],s=u[4];return e==null?v==="!=":v==="="?A===s:v==="*="?A.indexOf(s)>=0:v==="~="?(" "+A+" ").indexOf(s)>=0:!s?A&&e!==false:v==="!="?A!==s:v==="^="?A.indexOf(s)===0:v==="$="?A.substr(A.length-s.length)===s:v==="|="?A===s||A.substr(0,s.length+1)===s+"-":false},POS:function(v,s,t,z){var e=s[2],u=f.setFilters[e];if(u){return u(v,t,s,z)}}}};var l=f.match.POS,g=function(s,e){return"\\"+(e-0+1)};for(var n in f.match){f.match[n]=new RegExp(f.match[n].source+(/(?![^\[]*\])(?![^\(]*\))/.source));f.leftMatch[n]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[n].source.replace(/\\(\d+)/g,g))}var a=function(s,e){s=Array.prototype.slice.call(s,0);if(e){e.push.apply(e,s);return e}return s};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(m){a=function(v,u){var s=u||[],t=0;if(d.call(v)==="[object Array]"){Array.prototype.push.apply(s,v)}else{if(typeof v.length==="number"){for(var e=v.length;t<e;t++){s.push(v[t])}}else{for(;v[t];t++){s.push(v[t])}}}return s}}var c;if(document.documentElement.compareDocumentPosition){c=function(s,e){if(!s.compareDocumentPosition||!e.compareDocumentPosition){if(s==e){p=true}return s.compareDocumentPosition?-1:1}var t=s.compareDocumentPosition(e)&4?-1:s===e?0:1;if(t===0){p=true}return t}}else{if("sourceIndex" in document.documentElement){c=function(s,e){if(!s.sourceIndex||!e.sourceIndex){if(s==e){p=true}return s.sourceIndex?-1:1}var t=s.sourceIndex-e.sourceIndex;if(t===0){p=true}return t}}else{if(document.createRange){c=function(u,s){if(!u.ownerDocument||!s.ownerDocument){if(u==s){p=true}return u.ownerDocument?-1:1}var t=u.ownerDocument.createRange(),e=s.ownerDocument.createRange();t.setStart(u,0);t.setEnd(u,0);e.setStart(s,0);e.setEnd(s,0);var v=t.compareBoundaryPoints(Range.START_TO_END,e);if(v===0){p=true}return v}}}}b.getText=function(e){var s="",u;for(var t=0;e[t];t++){u=e[t];if(u.nodeType===3||u.nodeType===4){s+=u.nodeValue}else{if(u.nodeType!==8){s+=b.getText(u.childNodes)}}}return s};(function(){var s=document.createElement("div"),t="script"+(new Date()).getTime();s.innerHTML="<a name='"+t+"'/>";var e=document.documentElement;e.insertBefore(s,e.firstChild);if(document.getElementById(t)){f.find.ID=function(v,z,A){if(typeof z.getElementById!=="undefined"&&!A){var u=z.getElementById(v[1]);return u?u.id===v[1]||typeof u.getAttributeNode!=="undefined"&&u.getAttributeNode("id").nodeValue===v[1]?[u]:undefined:[]}};f.filter.ID=function(z,u){var v=typeof z.getAttributeNode!=="undefined"&&z.getAttributeNode("id");return z.nodeType===1&&v&&v.nodeValue===u}}e.removeChild(s);e=s=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){f.find.TAG=function(s,z){var v=z.getElementsByTagName(s[1]);if(s[1]==="*"){var u=[];for(var t=0;v[t];t++){if(v[t].nodeType===1){u.push(v[t])}}v=u}return v}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){f.attrHandle.href=function(s){return s.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=b,t=document.createElement("div");t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0){return}b=function(A,z,u,v){z=z||document;if(!v&&z.nodeType===9&&!b.isXML(z)){try{return a(z.querySelectorAll(A),u)}catch(B){}}return e(A,z,u,v)};for(var s in e){b[s]=e[s]}t=null})()}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}f.order.splice(1,0,"CLASS");f.find.CLASS=function(s,t,u){if(typeof t.getElementsByClassName!=="undefined"&&!u){return t.getElementsByClassName(s[1])}};e=null})();function o(s,A,z,D,B,C){for(var u=0,t=D.length;u<t;u++){var e=D[u];if(e){e=e[s];var v=false;while(e){if(e.sizcache===z){v=D[e.sizset];break}if(e.nodeType===1&&!C){e.sizcache=z;e.sizset=u}if(e.nodeName.toLowerCase()===A){v=e;break}e=e[s]}D[u]=v}}}function r(s,A,z,D,B,C){for(var u=0,t=D.length;u<t;u++){var e=D[u];if(e){e=e[s];var v=false;while(e){if(e.sizcache===z){v=D[e.sizset];break}if(e.nodeType===1){if(!C){e.sizcache=z;e.sizset=u}if(typeof A!=="string"){if(e===A){v=true;break}}else{if(b.filter(A,[e]).length>0){v=e;break}}}e=e[s]}D[u]=v}}}b.contains=document.compareDocumentPosition?function(s,e){return !!(s.compareDocumentPosition(e)&16)}:function(s,e){return s!==e&&(s.contains?s.contains(e):true)};b.isXML=function(e){var s=(e?e.ownerDocument||e:0).documentElement;return s?s.nodeName!=="HTML":false};var h=function(e,B){var u=[],v="",z,t=B.nodeType?[B]:B;while((z=f.match.PSEUDO.exec(e))){v+=z[0];e=e.replace(f.match.PSEUDO,"")}e=f.relative[e]?e+"*":e;for(var A=0,s=t.length;A<s;A++){b(e,t[A],u)}return b.filter(v,u)};window.tinymce.dom.Sizzle=b})();(function(d){var f=d.each,c=d.DOM,b=d.isIE,e=d.isWebKit,a;d.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(p,q,m,k){var g,h=this,j=h.events,l;if(q instanceof Array){l=[];f(q,function(o){l.push(h.add(p,o,m,k))});return l}if(p&&p.hasOwnProperty&&p instanceof Array){l=[];f(p,function(n){n=c.get(n);l.push(h.add(n,q,m,k))});return l}p=c.get(p);if(!p){return}g=function(n){if(h.disabled){return}n=n||window.event;if(n&&b){if(!n.target){n.target=n.srcElement}d.extend(n,h._stoppers)}if(!k){return m(n)}return m.call(k,n)};if(q=="unload"){d.unloads.unshift({func:g});return g}if(q=="init"){if(h.domLoaded){g()}else{h.inits.push(g)}return g}j.push({obj:p,name:q,func:m,cfunc:g,scope:k});h._add(p,q,g);return m},remove:function(m,p,l){var h=this,g=h.events,j=false,k;if(m&&m.hasOwnProperty&&m instanceof Array){k=[];f(m,function(n){n=c.get(n);k.push(h.remove(n,p,l))});return k}m=c.get(m);f(g,function(o,n){if(o.obj==m&&o.name==p&&(!l||(o.func==l||o.cfunc==l))){g.splice(n,1);h._remove(m,p,o.cfunc);j=true;return false}});return j},clear:function(l){var j=this,g=j.events,h,k;if(l){l=c.get(l);for(h=g.length-1;h>=0;h--){k=g[h];if(k.obj===l){j._remove(k.obj,k.name,k.cfunc);k.obj=k.cfunc=null;g.splice(h,1)}}}},cancel:function(g){if(!g){return false}this.stop(g);return this.prevent(g)},stop:function(g){if(g.stopPropagation){g.stopPropagation()}else{g.cancelBubble=true}return false},prevent:function(g){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false},destroy:function(){var g=this;f(g.events,function(j,h){g._remove(j.obj,j.name,j.cfunc);j.obj=j.cfunc=null});g.events=[];g=null},_add:function(h,j,g){if(h.attachEvent){h.attachEvent("on"+j,g)}else{if(h.addEventListener){h.addEventListener(j,g,false)}else{h["on"+j]=g}}},_remove:function(j,k,h){if(j){try{if(j.detachEvent){j.detachEvent("on"+k,h)}else{if(j.removeEventListener){j.removeEventListener(k,h,false)}else{j["on"+k]=null}}}catch(g){}}},_pageInit:function(h){var g=this;if(g.domLoaded){return}g.domLoaded=true;f(g.inits,function(j){j()});g.inits=[]},_wait:function(j){var g=this,h=j.document;if(j.tinyMCE_GZ&&tinyMCE_GZ.loaded){g.domLoaded=1;return}if(h.attachEvent){h.attachEvent("onreadystatechange",function(){if(h.readyState==="complete"){h.detachEvent("onreadystatechange",arguments.callee);g._pageInit(j)}});if(h.documentElement.doScroll&&j==j.top){(function(){if(g.domLoaded){return}try{h.documentElement.doScroll("left")}catch(k){setTimeout(arguments.callee,0);return}g._pageInit(j)})()}}else{if(h.addEventListener){g._add(j,"DOMContentLoaded",function(){g._pageInit(j)})}}g._add(j,"load",function(){g._pageInit(j)})},_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});a=d.dom.Event=new d.dom.EventUtils();a._wait(window);d.addUnload(function(){a.destroy()})})(tinymce);(function(a){a.dom.Element=function(f,d){var b=this,e,c;b.settings=d=d||{};b.id=f;b.dom=e=d.dom||a.DOM;if(!a.isIE){c=e.get(b.id)}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(g){b[g]=function(){var h=[f],j;for(j=0;j<arguments.length;j++){h.push(arguments[j])}h=e[g].apply(e,h);b.update(g);return h}});a.extend(b,{on:function(j,h,g){return a.dom.Event.add(b.id,j,h,g)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle("width")||g.clientWidth),h:parseInt(b.getStyle("height")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,j){var h=b.getXY();b.moveTo(h.x+g,h.y+j)},resizeTo:function(g,j){b.setStyles({width:g,height:j})},resizeBy:function(g,k){var j=b.getSize();b.resizeTo(j.w+g,j.h+k)},update:function(h){var g;if(a.isIE6&&d.blocker){h=h||"";if(h.indexOf("get")===0||h.indexOf("has")===0||h.indexOf("is")===0){return}if(h=="remove"){e.remove(b.blocker);return}if(!b.blocker){b.blocker=e.uniqueId();g=e.add(d.container||e.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});e.setStyle(g,"opacity",0)}else{g=e.get(b.blocker)}e.setStyles(g,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(c){function e(f){return f.replace(/[\n\r]+/g,"")}var b=c.is,a=c.isIE,d=c.each;c.create("tinymce.dom.Selection",{Selection:function(j,h,g){var f=this;f.dom=j;f.win=h;f.serializer=g;d(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(k){f[k]=new c.util.Dispatcher(f)});if(!f.win.getSelection){f.tridentSel=new c.dom.TridentSelection(f)}if(c.isIE&&j.boxModel){this._fixIESelection()}c.addUnload(f.destroy,f)},setCursorLocation:function(h,j){var f=this;var g=f.dom.createRng();g.setStart(h,j);g.setEnd(h,j);f.setRng(g);f.collapse(false)},getContent:function(g){var f=this,h=f.getRng(),m=f.dom.create("body"),k=f.getSel(),j,l,o;g=g||{};j=l="";g.get=true;g.format=g.format||"html";g.forced_root_block="";f.onBeforeGetContent.dispatch(f,g);if(g.format=="text"){return f.isCollapsed()?"":(h.text||(k.toString?k.toString():""))}if(h.cloneContents){o=h.cloneContents();if(o){m.appendChild(o)}}else{if(b(h.item)||b(h.htmlText)){m.innerHTML="<br>"+(h.item?h.item(0).outerHTML:h.htmlText);m.removeChild(m.firstChild)}else{m.innerHTML=h.toString()}}if(/^\s/.test(m.innerHTML)){j=" "}if(/\s+$/.test(m.innerHTML)){l=" "}g.getInner=true;g.content=f.isCollapsed()?"":j+f.serializer.serialize(m,g)+l;f.onGetContent.dispatch(f,g);return g.content},setContent:function(g,j){var o=this,f=o.getRng(),k,l=o.win.document,n,m;j=j||{format:"html"};j.set=true;g=j.content=g;if(!j.no_events){o.onBeforeSetContent.dispatch(o,j)}g=j.content;if(f.insertNode){g+='<span id="__caret">_</span>';if(f.startContainer==l&&f.endContainer==l){l.body.innerHTML=g}else{f.deleteContents();if(l.body.childNodes.length==0){l.body.innerHTML=g}else{if(f.createContextualFragment){f.insertNode(f.createContextualFragment(g))}else{n=l.createDocumentFragment();m=l.createElement("div");n.appendChild(m);m.outerHTML=g;f.insertNode(n)}}}k=o.dom.get("__caret");f=l.createRange();f.setStartBefore(k);f.setEndBefore(k);o.setRng(f);o.dom.remove("__caret");try{o.setRng(f)}catch(h){}}else{if(f.item){l.execCommand("Delete",false,null);f=o.getRng()}if(/^\s+/.test(g)){f.pasteHTML('<span id="__mce_tmp">_</span>'+g);o.dom.remove("__mce_tmp")}else{f.pasteHTML(g)}}if(!j.no_events){o.onSetContent.dispatch(o,j)}},getStart:function(){var g=this.getRng(),h,f,k,j;if(g.duplicate||g.item){if(g.item){return g.item(0)}k=g.duplicate();k.collapse(1);h=k.parentElement();f=j=g.parentElement();while(j=j.parentNode){if(j==h){h=f;break}}return h}else{h=g.startContainer;if(h.nodeType==1&&h.hasChildNodes()){h=h.childNodes[Math.min(h.childNodes.length-1,g.startOffset)]}if(h&&h.nodeType==3){return h.parentNode}return h}},getEnd:function(){var g=this,h=g.getRng(),j,f;if(h.duplicate||h.item){if(h.item){return h.item(0)}h=h.duplicate();h.collapse(0);j=h.parentElement();if(j&&j.nodeName=="BODY"){return j.lastChild||j}return j}else{j=h.endContainer;f=h.endOffset;if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[f>0?f-1:f]}if(j&&j.nodeType==3){return j.parentNode}return j}},getBookmark:function(s,u){var z=this,n=z.dom,g,k,j,o,h,p,q,m="\uFEFF",v;function f(A,B){var t=0;d(n.select(A),function(D,C){if(D==B){t=C}});return t}if(s==2){function l(){var A=z.getRng(true),t=n.getRoot(),B={};function C(F,K){var E=F[K?"startContainer":"endContainer"],J=F[K?"startOffset":"endOffset"],D=[],G,I,H=0;if(E.nodeType==3){if(u){for(G=E.previousSibling;G&&G.nodeType==3;G=G.previousSibling){J+=G.nodeValue.length}}D.push(J)}else{I=E.childNodes;if(J>=I.length&&I.length){H=1;J=Math.max(0,I.length-1)}D.push(z.dom.nodeIndex(I[J],u)+H)}for(;E&&E!=t;E=E.parentNode){D.push(z.dom.nodeIndex(E,u))}return D}B.start=C(A,true);if(!z.isCollapsed()){B.end=C(A)}return B}if(z.tridentSel){return z.tridentSel.getBookmark(s)}return l()}if(s){return{rng:z.getRng()}}g=z.getRng();j=n.uniqueId();o=tinyMCE.activeEditor.selection.isCollapsed();v="overflow:hidden;line-height:0px";if(g.duplicate||g.item){if(!g.item){k=g.duplicate();try{g.collapse();g.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_start" style="'+v+'">'+m+"</span>");if(!o){k.collapse(false);g.moveToElementText(k.parentElement());if(g.compareEndPoints("StartToEnd",k)==0){k.move("character",-1)}k.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_end" style="'+v+'">'+m+"</span>")}}catch(r){return null}}else{p=g.item(0);h=p.nodeName;return{name:h,index:f(h,p)}}}else{p=z.getNode();h=p.nodeName;if(h=="IMG"){return{name:h,index:f(h,p)}}k=g.cloneRange();if(!o){k.collapse(false);k.insertNode(n.create("span",{"data-mce-type":"bookmark",id:j+"_end",style:v},m))}g.collapse(true);g.insertNode(n.create("span",{"data-mce-type":"bookmark",id:j+"_start",style:v},m))}z.moveToBookmark({id:j,keep:1});return{id:j}},moveToBookmark:function(o){var s=this,m=s.dom,j,h,f,r,k,u,p,q;if(o){if(o.start){f=m.createRng();r=m.getRoot();function g(C){var t=o[C?"start":"end"],z,A,B,v;if(t){B=t[0];for(A=r,z=t.length-1;z>=1;z--){v=A.childNodes;if(t[z]>v.length-1){return}A=v[t[z]]}if(A.nodeType===3){B=Math.min(t[0],A.nodeValue.length)}if(A.nodeType===1){B=Math.min(t[0],A.childNodes.length)}if(C){f.setStart(A,B)}else{f.setEnd(A,B)}}return true}if(s.tridentSel){return s.tridentSel.moveToBookmark(o)}if(g(true)&&g()){s.setRng(f)}}else{if(o.id){function l(D){var v=m.get(o.id+"_"+D),C,t,A,B,z=o.keep;if(v){C=v.parentNode;if(D=="start"){if(!z){t=m.nodeIndex(v)}else{C=v.firstChild;t=1}k=u=C;p=q=t}else{if(!z){t=m.nodeIndex(v)}else{C=v.firstChild;t=1}u=C;q=t}if(!z){B=v.previousSibling;A=v.nextSibling;d(c.grep(v.childNodes),function(E){if(E.nodeType==3){E.nodeValue=E.nodeValue.replace(/\uFEFF/g,"")}});while(v=m.get(o.id+"_"+D)){m.remove(v,1)}if(B&&A&&B.nodeType==A.nodeType&&B.nodeType==3&&!c.isOpera){t=B.nodeValue.length;B.appendData(A.nodeValue);m.remove(A);if(D=="start"){k=u=B;p=q=t}else{u=B;q=t}}}}}function n(t){if(m.isBlock(t)&&!t.innerHTML){t.innerHTML=!a?'<br data-mce-bogus="1" />':" "}return t}l("start");l("end");if(k){f=m.createRng();f.setStart(n(k),p);f.setEnd(n(u),q);s.setRng(f)}}else{if(o.name){s.select(m.select(o.name)[o.index])}else{if(o.rng){s.setRng(o.rng)}}}}}},select:function(l,k){var j=this,m=j.dom,g=m.createRng(),f;if(l){f=m.nodeIndex(l);g.setStart(l.parentNode,f);g.setEnd(l.parentNode,f+1);if(k){function h(n,p){var o=new c.dom.TreeWalker(n,n);do{if(n.nodeType==3&&c.trim(n.nodeValue).length!=0){if(p){g.setStart(n,0)}else{g.setEnd(n,n.nodeValue.length)}return}if(n.nodeName=="BR"){if(p){g.setStartBefore(n)}else{g.setEndBefore(n)}return}}while(n=(p?o.next():o.prev()))}h(l,1);h(l)}j.setRng(g)}return l},isCollapsed:function(){var f=this,h=f.getRng(),g=f.getSel();if(!h||h.item){return false}if(h.compareEndPoints){return h.compareEndPoints("StartToEnd",h)===0}return !g||h.collapsed},collapse:function(f){var h=this,g=h.getRng(),j;if(g.item){j=g.item(0);g=h.win.document.body.createTextRange();g.moveToElementText(j)}g.collapse(!!f);h.setRng(g)},getSel:function(){var g=this,f=this.win;return f.getSelection?f.getSelection():f.document.selection},getRng:function(m){var g=this,h,j,l,k=g.win.document;if(m&&g.tridentSel){return g.tridentSel.getRangeAt(0)}try{if(h=g.getSel()){j=h.rangeCount>0?h.getRangeAt(0):(h.createRange?h.createRange():k.createRange())}}catch(f){}if(c.isIE&&j&&j.setStart&&k.selection.createRange().item){l=k.selection.createRange().item(0);j=k.createRange();j.setStartBefore(l);j.setEndAfter(l)}if(!j){j=k.createRange?k.createRange():k.body.createTextRange()}if(g.selectedRange&&g.explicitRange){if(j.compareBoundaryPoints(j.START_TO_START,g.selectedRange)===0&&j.compareBoundaryPoints(j.END_TO_END,g.selectedRange)===0){j=g.explicitRange}else{g.selectedRange=null;g.explicitRange=null}}return j},setRng:function(j){var h,g=this;if(!g.tridentSel){h=g.getSel();if(h){g.explicitRange=j;try{h.removeAllRanges()}catch(f){}h.addRange(j);g.selectedRange=h.rangeCount>0?h.getRangeAt(0):null}}else{if(j.cloneRange){g.tridentSel.addRange(j);return}try{j.select()}catch(f){}}},setNode:function(g){var f=this;f.setContent(f.dom.getOuterHTML(g));return g},getNode:function(){var h=this,g=h.getRng(),j=h.getSel(),m,l=g.startContainer,f=g.endContainer;if(!g){return h.dom.getRoot()}if(g.setStart){m=g.commonAncestorContainer;if(!g.collapsed){if(g.startContainer==g.endContainer){if(g.endOffset-g.startOffset<2){if(g.startContainer.hasChildNodes()){m=g.startContainer.childNodes[g.startOffset]}}}if(l.nodeType===3&&f.nodeType===3){function k(q,o){var p=q;while(q&&q.nodeType===3&&q.length===0){q=o?q.nextSibling:q.previousSibling}return q||p}if(l.length===g.startOffset){l=k(l.nextSibling,true)}else{l=l.parentNode}if(g.endOffset===0){f=k(f.previousSibling,false)}else{f=f.parentNode}if(l&&l===f){return l}}}if(m&&m.nodeType==3){return m.parentNode}return m}return g.item?g.item(0):g.parentElement()},getSelectedBlocks:function(p,g){var o=this,k=o.dom,m,l,h,j=[];m=k.getParent(p||o.getStart(),k.isBlock);l=k.getParent(g||o.getEnd(),k.isBlock);if(m){j.push(m)}if(m&&l&&m!=l){h=m;var f=new c.dom.TreeWalker(m,k.getRoot());while((h=f.next())&&h!=l){if(k.isBlock(h)){j.push(h)}}}if(l&&m!=l){j.push(l)}return j},normalize:function(){var g=this,f,j;if(c.isIE){return}function h(q){var l,p,o,n=g.dom,k=n.getRoot(),m;l=f[(q?"start":"end")+"Container"];p=f[(q?"start":"end")+"Offset"];if(l.nodeType===9){l=l.body;p=0}if(l===k){if(l.hasChildNodes()){l=l.childNodes[Math.min(!q&&p>0?p-1:p,l.childNodes.length-1)];p=0;if(l.hasChildNodes()){m=l;o=new c.dom.TreeWalker(l,k);do{if(m.nodeType===3){p=q?0:m.nodeValue.length-1;l=m;j=true;break}if(/^(BR|IMG)$/.test(m.nodeName)){p=n.nodeIndex(m);l=m.parentNode;if(m.nodeName=="IMG"&&!q){p++}j=true;break}}while(m=(q?o.next():o.prev()))}}}if(j){f["set"+(q?"Start":"End")](l,p)}}f=g.getRng();h(true);if(!f.collapsed){h()}if(j){g.setRng(f)}},destroy:function(g){var f=this;f.win=null;if(!g){c.removeUnload(f.destroy)}},_fixIESelection:function(){var g=this.dom,n=g.doc,h=n.body,k,o,f;n.documentElement.unselectable=true;function j(p,s){var q=h.createTextRange();try{q.moveToPoint(p,s)}catch(r){q=null}return q}function m(q){var p;if(q.button){p=j(q.x,q.y);if(p){if(p.compareEndPoints("StartToStart",o)>0){p.setEndPoint("StartToStart",o)}else{p.setEndPoint("EndToEnd",o)}p.select()}}else{l()}}function l(){var p=n.selection.createRange();if(o&&!p.item&&p.compareEndPoints("StartToEnd",p)===0){o.select()}g.unbind(n,"mouseup",l);g.unbind(n,"mousemove",m);o=k=0}g.bind(n,["mousedown","contextmenu"],function(p){if(p.target.nodeName==="HTML"){if(k){l()}f=n.documentElement;if(f.scrollHeight>f.clientHeight){return}k=1;o=j(p.x,p.y);if(o){g.bind(n,"mouseup",l);g.bind(n,"mousemove",m);g.win.focus();o.select()}}})}})})(tinymce);(function(a){a.dom.Serializer=function(e,j,f){var h,b,d=a.isIE,g=a.each,c;if(!e.apply_source_formatting){e.indent=false}j=j||a.DOM;f=f||new a.html.Schema(e);e.entity_encoding=e.entity_encoding||"named";e.remove_trailing_brs="remove_trailing_brs" in e?e.remove_trailing_brs:true;h=new a.util.Dispatcher(self);b=new a.util.Dispatcher(self);c=new a.html.DomParser(e,f);c.addAttributeFilter("src,href,style",function(l,k){var p=l.length,m,r,o="data-mce-"+k,q=e.url_converter,s=e.url_converter_scope,n;while(p--){m=l[p];r=m.attributes.map[o];if(r!==n){m.attr(k,r.length>0?r:null);m.attr(o,null)}else{r=m.attributes.map[k];if(k==="style"){r=j.serializeStyle(j.parseStyle(r),m.name)}else{if(q){r=q.call(s,r,k,m.name)}}m.attr(k,r.length>0?r:null)}}});c.addAttributeFilter("class",function(k,l){var m=k.length,n,o;while(m--){n=k[m];o=n.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,"");n.attr("class",o.length>0?o:null)}});c.addAttributeFilter("data-mce-type",function(k,m,l){var n=k.length,o;while(n--){o=k[n];if(o.attributes.map["data-mce-type"]==="bookmark"&&!l.cleanup){o.remove()}}});c.addNodeFilter("script,style",function(l,m){var n=l.length,o,p;function k(q){return q.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}while(n--){o=l[n];p=o.firstChild?o.firstChild.value:"";if(m==="script"){o.attr("type",(o.attr("type")||"text/javascript").replace(/^mce\-/,""));if(p.length>0){o.firstChild.value="// <![CDATA[\n"+k(p)+"\n// ]]>"}}else{if(p.length>0){o.firstChild.value="<!--\n"+k(p)+"\n-->"}}}});c.addNodeFilter("#comment",function(k,l){var m=k.length,n;while(m--){n=k[m];if(n.value.indexOf("[CDATA[")===0){n.name="#cdata";n.type=4;n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")}else{if(n.value.indexOf("mce:protected ")===0){n.name="#text";n.type=3;n.raw=true;n.value=unescape(n.value).substr(14)}}}});c.addNodeFilter("xml:namespace,input",function(k,l){var m=k.length,n;while(m--){n=k[m];if(n.type===7){n.remove()}else{if(n.type===1){if(l==="input"&&!("type" in n.attributes.map)){n.attr("type","text")}}}}});if(e.fix_list_elements){c.addNodeFilter("ul,ol",function(l,m){var n=l.length,o,k;while(n--){o=l[n];k=o.parent;if(k.name==="ul"||k.name==="ol"){if(o.prev&&o.prev.name==="li"){o.prev.append(o)}}}})}c.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(k,l){var m=k.length;while(m--){k[m].attr(l,null)}});return{schema:f,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,onPreProcess:h,onPostProcess:b,serialize:function(p,n){var m,q,l,k,o;if(d&&j.select("script,style,select,map").length>0){o=p.innerHTML;p=p.cloneNode(false);j.setHTML(p,o)}else{p=p.cloneNode(true)}m=p.ownerDocument.implementation;if(m.createHTMLDocument){q=m.createHTMLDocument("");g(p.nodeName=="BODY"?p.childNodes:[p],function(r){q.body.appendChild(q.importNode(r,true))});if(p.nodeName!="BODY"){p=q.body.firstChild}else{p=q.body}l=j.doc;j.doc=q}n=n||{};n.format=n.format||"html";if(!n.no_events){n.node=p;h.dispatch(self,n)}k=new a.html.Serializer(e,f);n.content=k.serialize(c.parse(n.getInner?p.innerHTML:a.trim(j.getOuterHTML(p),n),n));if(!n.cleanup){n.content=n.content.replace(/\uFEFF|\u200B/g,"")}if(!n.no_events){b.dispatch(self,n)}if(l){j.doc=l}n.node=null;return n.content},addRules:function(k){f.addValidElements(k)},setRules:function(k){f.setValidElements(k)}}}})(tinymce);(function(a){a.dom.ScriptLoader=function(h){var c=0,l=1,j=2,m={},k=[],f={},d=[],g=0,e;function b(n,z){var A=this,r=a.DOM,u,p,s,o;function q(){r.remove(o);if(u){u.onreadystatechange=u.onload=u=null}z()}function v(){if(typeof(console)!=="undefined"&&console.log){console.log("Failed to load: "+n)}}o=r.uniqueId();if(a.isIE6){p=new a.util.URI(n);s=location;if(p.host==s.hostname&&p.port==s.port&&(p.protocol+":")==s.protocol&&p.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(p.getURI()),success:function(B){var t=r.create("script",{type:"text/javascript"});t.text=B;document.getElementsByTagName("head")[0].appendChild(t);r.remove(t);q()},error:v});return}}u=r.create("script",{id:o,type:"text/javascript",src:a._addVer(n)});if(!a.isIE){u.onload=q}u.onerror=v;if(!a.isOpera){u.onreadystatechange=function(){var t=u.readyState;if(t=="complete"||t=="loaded"){q()}}}(document.getElementsByTagName("head")[0]||document.body).appendChild(u)}this.isDone=function(n){return m[n]==j};this.markDone=function(n){m[n]=j};this.add=this.load=function(n,r,o){var p,q=m[n];if(q==e){k.push(n);m[n]=c}if(r){if(!f[n]){f[n]=[]}f[n].push({func:r,scope:o||this})}};this.loadQueue=function(o,n){this.loadScripts(k,o,n)};this.loadScripts=function(n,r,q){var p;function o(s){a.each(f[s],function(t){t.func.call(t.scope)});f[s]=e}d.push({func:r,scope:q||this});p=function(){var s=a.grep(n);n.length=0;a.each(s,function(t){if(m[t]==j){o(t);return}if(m[t]!=l){m[t]=l;g++;b(t,function(){m[t]=j;g--;o(t);p()})}});if(!g){a.each(d,function(t){t.func.call(t.scope)});d.length=0}};p()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);tinymce.dom.TreeWalker=function(a,c){var b=a;function d(j,f,e,k){var h,g;if(j){if(!k&&j[f]){return j[f]}if(j!=c){h=j[e];if(h){return h}for(g=j.parentNode;g&&g!=c;g=g.parentNode){h=g[e];if(h){return h}}}}}this.current=function(){return b};this.next=function(e){return(b=d(b,"firstChild","nextSibling",e))};this.prev=function(e){return(b=d(b,"lastChild","previousSibling",e))}};(function(a){a.dom.RangeUtils=function(c){var b="\uFEFF";this.walk=function(d,t){var j=d.startContainer,m=d.startOffset,u=d.endContainer,n=d.endOffset,k,g,p,h,s,r,e;e=c.select("td.mceSelected,th.mceSelected");if(e.length>0){a.each(e,function(v){t([v])});return}function f(v){var z;z=v[0];if(z.nodeType===3&&z===j&&m>=z.nodeValue.length){v.splice(0,1)}z=v[v.length-1];if(n===0&&v.length>0&&z===u&&z.nodeType===3){v.splice(v.length-1,1)}return v}function q(A,z,v){var B=[];for(;A&&A!=v;A=A[z]){B.push(A)}return B}function o(z,v){do{if(z.parentNode==v){return z}z=z.parentNode}while(z)}function l(A,z,B){var v=B?"nextSibling":"previousSibling";for(h=A,s=h.parentNode;h&&h!=z;h=s){s=h.parentNode;r=q(h==A?h:h[v],v);if(r.length){if(!B){r.reverse()}t(f(r))}}}if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[m]}if(u.nodeType==1&&u.hasChildNodes()){u=u.childNodes[Math.min(n-1,u.childNodes.length-1)]}if(j==u){return t(f([j]))}k=c.findCommonAncestor(j,u);for(h=j;h;h=h.parentNode){if(h===u){return l(j,k,true)}if(h===k){break}}for(h=u;h;h=h.parentNode){if(h===j){return l(u,k)}if(h===k){break}}g=o(j,k)||j;p=o(u,k)||u;l(j,g,true);r=q(g==j?g:g.nextSibling,"nextSibling",p==u?p.nextSibling:p);if(r.length){t(f(r))}l(u,p)};this.split=function(e){var h=e.startContainer,d=e.startOffset,j=e.endContainer,g=e.endOffset;function f(k,l){return k.splitText(l)}if(h==j&&h.nodeType==3){if(d>0&&d<h.nodeValue.length){j=f(h,d);h=j.previousSibling;if(g>d){g=g-d;h=j=f(j,g).previousSibling;g=j.nodeValue.length;d=0}else{g=0}}}else{if(h.nodeType==3&&d>0&&d<h.nodeValue.length){h=f(h,d);d=0}if(j.nodeType==3&&g>0&&g<j.nodeValue.length){j=f(j,g).previousSibling;g=j.nodeValue.length}}return{startContainer:h,startOffset:d,endContainer:j,endOffset:g}}};a.dom.RangeUtils.compareRanges=function(c,b){if(c&&b){if(c.item||c.duplicate){if(c.item&&b.item&&c.item(0)===b.item(0)){return true}if(c.isEqual&&b.isEqual&&b.isEqual(c)){return true}}else{return c.startContainer==b.startContainer&&c.startOffset==b.startOffset}}return false}})(tinymce);(function(b){var a=b.dom.Event,c=b.each;b.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(e,f){var q=this,n=e.root,m=e.items,o=e.enableUpDown,j=e.enableLeftRight||!e.enableUpDown,l=e.excludeFromTabOrder,k,h,p,d,g;f=f||b.DOM;k=function(r){g=r.target.id};h=function(r){f.setAttrib(r.target.id,"tabindex","-1")};d=function(r){var s=f.get(g);f.setAttrib(s,"tabindex","0");s.focus()};q.focus=function(){f.get(g).focus()};q.destroy=function(){c(m,function(r){f.unbind(f.get(r.id),"focus",k);f.unbind(f.get(r.id),"blur",h)});f.unbind(f.get(n),"focus",d);f.unbind(f.get(n),"keydown",p);m=f=n=q.focus=k=h=p=d=null;q.destroy=function(){}};q.moveFocus=function(v,s){var r=-1,u=q.controls,t;if(!g){return}c(m,function(A,z){if(A.id===g){r=z;return false}});r+=v;if(r<0){r=m.length-1}else{if(r>=m.length){r=0}}t=m[r];f.setAttrib(g,"tabindex","-1");f.setAttrib(t.id,"tabindex","0");f.get(t.id).focus();if(e.actOnFocus){e.onAction(t.id)}if(s){a.cancel(s)}};p=function(B){var v=37,u=39,A=38,C=40,r=27,t=14,s=13,z=32;switch(B.keyCode){case v:if(j){q.moveFocus(-1)}break;case u:if(j){q.moveFocus(1)}break;case A:if(o){q.moveFocus(-1)}break;case C:if(o){q.moveFocus(1)}break;case r:if(e.onCancel){e.onCancel();a.cancel(B)}break;case t:case s:case z:if(e.onAction){e.onAction(g);a.cancel(B)}break}};c(m,function(t,r){var s;if(!t.id){t.id=f.uniqueId("_mce_item_")}if(l){f.bind(t.id,"blur",h);s="-1"}else{s=(r===0?"0":"-1")}f.setAttrib(t.id,"tabindex",s);f.bind(f.get(t.id),"focus",k)});if(m[0]){g=m[0].id}f.setAttrib(n,"tabindex","-1");f.bind(f.get(n),"focus",d);f.bind(f.get(n),"keydown",p)}})})(tinymce);(function(c){var b=c.DOM,a=c.is;c.create("tinymce.ui.Control",{Control:function(f,e,d){this.id=f;this.settings=e=e||{};this.rendered=false;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=e.scope||this;this.disabled=0;this.active=0;this.editor=d},setAriaProperty:function(f,e){var d=b.get(this.id+"_aria")||b.get(this.id);if(d){b.setAttrib(d,"aria-"+f,!!e)}},focus:function(){b.get(this.id).focus()},setDisabled:function(d){if(d!=this.disabled){this.setAriaProperty("disabled",d);this.setState("Disabled",d);this.setState("Enabled",!d);this.disabled=d}},isDisabled:function(){return this.disabled},setActive:function(d){if(d!=this.active){this.setState("Active",d);this.active=d;this.setAriaProperty("pressed",d)}},isActive:function(){return this.active},setState:function(f,d){var e=b.get(this.id);f=this.classPrefix+f;if(d){b.addClass(e,f)}else{b.removeClass(e,f)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){b.setHTML(d,this.renderHTML())},postRender:function(){var e=this,d;if(a(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d)}if(a(e.active)){d=e.active;e.active=-1;e.setActive(d)}},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,b,a){this.parent(c,b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(g,f){this.parent(g,f);this.classPrefix="mceMenuItem"},setSelected:function(f){this.setState("Selected",f);this.setAriaProperty("checked",!!f);this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent();if(c(f.selected)){f.setSelected(f.selected)}}})})(tinymce);(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,g){var f=this;f.parent(h,g);f.items={};f.collapsed=false;f.menuCount=0;f.onAddItem=new d.util.Dispatcher(this)},expand:function(g){var f=this;if(g){a(f,function(h){if(h.expand){h.expand()}},"items",f)}f.collapsed=false},collapse:function(g){var f=this;if(g){a(f,function(h){if(h.collapse){h.collapse()}},"items",f)}f.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(f){if(!f.settings){f=new d.ui.MenuItem(f.id||b.uniqueId(),f)}this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:true})},addMenu:function(f){if(!f.collapse){f=this.createMenu(f)}this.menuCount++;return this.add(f)},hasMenus:function(){return this.menuCount!==0},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){if(g.removeAll){g.removeAll()}else{g.remove()}g.destroy()},"items",f);f.items={}},createMenu:function(g){var f=new d.ui.Menu(g.id||b.uniqueId(),g);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f}})})(tinymce);(function(e){var d=e.is,c=e.DOM,f=e.each,a=e.dom.Event,b=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,g){g=g||{};g.container=g.container||c.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(d(g.icons)&&!g.icons){g["class"]+=" mceNoIcons"}this.parent(h,g);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(k){var h=this,j=h.settings,g;k.container=k.container||j.container;k.parent=h;k.constrain=k.constrain||j.constrain;k["class"]=k["class"]||j["class"];k.vp_offset_x=k.vp_offset_x||j.vp_offset_x;k.vp_offset_y=k.vp_offset_y||j.vp_offset_y;k.keyboard_focus=j.keyboard_focus;g=new e.ui.DropMenu(k.id||c.uniqueId(),k);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);return g},focus:function(){var g=this;if(g.keyboardNav){g.keyboardNav.focus()}},update:function(){var j=this,k=j.settings,g=c.get("menu_"+j.id+"_tbl"),m=c.get("menu_"+j.id+"_co"),h,l;h=k.max_width?Math.min(g.clientWidth,k.max_width):g.clientWidth;l=k.max_height?Math.min(g.clientHeight,k.max_height):g.clientHeight;if(!c.boxModel){j.element.setStyles({width:h+2,height:l+2})}else{j.element.setStyles({width:h,height:l})}if(k.max_width){c.setStyle(m,"width",h)}if(k.max_height){c.setStyle(m,"height",l);if(g.clientHeight<k.max_height){c.setStyle(m,"overflow","hidden")}}},showMenu:function(q,o,u){var A=this,B=A.settings,p,g=c.getViewPort(),v,m,z,r,j=2,l,k,n=A.classPrefix;A.collapse(1);if(A.isMenuVisible){return}if(!A.rendered){p=c.add(A.settings.container,A.renderNode());f(A.items,function(h){h.postRender()});A.element=new b("menu_"+A.id,{blocker:1,container:B.container})}else{p=c.get("menu_"+A.id)}if(!e.isOpera){c.setStyles(p,{left:-65535,top:-65535})}c.show(p);A.update();q+=B.offset_x||0;o+=B.offset_y||0;g.w-=4;g.h-=4;if(B.constrain){v=p.clientWidth-j;m=p.clientHeight-j;z=g.x+g.w;r=g.y+g.h;if((q+B.vp_offset_x+v)>z){q=u?u-v:Math.max(0,(z-B.vp_offset_x)-v)}if((o+B.vp_offset_y+m)>r){o=Math.max(0,(r-B.vp_offset_y)-m)}}c.setStyles(p,{left:q,top:o});A.element.update();A.isMenuVisible=1;A.mouseClickFunc=a.add(p,"click",function(s){var h;s=s.target;if(s&&(s=c.getParent(s,"tr"))&&!c.hasClass(s,n+"ItemSub")){h=A.items[s.id];if(h.isDisabled()){return}l=A;while(l){if(l.hideMenu){l.hideMenu()}l=l.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return a.cancel(s)}});if(A.hasMenus()){A.mouseOverFunc=a.add(p,"mouseover",function(C){var h,t,s;C=C.target;if(C&&(C=c.getParent(C,"tr"))){h=A.items[C.id];if(A.lastMenu){A.lastMenu.collapse(1)}if(h.isDisabled()){return}if(C&&c.hasClass(C,n+"ItemSub")){t=c.getRect(C);h.showMenu((t.x+t.w-j),t.y-j,t.x);A.lastMenu=h;c.addClass(c.get(h.id).firstChild,n+"ItemActive")}}})}a.add(p,"keydown",A._keyHandler,A);A.onShowMenu.dispatch(A);if(B.keyboard_focus){A._setupKeyboardNav()}},hideMenu:function(k){var g=this,j=c.get("menu_"+g.id),h;if(!g.isMenuVisible){return}if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(j,"mouseover",g.mouseOverFunc);a.remove(j,"click",g.mouseClickFunc);a.remove(j,"keydown",g._keyHandler);c.hide(j);g.isMenuVisible=0;if(!k){g.collapse(1)}if(g.element){g.element.hide()}if(h=c.get(g.id)){c.removeClass(h.firstChild,g.classPrefix+"ItemActive")}g.onHideMenu.dispatch(g)},add:function(j){var g=this,h;j=g.parent(j);if(g.isRendered&&(h=c.get("menu_"+g.id))){g._add(c.select("tbody",h)[0],j)}return j},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){c.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=this,h=c.get("menu_"+g.id);if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(h,"mouseover",g.mouseOverFunc);a.remove(c.select("a",h),"focus",g.mouseOverFunc);a.remove(h,"click",g.mouseClickFunc);a.remove(h,"keydown",g._keyHandler);if(g.element){g.element.remove()}c.remove(h)},renderNode:function(){var j=this,k=j.settings,m,h,l,g;g=c.create("div",{role:"listbox",id:"menu_"+j.id,"class":k["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});if(j.settings.parent){c.setAttrib(g,"aria-parent","menu_"+j.settings.parent.id)}l=c.add(g,"div",{role:"presentation",id:"menu_"+j.id+"_co","class":j.classPrefix+(k["class"]?" "+k["class"]:"")});j.element=new b("menu_"+j.id,{blocker:1,container:k.container});if(k.menu_line){c.add(l,"span",{"class":j.classPrefix+"Line"})}m=c.add(l,"table",{role:"presentation",id:"menu_"+j.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});h=c.add(m,"tbody");f(j.items,function(n){j._add(h,n)});j.rendered=true;return g},_setupKeyboardNav:function(){var j,h,g=this;j=c.get("menu_"+g.id);h=c.select("a[role=option]","menu_"+g.id);h.splice(0,0,j);g.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+g.id,items:h,onCancel:function(){g.hideMenu()},enableUpDown:true});j.focus()},_keyHandler:function(g){var h=this,j;switch(g.keyCode){case 37:if(h.settings.parent){h.hideMenu();h.settings.parent.focus();a.cancel(g)}break;case 39:if(h.mouseOverFunc){h.mouseOverFunc(g)}break}},_add:function(k,h){var j,r=h.settings,q,m,l,p=this.classPrefix,g;if(r.separator){m=c.add(k,"tr",{id:h.id,"class":p+"ItemSeparator"});c.add(m,"td",{"class":p+"ItemSeparator"});if(j=m.previousSibling){c.addClass(j,"mceLast")}return}j=m=c.add(k,"tr",{id:h.id,"class":p+"Item "+p+"ItemEnabled"});j=l=c.add(j,r.titleItem?"th":"td");j=q=c.add(j,"a",{id:h.id+"_aria",role:r.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(r.parent){c.setAttrib(q,"aria-haspopup","true");c.setAttrib(q,"aria-owns","menu_"+h.id)}c.addClass(l,r["class"]);g=c.add(j,"span",{"class":"mceIcon"+(r.icon?" mce_"+r.icon:"")});if(r.icon_src){c.add(g,"img",{src:r.icon_src})}j=c.add(j,r.element||"span",{"class":"mceText",title:h.settings.title},h.settings.title);if(h.settings.style){c.setAttrib(j,"style",h.settings.style)}if(k.childNodes.length==1){c.addClass(m,"mceFirst")}if((j=m.previousSibling)&&c.hasClass(j,p+"ItemSeparator")){c.addClass(m,"mceFirst")}if(h.collapse){c.addClass(m,p+"ItemSub")}if(j=m.previousSibling){c.removeClass(j,"mceLast")}c.addClass(m,"mceLast")}})})(tinymce);(function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,d,c){this.parent(e,d,c);this.classPrefix="mceButton"},renderHTML:function(){var f=this.classPrefix,e=this.settings,d,c;c=a.encode(e.label||"");d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+e["class"]+(c?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+a.encode(e.title)+'">';if(e.image&&!(this.editor&&this.editor.forcedHighContrastMode)){d+='<img class="mceIcon" src="'+e.image+'" alt="'+a.encode(e.title)+'" />'+c}else{d+='<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":"")}d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+e.title+"</span>";d+="</a>";return d},postRender:function(){var c=this,e=c.settings,d;if(b.isIE&&c.editor){b.dom.Event.add(c.id,"mousedown",function(f){d=c.editor.selection.getBookmark()})}b.dom.Event.add(c.id,"click",function(f){if(!c.isDisabled()){if(b.isIE&&c.editor&&d){b.activeEditor.selection.moveToBookmark(d)}return e.onclick.call(e.scope,f)}});b.dom.Event.add(c.id,"keyup",function(f){if(!c.isDisabled()&&f.keyCode==b.VK.SPACEBAR){return e.onclick.call(e.scope,f)}})}})})(tinymce);(function(d){var c=d.DOM,b=d.dom.Event,e=d.each,a=d.util.Dispatcher;d.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(j,h,f){var g=this;g.parent(j,h,f);g.items=[];g.onChange=new a(g);g.onPostRender=new a(g);g.onAdd=new a(g);g.onRenderMenu=new d.util.Dispatcher(this);g.classPrefix="mceListBox"},select:function(h){var g=this,k,j;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){j=h}else{j=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(l,f){if(j(l.value)){k=1;g.selectByIndex(f);return false}});if(!k){g.selectByIndex(-1)}}},selectByIndex:function(f){var h=this,j,k,g;if(f!=h.selectedIndex){j=c.get(h.id+"_text");g=c.get(h.id+"_voiceDesc");k=h.items[f];if(k){h.selectedValue=k.value;h.selectedIndex=f;c.setHTML(j,c.encode(k.title));c.setHTML(g,h.settings.title+" - "+k.title);c.removeClass(j,"mceTitle");c.setAttrib(h.id,"aria-valuenow",k.title)}else{c.setHTML(j,c.encode(h.settings.title));c.setHTML(g,c.encode(h.settings.title));c.addClass(j,"mceTitle");h.selectedValue=h.selectedIndex=null;c.setAttrib(h.id,"aria-valuenow",h.settings.title)}j=0}},add:function(j,f,h){var g=this;h=h||{};h=d.extend(h,{title:j,value:f});g.items.push(h);g.onAdd.dispatch(g,h)},getLength:function(){return this.items.length},renderHTML:function(){var j="",f=this,g=f.settings,k=f.classPrefix;j='<span role="listbox" aria-haspopup="true" aria-labelledby="'+f.id+'_voiceDesc" aria-describedby="'+f.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+f.id+'" cellpadding="0" cellspacing="0" class="'+k+" "+k+"Enabled"+(g["class"]?(" "+g["class"]):"")+'"><tbody><tr>';j+="<td>"+c.createHTML("span",{id:f.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},f.settings.title);j+=c.createHTML("a",{id:f.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},c.encode(f.settings.title))+"</td>";j+="<td>"+c.createHTML("a",{id:f.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span></span>')+"</td>";j+="</tr></tbody></table></span>";return j},showMenu:function(){var g=this,j,h=c.get(this.id),f;if(g.isDisabled()||g.items.length==0){return}if(g.menu&&g.menu.isMenuVisible){return g.hideMenu()}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}j=c.getPos(h);f=g.menu;f.settings.offset_x=j.x;f.settings.offset_y=j.y;f.settings.keyboard_focus=!d.isOpera;if(g.oldID){f.items[g.oldID].setSelected(0)}e(g.items,function(k){if(k.value===g.selectedValue){f.items[k.id].setSelected(1);g.oldID=k.id}});f.showMenu(0,h.clientHeight);b.add(c.doc,"mousedown",g.hideMenu,g);c.addClass(g.id,g.classPrefix+"Selected")},hideMenu:function(g){var f=this;if(f.menu&&f.menu.isMenuVisible){c.removeClass(f.id,f.classPrefix+"Selected");if(g&&g.type=="mousedown"&&(g.target.id==f.id+"_text"||g.target.id==f.id+"_open")){return}if(!g||!c.getParent(g.target,".mceMenu")){c.removeClass(f.id,f.classPrefix+"Selected");b.remove(c.doc,"mousedown",f.hideMenu,f);f.menu.hideMenu()}}},renderMenu:function(){var g=this,f;f=g.settings.control_manager.createDropMenu(g.id+"_menu",{menu_line:1,"class":g.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});f.onHideMenu.add(function(){g.hideMenu();g.focus()});f.add({title:g.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}});e(g.items,function(h){if(h.value===undefined){f.add({title:h.title,role:"option","class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}})}else{h.id=c.uniqueId();h.role="option";h.onclick=function(){if(g.settings.onselect(h.value)!==false){g.select(h.value)}};f.add(h)}});g.onRenderMenu.dispatch(g,f);g.menu=f},postRender:function(){var f=this,g=f.classPrefix;b.add(f.id,"click",f.showMenu,f);b.add(f.id,"keydown",function(h){if(h.keyCode==32){f.showMenu(h);b.cancel(h)}});b.add(f.id,"focus",function(){if(!f._focused){f.keyDownHandler=b.add(f.id,"keydown",function(h){if(h.keyCode==40){f.showMenu();b.cancel(h)}});f.keyPressHandler=b.add(f.id,"keypress",function(j){var h;if(j.keyCode==13){h=f.selectedValue;f.selectedValue=null;b.cancel(j);f.settings.onselect(h)}})}f._focused=1});b.add(f.id,"blur",function(){b.remove(f.id,"keydown",f.keyDownHandler);b.remove(f.id,"keypress",f.keyPressHandler);f._focused=0});if(d.isIE6||!c.boxModel){b.add(f.id,"mouseover",function(){if(!c.hasClass(f.id,g+"Disabled")){c.addClass(f.id,g+"Hover")}});b.add(f.id,"mouseout",function(){if(!c.hasClass(f.id,g+"Disabled")){c.removeClass(f.id,g+"Hover")}})}f.onPostRender.dispatch(f,c.get(f.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(d){var c=d.DOM,b=d.dom.Event,e=d.each,a=d.util.Dispatcher;d.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(g,f){this.parent(g,f);this.classPrefix="mceNativeListBox"},setDisabled:function(f){c.get(this.id).disabled=f;this.setAriaProperty("disabled",f)},isDisabled:function(){return c.get(this.id).disabled},select:function(h){var g=this,k,j;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){j=h}else{j=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(l,f){if(j(l.value)){k=1;g.selectByIndex(f);return false}});if(!k){g.selectByIndex(-1)}}},selectByIndex:function(f){c.get(this.id).selectedIndex=f+1;this.selectedValue=this.items[f]?this.items[f].value:null},add:function(k,g,f){var j,h=this;f=f||{};f.value=g;if(h.isRendered()){c.add(c.get(this.id),"option",f,k)}j={title:k,value:g,attribs:f};h.items.push(j);h.onAdd.dispatch(h,j)},getLength:function(){return this.items.length},renderHTML:function(){var g,f=this;g=c.createHTML("option",{value:""},"-- "+f.settings.title+" --");e(f.items,function(h){g+=c.createHTML("option",{value:h.value},h.title)});g=c.createHTML("select",{id:f.id,"class":"mceNativeListBox","aria-labelledby":f.id+"_aria"},g);g+=c.createHTML("span",{id:f.id+"_aria",style:"display: none"},f.settings.title);return g},postRender:function(){var g=this,h,j=true;g.rendered=true;function f(l){var k=g.items[l.target.selectedIndex-1];if(k&&(k=k.value)){g.onChange.dispatch(g,k);if(g.settings.onselect){g.settings.onselect(k)}}}b.add(g.id,"change",f);b.add(g.id,"keydown",function(l){var k;b.remove(g.id,"change",h);j=false;k=b.add(g.id,"blur",function(){if(j){return}j=true;b.add(g.id,"change",f);b.remove(g.id,"blur",k)});if(d.isWebKit&&(l.keyCode==37||l.keyCode==39)){return b.prevent(l)}if(l.keyCode==13||l.keyCode==32){f(l);return b.cancel(l)}});g.onPostRender.dispatch(g,c.get(g.id))}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,f,e){this.parent(g,f,e);this.onRenderMenu=new c.util.Dispatcher(this);f.menu_container=f.menu_container||b.doc.body},showMenu:function(){var g=this,k,j,h=b.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}k=b.getPos(g.settings.menu_container);j=b.getPos(h);f=g.menu;f.settings.offset_x=j.x;f.settings.offset_y=j.y;f.settings.vp_offset_x=j.x;f.settings.vp_offset_y=j.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.clientHeight);a.add(b.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);g.isMenuVisible=1},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons});e.onHideMenu.add(function(){f.hideMenu();f.focus()});f.onRenderMenu.dispatch(f,e);f.menu=e},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!b.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(b.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var e=this,f=e.settings;a.add(e.id,"click",function(){if(!e.isDisabled()){if(f.onclick){f.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(g,f,e){this.parent(g,f,e);this.classPrefix="mceSplitButton"},renderHTML:function(){var j,f=this,g=f.settings,e;j="<tbody><tr>";if(g.image){e=b.createHTML("img ",{src:g.image,role:"presentation","class":"mceAction "+g["class"]})}else{e=b.createHTML("span",{"class":"mceAction "+g["class"]},"")}e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:f.id+"_voice",style:"display:none;"},g.title);j+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";e=b.createHTML("span",{"class":"mceOpen "+g["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span>');j+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";j+="</tr></tbody>";j=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+g["class"],cellpadding:"0",cellspacing:"0",title:g.title},j);return b.createHTML("div",{id:f.id,role:"button",tabindex:"0","aria-labelledby":f.id+"_voice","aria-haspopup":"true"},j)},postRender:function(){var e=this,g=e.settings,f;if(g.onclick){f=function(h){if(!e.isDisabled()){g.onclick(e.value);a.cancel(h)}};a.add(e.id+"_action","click",f);a.add(e.id,["click","keydown"],function(h){var l=32,n=14,j=13,k=38,m=40;if((h.keyCode===32||h.keyCode===13||h.keyCode===14)&&!h.altKey&&!h.ctrlKey&&!h.metaKey){f();a.cancel(h)}else{if(h.type==="click"||h.keyCode===m){e.showMenu();a.cancel(h)}}})}a.add(e.id+"_open","click",function(h){e.showMenu();a.cancel(h)});a.add([e.id,e.id+"_open"],"focus",function(){e._focused=1});a.add([e.id,e.id+"_open"],"blur",function(){e._focused=0});if(c.isIE6||!b.boxModel){a.add(e.id,"mouseover",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.addClass(e.id,"mceSplitButtonHover")}});a.add(e.id,"mouseout",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.removeClass(e.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open");a.clear(this.id)}})})(tinymce);(function(d){var c=d.DOM,a=d.dom.Event,b=d.is,e=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(j,h,f){var g=this;g.parent(j,h,f);g.settings=h=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},g.settings);g.onShowMenu=new d.util.Dispatcher(g);g.onHideMenu=new d.util.Dispatcher(g);g.value=h.default_color},showMenu:function(){var f=this,g,k,j,h;if(f.isDisabled()){return}if(!f.isMenuRendered){f.renderMenu();f.isMenuRendered=true}if(f.isMenuVisible){return f.hideMenu()}j=c.get(f.id);c.show(f.id+"_menu");c.addClass(j,"mceSplitButtonSelected");h=c.getPos(j);c.setStyles(f.id+"_menu",{left:h.x,top:h.y+j.clientHeight,zIndex:200000});j=0;a.add(c.doc,"mousedown",f.hideMenu,f);f.onShowMenu.dispatch(f);if(f._focused){f._keyHandler=a.add(f.id+"_menu","keydown",function(l){if(l.keyCode==27){f.hideMenu()}});c.select("a",f.id+"_menu")[0].focus()}f.isMenuVisible=1},hideMenu:function(g){var f=this;if(f.isMenuVisible){if(g&&g.type=="mousedown"&&c.getParent(g.target,function(h){return h.id===f.id+"_open"})){return}if(!g||!c.getParent(g.target,".mceSplitButtonMenu")){c.removeClass(f.id,"mceSplitButtonSelected");a.remove(c.doc,"mousedown",f.hideMenu,f);a.remove(f.id+"_menu","keydown",f._keyHandler);c.hide(f.id+"_menu")}f.isMenuVisible=0;f.onHideMenu.dispatch()}},renderMenu:function(){var p=this,h,k=0,q=p.settings,g,j,l,o,f;o=c.add(q.menu_container,"div",{role:"listbox",id:p.id+"_menu","class":q.menu_class+" "+q["class"],style:"position:absolute;left:0;top:-1000px;"});h=c.add(o,"div",{"class":q["class"]+" mceSplitButtonMenu"});c.add(h,"span",{"class":"mceMenuLine"});g=c.add(h,"table",{role:"presentation","class":"mceColorSplitMenu"});j=c.add(g,"tbody");k=0;e(b(q.colors,"array")?q.colors:q.colors.split(","),function(n){n=n.replace(/^#/,"");if(!k--){l=c.add(j,"tr");k=q.grid_width-1}g=c.add(l,"td");var m={href:"javascript:;",style:{backgroundColor:"#"+n},title:p.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};if(!d.isIE){m.role="option"}g=c.add(g,"a",m);if(p.editor.forcedHighContrastMode){g=c.add(g,"canvas",{width:16,height:16,"aria-hidden":"true"});if(g.getContext&&(f=g.getContext("2d"))){f.fillStyle="#"+n;f.fillRect(0,0,16,16)}else{c.remove(g)}}});if(q.more_colors_func){g=c.add(j,"tr");g=c.add(g,"td",{colspan:q.grid_width,"class":"mceMoreColors"});g=c.add(g,"a",{role:"option",id:p.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},q.more_colors_title);a.add(g,"click",function(m){q.more_colors_func.call(q.more_colors_scope||this);return a.cancel(m)})}c.addClass(h,"mceColorSplitMenu");new d.ui.KeyboardNavigation({root:p.id+"_menu",items:c.select("a",p.id+"_menu"),onCancel:function(){p.hideMenu();p.focus()}});a.add(p.id+"_menu","mousedown",function(m){return a.cancel(m)});a.add(p.id+"_menu","click",function(m){var n;m=c.getParent(m.target,"a",j);if(m&&m.nodeName.toLowerCase()=="a"&&(n=m.getAttribute("data-mce-color"))){p.setColor(n)}return a.cancel(m)});return o},setColor:function(f){this.displayColor(f);this.hideMenu();this.settings.onselect(f)},displayColor:function(g){var f=this;c.setStyle(f.id+"_preview","backgroundColor",g);f.value=g},postRender:function(){var f=this,g=f.id;f.parent();c.add(g+"_action","div",{id:g+"_preview","class":"mceColorPreview"});c.setStyle(f.id+"_preview","backgroundColor",f.value)},destroy:function(){this.parent();a.clear(this.id+"_menu");a.clear(this.id+"_more");c.remove(this.id+"_menu")}})})(tinymce);(function(b){var d=b.DOM,c=b.each,a=b.dom.Event;b.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var f=this,j=[],e=f.controls,k=b.each,g=f.settings;j.push('<div id="'+f.id+'" role="group" aria-labelledby="'+f.id+'_voice">');j.push("<span role='application'>");j.push('<span id="'+f.id+'_voice" class="mceVoiceLabel" style="display:none;">'+d.encode(g.name)+"</span>");k(e,function(h){j.push(h.renderHTML())});j.push("</span>");j.push("</div>");return j.join("")},focus:function(){var e=this;d.get(e.id).focus()},postRender:function(){var f=this,e=[];c(f.controls,function(g){c(g.controls,function(h){if(h.id){e.push(h)}})});f.keyNav=new b.ui.KeyboardNavigation({root:f.id,items:e,onCancel:function(){if(b.isWebKit){d.get(f.editor.id+"_ifr").focus()}f.editor.focus()},excludeFromTabOrder:!f.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent();e.keyNav.destroy();a.clear(e.id)}})})(tinymce);(function(a){var c=a.DOM,b=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var m=this,f="",j,k,n=m.settings,e,d,g,l;l=m.controls;for(e=0;e<l.length;e++){k=l[e];d=l[e-1];g=l[e+1];if(e===0){j="mceToolbarStart";if(k.Button){j+=" mceToolbarStartButton"}else{if(k.SplitButton){j+=" mceToolbarStartSplitButton"}else{if(k.ListBox){j+=" mceToolbarStartListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"))}if(d&&k.ListBox){if(d.Button||d.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarEnd"},c.createHTML("span",null,"<!-- IE -->"))}}if(c.stdMode){f+='<td style="position: relative">'+k.renderHTML()+"</td>"}else{f+="<td>"+k.renderHTML()+"</td>"}if(g&&k.ListBox){if(g.Button||g.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarStart"},c.createHTML("span",null,"<!-- IE -->"))}}}j="mceToolbarEnd";if(k.Button){j+=" mceToolbarEndButton"}else{if(k.SplitButton){j+=" mceToolbarEndSplitButton"}else{if(k.ListBox){j+=" mceToolbarEndListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"));return c.createHTML("table",{id:m.id,"class":"mceToolbar"+(n["class"]?" "+n["class"]:""),cellpadding:"0",cellspacing:"0",align:m.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+f+"</tr></tbody>")}})})(tinymce);(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{AddOnManager:function(){var d=this;d.items=[];d.urls={};d.lookup={};d.onAdd=new a(d)},get:function(d){if(this.lookup[d]){return this.lookup[d].instance}else{return undefined}},dependencies:function(e){var d;if(this.lookup[e]){d=this.lookup[e].dependencies}return d||[]},requireLangPack:function(e){var d=b.settings;if(d&&d.language&&d.language_load!==false){b.ScriptLoader.add(this.urls[e]+"/langs/"+d.language+".js")}},add:function(f,e,d){this.items.push(e);this.lookup[f]={instance:e,dependencies:d};this.onAdd.dispatch(this,f,e);return e},createUrl:function(d,e){if(typeof e==="object"){return e}else{return{prefix:d.prefix,resource:e,suffix:d.suffix}}},addComponents:function(f,d){var e=this.urls[f];b.each(d,function(g){b.ScriptLoader.add(e+"/"+g)})},load:function(k,f,d,h){var g=this,e=f;function j(){var l=g.dependencies(k);b.each(l,function(n){var m=g.createUrl(f,n);g.load(m.resource,m,undefined,undefined)});if(d){if(h){d.call(h)}else{d.call(b.ScriptLoader)}}}if(g.urls[k]){return}if(typeof f==="object"){e=f.prefix+f.resource+f.suffix}if(e.indexOf("/")!=0&&e.indexOf("://")==-1){e=b.baseURL+"/"+e}g.urls[k]=e.substring(0,e.lastIndexOf("/"));if(g.lookup[k]){j()}else{b.ScriptLoader.add(e,j,h)}}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(k){var g=k.each,d=k.extend,l=k.DOM,j=k.dom.Event,f=k.ThemeManager,b=k.PluginManager,e=k.explode,h=k.util.Dispatcher,a,c=0;k.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(k.documentBaseURL)){k.documentBaseURL+="/"}k.baseURL=new k.util.URI(k.documentBaseURL).toAbsolute(k.baseURL);k.baseURI=new k.util.URI(k.baseURL);k.onBeforeUnload=new h(k);j.add(window,"beforeunload",function(m){k.onBeforeUnload.dispatch(k,m)});k.onAddEditor=new h(k);k.onRemoveEditor=new h(k);k.EditorManager=d(k,{editors:[],i18n:{},activeEditor:null,init:function(r){var o=this,q,m=k.ScriptLoader,v,p=[],n;function u(A,B,t){var z=A[B];if(!z){return}if(k.is(z,"string")){t=z.replace(/\.\w+$/,"");t=t?k.resolve(t):0;z=k.resolve(z)}return z.apply(t||this,Array.prototype.slice.call(arguments,2))}r=d({theme:"simple",language:"en"},r);o.settings=r;j.add(document,"init",function(){var s,z;u(r,"onpageload");switch(r.mode){case"exact":s=r.elements||"";if(s.length>0){g(e(s),function(A){if(l.get(A)){n=new k.Editor(A,r);p.push(n);n.render(1)}else{g(document.forms,function(B){g(B.elements,function(C){if(C.name===A){A="mce_editor_"+c++;l.setAttrib(C,"id",A);n=new k.Editor(A,r);p.push(n);n.render(1)}})})}})}break;case"textareas":case"specific_textareas":function t(B,A){return A.constructor===RegExp?A.test(B.className):l.hasClass(B,A)}g(l.select("textarea"),function(A){if(r.editor_deselector&&t(A,r.editor_deselector)){return}if(!r.editor_selector||t(A,r.editor_selector)){v=l.get(A.name);if(!A.id&&!v){A.id=A.name}if(!A.id||o.get(A.id)){A.id=l.uniqueId()}n=new k.Editor(A.id,r);p.push(n);n.render(1)}});break}if(r.oninit){s=z=0;g(p,function(A){z++;if(!A.initialized){A.onInit.add(function(){s++;if(s==z){u(r,"oninit")}})}else{s++}if(s==z){u(r,"oninit")}})}})},get:function(m){if(m===a){return this.editors}return this.editors[m]},getInstanceById:function(m){return this.get(m)},add:function(n){var m=this,o=m.editors;o[n.id]=n;o.push(n);m._setActive(n);m.onAddEditor.dispatch(m,n);return n},remove:function(o){var n=this,m,p=n.editors;if(!p[o.id]){return null}delete p[o.id];for(m=0;m<p.length;m++){if(p[m]==o){p.splice(m,1);break}}if(n.activeEditor==o){n._setActive(p[0])}o.destroy();n.onRemoveEditor.dispatch(n,o);return o},execCommand:function(s,q,p){var r=this,o=r.get(p),m;switch(s){case"mceFocus":o.focus();return true;case"mceAddEditor":case"mceAddControl":if(!r.get(p)){new k.Editor(p,r.settings).render()}return true;case"mceAddFrameControl":m=p.window;m.tinyMCE=tinyMCE;m.tinymce=k;k.DOM.doc=m.document;k.DOM.win=m;o=new k.Editor(p.element_id,p);o.render();if(k.isIE){function n(){o.destroy();m.detachEvent("onunload",n);m=m.tinyMCE=m.tinymce=null}m.attachEvent("onunload",n)}p.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(o){o.remove()}return true;case"mceToggleEditor":if(!o){r.execCommand("mceAddControl",0,p);return true}if(o.isHidden()){o.show()}else{o.hide()}return true}if(r.activeEditor){return r.activeEditor.execCommand(s,q,p)}return false},execInstanceCommand:function(q,p,o,n){var m=this.get(q);if(m){return m.execCommand(p,o,n)}return false},triggerSave:function(){g(this.editors,function(m){m.save()})},addI18n:function(q,r){var m,n=this.i18n;if(!k.is(q,"string")){g(q,function(s,p){g(s,function(u,t){g(u,function(z,v){if(t==="common"){n[p+"."+v]=z}else{n[p+"."+t+"."+v]=z}})})})}else{g(r,function(s,p){n[q+"."+p]=s})}},_setActive:function(m){this.selectedInstance=this.activeEditor=m}})})(tinymce);(function(o){var p=o.DOM,l=o.dom.Event,f=o.extend,m=o.util.Dispatcher,j=o.each,a=o.isGecko,b=o.isIE,e=o.isWebKit,d=o.is,h=o.ThemeManager,c=o.PluginManager,q=o.inArray,n=o.grep,g=o.explode,k=o.VK;o.create("tinymce.Editor",{Editor:function(v,u){var r=this;r.id=r.editorId=v;r.execCommands={};r.queryStateCommands={};r.queryValueCommands={};r.isNotDirty=false;r.plugins={};j(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(s){r[s]=new m(r)});r.settings=u=f({id:v,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:o.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:o.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:true,entity_encoding:"named",url_converter:r.convertURL,url_converter_scope:r,ie7_compat:true},u);r.documentBaseURI=new o.util.URI(u.document_base_url||o.documentBaseURL,{base_uri:tinyMCE.baseURI});r.baseURI=o.baseURI;r.contentCSS=[];r.execCallback("setup",r)},render:function(v){var z=this,A=z.settings,B=z.id,r=o.ScriptLoader;if(!l.domLoaded){l.add(document,"init",function(){z.render()});return}tinyMCE.settings=A;if(!z.getElement()){return}if(o.isIDevice&&!o.isIOS5){return}if(!/TEXTAREA|INPUT/i.test(z.getElement().nodeName)&&A.hidden_input&&p.getParent(B,"form")){p.insertAfter(p.create("input",{type:"hidden",name:B}),B)}if(o.WindowManager){z.windowManager=new o.WindowManager(z)}if(A.encoding=="xml"){z.onGetContent.add(function(s,t){if(t.save){t.content=p.encode(t.content)}})}if(A.add_form_submit_trigger){z.onSubmit.addToTop(function(){if(z.initialized){z.save();z.isNotDirty=1}})}if(A.add_unload_trigger){z._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(z.initialized&&!z.destroyed&&!z.isHidden()){z.save({format:"raw",no_events:true})}})}o.addUnload(z.destroy,z);if(A.submit_patch){z.onBeforeRenderUI.add(function(){var s=z.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){z.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){o.triggerSave();z.isNotDirty=1;return z.formElement._mceOldSubmit(z.formElement)}}s=null})}function u(){if(A.language&&A.language_load!==false){r.add(o.baseURL+"/langs/"+A.language+".js")}if(A.theme&&A.theme.charAt(0)!="-"&&!h.urls[A.theme]){h.load(A.theme,"themes/"+A.theme+"/editor_template"+o.suffix+".js")}j(g(A.plugins),function(t){if(t&&!c.urls[t]){if(t.charAt(0)=="-"){t=t.substr(1,t.length);var s=c.dependencies(t);j(s,function(D){var C={prefix:"plugins/",resource:D,suffix:"/editor_plugin"+o.suffix+".js"};var D=c.createUrl(C,D);c.load(D.resource,D)})}else{if(t=="safari"){return}c.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+o.suffix+".js"})}}});r.loadQueue(function(){if(!z.removed){z.init()}})}u()},init:function(){var z,L=this,M=L.settings,I,E,H=L.getElement(),v,r,J,C,G,K,D,A=[];o.add(L);M.aria_label=M.aria_label||p.getAttrib(H,"aria-label",L.getLang("aria.rich_text_area"));if(M.theme){M.theme=M.theme.replace(/-/,"");v=h.get(M.theme);L.theme=new v();if(L.theme.init&&M.init_theme){L.theme.init(L,h.urls[M.theme]||o.documentBaseURL.replace(/\/$/,""))}}function F(N){var O=c.get(N),t=c.urls[N]||o.documentBaseURL.replace(/\/$/,""),s;if(O&&o.inArray(A,N)===-1){j(c.dependencies(N),function(u){F(u)});s=new O(L,t);L.plugins[N]=s;if(s.init){s.init(L,t);A.push(N)}}}j(g(M.plugins.replace(/\-/g,"")),F);if(M.popup_css!==false){if(M.popup_css){M.popup_css=L.documentBaseURI.toAbsolute(M.popup_css)}else{M.popup_css=L.baseURI.toAbsolute("themes/"+M.theme+"/skins/"+M.skin+"/dialog.css")}}if(M.popup_css_add){M.popup_css+=","+L.documentBaseURI.toAbsolute(M.popup_css_add)}L.controlManager=new o.ControlManager(L);if(M.custom_undo_redo){L.onBeforeExecCommand.add(function(t,N,u,O,s){if(N!="Undo"&&N!="Redo"&&N!="mceRepaint"&&(!s||!s.skip_undo)){L.undoManager.beforeChange()}});L.onExecCommand.add(function(t,N,u,O,s){if(N!="Undo"&&N!="Redo"&&N!="mceRepaint"&&(!s||!s.skip_undo)){L.undoManager.add()}})}L.onExecCommand.add(function(s,t){if(!/^(FontName|FontSize)$/.test(t)){L.nodeChanged()}});if(a){function B(s,t){if(!t||!t.initial){L.execCommand("mceRepaint")}}L.onUndo.add(B);L.onRedo.add(B);L.onSetContent.add(B)}L.onBeforeRenderUI.dispatch(L,L.controlManager);if(M.render_ui){I=M.width||H.style.width||H.offsetWidth;E=M.height||H.style.height||H.offsetHeight;L.orgDisplay=H.style.display;K=/^[0-9\.]+(|px)$/i;if(K.test(""+I)){I=Math.max(parseInt(I)+(v.deltaWidth||0),100)}if(K.test(""+E)){E=Math.max(parseInt(E)+(v.deltaHeight||0),100)}v=L.theme.renderUI({targetNode:H,width:I,height:E,deltaWidth:M.delta_width,deltaHeight:M.delta_height});L.editorContainer=v.editorContainer}if(document.domain&&location.hostname!=document.domain){o.relaxedDomain=document.domain}p.setStyles(v.sizeContainer||v.editorContainer,{width:I,height:E});if(M.content_css){o.each(g(M.content_css),function(s){L.contentCSS.push(L.documentBaseURI.toAbsolute(s))})}E=(v.iframeHeight||E)+(typeof(E)=="number"?(v.deltaHeight||0):"");if(E<100){E=100}L.iframeHTML=M.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(M.document_base_url!=o.documentBaseURL){L.iframeHTML+='<base href="'+L.documentBaseURI.getURI()+'" />'}if(M.ie7_compat){L.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}else{L.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}L.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(D=0;D<L.contentCSS.length;D++){L.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+L.contentCSS[D]+'" />'}C=M.body_id||"tinymce";if(C.indexOf("=")!=-1){C=L.getParam("body_id","","hash");C=C[L.id]||C}G=M.body_class||"";if(G.indexOf("=")!=-1){G=L.getParam("body_class","","hash");G=G[L.id]||""}L.iframeHTML+='</head><body id="'+C+'" class="mceContentBody '+G+'" onload="window.parent.tinyMCE.get(\''+L.id+"').onLoad.dispatch();\"><br></body></html>";if(o.relaxedDomain&&(b||(o.isOpera&&parseFloat(opera.version())<11))){J='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+L.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'}z=p.add(v.iframeContainer,"iframe",{id:L.id+"_ifr",src:J||'javascript:""',frameBorder:"0",allowTransparency:"true",title:M.aria_label,style:{width:"100%",height:E,display:"block"}});L.contentAreaContainer=v.iframeContainer;p.get(v.editorContainer).style.display=L.orgDisplay;p.get(L.id).style.display="none";p.setAttrib(L.id,"aria-hidden",true);if(!o.relaxedDomain||!J){L.setupIframe()}H=z=v=null},setupIframe:function(){var u=this,A=u.settings,B=p.get(u.id),C=u.getDoc(),z,r;if(!b||!o.relaxedDomain){C.open();C.write(u.iframeHTML);C.close();if(o.relaxedDomain){C.domain=o.relaxedDomain}}r=u.getBody();r.disabled=true;if(!A.readonly){r.contentEditable=true}r.disabled=false;u.schema=new o.html.Schema(A);u.dom=new o.dom.DOMUtils(u.getDoc(),{keep_values:true,url_converter:u.convertURL,url_converter_scope:u,hex_colors:A.force_hex_style_colors,class_filter:A.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:u.schema});u.parser=new o.html.DomParser(A,u.schema);if(!u.settings.allow_html_in_named_anchor){u.parser.addAttributeFilter("name",function(s,t){var E=s.length,G,D,F,H;while(E--){H=s[E];if(H.name==="a"&&H.firstChild){F=H.parent;G=H.lastChild;do{D=G.prev;F.insert(G,H);G=D}while(G)}}})}u.parser.addAttributeFilter("src,href,style",function(s,t){var D=s.length,F,H=u.dom,G,E;while(D--){F=s[D];G=F.attr(t);E="data-mce-"+t;if(!F.attributes.map[E]){if(t==="style"){F.attr(E,H.serializeStyle(H.parseStyle(G),F.name))}else{F.attr(E,u.convertURL(G,t,F.name))}}}});u.parser.addNodeFilter("script",function(s,t){var D=s.length,E;while(D--){E=s[D];E.attr("type","mce-"+(E.attr("type")||"text/javascript"))}});u.parser.addNodeFilter("#cdata",function(s,t){var D=s.length,E;while(D--){E=s[D];E.type=8;E.name="#comment";E.value="[CDATA["+E.value+"]]"}});u.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t,D){var E=t.length,F,s=u.schema.getNonEmptyElements();while(E--){F=t[E];if(F.isEmpty(s)){F.empty().append(new o.html.Node("br",1)).shortEnded=true}}});u.serializer=new o.dom.Serializer(A,u.dom,u.schema);u.selection=new o.dom.Selection(u.dom,u.getWin(),u.serializer);u.formatter=new o.Formatter(this);u.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(s){return true},onformat:function(D,s,t){j(t,function(F,E){u.dom.setAttrib(D,E,F)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});j("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(s){u.formatter.register(s,{block:s,remove:"all"})});u.formatter.register(u.settings.formats);u.undoManager=new o.UndoManager(u);u.undoManager.onAdd.add(function(t,s){if(t.hasUndo()){return u.onChange.dispatch(u,s,t)}});u.undoManager.onUndo.add(function(t,s){return u.onUndo.dispatch(u,s,t)});u.undoManager.onRedo.add(function(t,s){return u.onRedo.dispatch(u,s,t)});u.forceBlocks=new o.ForceBlocks(u,{forced_root_block:A.forced_root_block});u.editorCommands=new o.EditorCommands(u);u.serializer.onPreProcess.add(function(s,t){return u.onPreProcess.dispatch(u,t,s)});u.serializer.onPostProcess.add(function(s,t){return u.onPostProcess.dispatch(u,t,s)});u.onPreInit.dispatch(u);if(!A.gecko_spellcheck){u.getBody().spellcheck=0}if(!A.readonly){u._addEvents()}u.controlManager.onPostRender.dispatch(u,u.controlManager);u.onPostRender.dispatch(u);u.quirks=new o.util.Quirks(this);if(A.directionality){u.getBody().dir=A.directionality}if(A.nowrap){u.getBody().style.whiteSpace="nowrap"}if(A.handle_node_change_callback){u.onNodeChange.add(function(t,s,D){u.execCallback("handle_node_change_callback",u.id,D,-1,-1,true,u.selection.isCollapsed())})}if(A.save_callback){u.onSaveContent.add(function(s,D){var t=u.execCallback("save_callback",u.id,D.content,u.getBody());if(t){D.content=t}})}if(A.onchange_callback){u.onChange.add(function(t,s){u.execCallback("onchange_callback",u,s)})}if(A.protect){u.onBeforeSetContent.add(function(s,t){if(A.protect){j(A.protect,function(D){t.content=t.content.replace(D,function(E){return"<!--mce:protected "+escape(E)+"-->"})})}})}if(A.convert_newlines_to_brs){u.onBeforeSetContent.add(function(s,t){if(t.initial){t.content=t.content.replace(/\r?\n/g,"<br />")}})}if(A.preformatted){u.onPostProcess.add(function(s,t){t.content=t.content.replace(/^\s*<pre.*?>/,"");t.content=t.content.replace(/<\/pre>\s*$/,"");if(t.set){t.content='<pre class="mceItemHidden">'+t.content+"</pre>"}})}if(A.verify_css_classes){u.serializer.attribValueFilter=function(F,D){var E,t;if(F=="class"){if(!u.classesRE){t=u.dom.getClasses();if(t.length>0){E="";j(t,function(s){E+=(E?"|":"")+s["class"]});u.classesRE=new RegExp("("+E+")","gi")}}return !u.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(D)||u.classesRE.test(D)?D:""}return D}}if(A.cleanup_callback){u.onBeforeSetContent.add(function(s,t){t.content=u.execCallback("cleanup_callback","insert_to_editor",t.content,t)});u.onPreProcess.add(function(s,t){if(t.set){u.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t)}if(t.get){u.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}});u.onPostProcess.add(function(s,t){if(t.set){t.content=u.execCallback("cleanup_callback","insert_to_editor",t.content,t)}if(t.get){t.content=u.execCallback("cleanup_callback","get_from_editor",t.content,t)}})}if(A.save_callback){u.onGetContent.add(function(s,t){if(t.save){t.content=u.execCallback("save_callback",u.id,t.content,u.getBody())}})}if(A.handle_event_callback){u.onEvent.add(function(s,t,D){if(u.execCallback("handle_event_callback",t,s,D)===false){l.cancel(t)}})}u.onSetContent.add(function(){u.addVisual(u.getBody())});if(A.padd_empty_editor){u.onPostProcess.add(function(s,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}if(a){function v(s,t){j(s.dom.select("a"),function(E){var D=E.parentNode;if(s.dom.isBlock(D)&&D.lastChild===E){s.dom.add(D,"br",{"data-mce-bogus":1})}})}u.onExecCommand.add(function(s,t){if(t==="CreateLink"){v(s)}});u.onSetContent.add(u.selection.onSetContent.add(v))}u.load({initial:true,format:"html"});u.startContent=u.getContent({format:"raw"});u.undoManager.add();u.initialized=true;u.onInit.dispatch(u);u.execCallback("setupcontent_callback",u.id,u.getBody(),u.getDoc());u.execCallback("init_instance_callback",u);u.focus(true);u.nodeChanged({initial:1});j(u.contentCSS,function(s){u.dom.loadCSS(s)});if(A.auto_focus){setTimeout(function(){var s=o.get(A.auto_focus);s.selection.select(s.getBody(),1);s.selection.collapse(1);s.getBody().focus();s.getWin().focus()},100)}B=null},focus:function(z){var C,s=this,v=s.selection,B=s.settings.content_editable,u,r,A=s.getDoc();if(!z){u=v.getRng();if(u.item){r=u.item(0)}s._refreshContentEditable();if(!B){s.getWin().focus()}if(o.isGecko){s.getBody().focus()}if(r&&r.ownerDocument==A){u=A.body.createControlRange();u.addElement(r);u.select()}}if(o.activeEditor!=s){if((C=o.activeEditor)!=null){C.onDeactivate.dispatch(C,s)}s.onActivate.dispatch(s,C)}o._setActive(s)},execCallback:function(z){var r=this,v=r.settings[z],u;if(!v){return}if(r.callbackLookup&&(u=r.callbackLookup[z])){v=u.func;u=u.scope}if(d(v,"string")){u=v.replace(/\.\w+$/,"");u=u?o.resolve(u):0;v=o.resolve(v);r.callbackLookup=r.callbackLookup||{};r.callbackLookup[z]={func:v,scope:u}}return v.apply(u||r,Array.prototype.slice.call(arguments,1))},translate:function(r){var u=this.settings.language||"en",t=o.i18n;if(!r){return""}return t[u+"."+r]||r.replace(/{\#([^}]+)\}/g,function(v,s){return t[u+"."+s]||"{#"+s+"}"})},getLang:function(s,r){return o.i18n[(this.settings.language||"en")+"."+s]||(d(r)?r:"{#"+s+"}")},getParam:function(A,t,r){var u=o.trim,s=d(this.settings[A])?this.settings[A]:t,z;if(r==="hash"){z={};if(d(s,"string")){j(s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(","),function(B){B=B.split("=");if(B.length>1){z[u(B[0])]=u(B[1])}else{z[u(B[0])]=u(B)}})}else{z=s}return z}return s},nodeChanged:function(v){var r=this,u=r.selection,z=u.getStart()||r.getBody();if(r.initialized){v=v||{};z=b&&z.ownerDocument!=r.getDoc()?r.getBody():z;v.parents=[];r.dom.getParent(z,function(s){if(s.nodeName=="BODY"){return true}v.parents.push(s)});r.onNodeChange.dispatch(r,v?v.controlManager||r.controlManager:r.controlManager,z,u.isCollapsed(),v)}},addButton:function(v,u){var r=this;r.buttons=r.buttons||{};r.buttons[v]=u},addCommand:function(r,t,s){this.execCommands[r]={func:t,scope:s||this}},addQueryStateHandler:function(r,t,s){this.queryStateCommands[r]={func:t,scope:s||this}},addQueryValueHandler:function(r,t,s){this.queryValueCommands[r]={func:t,scope:s||this}},addShortcut:function(u,z,r,v){var s=this,A;if(!s.settings.custom_shortcuts){return false}s.shortcuts=s.shortcuts||{};if(d(r,"string")){A=r;r=function(){s.execCommand(A,false,null)}}if(d(r,"object")){A=r;r=function(){s.execCommand(A[0],A[1],A[2])}}j(g(u),function(t){var B={func:r,scope:v||this,desc:z,alt:false,ctrl:false,shift:false};j(g(t,"+"),function(C){switch(C){case"alt":case"ctrl":case"shift":B[C]=true;break;default:B.charCode=C.charCodeAt(0);B.keyCode=C.toUpperCase().charCodeAt(0)}});s.shortcuts[(B.ctrl?"ctrl":"")+","+(B.alt?"alt":"")+","+(B.shift?"shift":"")+","+B.keyCode]=B});return true},execCommand:function(B,A,D,r){var v=this,z=0,C,u;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(B)&&(!r||!r.skip_focus)){v.focus()}C={};v.onBeforeExecCommand.dispatch(v,B,A,D,C);if(C.terminate){return false}if(v.execCallback("execcommand_callback",v.id,v.selection.getNode(),B,A,D)){v.onExecCommand.dispatch(v,B,A,D,r);return true}if(C=v.execCommands[B]){u=C.func.call(C.scope,A,D);if(u!==true){v.onExecCommand.dispatch(v,B,A,D,r);return u}}j(v.plugins,function(s){if(s.execCommand&&s.execCommand(B,A,D)){v.onExecCommand.dispatch(v,B,A,D,r);z=1;return false}});if(z){return true}if(v.theme&&v.theme.execCommand&&v.theme.execCommand(B,A,D)){v.onExecCommand.dispatch(v,B,A,D,r);return true}if(v.editorCommands.execCommand(B,A,D)){v.onExecCommand.dispatch(v,B,A,D,r);return true}v.getDoc().execCommand(B,A,D);v.onExecCommand.dispatch(v,B,A,D,r)},queryCommandState:function(z){var u=this,A,v;if(u._isHidden()){return}if(A=u.queryStateCommands[z]){v=A.func.call(A.scope);if(v!==true){return v}}A=u.editorCommands.queryCommandState(z);if(A!==-1){return A}try{return this.getDoc().queryCommandState(z)}catch(r){}},queryCommandValue:function(A){var u=this,z,v;if(u._isHidden()){return}if(z=u.queryValueCommands[A]){v=z.func.call(z.scope);if(v!==true){return v}}z=u.editorCommands.queryCommandValue(A);if(d(z)){return z}try{return this.getDoc().queryCommandValue(A)}catch(r){}},show:function(){var r=this;p.show(r.getContainer());p.hide(r.id);r.load()},hide:function(){var r=this,s=r.getDoc();if(b&&s){s.execCommand("SelectAll")}r.save();p.hide(r.getContainer());p.setStyle(r.id,"display",r.orgDisplay)},isHidden:function(){return !p.isHidden(this.id)},setProgressState:function(r,s,t){this.onSetProgressState.dispatch(this,r,s,t);return r},load:function(v){var r=this,u=r.getElement(),s;if(u){v=v||{};v.load=true;s=r.setContent(d(u.value)?u.value:u.innerHTML,v);v.element=u;if(!v.no_events){r.onLoadContent.dispatch(r,v)}v.element=u=null;return s}},save:function(z){var r=this,v=r.getElement(),s,u;if(!v||!r.initialized){return}z=z||{};z.save=true;if(!z.no_events){r.undoManager.typing=false;r.undoManager.add()}z.element=v;s=z.content=r.getContent(z);if(!z.no_events){r.onSaveContent.dispatch(r,z)}s=z.content;if(!/TEXTAREA|INPUT/i.test(v.nodeName)){v.innerHTML=s;if(u=p.getParent(r.id,"form")){j(u.elements,function(t){if(t.name==r.id){t.value=s;return false}})}}else{v.value=s}z.element=v=null;return s},setContent:function(z,u){var t=this,s,r=t.getBody(),v;u=u||{};u.format=u.format||"html";u.set=true;u.content=z;if(!u.no_events){t.onBeforeSetContent.dispatch(t,u)}z=u.content;if(!o.isIE&&(z.length===0||/^\s+$/.test(z))){v=t.settings.forced_root_block;if(v){z="<"+v+'><br data-mce-bogus="1"></'+v+">"}else{z='<br data-mce-bogus="1">'}r.innerHTML=z;t.selection.select(r,true);t.selection.collapse(true);return}if(u.format!=="raw"){z=new o.html.Serializer({},t.schema).serialize(t.parser.parse(z))}u.content=o.trim(z);t.dom.setHTML(r,u.content);if(!u.no_events){t.onSetContent.dispatch(t,u)}t.selection.normalize();return u.content},getContent:function(s){var r=this,t;s=s||{};s.format=s.format||"html";s.get=true;if(!s.no_events){r.onBeforeGetContent.dispatch(r,s)}if(s.format=="raw"){t=r.getBody().innerHTML}else{t=r.serializer.serialize(r.getBody(),s)}s.content=o.trim(t);if(!s.no_events){r.onGetContent.dispatch(r,s)}return s.content},isDirty:function(){var r=this;return o.trim(r.startContent)!=o.trim(r.getContent({format:"raw",no_events:1}))&&!r.isNotDirty},getContainer:function(){var r=this;if(!r.container){r.container=p.get(r.editorContainer||r.id+"_parent")}return r.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return p.get(this.settings.content_element||this.id)},getWin:function(){var r=this,s;if(!r.contentWindow){s=p.get(r.id+"_ifr");if(s){r.contentWindow=s.contentWindow}}return r.contentWindow},getDoc:function(){var s=this,r;if(!s.contentDocument){r=s.getWin();if(r){s.contentDocument=r.document}}return s.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(r,B,A){var v=this,z=v.settings;if(z.urlconverter_callback){return v.execCallback("urlconverter_callback",r,A,true,B)}if(!z.convert_urls||(A&&A.nodeName=="LINK")||r.indexOf("file:")===0){return r}if(z.relative_urls){return v.documentBaseURI.toRelative(r)}r=v.documentBaseURI.toAbsolute(r,z.remove_script_host);return r},addVisual:function(v){var r=this,u=r.settings;v=v||r.getBody();if(!d(r.hasVisual)){r.hasVisual=u.visual}j(r.dom.select("table,a",v),function(t){var s;switch(t.nodeName){case"TABLE":s=r.dom.getAttrib(t,"border");if(!s||s=="0"){if(r.hasVisual){r.dom.addClass(t,u.visual_table_class)}else{r.dom.removeClass(t,u.visual_table_class)}}return;case"A":s=r.dom.getAttrib(t,"name");if(s){if(r.hasVisual){r.dom.addClass(t,"mceItemAnchor")}else{r.dom.removeClass(t,"mceItemAnchor")}}return}});r.onVisualAid.dispatch(r,v,r.hasVisual)},remove:function(){var r=this,s=r.getContainer();r.removed=1;r.hide();r.execCallback("remove_instance_callback",r);r.onRemove.dispatch(r);r.onExecCommand.listeners=[];o.remove(r);p.remove(s)},destroy:function(u){var r=this;if(r.destroyed){return}if(!u){o.removeUnload(r.destroy);tinyMCE.onBeforeUnload.remove(r._beforeUnload);if(r.theme&&r.theme.destroy){r.theme.destroy()}r.controlManager.destroy();r.selection.destroy();r.dom.destroy();if(!r.settings.content_editable){l.clear(r.getWin());l.clear(r.getDoc())}l.clear(r.getBody());l.clear(r.formElement)}if(r.formElement){r.formElement.submit=r.formElement._mceOldSubmit;r.formElement._mceOldSubmit=null}r.contentAreaContainer=r.formElement=r.container=r.settings.content_element=r.bodyElement=r.contentDocument=r.contentWindow=null;if(r.selection){r.selection=r.selection.win=r.selection.dom=r.selection.dom.doc=null}r.destroyed=1},_addEvents:function(){var F=this,v,G=F.settings,u=F.dom,B={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function r(t,H){var s=t.type;if(F.removed){return}if(F.onEvent.dispatch(F,t,H)!==false){F[B[t.fakeType||t.type]].dispatch(F,t,H)}}j(B,function(t,s){switch(s){case"contextmenu":u.bind(F.getDoc(),s,r);break;case"paste":u.bind(F.getBody(),s,function(H){r(H)});break;case"submit":case"reset":u.bind(F.getElement().form||p.getParent(F.id,"form"),s,r);break;default:u.bind(G.content_editable?F.getBody():F.getDoc(),s,r)}});u.bind(G.content_editable?F.getBody():(a?F.getDoc():F.getWin()),"focus",function(s){F.focus(true)});if(o.isGecko){u.bind(F.getDoc(),"DOMNodeInserted",function(t){var s;t=t.target;if(t.nodeType===1&&t.nodeName==="IMG"&&(s=t.getAttribute("data-mce-src"))){t.src=F.documentBaseURI.toAbsolute(s)}})}if(a){function z(){var I=this,K=I.getDoc(),J=I.settings;if(a&&!J.readonly){I._refreshContentEditable();try{K.execCommand("styleWithCSS",0,false)}catch(H){if(!I._isHidden()){try{K.execCommand("useCSS",0,true)}catch(H){}}}if(!J.table_inline_editing){try{K.execCommand("enableInlineTableEditing",false,false)}catch(H){}}if(!J.object_resizing){try{K.execCommand("enableObjectResizing",false,false)}catch(H){}}}}F.onBeforeExecCommand.add(z);F.onMouseDown.add(z)}F.onMouseUp.add(F.nodeChanged);F.onKeyUp.add(function(s,t){var H=t.keyCode;if((H>=33&&H<=36)||(H>=37&&H<=40)||H==13||H==45||H==46||H==8||(o.isMac&&(H==91||H==93))||t.ctrlKey){F.nodeChanged()}});F.onKeyDown.add(function(t,H){if(H.keyCode!=k.BACKSPACE){return}var s=t.selection.getRng();if(!s.collapsed){return}var J=s.startContainer;var I=s.startOffset;while(J&&J.nodeType&&J.nodeType!=1&&J.parentNode){J=J.parentNode}if(J&&J.parentNode&&J.parentNode.tagName==="BLOCKQUOTE"&&J.parentNode.firstChild==J&&I==0){t.formatter.toggle("blockquote",null,J.parentNode);s.setStart(J,0);s.setEnd(J,0);t.selection.setRng(s);t.selection.collapse(false)}});F.onReset.add(function(){F.setContent(F.startContent,{format:"raw"})});if(G.custom_shortcuts){if(G.custom_undo_redo_keyboard_shortcuts){F.addShortcut("ctrl+z",F.getLang("undo_desc"),"Undo");F.addShortcut("ctrl+y",F.getLang("redo_desc"),"Redo")}F.addShortcut("ctrl+b",F.getLang("bold_desc"),"Bold");F.addShortcut("ctrl+i",F.getLang("italic_desc"),"Italic");F.addShortcut("ctrl+u",F.getLang("underline_desc"),"Underline");for(v=1;v<=6;v++){F.addShortcut("ctrl+"+v,"",["FormatBlock",false,"h"+v])}F.addShortcut("ctrl+7","",["FormatBlock",false,"p"]);F.addShortcut("ctrl+8","",["FormatBlock",false,"div"]);F.addShortcut("ctrl+9","",["FormatBlock",false,"address"]);function A(t){var s=null;if(!t.altKey&&!t.ctrlKey&&!t.metaKey){return s}j(F.shortcuts,function(H){if(o.isMac&&H.ctrl!=t.metaKey){return}else{if(!o.isMac&&H.ctrl!=t.ctrlKey){return}}if(H.alt!=t.altKey){return}if(H.shift!=t.shiftKey){return}if(t.keyCode==H.keyCode||(t.charCode&&t.charCode==H.charCode)){s=H;return false}});return s}F.onKeyUp.add(function(s,t){var H=A(t);if(H){return l.cancel(t)}});F.onKeyPress.add(function(s,t){var H=A(t);if(H){return l.cancel(t)}});F.onKeyDown.add(function(s,t){var H=A(t);if(H){H.func.call(H.scope);return l.cancel(t)}})}if(o.isIE){u.bind(F.getDoc(),"controlselect",function(H){var t=F.resizeInfo,s;H=H.target;if(H.nodeName!=="IMG"){return}if(t){u.unbind(t.node,t.ev,t.cb)}if(!u.hasClass(H,"mceItemNoResize")){ev="resizeend";s=u.bind(H,ev,function(J){var I;J=J.target;if(I=u.getStyle(J,"width")){u.setAttrib(J,"width",I.replace(/[^0-9%]+/g,""));u.setStyle(J,"width","")}if(I=u.getStyle(J,"height")){u.setAttrib(J,"height",I.replace(/[^0-9%]+/g,""));u.setStyle(J,"height","")}})}else{ev="resizestart";s=u.bind(H,"resizestart",l.cancel,l)}t=F.resizeInfo={node:H,ev:ev,cb:s}})}if(o.isOpera){F.onClick.add(function(s,t){l.prevent(t)})}if(G.custom_undo_redo){function C(){F.undoManager.typing=false;F.undoManager.add()}u.bind(F.getDoc(),"focusout",function(s){if(!F.removed&&F.undoManager.typing){C()}});F.dom.bind(F.dom.getRoot(),"dragend",function(s){C()});F.onKeyUp.add(function(s,H){var t=H.keyCode;if((t>=33&&t<=36)||(t>=37&&t<=40)||t==13||t==45||H.ctrlKey){C()}});F.onKeyDown.add(function(s,I){var H=I.keyCode,t;if(H==8){t=F.getDoc().selection;if(t&&t.createRange&&t.createRange().item){F.undoManager.beforeChange();s.dom.remove(t.createRange().item(0));C();return l.cancel(I)}}if((H>=33&&H<=36)||(H>=37&&H<=40)||H==13||H==45){if(o.isIE&&H==13){F.undoManager.beforeChange()}if(F.undoManager.typing){C()}return}if((H<16||H>20)&&H!=224&&H!=91&&!F.undoManager.typing){F.undoManager.beforeChange();F.undoManager.typing=true;F.undoManager.add()}});F.onMouseDown.add(function(){if(F.undoManager.typing){C()}})}if(o.isGecko){function E(){var s=F.dom.getAttribs(F.selection.getStart().cloneNode(false));return function(){var t=F.selection.getStart();if(t!==F.getBody()){F.dom.setAttrib(t,"style",null);j(s,function(H){t.setAttributeNode(H.cloneNode(true))})}}}function D(){var t=F.selection;return !t.isCollapsed()&&t.getStart()!=t.getEnd()}F.onKeyPress.add(function(s,H){var t;if((H.keyCode==8||H.keyCode==46)&&D()){t=E();F.getDoc().execCommand("delete",false,null);t();return l.cancel(H)}});F.dom.bind(F.getDoc(),"cut",function(t){var s;if(D()){s=E();F.onKeyUp.addToTop(l.cancel,l);setTimeout(function(){s();F.onKeyUp.remove(l.cancel,l)},0)}})}},_refreshContentEditable:function(){var s=this,r,t;if(s._isHidden()){r=s.getBody();t=r.parentNode;t.removeChild(r);t.appendChild(r);r.focus()}},_isHidden:function(){var r;if(!a){return 0}r=this.selection.getSel();return(!r||!r.rangeCount||r.rangeCount==0)}})})(tinymce);(function(c){var d=c.each,e,a=true,b=false;c.EditorCommands=function(o){var n=o.dom,q=o.selection,k={state:{},exec:{},value:{}},l=o.settings,r=o.formatter,p;function s(C,B,A){var z;C=C.toLowerCase();if(z=k.exec[C]){z(C,B,A);return a}return b}function m(A){var z;A=A.toLowerCase();if(z=k.state[A]){return z(A)}return -1}function h(A){var z;A=A.toLowerCase();if(z=k.value[A]){return z(A)}return b}function v(z,A){A=A||"exec";d(z,function(C,B){d(B.toLowerCase().split(","),function(D){k[A][D]=C})})}c.extend(this,{execCommand:s,queryCommandState:m,queryCommandValue:h,addCommands:v});function f(B,A,z){if(A===e){A=b}if(z===e){z=null}return o.getDoc().execCommand(B,A,z)}function u(z){return r.match(z)}function t(z,A){r.toggle(z,A?{value:A}:e)}function j(z){p=q.getBookmark(z)}function g(){q.moveToBookmark(p)}v({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){o.undoManager.add()},"Cut,Copy,Paste":function(C){var B=o.getDoc(),z;try{f(C)}catch(A){z=a}if(z||!B.queryCommandSupported(C)){if(c.isGecko){o.windowManager.confirm(o.getLang("clipboard_msg"),function(D){if(D){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{o.windowManager.alert(o.getLang("clipboard_no_support"))}}},unlink:function(z){if(q.isCollapsed()){q.select(q.getNode())}f(z);q.collapse(b)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(z){var A=z.substring(7);d("left,center,right,full".split(","),function(B){if(A!=B){r.remove("align"+B)}});t("align"+A);s("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(B){var z,A;f(B);z=n.getParent(q.getNode(),"ol,ul");if(z){A=z.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(A.nodeName)){j();n.split(A,z);g()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(z){t(z)},"ForeColor,HiliteColor,FontName":function(B,A,z){t(B,z)},FontSize:function(C,B,A){var z,D;if(A>=1&&A<=7){D=c.explode(l.font_size_style_values);z=c.explode(l.font_size_classes);if(z){A=z[A-1]||A}else{A=D[A-1]||A}}t(C,A)},RemoveFormat:function(z){r.remove(z)},mceBlockQuote:function(z){t("blockquote")},FormatBlock:function(B,A,z){return t(z||"p")},mceCleanup:function(){var z=q.getBookmark();o.setContent(o.getContent({cleanup:a}),{cleanup:a});q.moveToBookmark(z)},mceRemoveNode:function(C,B,A){var z=A||q.getNode();if(z!=o.getBody()){j();o.dom.remove(z,a);g()}},mceSelectNodeDepth:function(C,B,A){var z=0;n.getParent(q.getNode(),function(D){if(D.nodeType==1&&z++==A){q.select(D);return b}},o.getBody())},mceSelectNode:function(B,A,z){q.select(z)},mceInsertContent:function(E,L,N){var B,M,H,C,I,J,G,F,O,A,D,P,z,K;B=o.parser;M=new c.html.Serializer({},o.schema);z='<span id="mce_marker" data-mce-type="bookmark">\uFEFF</span>';J={content:N,format:"html"};q.onBeforeSetContent.dispatch(q,J);N=J.content;if(N.indexOf("{$caret}")==-1){N+="{$caret}"}N=N.replace(/\{\$caret\}/,z);if(!q.isCollapsed()){o.getDoc().execCommand("Delete",false,null)}H=q.getNode();J={context:H.nodeName.toLowerCase()};I=B.parse(N,J);D=I.lastChild;if(D.attr("id")=="mce_marker"){G=D;for(D=D.prev;D;D=D.walk(true)){if(D.type==3||!n.isBlock(D.name)){D.parent.insert(G,D,D.name==="br");break}}}if(!J.invalid){N=M.serialize(I);D=H.firstChild;P=H.lastChild;if(!D||(D===P&&D.nodeName==="BR")){n.setHTML(H,N)}else{q.setContent(N)}}else{q.setContent(z);H=o.selection.getNode();C=o.getBody();if(H.nodeType==9){H=D=C}else{D=H}while(D!==C){H=D;D=D.parentNode}N=H==C?C.innerHTML:n.getOuterHTML(H);N=M.serialize(B.parse(N.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return M.serialize(I)})));if(H==C){n.setHTML(C,N)}else{n.setOuterHTML(H,N)}}G=n.get("mce_marker");F=n.getRect(G);O=n.getViewPort(o.getWin());if((F.y+F.h>O.y+O.h||F.y<O.y)||(F.x>O.x+O.w||F.x<O.x)){K=c.isIE?o.getDoc().documentElement:o.getBody();K.scrollLeft=F.x;K.scrollTop=F.y-O.h+25}A=n.createRng();D=G.previousSibling;if(D&&D.nodeType==3){A.setStart(D,D.nodeValue.length)}else{A.setStartBefore(G);A.setEndBefore(G)}n.remove(G);q.setRng(A);q.onSetContent.dispatch(q,J);o.addVisual()},mceInsertRawHTML:function(B,A,z){q.setContent("tiny_mce_marker");o.setContent(o.getContent().replace(/tiny_mce_marker/g,function(){return z}))},mceSetContent:function(B,A,z){o.setContent(z)},"Indent,Outdent":function(C){var A,z,B;A=l.indentation;z=/[a-z%]+$/i.exec(A);A=parseInt(A);if(!m("InsertUnorderedList")&&!m("InsertOrderedList")){d(q.getSelectedBlocks(),function(D){if(C=="outdent"){B=Math.max(0,parseInt(D.style.paddingLeft||0)-A);n.setStyle(D,"paddingLeft",B?B+z:"")}else{n.setStyle(D,"paddingLeft",(parseInt(D.style.paddingLeft||0)+A)+z)}})}else{f(C)}},mceRepaint:function(){var A;if(c.isGecko){try{j(a);if(q.getSel()){q.getSel().selectAllChildren(o.getBody())}q.collapse(a);g()}catch(z){}}},mceToggleFormat:function(B,A,z){r.toggle(z)},InsertHorizontalRule:function(){o.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){o.hasVisual=!o.hasVisual;o.addVisual()},mceReplaceContent:function(B,A,z){o.execCommand("mceInsertContent",false,z.replace(/\{\$selection\}/g,q.getContent({format:"text"})))},mceInsertLink:function(C,B,A){var z;if(typeof(A)=="string"){A={href:A}}z=n.getParent(q.getNode(),"a");A.href=A.href.replace(" ","%20");if(!z||!A.href){r.remove("link")}if(A.href){r.apply("link",A,z)}},selectAll:function(){var A=n.getRoot(),z=n.createRng();z.setStart(A,0);z.setEnd(A,A.childNodes.length);o.selection.setRng(z)}});v({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(C){var A="align"+C.substring(7);var z=q.isCollapsed()?[q.getNode()]:q.getSelectedBlocks();var B=c.map(z,function(D){return !!r.matchNode(D,A)});return c.inArray(B,a)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(z){return u(z)},mceBlockQuote:function(){return u("blockquote")},Outdent:function(){var z;if(l.inline_styles){if((z=n.getParent(q.getStart(),n.isBlock))&&parseInt(z.style.paddingLeft)>0){return a}if((z=n.getParent(q.getEnd(),n.isBlock))&&parseInt(z.style.paddingLeft)>0){return a}}return m("InsertUnorderedList")||m("InsertOrderedList")||(!l.inline_styles&&!!n.getParent(q.getNode(),"BLOCKQUOTE"))},"InsertUnorderedList,InsertOrderedList":function(z){return n.getParent(q.getNode(),z=="insertunorderedlist"?"UL":"OL")}},"state");v({"FontSize,FontName":function(B){var A=0,z;if(z=n.getParent(q.getNode(),"span")){if(B=="fontsize"){A=z.style.fontSize}else{A=z.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return A}},"value");if(l.custom_undo_redo){v({Undo:function(){o.undoManager.undo()},Redo:function(){o.undoManager.redo()}})}}})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(f){var d,e=0,h=[],c;function g(){return b.trim(f.getContent({format:"raw",no_events:1}))}return d={typing:false,onAdd:new a(d),onUndo:new a(d),onRedo:new a(d),beforeChange:function(){c=f.selection.getBookmark(2,true)},add:function(m){var j,k=f.settings,l;m=m||{};m.content=g();l=h[e];if(l&&l.content==m.content){return null}if(h[e]){h[e].beforeBookmark=c}if(k.custom_undo_redo_levels){if(h.length>k.custom_undo_redo_levels){for(j=0;j<h.length-1;j++){h[j]=h[j+1]}h.length--;e=h.length}}m.bookmark=f.selection.getBookmark(2,true);if(e<h.length-1){h.length=e+1}h.push(m);e=h.length-1;d.onAdd.dispatch(d,m);f.isNotDirty=0;return m},undo:function(){var k,j;if(d.typing){d.add();d.typing=false}if(e>0){k=h[--e];f.setContent(k.content,{format:"raw"});f.selection.moveToBookmark(k.beforeBookmark);d.onUndo.dispatch(d,k)}return k},redo:function(){var j;if(e<h.length-1){j=h[++e];f.setContent(j.content,{format:"raw"});f.selection.moveToBookmark(j.bookmark);d.onRedo.dispatch(d,j)}return j},clear:function(){h=[];e=0;d.typing=false},hasUndo:function(){return e>0||this.typing},hasRedo:function(){return e<h.length-1&&!this.typing}}}})(tinymce);(function(m){var k=m.dom.Event,c=m.isIE,a=m.isGecko,b=m.isOpera,j=m.each,h=m.extend,d=true,g=false;function l(p){var q,o,n;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(p.nodeName)){if(q){o=p.cloneNode(false);o.appendChild(q);q=o}else{q=n=p.cloneNode(false)}q.removeAttribute("id")}}while(p=p.parentNode);if(q){return{wrapper:q,inner:n}}}function f(o,p){var n=p.ownerDocument.createRange();n.setStart(o.endContainer,o.endOffset);n.setEndAfter(p);return n.cloneContents().textContent.length==0}function e(p,r,n){var o,q;if(r.isEmpty(n)){o=r.getParent(n,"ul,ol");if(!r.getParent(o.parentNode,"ul,ol")){r.split(o,n);q=r.create("p",0,'<br data-mce-bogus="1" />');r.replace(q,n);p.select(q,1)}return g}return d}m.create("tinymce.ForceBlocks",{ForceBlocks:function(n){var o=this,p=n.settings,q;o.editor=n;o.dom=n.dom;q=(p.forced_root_block||"p").toLowerCase();p.element=q.toUpperCase();n.onPreInit.add(o.setup,o)},setup:function(){var o=this,n=o.editor,q=n.settings,v=n.dom,p=n.selection,r=n.schema.getBlockElements();if(q.forced_root_block){function z(){var B=p.getStart(),t=n.getBody(),s,C,G,I,H,A,D,E=-16777215;if(!B||B.nodeType!==1){return}while(B!=t){if(r[B.nodeName]){return}B=B.parentNode}s=p.getRng();if(s.setStart){C=s.startContainer;G=s.startOffset;I=s.endContainer;H=s.endOffset}else{if(s.item){s=n.getDoc().body.createTextRange();s.moveToElementText(s.item(0))}tmpRng=s.duplicate();tmpRng.collapse(true);G=tmpRng.move("character",E)*-1;if(!tmpRng.collapsed){tmpRng=s.duplicate();tmpRng.collapse(false);H=(tmpRng.move("character",E)*-1)-G}}for(B=t.firstChild;B;B){if(B.nodeType===3||(B.nodeType==1&&!r[B.nodeName])){if(!A){A=v.create(q.forced_root_block);B.parentNode.insertBefore(A,B)}D=B;B=B.nextSibling;A.appendChild(D)}else{A=null;B=B.nextSibling}}if(s.setStart){s.setStart(C,G);s.setEnd(I,H);p.setRng(s)}else{try{s=n.getDoc().body.createTextRange();s.moveToElementText(t);s.collapse(true);s.moveStart("character",G);if(H>0){s.moveEnd("character",H)}s.select()}catch(F){}}n.nodeChanged()}n.onKeyUp.add(z);n.onClick.add(z)}if(q.force_br_newlines){if(c){n.onKeyPress.add(function(s,t){var A;if(t.keyCode==13&&p.getNode().nodeName!="LI"){p.setContent('<br id="__" /> ',{format:"raw"});A=v.get("__");A.removeAttribute("id");p.select(A);p.collapse();return k.cancel(t)}})}}if(q.force_p_newlines){if(!c){n.onKeyPress.add(function(s,t){if(t.keyCode==13&&!t.shiftKey&&!o.insertPara(t)){k.cancel(t)}})}else{m.addUnload(function(){o._previousFormats=0});n.onKeyPress.add(function(s,t){o._previousFormats=0;if(t.keyCode==13&&!t.shiftKey&&s.selection.isCollapsed()&&q.keep_styles){o._previousFormats=l(s.selection.getStart())}});n.onKeyUp.add(function(t,B){if(B.keyCode==13&&!B.shiftKey){var A=t.selection.getStart(),s=o._previousFormats;if(!A.hasChildNodes()&&s){A=v.getParent(A,v.isBlock);if(A&&A.nodeName!="LI"){A.innerHTML="";if(o._previousFormats){A.appendChild(s.wrapper);s.inner.innerHTML="\uFEFF"}else{A.innerHTML="\uFEFF"}p.select(A,1);p.collapse(true);t.getDoc().execCommand("Delete",false,null);o._previousFormats=0}}}})}if(a){n.onKeyDown.add(function(s,t){if((t.keyCode==8||t.keyCode==46)&&!t.shiftKey){o.backspaceDelete(t,t.keyCode==8)}})}}if(m.isWebKit){function u(t){var s=p.getRng(),A,D=v.create("div",null," "),C,B=v.getViewPort(t.getWin()).h;s.insertNode(A=v.create("br"));s.setStartAfter(A);s.setEndAfter(A);p.setRng(s);if(p.getSel().focusNode==A.previousSibling){p.select(v.insertAfter(v.doc.createTextNode("\u00a0"),A));p.collapse(d)}v.insertAfter(D,A);C=v.getPos(D).y;v.remove(D);if(C>B){t.getWin().scrollTo(0,C)}}n.onKeyPress.add(function(s,t){if(t.keyCode==13&&(t.shiftKey||(q.force_br_newlines&&!v.getParent(p.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul")))){u(s);k.cancel(t)}})}if(c){if(q.element!="P"){n.onKeyPress.add(function(s,t){o.lastElm=p.getNode().nodeName});n.onKeyUp.add(function(t,A){var C,B=p.getNode(),s=t.getBody();if(s.childNodes.length===1&&B.nodeName=="P"){B=v.rename(B,q.element);p.select(B);p.collapse();t.nodeChanged()}else{if(A.keyCode==13&&!A.shiftKey&&o.lastElm!="P"){C=v.getParent(B,"p");if(C){v.rename(C,q.element);t.nodeChanged()}}}})}}},getParentBlock:function(p){var o=this.dom;return o.getParent(p,o.isBlock)},insertPara:function(S){var G=this,z=G.editor,O=z.dom,T=z.getDoc(),X=z.settings,H=z.selection.getSel(),I=H.getRangeAt(0),W=T.body;var L,M,J,Q,P,u,p,v,B,o,E,V,q,A,K,N=O.getViewPort(z.getWin()),D,F,C;z.undoManager.beforeChange();L=T.createRange();L.setStart(H.anchorNode,H.anchorOffset);L.collapse(d);M=T.createRange();M.setStart(H.focusNode,H.focusOffset);M.collapse(d);J=L.compareBoundaryPoints(L.START_TO_END,M)<0;Q=J?H.anchorNode:H.focusNode;P=J?H.anchorOffset:H.focusOffset;u=J?H.focusNode:H.anchorNode;p=J?H.focusOffset:H.anchorOffset;if(Q===u&&/^(TD|TH)$/.test(Q.nodeName)){if(Q.firstChild.nodeName=="BR"){O.remove(Q.firstChild)}if(Q.childNodes.length==0){z.dom.add(Q,X.element,null,"<br />");V=z.dom.add(Q,X.element,null,"<br />")}else{K=Q.innerHTML;Q.innerHTML="";z.dom.add(Q,X.element,null,K);V=z.dom.add(Q,X.element,null,"<br />")}I=T.createRange();I.selectNodeContents(V);I.collapse(1);z.selection.setRng(I);return g}if(Q==W&&u==W&&W.firstChild&&z.dom.isBlock(W.firstChild)){Q=u=Q.firstChild;P=p=0;L=T.createRange();L.setStart(Q,0);M=T.createRange();M.setStart(u,0)}if(!T.body.hasChildNodes()){T.body.appendChild(O.create("br"))}Q=Q.nodeName=="HTML"?T.body:Q;Q=Q.nodeName=="BODY"?Q.firstChild:Q;u=u.nodeName=="HTML"?T.body:u;u=u.nodeName=="BODY"?u.firstChild:u;v=G.getParentBlock(Q);B=G.getParentBlock(u);o=v?v.nodeName:X.element;if(K=G.dom.getParent(v,"li,pre")){if(K.nodeName=="LI"){return e(z.selection,G.dom,K)}return d}if(v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(O.getStyle(v,"position",1)))){o=X.element;v=null}if(B&&(B.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(O.getStyle(v,"position",1)))){o=X.element;B=null}if(/(TD|TABLE|TH|CAPTION)/.test(o)||(v&&o=="DIV"&&/left|right/gi.test(O.getStyle(v,"float",1)))){o=X.element;v=B=null}E=(v&&v.nodeName==o)?v.cloneNode(0):z.dom.create(o);V=(B&&B.nodeName==o)?B.cloneNode(0):z.dom.create(o);V.removeAttribute("id");if(/^(H[1-6])$/.test(o)&&f(I,v)){V=z.dom.create(X.element)}K=q=Q;do{if(K==W||K.nodeType==9||G.dom.isBlock(K)||/(TD|TABLE|TH|CAPTION)/.test(K.nodeName)){break}q=K}while((K=K.previousSibling?K.previousSibling:K.parentNode));K=A=u;do{if(K==W||K.nodeType==9||G.dom.isBlock(K)||/(TD|TABLE|TH|CAPTION)/.test(K.nodeName)){break}A=K}while((K=K.nextSibling?K.nextSibling:K.parentNode));if(q.nodeName==o){L.setStart(q,0)}else{L.setStartBefore(q)}L.setEnd(Q,P);E.appendChild(L.cloneContents()||T.createTextNode(""));try{M.setEndAfter(A)}catch(R){}M.setStart(u,p);V.appendChild(M.cloneContents()||T.createTextNode(""));I=T.createRange();if(!q.previousSibling&&q.parentNode.nodeName==o){I.setStartBefore(q.parentNode)}else{if(L.startContainer.nodeName==o&&L.startOffset==0){I.setStartBefore(L.startContainer)}else{I.setStart(L.startContainer,L.startOffset)}}if(!A.nextSibling&&A.parentNode.nodeName==o){I.setEndAfter(A.parentNode)}else{I.setEnd(M.endContainer,M.endOffset)}I.deleteContents();if(b){z.getWin().scrollTo(0,N.y)}if(E.firstChild&&E.firstChild.nodeName==o){E.innerHTML=E.firstChild.innerHTML}if(V.firstChild&&V.firstChild.nodeName==o){V.innerHTML=V.firstChild.innerHTML}function U(Y,s){var r=[],aa,Z,t;Y.innerHTML="";if(X.keep_styles){Z=s;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(Z.nodeName)){aa=Z.cloneNode(g);O.setAttrib(aa,"id","");r.push(aa)}}while(Z=Z.parentNode)}if(r.length>0){for(t=r.length-1,aa=Y;t>=0;t--){aa=aa.appendChild(r[t])}r[0].innerHTML=b?"\u00a0":"<br />";return r[0]}else{Y.innerHTML=b?"\u00a0":"<br />"}}if(O.isEmpty(E)){U(E,Q)}if(O.isEmpty(V)){C=U(V,u)}if(b&&parseFloat(opera.version())<9.5){I.insertNode(E);I.insertNode(V)}else{I.insertNode(V);I.insertNode(E)}V.normalize();E.normalize();z.selection.select(V,true);z.selection.collapse(true);D=z.dom.getPos(V).y;if(D<N.y||D+25>N.y+N.h){z.getWin().scrollTo(0,D<N.y?D:D-N.h+25)}z.undoManager.add();return g},backspaceDelete:function(v,E){var F=this,u=F.editor,B=u.getBody(),s=u.dom,q,z=u.selection,p=z.getRng(),A=p.startContainer,q,C,D,o;if(!E&&p.collapsed&&A.nodeType==1&&p.startOffset==A.childNodes.length){o=new m.dom.TreeWalker(A.lastChild,A);for(q=A.lastChild;q;q=o.prev()){if(q.nodeType==3){p.setStart(q,q.nodeValue.length);p.collapse(true);z.setRng(p);return}}}if(A&&u.dom.isBlock(A)&&!/^(TD|TH)$/.test(A.nodeName)&&E){if(A.childNodes.length==0||(A.childNodes.length==1&&A.firstChild.nodeName=="BR")){q=A;while((q=q.previousSibling)&&!u.dom.isBlock(q)){}if(q){if(A!=B.firstChild){C=u.dom.doc.createTreeWalker(q,NodeFilter.SHOW_TEXT,null,g);while(D=C.nextNode()){q=D}p=u.getDoc().createRange();p.setStart(q,q.nodeValue?q.nodeValue.length:0);p.setEnd(q,q.nodeValue?q.nodeValue.length:0);z.setRng(p);u.dom.remove(A)}return k.cancel(v)}}}}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each,e=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(f,j){var h=this,g;j=j||{};h.editor=f;h.controls={};h.onAdd=new c.util.Dispatcher(h);h.onPostRender=new c.util.Dispatcher(h);h.prefix=j.prefix||f.id+"_";h._cls={};h.onPostRender.add(function(){d(h.controls,function(k){k.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;if(g=this.get(h)){g.setActive(f)}return g},setDisabled:function(h,f){var g=null;if(g=this.get(h)){g.setDisabled(f)}return g},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f)}return g},createControl:function(j){var h,g=this,f=g.editor;d(f.plugins,function(k){if(k.createControl){h=k.createControl(j,g);if(h){return false}}});switch(j){case"|":case"separator":return g.createSeparator()}if(!h&&f.buttons&&(h=f.buttons[j])){return g.createButton(j,h)}return g.add(h)},createDropMenu:function(f,o,h){var n=this,j=n.editor,k,g,l,m;o=e({"class":"mceDropDown",constrain:j.settings.constrain_menus},o);o["class"]=o["class"]+" "+j.getParam("skin")+"Skin";if(l=j.getParam("skin_variant")){o["class"]+=" "+j.getParam("skin")+"Skin"+l.substring(0,1).toUpperCase()+l.substring(1)}f=n.prefix+f;m=h||n._cls.dropmenu||c.ui.DropMenu;k=n.controls[f]=new m(f,o);k.onAddItem.add(function(r,q){var p=q.settings;p.title=j.getLang(p.title,p.title);if(!p.onclick){p.onclick=function(s){if(p.cmd){j.execCommand(p.cmd,p.ui||false,p.value)}}}});j.onRemove.add(function(){k.destroy()});if(c.isIE){k.onShowMenu.add(function(){j.focus();g=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(g){j.selection.moveToBookmark(g);g=0}})}return n.add(k)},createListBox:function(f,o,h){var m=this,k=m.editor,j,l,n;if(m.get(f)){return null}o.title=k.translate(o.title);o.scope=o.scope||k;if(!o.onselect){o.onselect=function(p){k.execCommand(o.cmd,o.ui||false,p||o.value)}}o=e({title:o.title,"class":"mce_"+f,scope:o.scope,control_manager:m},o);f=m.prefix+f;function g(p){return p.settings.use_accessible_selects&&!c.isGecko}if(k.settings.use_native_selects||g(k)){l=new c.ui.NativeListBox(f,o)}else{n=h||m._cls.listbox||c.ui.ListBox;l=new n(f,o,k)}m.controls[f]=l;if(c.isWebKit){l.onPostRender.add(function(q,p){a.add(p,"mousedown",function(){k.bookmark=k.selection.getBookmark(1)});a.add(p,"focus",function(){k.selection.moveToBookmark(k.bookmark);k.bookmark=null})})}if(l.hideMenu){k.onMouseDown.add(l.hideMenu,l)}return m.add(l)},createButton:function(n,j,m){var h=this,g=h.editor,k,l,f;if(h.get(n)){return null}j.title=g.translate(j.title);j.label=g.translate(j.label);j.scope=j.scope||g;if(!j.onclick&&!j.menu_button){j.onclick=function(){g.execCommand(j.cmd,j.ui||false,j.value)}}j=e({title:j.title,"class":"mce_"+n,unavailable_prefix:g.getLang("unavailable",""),scope:j.scope,control_manager:h},j);n=h.prefix+n;if(j.menu_button){f=m||h._cls.menubutton||c.ui.MenuButton;l=new f(n,j,g);g.onMouseDown.add(l.hideMenu,l)}else{f=h._cls.button||c.ui.Button;l=new f(n,j,g)}return h.add(l)},createMenuButton:function(h,f,g){f=f||{};f.menu_button=1;return this.createButton(h,f,g)},createSplitButton:function(n,j,m){var h=this,g=h.editor,k,l,f;if(h.get(n)){return null}j.title=g.translate(j.title);j.scope=j.scope||g;if(!j.onclick){j.onclick=function(o){g.execCommand(j.cmd,j.ui||false,o||j.value)}}if(!j.onselect){j.onselect=function(o){g.execCommand(j.cmd,j.ui||false,o||j.value)}}j=e({title:j.title,"class":"mce_"+n,scope:j.scope,control_manager:h},j);n=h.prefix+n;f=m||h._cls.splitbutton||c.ui.SplitButton;l=h.add(new f(n,j,g));g.onMouseDown.add(l.hideMenu,l);return l},createColorSplitButton:function(f,o,h){var m=this,k=m.editor,j,l,n,g;if(m.get(f)){return null}o.title=k.translate(o.title);o.scope=o.scope||k;if(!o.onclick){o.onclick=function(p){if(c.isIE){g=k.selection.getBookmark(1)}k.execCommand(o.cmd,o.ui||false,p||o.value)}}if(!o.onselect){o.onselect=function(p){k.execCommand(o.cmd,o.ui||false,p||o.value)}}o=e({title:o.title,"class":"mce_"+f,menu_class:k.getParam("skin")+"Skin",scope:o.scope,more_colors_title:k.getLang("more_colors")},o);f=m.prefix+f;n=h||m._cls.colorsplitbutton||c.ui.ColorSplitButton;l=new n(f,o,k);k.onMouseDown.add(l.hideMenu,l);k.onRemove.add(function(){l.destroy()});if(c.isIE){l.onShowMenu.add(function(){k.focus();g=k.selection.getBookmark(1)});l.onHideMenu.add(function(){if(g){k.selection.moveToBookmark(g);g=0}})}return m.add(l)},createToolbar:function(l,h,k){var j,g=this,f;l=g.prefix+l;f=k||g._cls.toolbar||c.ui.Toolbar;j=new f(l,h,g.editor);if(g.get(l)){return null}return g.add(j)},createToolbarGroup:function(l,h,k){var j,g=this,f;l=g.prefix+l;f=k||this._cls.toolbarGroup||c.ui.ToolbarGroup;j=new f(l,h,g.editor);if(g.get(l)){return null}return g.add(j)},createSeparator:function(g){var f=g||this._cls.separator||c.ui.Separator;return new f()},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()});this.controls=null}})})(tinymce);(function(d){var a=d.util.Dispatcher,e=d.each,c=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={}},open:function(A,h){var z=this,l="",o,n,j=z.editor.settings.dialog_type=="modal",r,q,k,g=d.DOM.getViewPort(),v;A=A||{};h=h||{};q=b?g.w:screen.width;k=b?g.h:screen.height;A.name=A.name||"mc_"+new Date().getTime();A.width=parseInt(A.width||320);A.height=parseInt(A.height||240);A.resizable=true;A.left=A.left||parseInt(q/2)-(A.width/2);A.top=A.top||parseInt(k/2)-(A.height/2);h.inline=false;h.mce_width=A.width;h.mce_height=A.height;h.mce_auto_focus=A.auto_focus;if(j){if(c){A.center=true;A.help=false;A.dialogWidth=A.width+"px";A.dialogHeight=A.height+"px";A.scroll=A.scrollbars||false}}e(A,function(p,f){if(d.is(p,"boolean")){p=p?"yes":"no"}if(!/^(name|url)$/.test(f)){if(c&&j){l+=(l?";":"")+f+":"+p}else{l+=(l?",":"")+f+"="+p}}});z.features=A;z.params=h;z.onOpen.dispatch(z,A,h);v=A.url||A.file;v=d._addVer(v);try{if(c&&j){r=1;window.showModalDialog(v,window,l)}else{r=window.open(v,A.name,l)}}catch(m){}if(!r){alert(z.editor.getLang("popup_blocked"))}},close:function(f){f.close();this.onClose.dispatch(this)},createInstance:function(j,h,g,n,m,l){var k=d.resolve(j);return new k(h,g,n,m,l)},confirm:function(h,f,j,g){g=g||window;f.call(j||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,k,g){var j=this;g=g||window;g.alert(j._decode(j.editor.getLang(h,h)));if(f){f.call(k||j)}},resizeBy:function(f,g,h){h.resizeBy(f,g)},_decode:function(f){return d.DOM.decode(f).replace(/\\n/g,"\n")}})}(tinymce));(function(a){a.Formatter=function(Y){var P={},S=a.each,c=Y.dom,r=Y.selection,u=a.dom.TreeWalker,N=new a.dom.RangeUtils(c),d=Y.schema.isValidChild,I=c.isBlock,m=Y.settings.forced_root_block,t=c.nodeIndex,H="\uFEFF",e=/^(src|href|style)$/,V=false,E=true,q;function C(Z){return Z instanceof Array}function n(aa,Z){return c.getParents(aa,Z,c.getRoot())}function b(Z){return Z.nodeType===1&&(Z.face==="mceinline"||Z.style.fontFamily==="mceinline")}function U(Z){return Z?P[Z]:P}function l(Z,aa){if(Z){if(typeof(Z)!=="string"){S(Z,function(ac,ab){l(ab,ac)})}else{aa=aa.length?aa:[aa];S(aa,function(ab){if(ab.deep===q){ab.deep=!ab.selector}if(ab.split===q){ab.split=!ab.selector||ab.inline}if(ab.remove===q&&ab.selector&&!ab.inline){ab.remove="none"}if(ab.selector&&ab.inline){ab.mixed=true;ab.block_expand=true}if(typeof(ab.classes)==="string"){ab.classes=ab.classes.split(/\s+/)}});P[Z]=aa}}}var j=function(aa){var Z;Y.dom.getParent(aa,function(ab){Z=Y.dom.getStyle(ab,"text-decoration");return Z&&Z!=="none"});return Z};var L=function(Z){var aa;if(Z.nodeType===1&&Z.parentNode&&Z.parentNode.nodeType===1){aa=j(Z.parentNode);if(Y.dom.getStyle(Z,"color")&&aa){Y.dom.setStyle(Z,"text-decoration",aa)}else{if(Y.dom.getStyle(Z,"textdecoration")===aa){Y.dom.setStyle(Z,"text-decoration",null)}}}};function W(ac,aj,ae){var af=U(ac),ak=af[0],ai,aa,ah,ag=r.isCollapsed();function Z(ao,an){an=an||ak;if(ao){if(an.onformat){an.onformat(ao,an,aj,ae)}S(an.styles,function(aq,ap){c.setStyle(ao,ap,s(aq,aj))});S(an.attributes,function(aq,ap){c.setAttrib(ao,ap,s(aq,aj))});S(an.classes,function(ap){ap=s(ap,aj);if(!c.hasClass(ao,ap)){c.addClass(ao,ap)}})}}function ad(){function ap(aw,au){var av=new u(au);for(ae=av.current();ae;ae=av.prev()){if(ae.childNodes.length>1||ae==aw){return ae}}}var ao=Y.selection.getRng();var at=ao.startContainer;var an=ao.endContainer;if(at!=an&&ao.endOffset==0){var ar=ap(at,an);var aq=ar.nodeType==3?ar.length:ar.childNodes.length;ao.setEnd(ar,aq)}return ao}function ab(aq,aw,au,at,ao){var an=[],ap=-1,av,ay=-1,ar=-1,ax;S(aq.childNodes,function(aA,az){if(aA.nodeName==="UL"||aA.nodeName==="OL"){ap=az;av=aA;return false}});S(aq.childNodes,function(aA,az){if(aA.nodeName==="SPAN"&&c.getAttrib(aA,"data-mce-type")=="bookmark"){if(aA.id==aw.id+"_start"){ay=az}else{if(aA.id==aw.id+"_end"){ar=az}}}});if(ap<=0||(ay<ap&&ar>ap)){S(a.grep(aq.childNodes),ao);return 0}else{ax=au.cloneNode(V);S(a.grep(aq.childNodes),function(aA,az){if((ay<ap&&az<ap)||(ay>ap&&az>ap)){an.push(aA);aA.parentNode.removeChild(aA)}});if(ay<ap){aq.insertBefore(ax,av)}else{if(ay>ap){aq.insertBefore(ax,av.nextSibling)}}at.push(ax);S(an,function(az){ax.appendChild(az)});return ax}}function al(ao,aq,at){var an=[],ar,ap;ar=ak.inline||ak.block;ap=c.create(ar);Z(ap);N.walk(ao,function(au){var av;function aw(ax){var aA=ax.nodeName.toLowerCase(),az=ax.parentNode.nodeName.toLowerCase(),ay;if(g(aA,"br")){av=0;if(ak.block){c.remove(ax)}return}if(ak.wrapper&&A(ax,ac,aj)){av=0;return}if(ak.block&&!ak.wrapper&&J(aA)){ax=c.rename(ax,ar);Z(ax);an.push(ax);av=0;return}if(ak.selector){S(af,function(aB){if("collapsed" in aB&&aB.collapsed!==ag){return}if(c.is(ax,aB.selector)&&!b(ax)){Z(ax,aB);ay=true}});if(!ak.inline||ay){av=0;return}}if(d(ar,aA)&&d(az,ar)&&!(!at&&ax.nodeType===3&&ax.nodeValue.length===1&&ax.nodeValue.charCodeAt(0)===65279)&&ax.id!=="_mce_caret"){if(!av){av=ap.cloneNode(V);ax.parentNode.insertBefore(av,ax);an.push(av)}av.appendChild(ax)}else{if(aA=="li"&&aq){av=ab(ax,aq,ap,an,aw)}else{av=0;S(a.grep(ax.childNodes),aw);av=0}}}S(au,aw)});if(ak.wrap_links===false){S(an,function(au){function av(az){var ay,ax,aw;if(az.nodeName==="A"){ax=ap.cloneNode(V);an.push(ax);aw=a.grep(az.childNodes);for(ay=0;ay<aw.length;ay++){ax.appendChild(aw[ay])}az.appendChild(ax)}S(a.grep(az.childNodes),av)}av(au)})}S(an,function(aw){var au;function ax(az){var ay=0;S(az.childNodes,function(aA){if(!f(aA)&&!K(aA)){ay++}});return ay}function av(ay){var aA,az;S(ay.childNodes,function(aB){if(aB.nodeType==1&&!K(aB)&&!b(aB)){aA=aB;return V}});if(aA&&h(aA,ak)){az=aA.cloneNode(V);Z(az);c.replace(az,ay,E);c.remove(aA,1)}return az||ay}au=ax(aw);if((an.length>1||!I(aw))&&au===0){c.remove(aw,1);return}if(ak.inline||ak.wrapper){if(!ak.exact&&au===1){aw=av(aw)}S(af,function(ay){S(c.select(ay.inline,aw),function(aA){var az;if(ay.wrap_links===false){az=aA.parentNode;do{if(az.nodeName==="A"){return}}while(az=az.parentNode)}X(ay,aj,aA,ay.exact?aA:null)})});if(A(aw.parentNode,ac,aj)){c.remove(aw,1);aw=0;return E}if(ak.merge_with_parents){c.getParent(aw.parentNode,function(ay){if(A(ay,ac,aj)){c.remove(aw,1);aw=0;return E}})}if(aw&&ak.merge_siblings!==false){aw=v(F(aw),aw);aw=v(aw,F(aw,E))}}})}if(ak){if(ae){if(ae.nodeType){aa=c.createRng();aa.setStartBefore(ae);aa.setEndAfter(ae);al(p(aa,af),null,true)}else{al(ae,null,true)}}else{if(!ag||!ak.inline||c.select("td.mceSelected,th.mceSelected").length){var am=Y.selection.getNode();Y.selection.setRng(ad());ai=r.getBookmark();al(p(r.getRng(E),af),ai);if(ak.styles&&(ak.styles.color||ak.styles.textDecoration)){a.walk(am,L,"childNodes");L(am)}r.moveToBookmark(ai);Q(r.getRng(E));Y.nodeChanged()}else{T("apply",ac,aj)}}}}function D(ab,aj,ad){var ae=U(ab),al=ae[0],ai,ah,aa;function ac(aq){var ap,ao,an;ap=a.grep(aq.childNodes);for(ao=0,an=ae.length;ao<an;ao++){if(X(ae[ao],aj,aq,aq)){break}}if(al.deep){for(ao=0,an=ap.length;ao<an;ao++){ac(ap[ao])}}}function af(an){var ao;S(n(an.parentNode).reverse(),function(ap){var aq;if(!ao&&ap.id!="_start"&&ap.id!="_end"){aq=A(ap,ab,aj);if(aq&&aq.split!==false){ao=ap}}});return ao}function Z(aq,an,at,aw){var ax,av,au,ap,ar,ao;if(aq){ao=aq.parentNode;for(ax=an.parentNode;ax&&ax!=ao;ax=ax.parentNode){av=ax.cloneNode(V);for(ar=0;ar<ae.length;ar++){if(X(ae[ar],aj,av,av)){av=0;break}}if(av){if(au){av.appendChild(au)}if(!ap){ap=av}au=av}}if(aw&&(!al.mixed||!I(aq))){an=c.split(aq,an)}if(au){at.parentNode.insertBefore(au,at);ap.appendChild(at)}}return an}function ak(an){return Z(af(an),an,an,true)}function ag(ap){var ao=c.get(ap?"_start":"_end"),an=ao[ap?"firstChild":"lastChild"];if(K(an)){an=an[ap?"firstChild":"lastChild"]}c.remove(ao,true);return an}function am(an){var ao,ap;an=p(an,ae,E);if(al.split){ao=M(an,E);ap=M(an);if(ao!=ap){ao=R(ao,"span",{id:"_start","data-mce-type":"bookmark"});ap=R(ap,"span",{id:"_end","data-mce-type":"bookmark"});ak(ao);ak(ap);ao=ag(E);ap=ag()}else{ao=ap=ak(ao)}an.startContainer=ao.parentNode;an.startOffset=t(ao);an.endContainer=ap.parentNode;an.endOffset=t(ap)+1}N.walk(an,function(aq){S(aq,function(ar){ac(ar);if(ar.nodeType===1&&Y.dom.getStyle(ar,"text-decoration")==="underline"&&ar.parentNode&&j(ar.parentNode)==="underline"){X({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,ar)}})})}if(ad){if(ad.nodeType){aa=c.createRng();aa.setStartBefore(ad);aa.setEndAfter(ad);am(aa)}else{am(ad)}return}if(!r.isCollapsed()||!al.inline||c.select("td.mceSelected,th.mceSelected").length){ai=r.getBookmark();am(r.getRng(E));r.moveToBookmark(ai);if(al.inline&&k(ab,aj,r.getStart())){Q(r.getRng(true))}Y.nodeChanged()}else{T("remove",ab,aj)}if(a.isWebKit){Y.execCommand("mceCleanup")}}function G(aa,ac,ab){var Z=U(aa);if(k(aa,ac,ab)&&(!("toggle" in Z[0])||Z[0]["toggle"])){D(aa,ac,ab)}else{W(aa,ac,ab)}}function A(aa,Z,af,ad){var ab=U(Z),ag,ae,ac;function ah(al,an,ao){var ak,am,ai=an[ao],aj;if(an.onmatch){return an.onmatch(al,an,ao)}if(ai){if(ai.length===q){for(ak in ai){if(ai.hasOwnProperty(ak)){if(ao==="attributes"){am=c.getAttrib(al,ak)}else{am=O(al,ak)}if(ad&&!am&&!an.exact){return}if((!ad||an.exact)&&!g(am,s(ai[ak],af))){return}}}}else{for(aj=0;aj<ai.length;aj++){if(ao==="attributes"?c.getAttrib(al,ai[aj]):O(al,ai[aj])){return an}}}}return an}if(ab&&aa){for(ae=0;ae<ab.length;ae++){ag=ab[ae];if(h(aa,ag)&&ah(aa,ag,"attributes")&&ah(aa,ag,"styles")){if(ac=ag.classes){for(ae=0;ae<ac.length;ae++){if(!c.hasClass(aa,ac[ae])){return}}}return ag}}}}function k(ab,ad,ac){var aa;function Z(ae){ae=c.getParent(ae,function(af){return !!A(af,ab,ad,true)});return A(ae,ab,ad)}if(ac){return Z(ac)}ac=r.getNode();if(Z(ac)){return E}aa=r.getStart();if(aa!=ac){if(Z(aa)){return E}}return V}function z(ag,af){var ad,ae=[],ac={},ab,aa,Z;ad=r.getStart();c.getParent(ad,function(aj){var ai,ah;for(ai=0;ai<ag.length;ai++){ah=ag[ai];if(!ac[ah]&&A(aj,ah,af)){ac[ah]=true;ae.push(ah)}}});return ae}function B(ad){var af=U(ad),ac,ab,ae,aa,Z;if(af){ac=r.getStart();ab=n(ac);for(aa=af.length-1;aa>=0;aa--){Z=af[aa].selector;if(!Z){return E}for(ae=ab.length-1;ae>=0;ae--){if(c.is(ab[ae],Z)){return E}}}}return V}a.extend(this,{get:U,register:l,apply:W,remove:D,toggle:G,match:k,matchAll:z,matchNode:A,canApply:B});function h(Z,aa){if(g(Z,aa.inline)){return E}if(g(Z,aa.block)){return E}if(aa.selector){return c.is(Z,aa.selector)}}function g(aa,Z){aa=aa||"";Z=Z||"";aa=""+(aa.nodeName||aa);Z=""+(Z.nodeName||Z);return aa.toLowerCase()==Z.toLowerCase()}function O(aa,Z){var ab=c.getStyle(aa,Z);if(Z=="color"||Z=="backgroundColor"){ab=c.toHex(ab)}if(Z=="fontWeight"&&ab==700){ab="bold"}return""+ab}function s(Z,aa){if(typeof(Z)!="string"){Z=Z(aa)}else{if(aa){Z=Z.replace(/%(\w+)/g,function(ac,ab){return aa[ab]||ac})}}return Z}function f(Z){return Z&&Z.nodeType===3&&/^([\t \r\n]+|)$/.test(Z.nodeValue)}function R(ab,aa,Z){var ac=c.create(aa,Z);ab.parentNode.insertBefore(ac,ab);ac.appendChild(ab);return ac}function p(Z,al,ac){var ab=Z.startContainer,ag=Z.startOffset,ao=Z.endContainer,ai=Z.endOffset,an,ak,af,aj;function am(av){var ap,at,au,ar,aq;ap=at=av?ab:ao;aq=av?"previousSibling":"nextSibling";root=c.getRoot();if(ap.nodeType==3&&!f(ap)){if(av?ag>0:ai<ap.nodeValue.length){return ap}}for(;;){if(at==root||(!al[0].block_expand&&I(at))){return at}for(ar=at[aq];ar;ar=ar[aq]){if(!K(ar)&&!f(ar)){return at}}at=at.parentNode}return ap}function ae(ap,aq){if(aq===q){aq=ap.nodeType===3?ap.length:ap.childNodes.length}while(ap&&ap.hasChildNodes()){ap=ap.childNodes[aq];if(ap){aq=ap.nodeType===3?ap.length:ap.childNodes.length}}return{node:ap,offset:aq}}if(ab.nodeType==1&&ab.hasChildNodes()){ak=ab.childNodes.length-1;ab=ab.childNodes[ag>ak?ak:ag];if(ab.nodeType==3){ag=0}}if(ao.nodeType==1&&ao.hasChildNodes()){ak=ao.childNodes.length-1;ao=ao.childNodes[ai>ak?ak:ai-1];if(ao.nodeType==3){ai=ao.nodeValue.length}}if(K(ab.parentNode)||K(ab)){ab=K(ab)?ab:ab.parentNode;ab=ab.nextSibling||ab;if(ab.nodeType==3){ag=0}}if(K(ao.parentNode)||K(ao)){ao=K(ao)?ao:ao.parentNode;ao=ao.previousSibling||ao;if(ao.nodeType==3){ai=ao.length}}if(al[0].inline){if(Z.collapsed){function ah(aq,av,ax){var au,ar,aw,ap;function at(az,aB){var aC,ay,aA=az.nodeValue;if(typeof(aB)=="undefined"){aB=ax?aA.length:0}if(ax){aC=aA.lastIndexOf(" ",aB);ay=aA.lastIndexOf("\u00a0",aB);aC=aC>ay?aC:ay;if(aC!==-1&&!ac){aC++}}else{aC=aA.indexOf(" ",aB);ay=aA.indexOf("\u00a0",aB);aC=aC!==-1&&(ay===-1||aC<ay)?aC:ay}return aC}if(aq.nodeType===3){aw=at(aq,av);if(aw!==-1){return{container:aq,offset:aw}}ap=aq}au=new u(aq,c.getParent(aq,I)||Y.getBody());while(ar=au[ax?"prev":"next"]()){if(ar.nodeType===3){ap=ar;aw=at(ar);if(aw!==-1){return{container:ar,offset:aw}}}else{if(I(ar)){break}}}if(ap){if(ax){av=0}else{av=ap.length}return{container:ap,offset:av}}}aj=ah(ab,ag,true);if(aj){ab=aj.container;ag=aj.offset}aj=ah(ao,ai);if(aj){ao=aj.container;ai=aj.offset}}af=ae(ao,ai);if(af.node){while(af.node&&af.offset===0&&af.node.previousSibling){af=ae(af.node.previousSibling)}if(af.node&&af.offset>0&&af.node.nodeType===3&&af.node.nodeValue.charAt(af.offset-1)===" "){if(af.offset>1){ao=af.node;ao.splitText(af.offset-1)}else{if(af.node.previousSibling){}}}}}if(al[0].inline||al[0].block_expand){if(!al[0].inline||(ab.nodeType!=3||ag===0)){ab=am(true)}if(!al[0].inline||(ao.nodeType!=3||ai===ao.nodeValue.length)){ao=am()}}if(al[0].selector&&al[0].expand!==V&&!al[0].inline){function ad(aq,ap){var ar,at,av,au;if(aq.nodeType==3&&aq.nodeValue.length==0&&aq[ap]){aq=aq[ap]}ar=n(aq);for(at=0;at<ar.length;at++){for(av=0;av<al.length;av++){au=al[av];if("collapsed" in au&&au.collapsed!==Z.collapsed){continue}if(c.is(ar[at],au.selector)){return ar[at]}}}return aq}ab=ad(ab,"previousSibling");ao=ad(ao,"nextSibling")}if(al[0].block||al[0].selector){function aa(aq,ap,at){var ar;if(!al[0].wrapper){ar=c.getParent(aq,al[0].block)}if(!ar){ar=c.getParent(aq.nodeType==3?aq.parentNode:aq,I)}if(ar&&al[0].wrapper){ar=n(ar,"ul,ol").reverse()[0]||ar}if(!ar){ar=aq;while(ar[ap]&&!I(ar[ap])){ar=ar[ap];if(g(ar,"br")){break}}}return ar||aq}ab=aa(ab,"previousSibling");ao=aa(ao,"nextSibling");if(al[0].block){if(!I(ab)){ab=am(true)}if(!I(ao)){ao=am()}}}if(ab.nodeType==1){ag=t(ab);ab=ab.parentNode}if(ao.nodeType==1){ai=t(ao)+1;ao=ao.parentNode}return{startContainer:ab,startOffset:ag,endContainer:ao,endOffset:ai}}function X(af,ae,ac,Z){var ab,aa,ad;if(!h(ac,af)){return V}if(af.remove!="all"){S(af.styles,function(ah,ag){ah=s(ah,ae);if(typeof(ag)==="number"){ag=ah;Z=0}if(!Z||g(O(Z,ag),ah)){c.setStyle(ac,ag,"")}ad=1});if(ad&&c.getAttrib(ac,"style")==""){ac.removeAttribute("style");ac.removeAttribute("data-mce-style")}S(af.attributes,function(ai,ag){var ah;ai=s(ai,ae);if(typeof(ag)==="number"){ag=ai;Z=0}if(!Z||g(c.getAttrib(Z,ag),ai)){if(ag=="class"){ai=c.getAttrib(ac,ag);if(ai){ah="";S(ai.split(/\s+/),function(aj){if(/mce\w+/.test(aj)){ah+=(ah?" ":"")+aj}});if(ah){c.setAttrib(ac,ag,ah);return}}}if(ag=="class"){ac.removeAttribute("className")}if(e.test(ag)){ac.removeAttribute("data-mce-"+ag)}ac.removeAttribute(ag)}});S(af.classes,function(ag){ag=s(ag,ae);if(!Z||c.hasClass(Z,ag)){c.removeClass(ac,ag)}});aa=c.getAttribs(ac);for(ab=0;ab<aa.length;ab++){if(aa[ab].nodeName.indexOf("_")!==0){return V}}}if(af.remove!="none"){o(ac,af);return E}}function o(ab,ac){var Z=ab.parentNode,aa;if(ac.block){if(!m){function ad(af,ae,ag){af=F(af,ae,ag);return !af||(af.nodeName=="BR"||I(af))}if(I(ab)&&!I(Z)){if(!ad(ab,V)&&!ad(ab.firstChild,E,1)){ab.insertBefore(c.create("br"),ab.firstChild)}if(!ad(ab,E)&&!ad(ab.lastChild,V,1)){ab.appendChild(c.create("br"))}}}else{if(Z==c.getRoot()){if(!ac.list_block||!g(ab,ac.list_block)){S(a.grep(ab.childNodes),function(ae){if(d(m,ae.nodeName.toLowerCase())){if(!aa){aa=R(ae,m)}else{aa.appendChild(ae)}}else{aa=0}})}}}}if(ac.selector&&ac.inline&&!g(ac.inline,ab)){return}c.remove(ab,1)}function F(aa,Z,ab){if(aa){Z=Z?"nextSibling":"previousSibling";for(aa=ab?aa:aa[Z];aa;aa=aa[Z]){if(aa.nodeType==1||!f(aa)){return aa}}}}function K(Z){return Z&&Z.nodeType==1&&Z.getAttribute("data-mce-type")=="bookmark"}function v(ad,ac){var Z,ab,aa;function af(ai,ah){if(ai.nodeName!=ah.nodeName){return V}function ag(ak){var al={};S(c.getAttribs(ak),function(am){var an=am.nodeName.toLowerCase();if(an.indexOf("_")!==0&&an!=="style"){al[an]=c.getAttrib(ak,an)}});return al}function aj(an,am){var al,ak;for(ak in an){if(an.hasOwnProperty(ak)){al=am[ak];if(al===q){return V}if(an[ak]!=al){return V}delete am[ak]}}for(ak in am){if(am.hasOwnProperty(ak)){return V}}return E}if(!aj(ag(ai),ag(ah))){return V}if(!aj(c.parseStyle(c.getAttrib(ai,"style")),c.parseStyle(c.getAttrib(ah,"style")))){return V}return E}if(ad&&ac){function ae(ah,ag){for(ab=ah;ab;ab=ab[ag]){if(ab.nodeType==3&&ab.nodeValue.length!==0){return ah}if(ab.nodeType==1&&!K(ab)){return ab}}return ah}ad=ae(ad,"previousSibling");ac=ae(ac,"nextSibling");if(af(ad,ac)){for(ab=ad.nextSibling;ab&&ab!=ac;){aa=ab;ab=ab.nextSibling;ad.appendChild(aa)}c.remove(ac);S(a.grep(ac.childNodes),function(ag){ad.appendChild(ag)});return ad}}return ac}function J(Z){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(Z)}function M(aa,ae){var Z,ad,ab,ac;Z=aa[ae?"startContainer":"endContainer"];ad=aa[ae?"startOffset":"endOffset"];if(Z.nodeType==1){ab=Z.childNodes.length-1;if(!ae&&ad){ad--}Z=Z.childNodes[ad>ab?ab:ad]}if(Z.nodeType===3&&ae&&ad>=Z.nodeValue.length){Z=new u(Z,Y.getBody()).next()||Z}if(Z.nodeType===3&&!ae&&ad==0){Z=new u(Z,Y.getBody()).prev()||Z}return Z}function T(ai,Z,ag){var al,aj="_mce_caret",aa=Y.settings.caret_debug;al=a.isGecko?"\u200B":H;function ab(an){var am=c.create("span",{id:aj,"data-mce-bogus":true,style:aa?"color:red":""});if(an){am.appendChild(Y.getDoc().createTextNode(al))}return am}function ah(an,am){while(an){if((an.nodeType===3&&an.nodeValue!==al)||an.childNodes.length>1){return false}if(am&&an.nodeType===1){am.push(an)}an=an.firstChild}return true}function ae(am){while(am){if(am.id===aj){return am}am=am.parentNode}}function ad(am){var an;if(am){an=new u(am,am);for(am=an.current();am;am=an.next()){if(am.nodeType===3){return am}}}}function ac(ao,an){var ap,am;if(!ao){ao=ae(r.getStart());if(!ao){while(ao=c.get(aj)){ac(ao,false)}}}else{am=r.getRng(true);if(ah(ao)){if(an!==false){am.setStartBefore(ao);am.setEndBefore(ao)}c.remove(ao)}else{ap=ad(ao);if(ap.nodeValue.charAt(0)===H){ap=ap.deleteData(0,1)}c.remove(ao,1)}r.setRng(am)}}function af(){var ao,am,at,ar,ap,an,aq;ao=r.getRng(true);ar=ao.startOffset;an=ao.startContainer;aq=an.nodeValue;am=ae(r.getStart());if(am){at=ad(am)}if(aq&&ar>0&&ar<aq.length&&/\w/.test(aq.charAt(ar))&&/\w/.test(aq.charAt(ar-1))){ap=r.getBookmark();ao.collapse(true);ao=p(ao,U(Z));ao=N.split(ao);W(Z,ag,ao);r.moveToBookmark(ap)}else{if(!am||at.nodeValue!==al){am=ab(true);at=am.firstChild;ao.insertNode(am);ar=1;W(Z,ag,am)}else{W(Z,ag,am)}r.setCursorLocation(at,ar)}}function ak(){var am=r.getRng(true),an,ap,at,ar,ao,aw,av=[],aq,au;an=am.startContainer;ap=am.startOffset;ao=an;if(an.nodeType==3){if(ap!=an.nodeValue.length||an.nodeValue===al){ar=true}ao=ao.parentNode}while(ao){if(A(ao,Z,ag)){aw=ao;break}if(ao.nextSibling){ar=true}av.push(ao);ao=ao.parentNode}if(!aw){return}if(ar){at=r.getBookmark();am.collapse(true);am=p(am,U(Z),true);am=N.split(am);D(Z,ag,am);r.moveToBookmark(at)}else{au=ab();ao=au;for(aq=av.length-1;aq>=0;aq--){ao.appendChild(av[aq].cloneNode(false));ao=ao.firstChild}ao.appendChild(c.doc.createTextNode(al));ao=ao.firstChild;c.insertAfter(au,aw);r.setCursorLocation(ao,1)}}if(!self._hasCaretEvents){Y.onBeforeGetContent.addToTop(function(){var am=[],an;if(ah(ae(r.getStart()),am)){an=am.length;while(an--){c.setAttrib(am[an],"data-mce-bogus","1")}}});a.each("onMouseUp onKeyUp".split(" "),function(am){Y[am].addToTop(function(){ac()})});Y.onKeyDown.addToTop(function(am,ao){var an=ao.keyCode;if(an==8||an==37||an==39){ac(ae(r.getStart()))}});self._hasCaretEvents=true}if(ai=="apply"){af()}else{ak()}}function Q(aa){var Z=aa.startContainer,af=aa.startOffset,ae,ad,ab,ac;if(Z.nodeType==3&&af>=Z.nodeValue.length-1){Z=Z.parentNode;af=t(Z)+1}if(Z.nodeType==1){ab=Z.childNodes;Z=ab[Math.min(af,ab.length-1)];ae=new u(Z);if(af>ab.length-1){ae.next()}for(ad=ae.current();ad;ad=ae.next()){if(ad.nodeType==3&&!f(ad)){ac=c.create("a",null,H);ad.parentNode.insertBefore(ac,ad);aa.setStart(ad,0);r.setRng(aa);c.remove(ac);return}}}}}})(tinymce);tinymce.onAddEditor.add(function(e,a){var d,h,g,c=a.settings;if(c.inline_styles){h=e.explode(c.font_size_legacy_values);function b(k,j){e.each(j,function(m,l){if(m){g.setStyle(k,l,m)}});g.rename(k,"span")}d={font:function(k,j){b(j,{backgroundColor:j.style.backgroundColor,color:j.color,fontFamily:j.face,fontSize:h[parseInt(j.size)-1]})},u:function(k,j){b(j,{textDecoration:"underline"})},strike:function(k,j){b(j,{textDecoration:"line-through"})}};function f(j,k){g=j.dom;if(c.convert_fonts_to_spans){e.each(g.select("font,u,strike",k.node),function(l){d[l.nodeName.toLowerCase()](a.dom,l)})}}a.onPreProcess.add(f);a.onSetContent.add(f);a.onInit.add(function(){a.selection.onSetContent.add(f)})}});tinyMCE.addI18n({en:{common:{more_colors:"More Colors...",invalid_data:"Error: Invalid values entered, these are marked in red.",popup_blocked:"Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.",clipboard_no_support:"Currently not supported by your browser, use keyboard shortcuts instead.",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",not_set:"-- Not Set --",class_name:"Class",browse:"Browse",close:"Close",cancel:"Cancel",update:"Update",insert:"Insert",apply:"Apply",edit_confirm:"Do you want to use the WYSIWYG mode for this textarea?",invalid_data_number:"{#field} must be a number",invalid_data_min:"{#field} must be a number greater than {#min}",invalid_data_size:"{#field} must be a number or percentage",value:"(value)"},contextmenu:{full:"Full",right:"Right",center:"Center",left:"Left",align:"Alignment"},insertdatetime:{day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sun",day_long:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday",months_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",months_long:"January,February,March,April,May,June,July,August,September,October,November,December",inserttime_desc:"Insert Time",insertdate_desc:"Insert Date",time_fmt:"%H:%M:%S",date_fmt:"%Y-%m-%d"},print:{print_desc:"Print"},preview:{preview_desc:"Preview"},directionality:{rtl_desc:"Direction Right to Left",ltr_desc:"Direction Left to Right"},layer:{content:"New layer...",absolute_desc:"Toggle Absolute Positioning",backward_desc:"Move Backward",forward_desc:"Move Forward",insertlayer_desc:"Insert New Layer"},save:{save_desc:"Save",cancel_desc:"Cancel All Changes"},nonbreaking:{nonbreaking_desc:"Insert Non-Breaking Space Character"},iespell:{download:"ieSpell not detected. Do you want to install it now?",iespell_desc:"Check Spelling"},advhr:{delta_height:"",delta_width:"",advhr_desc:"Insert Horizontal Line"},emotions:{delta_height:"",delta_width:"",emotions_desc:"Emotions"},searchreplace:{replace_desc:"Find/Replace",delta_width:"",delta_height:"",search_desc:"Find"},advimage:{delta_width:"",image_desc:"Insert/Edit Image",delta_height:""},advlink:{delta_height:"",delta_width:"",link_desc:"Insert/Edit Link"},xhtmlxtras:{attribs_delta_height:"",attribs_delta_width:"",ins_delta_height:"",ins_delta_width:"",del_delta_height:"",del_delta_width:"",acronym_delta_height:"",acronym_delta_width:"",abbr_delta_height:"",abbr_delta_width:"",cite_delta_height:"",cite_delta_width:"",attribs_desc:"Insert/Edit Attributes",ins_desc:"Insertion",del_desc:"Deletion",acronym_desc:"Acronym",abbr_desc:"Abbreviation",cite_desc:"Citation"},style:{delta_height:"",delta_width:"",desc:"Edit CSS Style"},paste:{plaintext_mode_stick:"Paste is now in plain text mode. Click again to toggle back to regular paste mode.",plaintext_mode:"Paste is now in plain text mode. Click again to toggle back to regular paste mode. After you paste something you will be returned to regular paste mode.",selectall_desc:"Select All",paste_word_desc:"Paste from Word",paste_text_desc:"Paste as Plain Text"},paste_dlg:{word_title:"Use Ctrl+V on your keyboard to paste the text into the window.",text_linebreaks:"Keep Linebreaks",text_title:"Use Ctrl+V on your keyboard to paste the text into the window."},table:{merge_cells_delta_height:"",merge_cells_delta_width:"",table_delta_height:"",table_delta_width:"",cellprops_delta_height:"",cellprops_delta_width:"",rowprops_delta_height:"",rowprops_delta_width:"",cell:"Cell",col:"Column",row:"Row",del:"Delete Table",copy_row_desc:"Copy Table Row",cut_row_desc:"Cut Table Row",paste_row_after_desc:"Paste Table Row After",paste_row_before_desc:"Paste Table Row Before",props_desc:"Table Properties",cell_desc:"Table Cell Properties",row_desc:"Table Row Properties",merge_cells_desc:"Merge Table Cells",split_cells_desc:"Split Merged Table Cells",delete_col_desc:"Delete Column",col_after_desc:"Insert Column After",col_before_desc:"Insert Column Before",delete_row_desc:"Delete Row",row_after_desc:"Insert Row After",row_before_desc:"Insert Row Before",desc:"Insert/Edit Table"},autosave:{warning_message:"If you restore the saved content, you will lose all the content that is currently in the editor.\n\nAre you sure you want to restore the saved content?",restore_content:"Restore auto-saved content.",unload_msg:"The changes you made will be lost if you navigate away from this page."},fullscreen:{desc:"Toggle Full Screen Mode"},media:{delta_height:"",delta_width:"",edit:"Edit Embedded Media",desc:"Insert/Edit Embedded Media"},fullpage:{desc:"Document Properties",delta_width:"",delta_height:""},template:{desc:"Insert Predefined Template Content"},visualchars:{desc:"Show/Hide Visual Control Characters"},spellchecker:{desc:"Toggle Spell Checker",menu:"Spell Checker Settings",ignore_word:"Ignore Word",ignore_words:"Ignore All",langs:"Languages",wait:"Please wait...",sug:"Suggestions",no_sug:"No Suggestions",no_mpell:"No misspellings found.",learn_word:"Learn word"},pagebreak:{desc:"Insert Page Break for Printing"},advlist:{types:"Types",def:"Default",lower_alpha:"Lower Alpha",lower_greek:"Lower Greek",lower_roman:"Lower Roman",upper_alpha:"Upper Alpha",upper_roman:"Upper Roman",circle:"Circle",disc:"Disc",square:"Square"},colors:{"333300":"Dark olive","993300":"Burnt orange","000000":"Black","003300":"Dark green","003366":"Dark azure","000080":"Navy Blue","333399":"Indigo","333333":"Very dark gray","800000":"Maroon",FF6600:"Orange","808000":"Olive","008000":"Green","008080":"Teal","0000FF":"Blue","666699":"Grayish blue","808080":"Gray",FF0000:"Red",FF9900:"Amber","99CC00":"Yellow green","339966":"Sea green","33CCCC":"Turquoise","3366FF":"Royal blue","800080":"Purple","999999":"Medium gray",FF00FF:"Magenta",FFCC00:"Gold",FFFF00:"Yellow","00FF00":"Lime","00FFFF":"Aqua","00CCFF":"Sky blue","993366":"Brown",C0C0C0:"Silver",FF99CC:"Pink",FFCC99:"Peach",FFFF99:"Light yellow",CCFFCC:"Pale green",CCFFFF:"Pale cyan","99CCFF":"Light sky blue",CC99FF:"Plum",FFFFFF:"White"},aria:{rich_text_area:"Rich Text Area"},wordcount:{words:"Words:"}}});(function(e){var d=e.DOM,b=e.dom.Event,h=e.extend,f=e.each,a=e.util.Cookie,g,c=e.explode;e.ThemeManager.requireLangPack("advanced");e.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(k,l){var m=this,n,j,p;m.editor=k;m.url=l;m.onResolveName=new e.util.Dispatcher(this);k.forcedHighContrastMode=k.settings.detect_highcontrast&&m._isHighContrast();k.settings.skin=k.forcedHighContrastMode?"highcontrast":k.settings.skin;m.settings=n=h({theme_advanced_path:true,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:k.settings.readonly},k.settings);if(!n.font_size_style_values){n.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"}if(e.is(n.theme_advanced_font_sizes,"string")){n.font_size_style_values=e.explode(n.font_size_style_values);n.font_size_classes=e.explode(n.font_size_classes||"");p={};k.settings.theme_advanced_font_sizes=n.theme_advanced_font_sizes;f(k.getParam("theme_advanced_font_sizes","","hash"),function(r,q){var o;if(q==r&&r>=1&&r<=7){q=r+" ("+m.sizes[r-1]+"pt)";o=n.font_size_classes[r-1];r=n.font_size_style_values[r-1]||(m.sizes[r-1]+"pt")}if(/^\s*\./.test(r)){o=r.replace(/\./g,"")}p[q]=o?{"class":o}:{fontSize:r}});n.theme_advanced_font_sizes=p}if((j=n.theme_advanced_path_location)&&j!="none"){n.theme_advanced_statusbar_location=n.theme_advanced_path_location}if(n.theme_advanced_statusbar_location=="none"){n.theme_advanced_statusbar_location=0}if(k.settings.content_css!==false){k.contentCSS.push(k.baseURI.toAbsolute(l+"/skins/"+k.settings.skin+"/content.css"))}k.onInit.add(function(){if(!k.settings.readonly){k.onNodeChange.add(m._nodeChanged,m);k.onKeyUp.add(m._updateUndoStatus,m);k.onMouseUp.add(m._updateUndoStatus,m);k.dom.bind(k.dom.getRoot(),"dragend",function(){m._updateUndoStatus(k)})}});k.onSetProgressState.add(function(r,o,s){var t,u=r.id,q;if(o){m.progressTimer=setTimeout(function(){t=r.getContainer();t=t.insertBefore(d.create("DIV",{style:"position:relative"}),t.firstChild);q=d.get(r.id+"_tbl");d.add(t,"div",{id:u+"_blocker","class":"mceBlocker",style:{width:q.clientWidth+2,height:q.clientHeight+2}});d.add(t,"div",{id:u+"_progress","class":"mceProgress",style:{left:q.clientWidth/2,top:q.clientHeight/2}})},s||0)}else{d.remove(u+"_blocker");d.remove(u+"_progress");clearTimeout(m.progressTimer)}});d.loadCSS(n.editor_css?k.documentBaseURI.toAbsolute(n.editor_css):l+"/skins/"+k.settings.skin+"/ui.css");if(n.skin_variant){d.loadCSS(l+"/skins/"+k.settings.skin+"/ui_"+n.skin_variant+".css")}},_isHighContrast:function(){var j,k=d.add(d.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});j=(d.getStyle(k,"background-color",true)+"").toLowerCase().replace(/ /g,"");d.remove(k);return j!="rgb(171,239,86)"&&j!="#abef56"},createControl:function(m,j){var k,l;if(l=j.createControl(m)){return l}switch(m){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if((k=this.controls[m])){return j.createButton(m,{title:"advanced."+k[0],cmd:k[1],ui:k[2],value:k[3]})}},execCommand:function(l,k,m){var j=this["_"+l];if(j){j.call(this,k,m);return true}return false},_importClasses:function(l){var j=this.editor,k=j.controlManager.get("styleselect");if(k.getLength()==0){f(j.dom.getClasses(),function(p,m){var n="style_"+m;j.formatter.register(n,{inline:"span",attributes:{"class":p["class"]},selector:"*"});k.add(p["class"],n)})}},_createStyleSelect:function(o){var l=this,j=l.editor,k=j.controlManager,m;m=k.createListBox("styleselect",{title:"advanced.style_select",onselect:function(p){var q,n=[];f(m.items,function(r){n.push(r.value)});j.focus();j.undoManager.add();q=j.formatter.matchAll(n);if(!p||q[0]==p){if(q[0]){j.formatter.remove(q[0])}}else{j.formatter.apply(p)}j.undoManager.add();j.nodeChanged();return false}});j.onInit.add(function(){var p=0,n=j.getParam("style_formats");if(n){f(n,function(q){var r,s=0;f(q,function(){s++});if(s>1){r=q.name=q.name||"style_"+(p++);j.formatter.register(r,q);m.add(q.title,r)}else{m.add(q.title)}})}else{f(j.getParam("theme_advanced_styles","","hash"),function(s,r){var q;if(s){q="style_"+(p++);j.formatter.register(q,{inline:"span",classes:s,selector:"*"});m.add(l.editor.translate(r),q)}})}});if(m.getLength()==0){m.onPostRender.add(function(p,q){if(!m.NativeListBox){b.add(q.id+"_text","focus",l._importClasses,l);b.add(q.id+"_text","mousedown",l._importClasses,l);b.add(q.id+"_open","focus",l._importClasses,l);b.add(q.id+"_open","mousedown",l._importClasses,l)}else{b.add(q.id,"focus",l._importClasses,l)}})}return m},_createFontSelect:function(){var l,k=this,j=k.editor;l=j.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(m){var n=l.items[l.selectedIndex];if(!m&&n){j.execCommand("FontName",false,n.value);return}j.execCommand("FontName",false,m);l.select(function(o){return m==o});if(n&&n.value==m){l.select(null)}return false}});if(l){f(j.getParam("theme_advanced_fonts",k.settings.theme_advanced_fonts,"hash"),function(n,m){l.add(j.translate(m),n,{style:n.indexOf("dings")==-1?"font-family:"+n:""})})}return l},_createFontSizeSelect:function(){var m=this,k=m.editor,n,l=0,j=[];n=k.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(o){var p=n.items[n.selectedIndex];if(!o&&p){p=p.value;if(p["class"]){k.formatter.toggle("fontsize_class",{value:p["class"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand("FontSize",false,p.fontSize)}return}if(o["class"]){k.focus();k.undoManager.add();k.formatter.toggle("fontsize_class",{value:o["class"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand("FontSize",false,o.fontSize)}n.select(function(q){return o==q});if(p&&(p.value.fontSize==o.fontSize||p.value["class"]&&p.value["class"]==o["class"])){n.select(null)}return false}});if(n){f(m.settings.theme_advanced_font_sizes,function(p,o){var q=p.fontSize;if(q>=1&&q<=7){q=m.sizes[parseInt(q)-1]+"pt"}n.add(o,p,{style:"font-size:"+q,"class":"mceFontSize"+(l++)+(" "+(p["class"]||""))})})}return n},_createBlockFormats:function(){var l,j={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},k=this;l=k.editor.controlManager.createListBox("formatselect",{title:"advanced.block",onselect:function(m){k.editor.execCommand("FormatBlock",false,m);return false}});if(l){f(k.editor.getParam("theme_advanced_blockformats",k.settings.theme_advanced_blockformats,"hash"),function(n,m){l.add(k.editor.translate(m!=n?m:j[n]),n,{"class":"mce_formatPreview mce_"+n})})}return l},_createForeColorMenu:function(){var n,k=this,l=k.settings,m={},j;if(l.theme_advanced_more_colors){m.more_colors_func=function(){k._mceColorPicker(0,{color:n.value,func:function(o){n.setColor(o)}})}}if(j=l.theme_advanced_text_colors){m.colors=j}if(l.theme_advanced_default_foreground_color){m.default_color=l.theme_advanced_default_foreground_color}m.title="advanced.forecolor_desc";m.cmd="ForeColor";m.scope=this;n=k.editor.controlManager.createColorSplitButton("forecolor",m);return n},_createBackColorMenu:function(){var n,k=this,l=k.settings,m={},j;if(l.theme_advanced_more_colors){m.more_colors_func=function(){k._mceColorPicker(0,{color:n.value,func:function(o){n.setColor(o)}})}}if(j=l.theme_advanced_background_colors){m.colors=j}if(l.theme_advanced_default_background_color){m.default_color=l.theme_advanced_default_background_color}m.title="advanced.backcolor_desc";m.cmd="HiliteColor";m.scope=this;n=k.editor.controlManager.createColorSplitButton("backcolor",m);return n},renderUI:function(l){var q,m,r,z=this,u=z.editor,A=z.settings,v,k,j;if(u.settings){u.settings.aria_label=A.aria_label+u.getLang("advanced.help_shortcut")}q=k=d.create("span",{role:"application","aria-labelledby":u.id+"_voice",id:u.id+"_parent","class":"mceEditor "+u.settings.skin+"Skin"+(A.skin_variant?" "+u.settings.skin+"Skin"+z._ufirst(A.skin_variant):"")});d.add(q,"span",{"class":"mceVoiceLabel",style:"display:none;",id:u.id+"_voice"},A.aria_label);if(!d.boxModel){q=d.add(q,"div",{"class":"mceOldBoxModel"})}q=v=d.add(q,"table",{role:"presentation",id:u.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});q=r=d.add(q,"tbody");switch((A.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":m=z._rowLayout(A,r,l);break;case"customlayout":m=u.execCallback("theme_advanced_custom_layout",A,r,l,k);break;default:m=z._simpleLayout(A,r,l,k)}q=l.targetNode;j=v.rows;d.addClass(j[0],"mceFirst");d.addClass(j[j.length-1],"mceLast");f(d.select("tr",r),function(o){d.addClass(o.firstChild,"mceFirst");d.addClass(o.childNodes[o.childNodes.length-1],"mceLast")});if(d.get(A.theme_advanced_toolbar_container)){d.get(A.theme_advanced_toolbar_container).appendChild(k)}else{d.insertAfter(k,q)}b.add(u.id+"_path_row","click",function(n){n=n.target;if(n.nodeName=="A"){z._sel(n.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return b.cancel(n)}});if(!u.getParam("accessibility_focus")){b.add(d.add(k,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(u.id).focus()})}if(A.theme_advanced_toolbar_location=="external"){l.deltaHeight=0}z.deltaHeight=l.deltaHeight;l.targetNode=null;u.onKeyDown.add(function(p,n){var s=121,o=122;if(n.altKey){if(n.keyCode===s){if(e.isWebKit){window.focus()}z.toolbarGroup.focus();return b.cancel(n)}else{if(n.keyCode===o){d.get(p.id+"_path_row").focus();return b.cancel(n)}}}});u.addShortcut("alt+0","","mceShortcuts",z);return{iframeContainer:m,editorContainer:u.id+"_parent",sizeContainer:v,deltaHeight:l.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:e.majorVersion+"."+e.minorVersion}},resizeBy:function(j,k){var l=d.get(this.editor.id+"_ifr");this.resizeTo(l.clientWidth+j,l.clientHeight+k)},resizeTo:function(j,n,l){var k=this.editor,m=this.settings,o=d.get(k.id+"_tbl"),p=d.get(k.id+"_ifr");j=Math.max(m.theme_advanced_resizing_min_width||100,j);n=Math.max(m.theme_advanced_resizing_min_height||100,n);j=Math.min(m.theme_advanced_resizing_max_width||65535,j);n=Math.min(m.theme_advanced_resizing_max_height||65535,n);d.setStyle(o,"height","");d.setStyle(p,"height",n);if(m.theme_advanced_resize_horizontal){d.setStyle(o,"width","");d.setStyle(p,"width",j);if(j<o.clientWidth){j=o.clientWidth;d.setStyle(p,"width",o.clientWidth)}}if(l&&m.theme_advanced_resizing_use_cookie){a.setHash("TinyMCE_"+k.id+"_size",{cw:j,ch:n})}},destroy:function(){var j=this.editor.id;b.clear(j+"_resize");b.clear(j+"_path_row");b.clear(j+"_external_close")},_simpleLayout:function(C,u,l,j){var B=this,v=B.editor,z=C.theme_advanced_toolbar_location,q=C.theme_advanced_statusbar_location,m,k,r,A;if(C.readonly){m=d.add(u,"tr");m=k=d.add(m,"td",{"class":"mceIframeContainer"});return k}if(z=="top"){B._addToolbars(u,l)}if(z=="external"){m=A=d.create("div",{style:"position:relative"});m=d.add(m,"div",{id:v.id+"_external","class":"mceExternalToolbar"});d.add(m,"a",{id:v.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});m=d.add(m,"table",{id:v.id+"_tblext",cellSpacing:0,cellPadding:0});r=d.add(m,"tbody");if(j.firstChild.className=="mceOldBoxModel"){j.firstChild.appendChild(A)}else{j.insertBefore(A,j.firstChild)}B._addToolbars(r,l);v.onMouseUp.add(function(){var o=d.get(v.id+"_external");d.show(o);d.hide(g);var n=b.add(v.id+"_external_close","click",function(){d.hide(v.id+"_external");b.remove(v.id+"_external_close","click",n)});d.show(o);d.setStyle(o,"top",0-d.getRect(v.id+"_tblext").h-1);d.hide(o);d.show(o);o.style.filter="";g=v.id+"_external";o=null})}if(q=="top"){B._addStatusBar(u,l)}if(!C.theme_advanced_toolbar_container){m=d.add(u,"tr");m=k=d.add(m,"td",{"class":"mceIframeContainer"})}if(z=="bottom"){B._addToolbars(u,l)}if(q=="bottom"){B._addStatusBar(u,l)}return k},_rowLayout:function(A,p,l){var z=this,q=z.editor,v,B,j=q.controlManager,m,k,u,r;v=A.theme_advanced_containers_default_class||"";B=A.theme_advanced_containers_default_align||"center";f(c(A.theme_advanced_containers||""),function(s,o){var n=A["theme_advanced_container_"+s]||"";switch(s.toLowerCase()){case"mceeditor":m=d.add(p,"tr");m=k=d.add(m,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":z._addStatusBar(p,l);break;default:r=(A["theme_advanced_container_"+s+"_align"]||B).toLowerCase();r="mce"+z._ufirst(r);m=d.add(d.add(p,"tr"),"td",{"class":"mceToolbar "+(A["theme_advanced_container_"+s+"_class"]||v)+" "+r||B});u=j.createToolbar("toolbar"+o);z._addControls(n,u);d.setHTML(m,u.renderHTML());l.deltaHeight-=A.theme_advanced_row_height}});return k},_addControls:function(k,j){var l=this,m=l.settings,n,o=l.editor.controlManager;if(m.theme_advanced_disable&&!l._disabled){n={};f(c(m.theme_advanced_disable),function(p){n[p]=1});l._disabled=n}else{n=l._disabled}f(c(k),function(q){var p;if(n&&n[q]){return}if(q=="tablecontrols"){f(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(r){r=l.createControl(r,o);if(r){j.add(r)}});return}p=l.createControl(q,o);if(p){j.add(p)}})},_addToolbars:function(A,k){var D=this,p,m,r=D.editor,E=D.settings,C,j=r.controlManager,u,l,q=[],B,z;z=j.createToolbarGroup("toolbargroup",{name:r.getLang("advanced.toolbar"),tab_focus_toolbar:r.getParam("theme_advanced_tab_focus_toolbar")});D.toolbarGroup=z;B=E.theme_advanced_toolbar_align.toLowerCase();B="mce"+D._ufirst(B);l=d.add(d.add(A,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+B,role:"presentation"});for(p=1;(C=E["theme_advanced_buttons"+p]);p++){m=j.createToolbar("toolbar"+p,{"class":"mceToolbarRow"+p});if(E["theme_advanced_buttons"+p+"_add"]){C+=","+E["theme_advanced_buttons"+p+"_add"]}if(E["theme_advanced_buttons"+p+"_add_before"]){C=E["theme_advanced_buttons"+p+"_add_before"]+","+C}D._addControls(C,m);z.add(m);k.deltaHeight-=E.theme_advanced_row_height}q.push(z.renderHTML());q.push(d.createHTML("a",{href:"#",accesskey:"z",title:r.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+r.id+"').focus();"},"<!-- IE -->"));d.setHTML(l,q.join(""))},_addStatusBar:function(p,k){var l,z=this,q=z.editor,A=z.settings,j,u,v,m;l=d.add(p,"tr");l=m=d.add(l,"td",{"class":"mceStatusbar"});l=d.add(l,"div",{id:q.id+"_path_row",role:"group","aria-labelledby":q.id+"_path_voice"});if(A.theme_advanced_path){d.add(l,"span",{id:q.id+"_path_voice"},q.translate("advanced.path"));d.add(l,"span",{},": ")}else{d.add(l,"span",{},"&#160;")}if(A.theme_advanced_resizing){d.add(m,"a",{id:q.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize",tabIndex:"-1"});if(A.theme_advanced_resizing_use_cookie){q.onPostRender.add(function(){var n=a.getHash("TinyMCE_"+q.id+"_size"),r=d.get(q.id+"_tbl");if(!n){return}z.resizeTo(n.cw,n.ch)})}q.onPostRender.add(function(){b.add(q.id+"_resize","click",function(n){n.preventDefault()});b.add(q.id+"_resize","mousedown",function(H){var t,r,s,o,G,D,E,J,n,I,B;function C(K){K.preventDefault();n=E+(K.screenX-G);I=J+(K.screenY-D);z.resizeTo(n,I)}function F(K){b.remove(d.doc,"mousemove",t);b.remove(q.getDoc(),"mousemove",r);b.remove(d.doc,"mouseup",s);b.remove(q.getDoc(),"mouseup",o);n=E+(K.screenX-G);I=J+(K.screenY-D);z.resizeTo(n,I,true)}H.preventDefault();G=H.screenX;D=H.screenY;B=d.get(z.editor.id+"_ifr");E=n=B.clientWidth;J=I=B.clientHeight;t=b.add(d.doc,"mousemove",C);r=b.add(q.getDoc(),"mousemove",C);s=b.add(d.doc,"mouseup",F);o=b.add(q.getDoc(),"mouseup",F)})})}k.deltaHeight-=21;l=p=null},_updateUndoStatus:function(k){var j=k.controlManager,l=k.undoManager;j.setDisabled("undo",!l.hasUndo()&&!l.typing);j.setDisabled("redo",!l.hasRedo())},_nodeChanged:function(o,u,H,r,I){var C=this,G,J=0,B,K,D=C.settings,A,l,z,F,m,k,j;e.each(C.stateControls,function(n){u.setActive(n,o.queryCommandState(C.controls[n][1]))});function q(p){var s,n=I.parents,t=p;if(typeof(p)=="string"){t=function(v){return v.nodeName==p}}for(s=0;s<n.length;s++){if(t(n[s])){return n[s]}}}u.setActive("visualaid",o.hasVisual);C._updateUndoStatus(o);u.setDisabled("outdent",!o.queryCommandState("Outdent"));G=q("A");if(K=u.get("link")){if(!G||!G.name){K.setDisabled(!G&&r);K.setActive(!!G)}}if(K=u.get("unlink")){K.setDisabled(!G&&r);K.setActive(!!G&&!G.name)}if(K=u.get("anchor")){K.setActive(!r&&!!G&&G.name)}G=q("IMG");if(K=u.get("image")){K.setActive(!r&&!!G&&H.className.indexOf("mceItem")==-1)}if(K=u.get("styleselect")){C._importClasses();k=[];f(K.items,function(n){k.push(n.value)});j=o.formatter.matchAll(k);K.select(j[0])}if(K=u.get("formatselect")){G=q(d.isBlock);if(G){K.select(G.nodeName.toLowerCase())}}q(function(p){if(p.nodeName==="SPAN"){if(!A&&p.className){A=p.className}}if(o.dom.is(p,D.theme_advanced_font_selector)){if(!l&&p.style.fontSize){l=p.style.fontSize}if(!z&&p.style.fontFamily){z=p.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()}if(!F&&p.style.color){F=p.style.color}if(!m&&p.style.backgroundColor){m=p.style.backgroundColor}}return false});if(K=u.get("fontselect")){K.select(function(n){return n.replace(/^([^,]+).*/,"$1").toLowerCase()==z})}if(K=u.get("fontsizeselect")){if(D.theme_advanced_runtime_fontsize&&!l&&!A){l=o.dom.getStyle(H,"fontSize",true)}K.select(function(n){if(n.fontSize&&n.fontSize===l){return true}if(n["class"]&&n["class"]===A){return true}})}if(D.theme_advanced_show_current_color){function E(p,n){if(K=u.get(p)){if(!n){n=K.settings.default_color}if(n!==K.value){K.displayColor(n)}}}E("forecolor",F);E("backcolor",m)}if(D.theme_advanced_show_current_color){function E(p,n){if(K=u.get(p)){if(!n){n=K.settings.default_color}if(n!==K.value){K.displayColor(n)}}}E("forecolor",F);E("backcolor",m)}if(D.theme_advanced_path&&D.theme_advanced_statusbar_location){G=d.get(o.id+"_path")||d.add(o.id+"_path_row","span",{id:o.id+"_path"});if(C.statusKeyboardNavigation){C.statusKeyboardNavigation.destroy();C.statusKeyboardNavigation=null}d.setHTML(G,"");q(function(L){var p=L.nodeName.toLowerCase(),s,v,t="";if(L.nodeType!=1||p==="br"||L.getAttribute("data-mce-bogus")||d.hasClass(L,"mceItemHidden")||d.hasClass(L,"mceItemRemoved")){return}if(e.isIE&&L.scopeName!=="HTML"){p=L.scopeName+":"+p}p=p.replace(/mce\:/g,"");switch(p){case"b":p="strong";break;case"i":p="em";break;case"img":if(B=d.getAttrib(L,"src")){t+="src: "+B+" "}break;case"a":if(B=d.getAttrib(L,"name")){t+="name: "+B+" ";p+="#"+B}if(B=d.getAttrib(L,"href")){t+="href: "+B+" "}break;case"font":if(B=d.getAttrib(L,"face")){t+="font: "+B+" "}if(B=d.getAttrib(L,"size")){t+="size: "+B+" "}if(B=d.getAttrib(L,"color")){t+="color: "+B+" "}break;case"span":if(B=d.getAttrib(L,"style")){t+="style: "+B+" "}break}if(B=d.getAttrib(L,"id")){t+="id: "+B+" "}if(B=L.className){B=B.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(B){t+="class: "+B+" ";if(d.isBlock(L)||p=="img"||p=="span"){p+="."+B}}}p=p.replace(/(html:)/g,"");p={name:p,node:L,title:t};C.onResolveName.dispatch(C,p);t=p.title;p=p.name;v=d.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:t,"class":"mcePath_"+(J++)},p);if(G.hasChildNodes()){G.insertBefore(d.create("span",{"aria-hidden":"true"},"\u00a0\u00bb "),G.firstChild);G.insertBefore(v,G.firstChild)}else{G.appendChild(v)}},o.getBody());if(d.select("a",G).length>0){C.statusKeyboardNavigation=new e.ui.KeyboardNavigation({root:o.id+"_path_row",items:d.select("a",G),excludeFromTabOrder:true,onCancel:function(){o.focus()}},d)}}},_sel:function(j){this.editor.execCommand("mceSelectNodeDepth",false,j)},_mceInsertAnchor:function(l,k){var j=this.editor;j.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(j.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(j.getLang("advanced.anchor_delta_height",0)),inline:true},{theme_url:this.url})},_mceCharMap:function(){var j=this.editor;j.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(j.getLang("advanced.charmap_delta_width",0)),height:265+parseInt(j.getLang("advanced.charmap_delta_height",0)),inline:true},{theme_url:this.url})},_mceHelp:function(){var j=this.editor;j.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceShortcuts:function(){var j=this.editor;j.windowManager.open({url:this.url+"/shortcuts.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(l,k){var j=this.editor;k=k||{};j.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(j.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(j.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:k.color,func:k.func,theme_url:this.url})},_mceCodeEditor:function(k,l){var j=this.editor;j.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(j.getParam("theme_advanced_source_editor_width",720)),height:parseInt(j.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceImage:function(k,l){var j=this.editor;if(j.dom.getAttrib(j.selection.getNode(),"class").indexOf("mceItem")!=-1){return}j.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(j.getLang("advanced.image_delta_width",0)),height:275+parseInt(j.getLang("advanced.image_delta_height",0)),inline:true},{theme_url:this.url})},_mceLink:function(k,l){var j=this.editor;j.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(j.getLang("advanced.link_delta_width",0)),height:200+parseInt(j.getLang("advanced.link_delta_height",0)),inline:true},{theme_url:this.url})},_mceNewDocument:function(){var j=this.editor;j.windowManager.confirm("advanced.newdocument",function(k){if(k){j.execCommand("mceSetContent",false,"")}})},_mceForeColor:function(){var j=this;this._mceColorPicker(0,{color:j.fgColor,func:function(k){j.fgColor=k;j.editor.execCommand("ForeColor",false,k)}})},_mceBackColor:function(){var j=this;this._mceColorPicker(0,{color:j.bgColor,func:function(k){j.bgColor=k;j.editor.execCommand("HiliteColor",false,k)}})},_ufirst:function(j){return j.substring(0,1).toUpperCase()+j.substring(1)}});e.ThemeManager.add("advanced",e.themes.AdvancedTheme)}(tinymce));tinyMCE.addI18n("en.advanced",{underline_desc:"Underline (Ctrl+U)",italic_desc:"Italic (Ctrl+I)",bold_desc:"Bold (Ctrl+B)",dd:"Definition Description",dt:"Definition Term ",samp:"Code Sample",code:"Code",blockquote:"Block Quote",h6:"Heading 6",h5:"Heading 5",h4:"Heading 4",h3:"Heading 3",h2:"Heading 2",h1:"Heading 1",pre:"Preformatted",address:"Address",div:"DIV",paragraph:"Paragraph",block:"Format",fontdefault:"Font Family",font_size:"Font Size",style_select:"Styles",anchor_delta_height:"",anchor_delta_width:"",charmap_delta_height:"",charmap_delta_width:"",colorpicker_delta_height:"",colorpicker_delta_width:"",link_delta_height:"",link_delta_width:"",image_delta_height:"",image_delta_width:"",more_colors:"More Colors...",toolbar_focus:"Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X",newdocument:"Are you sure you want clear all contents?",path:"Path",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",blockquote_desc:"Block Quote",help_desc:"Help",newdocument_desc:"New Document",image_props_desc:"Image Properties",paste_desc:"Paste (Ctrl+V)",copy_desc:"Copy (Ctrl+C)",cut_desc:"Cut (Ctrl+X)",anchor_desc:"Insert/Edit Anchor",visualaid_desc:"show/Hide Guidelines/Invisible Elements",charmap_desc:"Insert Special Character",backcolor_desc:"Select Background Color",forecolor_desc:"Select Text Color",custom1_desc:"Your Custom Description Here",removeformat_desc:"Remove Formatting",hr_desc:"Insert Horizontal Line",sup_desc:"Superscript",sub_desc:"Subscript",code_desc:"Edit HTML Source",cleanup_desc:"Cleanup Messy Code",image_desc:"Insert/Edit Image",unlink_desc:"Unlink",link_desc:"Insert/Edit Link",redo_desc:"Redo (Ctrl+Y)",undo_desc:"Undo (Ctrl+Z)",indent_desc:"Increase Indent",outdent_desc:"Decrease Indent",numlist_desc:"Insert/Remove Numbered List",bullist_desc:"Insert/Remove Bulleted List",justifyfull_desc:"Align Full",justifyright_desc:"Align Right",justifycenter_desc:"Align Center",justifyleft_desc:"Align Left",striketrough_desc:"Strikethrough",help_shortcut:"Press ALT-F10 for toolbar. Press ALT-0 for help",rich_text_area:"Rich Text Area",shortcuts_desc:"Accessability Help",toolbar:"Toolbar"});(function(){var c=tinymce.each,a={paste_auto_cleanup_on_paste:true,paste_enable_default_filters:true,paste_block_drop:false,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:false,paste_remove_styles:false,paste_remove_styles_if_webkit:true,paste_convert_middot_lists:true,paste_convert_headers_to_strong:false,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:false,paste_text_sticky:false,paste_text_sticky_default:false,paste_text_notifyalways:false,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};function b(d,e){return d.getParam(e,a[e])}tinymce.create("tinymce.plugins.PastePlugin",{init:function(d,e){var f=this;f.editor=d;f.url=e;f.onPreProcess=new tinymce.util.Dispatcher(f);f.onPostProcess=new tinymce.util.Dispatcher(f);f.onPreProcess.add(f._preProcess);f.onPostProcess.add(f._postProcess);f.onPreProcess.add(function(j,k){d.execCallback("paste_preprocess",j,k)});f.onPostProcess.add(function(j,k){d.execCallback("paste_postprocess",j,k)});d.onKeyDown.addToTop(function(j,k){if(((tinymce.isMac?k.metaKey:k.ctrlKey)&&k.keyCode==86)||(k.shiftKey&&k.keyCode==45)){return false}});d.pasteAsPlainText=b(d,"paste_text_sticky_default");function h(m,k){var l=d.dom,j;f.onPreProcess.dispatch(f,m);m.node=l.create("div",0,m.content);if(tinymce.isGecko){j=d.selection.getRng(true);if(j.startContainer==j.endContainer&&j.startContainer.nodeType==3){if(m.node.childNodes.length===1&&/^(p|h[1-6]|pre)$/i.test(m.node.firstChild.nodeName)&&m.content.indexOf("__MCE_ITEM__")===-1){l.remove(m.node.firstChild,true)}}}f.onPostProcess.dispatch(f,m);m.content=d.serializer.serialize(m.node,{getInner:1,forced_root_block:""});if((!k)&&(d.pasteAsPlainText)){f._insertPlainText(m.content);if(!b(d,"paste_text_sticky")){d.pasteAsPlainText=false;d.controlManager.setActive("pastetext",false)}}else{f._insert(m.content)}}d.addCommand("mceInsertClipboardContent",function(j,k){h(k,true)});if(!b(d,"paste_text_use_dialog")){d.addCommand("mcePasteText",function(k,j){var l=tinymce.util.Cookie;d.pasteAsPlainText=!d.pasteAsPlainText;d.controlManager.setActive("pastetext",d.pasteAsPlainText);if((d.pasteAsPlainText)&&(!l.get("tinymcePasteText"))){if(b(d,"paste_text_sticky")){d.windowManager.alert(d.translate("paste.plaintext_mode_sticky"))}else{d.windowManager.alert(d.translate("paste.plaintext_mode"))}if(!b(d,"paste_text_notifyalways")){l.set("tinymcePasteText","1",new Date(new Date().getFullYear()+1,12,31))}}})}d.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"});d.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"});function g(t){var m,q,k,u,l=d.selection,p=d.dom,r=d.getBody(),j,s;if(t.clipboardData||p.doc.dataTransfer){s=(t.clipboardData||p.doc.dataTransfer).getData("Text");if(d.pasteAsPlainText){t.preventDefault();h({content:p.encode(s).replace(/\r?\n/g,"<br />")});return}}if(p.get("_mcePaste")){return}m=p.add(r,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"\uFEFF\uFEFF");if(r!=d.getDoc().body){j=p.getPos(d.selection.getStart(),r).y}else{j=r.scrollTop+p.getViewPort(d.getWin()).y}p.setStyles(m,{position:"absolute",left:tinymce.isGecko?-40:0,top:j-25,width:1,height:1,overflow:"hidden"});if(tinymce.isIE){u=l.getRng();k=p.doc.body.createTextRange();k.moveToElementText(m);k.execCommand("Paste");p.remove(m);if(m.innerHTML==="\uFEFF\uFEFF"){d.execCommand("mcePasteWord");t.preventDefault();return}l.setRng(u);l.setContent("");setTimeout(function(){h({content:m.innerHTML})},0);return tinymce.dom.Event.cancel(t)}else{function o(n){n.preventDefault()}p.bind(d.getDoc(),"mousedown",o);p.bind(d.getDoc(),"keydown",o);q=d.selection.getRng();m=m.firstChild;k=d.getDoc().createRange();k.setStart(m,0);k.setEnd(m,2);l.setRng(k);window.setTimeout(function(){var v="",n;if(!p.select("div.mcePaste > div.mcePaste").length){n=p.select("div.mcePaste");c(n,function(A){var z=A.firstChild;if(z&&z.nodeName=="DIV"&&z.style.marginTop&&z.style.backgroundColor){p.remove(z,1)}c(p.select("span.Apple-style-span",A),function(B){p.remove(B,1)});c(p.select("br[data-mce-bogus]",A),function(B){p.remove(B)});if(A.parentNode.className!="mcePaste"){v+=A.innerHTML}})}else{v="<p>"+p.encode(s).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>"}c(p.select("div.mcePaste"),function(z){p.remove(z)});if(q){l.setRng(q)}h({content:v});p.unbind(d.getDoc(),"mousedown",o);p.unbind(d.getDoc(),"keydown",o)},0)}}if(b(d,"paste_auto_cleanup_on_paste")){if(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)){d.onKeyDown.addToTop(function(j,k){if(((tinymce.isMac?k.metaKey:k.ctrlKey)&&k.keyCode==86)||(k.shiftKey&&k.keyCode==45)){g(k)}})}else{d.onPaste.addToTop(function(j,k){return g(k)})}}d.onInit.add(function(){d.controlManager.setActive("pastetext",d.pasteAsPlainText);if(b(d,"paste_block_drop")){d.dom.bind(d.getBody(),["dragend","dragover","draggesture","dragdrop","drop","drag"],function(j){j.preventDefault();j.stopPropagation();return false})}});f._legacySupport()},getInfo:function(){return{longname:"Paste text/word",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(g,e){var l=this.editor,k=e.content,q=tinymce.grep,p=tinymce.explode,f=tinymce.trim,m,j;function d(h){c(h,function(o){if(o.constructor==RegExp){k=k.replace(o,"")}else{k=k.replace(o[0],o[1])}})}if(l.settings.paste_enable_default_filters==false){return}if(tinymce.isIE&&document.documentMode>=9){d([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"]]);d([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(k)||e.wordContent){e.wordContent=true;d([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]);if(b(l,"paste_convert_headers_to_strong")){k=k.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>")}if(b(l,"paste_convert_middot_lists")){d([[/<!--\[if !supportLists\]-->/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]])}d([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"]]);do{m=k.length;k=k.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1")}while(m!=k.length);if(b(l,"paste_retain_style_properties").replace(/^none$/i,"").length==0){k=k.replace(/<\/?span[^>]*>/gi,"")}else{d([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(o,h){return(h.length>0)?h.replace(/./," ").slice(Math.floor(h.length/2)).split("").join("\u00a0"):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(u,h,t){var v=[],o=0,r=p(f(t).replace(/&quot;/gi,"'"),";");c(r,function(s){var z,B,C=p(s,":");function A(D){return D+((D!=="0")&&(/\d$/.test(D)))?"px":""}if(C.length==2){z=C[0].toLowerCase();B=C[1].toLowerCase();switch(z){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":v[o++]=z.replace(/^mso-|-alt$/g,"")+":"+A(B);return;case"horiz-align":v[o++]="text-align:"+B;return;case"vert-align":v[o++]="vertical-align:"+B;return;case"font-color":case"mso-foreground":v[o++]="color:"+B;return;case"mso-background":case"mso-highlight":v[o++]="background:"+B;return;case"mso-default-height":v[o++]="min-height:"+A(B);return;case"mso-default-width":v[o++]="min-width:"+A(B);return;case"mso-padding-between-alt":v[o++]="border-collapse:separate;border-spacing:"+A(B);return;case"text-line-through":if((B=="single")||(B=="double")){v[o++]="text-decoration:line-through"}return;case"mso-zero-height":if(B=="yes"){v[o++]="display:none"}return}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(z)){return}v[o++]=z+":"+C[1]}});if(o>0){return h+' style="'+v.join(";")+'"'}else{return h}}]])}}if(b(l,"paste_convert_headers_to_strong")){d([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]])}d([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]);j=b(l,"paste_strip_class_attributes");if(j!=="none"){function n(r,o){if(j==="all"){return""}var h=q(p(o.replace(/^(["'])(.*)\1$/,"$2")," "),function(s){return(/^(?!mso)/i.test(s))});return h.length?' class="'+h.join(" ")+'"':""}k=k.replace(/ class="([^"]+)"/gi,n);k=k.replace(/ class=([\-\w]+)/gi,n)}if(b(l,"paste_remove_spans")){k=k.replace(/<\/?span[^>]*>/gi,"")}e.content=k},_postProcess:function(g,j){var f=this,e=f.editor,h=e.dom,d;if(e.settings.paste_enable_default_filters==false){return}if(j.wordContent){c(h.select("a",j.node),function(k){if(!k.href||k.href.indexOf("#_Toc")!=-1){h.remove(k,1)}});if(b(e,"paste_convert_middot_lists")){f._convertLists(g,j)}d=b(e,"paste_retain_style_properties");if((tinymce.is(d,"string"))&&(d!=="all")&&(d!=="*")){d=tinymce.explode(d.replace(/^none$/i,""));c(h.select("*",j.node),function(n){var o={},l=0,m,p,k;if(d){for(m=0;m<d.length;m++){p=d[m];k=h.getStyle(n,p);if(k){o[p]=k;l++}}}h.setAttrib(n,"style","");if(d&&l>0){h.setStyles(n,o)}else{if(n.nodeName=="SPAN"&&!n.className){h.remove(n,true)}}})}}if(b(e,"paste_remove_styles")||(b(e,"paste_remove_styles_if_webkit")&&tinymce.isWebKit)){c(h.select("*[style]",j.node),function(k){k.removeAttribute("style");k.removeAttribute("data-mce-style")})}else{if(tinymce.isWebKit){c(h.select("*",j.node),function(k){k.removeAttribute("data-mce-style")})}}},_convertLists:function(g,e){var j=g.editor.dom,h,m,d=-1,f,n=[],l,k;c(j.select("p",e.node),function(u){var r,v="",t,s,o,q;for(r=u.firstChild;r&&r.nodeType==3;r=r.nextSibling){v+=r.nodeValue}v=u.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g,"\u00a0");if(/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(v)){t="ul"}if(/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(v)){t="ol"}if(t){f=parseFloat(u.style.marginLeft||0);if(f>d){n.push(f)}if(!h||t!=l){h=j.create(t);j.insertAfter(h,u)}else{if(f>d){h=m.appendChild(j.create(t))}else{if(f<d){o=tinymce.inArray(n,f);q=j.getParents(h.parentNode,t);h=q[q.length-1-o]||h}}}c(j.select("span",u),function(z){var p=z.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");if(t=="ul"&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(p)){j.remove(z)}else{if(/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(p)){j.remove(z)}}});s=u.innerHTML;if(t=="ul"){s=u.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,"")}else{s=u.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,"")}m=h.appendChild(j.create("li",0,s));j.remove(u);d=f;l=t}else{h=d=0}});k=e.node.innerHTML;if(k.indexOf("__MCE_ITEM__")!=-1){e.node.innerHTML=k.replace(/__MCE_ITEM__/g,"")}},_insert:function(f,d){var e=this.editor,g=e.selection.getRng();if(!e.selection.isCollapsed()&&g.startContainer!=g.endContainer){e.getDoc().execCommand("Delete",false,null)}e.execCommand("mceInsertContent",false,f,{skip_undo:d})},_insertPlainText:function(g){var d=this.editor,e=b(d,"paste_text_linebreaktype"),j=b(d,"paste_text_replacements"),f=tinymce.is;function h(k){c(k,function(l){if(l.constructor==RegExp){g=g.replace(l,"")}else{g=g.replace(l[0],l[1])}})}if((typeof(g)==="string")&&(g.length>0)){if(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(g)){h([/[\n\r]+/g])}else{h([/\r+/g])}h([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"]]);g=d.dom.decode(tinymce.html.Entities.encodeRaw(g));if(f(j,"array")){h(j)}else{if(f(j,"string")){h(new RegExp(j,"gi"))}}if(e=="none"){h([[/\n+/g," "]])}else{if(e=="br"){h([[/\n/g,"<br />"]])}else{if(e=="p"){h([[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]])}else{h([[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]])}}}d.execCommand("mceInsertContent",false,g)}},_legacySupport:function(){var e=this,d=e.editor;d.addCommand("mcePasteWord",function(){d.windowManager.open({file:e.url+"/pasteword.htm",width:parseInt(b(d,"paste_dialog_width")),height:parseInt(b(d,"paste_dialog_height")),inline:1})});if(b(d,"paste_text_use_dialog")){d.addCommand("mcePasteText",function(){d.windowManager.open({file:e.url+"/pastetext.htm",width:parseInt(b(d,"paste_dialog_width")),height:parseInt(b(d,"paste_dialog_height")),inline:1})})}d.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}});tinymce.PluginManager.add("paste",tinymce.plugins.PastePlugin)})();(function(){var a=tinymce.util.JSONRequest,c=tinymce.each,b=tinymce.DOM;tinymce.create("tinymce.plugins.SpellcheckerPlugin",{getInfo:function(){return{longname:"Spellchecker",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/spellchecker",version:tinymce.majorVersion+"."+tinymce.minorVersion}},init:function(e,f){var g=this,d;g.url=f;g.editor=e;g.rpcUrl=e.getParam("spellchecker_rpc_url","{backend}");if(g.rpcUrl=="{backend}"){if(tinymce.isIE){return}g.hasSupport=true;e.onContextMenu.addToTop(function(h,j){if(g.active){return false}})}e.addCommand("mceSpellCheck",function(){if(g.rpcUrl=="{backend}"){g.editor.getBody().spellcheck=g.active=!g.active;return}if(!g.active){e.setProgressState(1);g._sendRPC("checkWords",[g.selectedLang,g._getWords()],function(h){if(h.length>0){g.active=1;g._markWords(h);e.setProgressState(0);e.nodeChanged()}else{e.setProgressState(0);if(e.getParam("spellchecker_report_no_misspellings",true)){e.windowManager.alert("spellchecker.no_mpell")}}})}else{g._done()}});if(e.settings.content_css!==false){e.contentCSS.push(f+"/css/content.css")}e.onClick.add(g._showMenu,g);e.onContextMenu.add(g._showMenu,g);e.onBeforeGetContent.add(function(){if(g.active){g._removeWords()}});e.onNodeChange.add(function(j,h){h.setActive("spellchecker",g.active)});e.onSetContent.add(function(){g._done()});e.onBeforeGetContent.add(function(){g._done()});e.onBeforeExecCommand.add(function(h,j){if(j=="mceFullScreen"){g._done()}});g.languages={};c(e.getParam("spellchecker_languages","+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv","hash"),function(j,h){if(h.indexOf("+")===0){h=h.substring(1);g.selectedLang=j}g.languages[h]=j})},createControl:function(h,d){var f=this,g,e=f.editor;if(h=="spellchecker"){if(f.rpcUrl=="{backend}"){if(f.hasSupport){g=d.createButton(h,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:f})}return g}g=d.createSplitButton(h,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:f});g.onRenderMenu.add(function(k,j){j.add({title:"spellchecker.langs","class":"mceMenuItemTitle"}).setDisabled(1);c(f.languages,function(n,m){var p={icon:1},l;p.onclick=function(){if(n==f.selectedLang){return}l.setSelected(1);f.selectedItem.setSelected(0);f.selectedItem=l;f.selectedLang=n};p.title=m;l=j.add(p);l.setSelected(n==f.selectedLang);if(n==f.selectedLang){f.selectedItem=l}})});return g}},_walk:function(j,g){var h=this.editor.getDoc(),e;if(h.createTreeWalker){e=h.createTreeWalker(j,NodeFilter.SHOW_TEXT,null,false);while((j=e.nextNode())!=null){g.call(this,j)}}else{tinymce.walk(j,g,"childNodes")}},_getSeparators:function(){var e="",d,f=this.editor.getParam("spellchecker_word_separator_chars",'\\s!"#$%&()*+,-./:;<=>?@[]^_{|}\u201d\u201c');for(d=0;d<f.length;d++){e+="\\"+f.charAt(d)}return e},_getWords:function(){var e=this.editor,g=[],d="",f={},h=[];this._walk(e.getBody(),function(j){if(j.nodeType==3){d+=j.nodeValue+" "}});if(e.getParam("spellchecker_word_pattern")){h=d.match("("+e.getParam("spellchecker_word_pattern")+")","gi")}else{d=d.replace(new RegExp("([0-9]|["+this._getSeparators()+"])","g")," ");d=tinymce.trim(d.replace(/(\s+)/g," "));h=d.split(" ")}c(h,function(j){if(!f[j]){g.push(j);f[j]=1}});return g},_removeWords:function(e){var f=this.editor,h=f.dom,g=f.selection,d=g.getBookmark();c(h.select("span").reverse(),function(j){if(j&&(h.hasClass(j,"mceItemHiddenSpellWord")||h.hasClass(j,"mceItemHidden"))){if(!e||h.decode(j.innerHTML)==e){h.remove(j,1)}}});g.moveToBookmark(d)},_markWords:function(m){var g=this.editor,f=g.dom,k=g.getDoc(),h=g.selection,j=h.getBookmark(),d=[],l=m.join("|"),n=this._getSeparators(),e=new RegExp("(^|["+n+"])("+l+")(?=["+n+"]|$)","g");this._walk(g.getBody(),function(o){if(o.nodeType==3){d.push(o)}});c(d,function(t){var r,q,o,s,p=t.nodeValue;if(e.test(p)){p=f.encode(p);q=f.create("span",{"class":"mceItemHidden"});if(tinymce.isIE){p=p.replace(e,"$1<mcespell>$2</mcespell>");while((s=p.indexOf("<mcespell>"))!=-1){o=p.substring(0,s);if(o.length){r=k.createTextNode(f.decode(o));q.appendChild(r)}p=p.substring(s+10);s=p.indexOf("</mcespell>");o=p.substring(0,s);p=p.substring(s+11);q.appendChild(f.create("span",{"class":"mceItemHiddenSpellWord"},o))}if(p.length){r=k.createTextNode(f.decode(p));q.appendChild(r)}}else{q.innerHTML=p.replace(e,'$1<span class="mceItemHiddenSpellWord">$2</span>')}f.replace(q,t)}});h.moveToBookmark(j)},_showMenu:function(h,k){var j=this,h=j.editor,d=j._menu,n,l=h.dom,g=l.getViewPort(h.getWin()),f=k.target;k=0;if(!d){d=h.controlManager.createDropMenu("spellcheckermenu",{"class":"mceNoIcons"});j._menu=d}if(l.hasClass(f,"mceItemHiddenSpellWord")){d.removeAll();d.add({title:"spellchecker.wait","class":"mceMenuItemTitle"}).setDisabled(1);j._sendRPC("getSuggestions",[j.selectedLang,l.decode(f.innerHTML)],function(m){var e;d.removeAll();if(m.length>0){d.add({title:"spellchecker.sug","class":"mceMenuItemTitle"}).setDisabled(1);c(m,function(o){d.add({title:o,onclick:function(){l.replace(h.getDoc().createTextNode(o),f);j._checkDone()}})});d.addSeparator()}else{d.add({title:"spellchecker.no_sug","class":"mceMenuItemTitle"}).setDisabled(1)}if(h.getParam("show_ignore_words",true)){e=j.editor.getParam("spellchecker_enable_ignore_rpc","");d.add({title:"spellchecker.ignore_word",onclick:function(){var o=f.innerHTML;l.remove(f,1);j._checkDone();if(e){h.setProgressState(1);j._sendRPC("ignoreWord",[j.selectedLang,o],function(p){h.setProgressState(0)})}}});d.add({title:"spellchecker.ignore_words",onclick:function(){var o=f.innerHTML;j._removeWords(l.decode(o));j._checkDone();if(e){h.setProgressState(1);j._sendRPC("ignoreWords",[j.selectedLang,o],function(p){h.setProgressState(0)})}}})}if(j.editor.getParam("spellchecker_enable_learn_rpc")){d.add({title:"spellchecker.learn_word",onclick:function(){var o=f.innerHTML;l.remove(f,1);j._checkDone();h.setProgressState(1);j._sendRPC("learnWord",[j.selectedLang,o],function(p){h.setProgressState(0)})}})}d.update()});n=b.getPos(h.getContentAreaContainer());d.settings.offset_x=n.x;d.settings.offset_y=n.y;h.selection.select(f);n=l.getPos(f);d.showMenu(n.x,n.y+f.offsetHeight-g.y);return tinymce.dom.Event.cancel(k)}else{d.hideMenu()}},_checkDone:function(){var e=this,d=e.editor,g=d.dom,f;c(g.select("span"),function(h){if(h&&g.hasClass(h,"mceItemHiddenSpellWord")){f=true;return false}});if(!f){e._done()}},_done:function(){var d=this,e=d.active;if(d.active){d.active=0;d._removeWords();if(d._menu){d._menu.hideMenu()}if(e){d.editor.nodeChanged()}}},_sendRPC:function(e,g,d){var f=this;a.sendRPC({url:f.rpcUrl,method:e,params:g,success:d,error:function(j,h){f.editor.setProgressState(0);f.editor.windowManager.alert(j.errstr||("Error response: "+h.responseText))}})}});tinymce.PluginManager.add("spellchecker",tinymce.plugins.SpellcheckerPlugin)})();(function(){var a=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(b,c){var d=this;d.editor=b;function e(g){var f=[];a(g.split(/,/),function(h){f.push({title:"advlist."+(h=="default"?"def":h.replace(/-/g,"_")),styles:{listStyleType:h=="default"?"":h}})});return f}d.numlist=b.getParam("advlist_number_styles")||e("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");d.bullist=b.getParam("advlist_bullet_styles")||e("default,circle,disc,square");if(tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)){d.isIE7=true}},createControl:function(d,b){var f=this,e,j,g=f.editor;if(d=="numlist"||d=="bullist"){if(f[d][0].title=="advlist.def"){j=f[d][0]}function c(k,m){var l=true;a(m.styles,function(o,n){if(g.dom.getStyle(k,n)!=o){l=false;return false}});return l}function h(){var l,m=g.dom,k=g.selection;l=m.getParent(k.getNode(),"ol,ul");if(!l||l.nodeName==(d=="bullist"?"OL":"UL")||c(l,j)){g.execCommand(d=="bullist"?"InsertUnorderedList":"InsertOrderedList")}if(j){l=m.getParent(k.getNode(),"ol,ul");if(l){m.setStyles(l,j.styles);l.removeAttribute("data-mce-style")}}g.focus()}e=b.createSplitButton(d,{title:"advanced."+d+"_desc","class":"mce_"+d,onclick:function(){h()}});e.onRenderMenu.add(function(k,l){l.onHideMenu.add(function(){if(f.bookmark){g.selection.moveToBookmark(f.bookmark);f.bookmark=0}});l.onShowMenu.add(function(){var o=g.dom,n=o.getParent(g.selection.getNode(),"ol,ul"),m;if(n||j){m=f[d];a(l.items,function(p){var q=true;p.setSelected(0);if(n&&!p.isDisabled()){a(m,function(r){if(r.id==p.id){if(!c(n,r)){q=false;return false}}});if(q){p.setSelected(1)}}});if(!n){l.items[j.id].setSelected(1)}}g.focus();if(tinymce.isIE){f.bookmark=g.selection.getBookmark(1)}});l.add({id:g.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:true}).setDisabled(1);a(f[d],function(m){if(f.isIE7&&m.styles.listStyleType=="lower-greek"){return}m.id=g.dom.uniqueId();l.add({id:m.id,title:m.title,onclick:function(){j=m;h()}})})});return e}},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)})();(function(){var e=tinymce.each,s=tinymce.dom.Event,g;function q(u,t){while(u&&(u.nodeType===8||(u.nodeType===3&&/^[ \t\n\r]*$/.test(u.nodeValue)))){u=t(u)}return u}function b(t){return q(t,function(u){return u.previousSibling})}function j(t){return q(t,function(u){return u.nextSibling})}function d(t,v,u){return t.dom.getParent(v,function(z){return tinymce.inArray(u,z)!==-1})}function o(t){return t&&(t.tagName==="OL"||t.tagName==="UL")}function c(v,z){var u,A,t;u=b(v.lastChild);while(o(u)){A=u;u=b(A.previousSibling)}if(A){t=z.create("li",{style:"list-style-type: none;"});z.split(v,A);z.insertAfter(t,A);t.appendChild(A);t.appendChild(A);v=t.previousSibling}return v}function n(u,t,v){u=a(u,t,v);return p(u,t,v)}function a(v,t,z){var u=b(v.previousSibling);if(u){return h(u,v,t?u:false,z)}else{return v}}function p(v,u,z){var t=j(v.nextSibling);if(t){return h(v,t,u?t:false,z)}else{return v}}function h(v,t,u,z){if(m(v,t,!!u,z)){return f(v,t,u)}else{if(v&&v.tagName==="LI"&&o(t)){v.appendChild(t)}}return t}function m(v,u,t,z){if(!v||!u){return false}else{if(v.tagName==="LI"&&u.tagName==="LI"){return u.style.listStyleType==="none"||k(u)}else{if(o(v)){return(v.tagName===u.tagName&&(t||v.style.listStyleType===u.style.listStyleType))||r(u)}else{return z&&v.tagName==="P"&&u.tagName==="P"}}}}function r(u){var t=j(u.firstChild),v=b(u.lastChild);return t&&v&&o(u)&&t===v&&(o(t)||t.style.listStyleType==="none"||k(t))}function k(v){var u=j(v.firstChild),t=b(v.lastChild);return u&&t&&u===t&&o(u)}function f(A,z,t){var v=b(A.lastChild),u=j(z.firstChild);if(A.tagName==="P"){A.appendChild(A.ownerDocument.createElement("br"))}while(z.firstChild){A.appendChild(z.firstChild)}if(t){A.style.listStyleType=t.style.listStyleType}z.parentNode.removeChild(z);h(v,u,false);return A}function l(u,v){var t;if(!v.is(u,"li,ol,ul")){t=v.getParent(u,"li");if(t){u=t}}return u}tinymce.create("tinymce.plugins.Lists",{init:function(C){var z="TABBING";var t="EMPTY";var M="ESCAPE";var D="PARAGRAPH";var Q="UNKNOWN";var B=Q;function I(Y){return Y.keyCode===tinymce.VK.TAB&&!(Y.altKey||Y.ctrlKey)&&(C.queryCommandState("InsertUnorderedList")||C.queryCommandState("InsertOrderedList"))}function H(){var Y=C.selection.getRng();var Z=Y.startContainer;if(Z.nodeType==3){return(Y.endOffset==Z.nodeValue.length)}else{if(Z.nodeType==1){return Y.endOffset==Z.childNodes.length}}return false}function R(){var Z=C.selection.getNode();var Y=Z.tagName==="P"&&Z.parentNode.tagName==="LI"&&Z.parentNode.lastChild===Z;return C.selection.isCollapsed()&&Y&&H()}function A(){var Y=F();var aa=Y.parentNode.parentNode;var Z=Y.parentNode.lastChild===Y;return Z&&!u(aa)&&T(Y)}function u(Y){if(o(Y)){return Y.parentNode&&Y.parentNode.tagName==="LI"}else{return Y.tagName==="LI"}}function J(){return C.selection.isCollapsed()&&T(F())}function F(){var Y=C.selection.getStart();return((Y.tagName=="BR"||Y.tagName=="")&&Y.parentNode.tagName=="LI")?Y.parentNode:Y}function T(Y){var Z=Y.childNodes.length;if(Y.tagName==="LI"){return Z==0?true:Z==1&&(Y.firstChild.tagName==""||Y.firstChild.tagName=="BR"||L(Y))}return false}function L(Y){var Z=tinymce.grep(Y.parentNode.childNodes,function(ac){return ac.tagName=="LI"});var aa=Y==Z[Z.length-1];var ab=Y.firstChild;return tinymce.isIE9&&aa&&(ab.nodeValue==String.fromCharCode(160)||ab.nodeValue==String.fromCharCode(32))}function X(Y){return Y.keyCode===tinymce.VK.ENTER}function E(Y){return X(Y)&&!Y.shiftKey}function P(Y){if(I(Y)){return z}else{if(E(Y)&&A()){return M}else{if(E(Y)&&J()){return t}else{if(E(Y)&&R()){return D}else{return Q}}}}}function G(Y,Z){if(B==z||B==t||tinymce.isGecko&&B==M){s.cancel(Z)}}function N(aa,ac){if(B==D){var ab=aa.selection.getNode();var Z=aa.dom.create("li");var Y=aa.dom.getParent(ab,"li");aa.dom.insertAfter(Z,Y);if(tinyMCE.isIE8){Z.appendChild(aa.dom.create("&nbsp;"));aa.selection.setCursorLocation(Z,1)}else{if(tinyMCE.isGecko){setTimeout(function(){var ad=aa.getDoc().createTextNode("\uFEFF");Z.appendChild(ad);aa.selection.setCursorLocation(Z,0)},0)}else{aa.selection.setCursorLocation(Z,0)}}s.cancel(ac)}}function v(ab,ad){var ag;if(!tinymce.isGecko){return}var Z=ab.selection.getStart();if(ad.keyCode!=tinymce.VK.BACKSPACE||Z.tagName!=="IMG"){return}function aa(ak){var al=ak.firstChild;var aj=null;do{if(!al){break}if(al.tagName==="LI"){aj=al}}while(al=al.nextSibling);return aj}function ai(ak,aj){while(ak.childNodes.length>0){aj.appendChild(ak.childNodes[0])}}ag=Z.parentNode.previousSibling;if(!ag){return}var ae;if(ag.tagName==="UL"||ag.tagName==="OL"){ae=ag}else{if(ag.previousSibling&&(ag.previousSibling.tagName==="UL"||ag.previousSibling.tagName==="OL")){ae=ag.previousSibling}else{return}}var ah=aa(ae);var Y=ab.dom.createRng();Y.setStart(ah,1);Y.setEnd(ah,1);ab.selection.setRng(Y);ab.selection.collapse(true);var ac=ab.selection.getBookmark();var af=Z.parentNode.cloneNode(true);if(af.tagName==="P"||af.tagName==="DIV"){ai(af,ah)}else{ah.appendChild(af)}Z.parentNode.parentNode.removeChild(Z.parentNode);ab.selection.moveToBookmark(ac)}function K(Y){var Z=C.dom.getParent(Y,"ol,ul");if(Z!=null){var aa=Z.lastChild;aa.appendChild(C.getDoc().createElement(""));C.selection.setCursorLocation(aa,0)}}this.ed=C;C.addCommand("Indent",this.indent,this);C.addCommand("Outdent",this.outdent,this);C.addCommand("InsertUnorderedList",function(){this.applyList("UL","OL")},this);C.addCommand("InsertOrderedList",function(){this.applyList("OL","UL")},this);C.onInit.add(function(){C.editorCommands.addCommands({outdent:function(){var Z=C.selection,aa=C.dom;function Y(ab){ab=aa.getParent(ab,aa.isBlock);return ab&&(parseInt(C.dom.getStyle(ab,"margin-left")||0,10)+parseInt(C.dom.getStyle(ab,"padding-left")||0,10))>0}return Y(Z.getStart())||Y(Z.getEnd())||C.queryCommandState("InsertOrderedList")||C.queryCommandState("InsertUnorderedList")}},"state")});C.onKeyUp.add(function(Z,aa){if(B==z){Z.execCommand(aa.shiftKey?"Outdent":"Indent",true,null);B=Q;return s.cancel(aa)}else{if(B==t){var Y=F();var ac=Z.settings.list_outdent_on_enter===true||aa.shiftKey;Z.execCommand(ac?"Outdent":"Indent",true,null);if(tinymce.isIE){K(Y)}return s.cancel(aa)}else{if(B==M){if(tinymce.isIE8){var ab=Z.getDoc().createTextNode("\uFEFF");Z.selection.getNode().appendChild(ab)}else{if(tinymce.isIE9||tinymce.isGecko){Z.execCommand("Outdent");return s.cancel(aa)}}}}}});function O(Z,Y){var aa=C.getDoc().createTextNode("\uFEFF");Z.insertBefore(aa,Y);C.selection.setCursorLocation(aa,0);C.execCommand("mceRepaint")}function V(Z,ab){if(X(ab)){var Y=F();if(Y){var aa=Y.parentNode;var ac=aa&&aa.parentNode;if(ac&&ac.nodeName=="LI"&&ac.firstChild==aa&&Y==aa.firstChild){O(ac,aa)}}}}function W(Z,ab){if(X(ab)){var Y=F();if(Z.dom.select("ul li",Y).length===1){var aa=Y.firstChild;O(Y,aa)}}}function U(Z,ad){function aa(ah,ae){var ag=[];var ai=new tinymce.dom.TreeWalker(ae,ah);for(var af=ai.current();af;af=ai.next()){if(Z.dom.is(af,"ol,ul,li")){ag.push(af)}}return ag}if(ad.keyCode==tinymce.VK.BACKSPACE){var Y=F();if(Y){var ac=Z.dom.getParent(Y,"ol,ul");if(ac&&ac.firstChild===Y){var ab=aa(ac,Y);Z.execCommand("Outdent",false,ab);Z.undoManager.add();return s.cancel(ad)}}}}function S(Z,ab){var Y=F();if(ab.keyCode===tinymce.VK.BACKSPACE&&Z.dom.is(Y,"li")&&Y.parentNode.firstChild!==Y){if(Z.dom.select("ul,ol",Y).length===1){var ad=Y.previousSibling;Z.dom.remove(Z.dom.select("br",Y));Z.dom.remove(Y,true);var aa=tinymce.grep(ad.childNodes,function(ae){return ae.nodeType===3});if(aa.length===1){var ac=aa[0];Z.selection.setCursorLocation(ac,ac.length)}Z.undoManager.add();return s.cancel(ab)}}}C.onKeyDown.add(function(Y,Z){B=P(Z)});C.onKeyDown.add(G);C.onKeyDown.add(v);C.onKeyDown.add(N);if(tinymce.isGecko){C.onKeyUp.add(V)}if(tinymce.isIE8){C.onKeyUp.add(W)}if(tinymce.isGecko||tinymce.isWebKit){C.onKeyDown.add(U)}if(tinymce.isWebKit){C.onKeyDown.add(S)}},applyList:function(C,z){var G=this,D=G.ed,M=D.dom,u=[],L=false,v=false,A=false,F,K=D.selection.getSelectedBlocks();function I(t){if(t&&t.tagName==="BR"){M.remove(t)}}function J(Q){var R=M.create(C),t;function P(S){if(S.style.marginLeft||S.style.paddingLeft){G.adjustPaddingFunction(false)(S)}}if(Q.tagName==="LI"){}else{if(Q.tagName==="P"||Q.tagName==="DIV"||Q.tagName==="BODY"){O(Q,function(T,S){N(T,S,Q.tagName==="BODY"?null:T.parentNode);t=T.parentNode;P(t);I(S)});if(t){if(t.tagName==="LI"&&(Q.tagName==="P"||K.length>1)){M.split(t.parentNode.parentNode,t.parentNode)}n(t.parentNode,true)}return}else{t=M.create("li");M.insertAfter(t,Q);t.appendChild(Q);P(Q);Q=t}}M.insertAfter(R,Q);R.appendChild(Q);n(R,true);u.push(Q)}function N(T,P,R){var t,S=T,Q;while(!M.isBlock(T.parentNode)&&T.parentNode!==M.getRoot()){T=M.split(T.parentNode,T.previousSibling);T=T.nextSibling;S=T}if(R){t=R.cloneNode(true);T.parentNode.insertBefore(t,T);while(t.firstChild){M.remove(t.firstChild)}t=M.rename(t,"li")}else{t=M.create("li");T.parentNode.insertBefore(t,T)}while(S&&S!=P){Q=S.nextSibling;t.appendChild(S);S=Q}if(t.childNodes.length===0){t.innerHTML='<br _mce_bogus="1" />'}J(t)}function O(U,X){var R,V,S=3,P=1,t="br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl";function T(ab,Y){var Z=M.createRng(),aa;g.keep=true;D.selection.moveToBookmark(g);g.keep=false;aa=D.selection.getRng(true);if(!Y){Y=ab.parentNode.lastChild}Z.setStartBefore(ab);Z.setEndAfter(Y);return !(Z.compareBoundaryPoints(S,aa)>0||Z.compareBoundaryPoints(P,aa)<=0)}function W(Y){if(Y.nextSibling){return Y.nextSibling}if(!M.isBlock(Y.parentNode)&&Y.parentNode!==M.getRoot()){return W(Y.parentNode)}}R=U.firstChild;var Q=false;e(M.select(t,U),function(Y){if(Y.hasAttribute&&Y.hasAttribute("_mce_bogus")){return true}if(T(R,Y)){M.addClass(Y,"_mce_tagged_br");R=W(Y)}});Q=(R&&T(R,undefined));R=U.firstChild;e(M.select(t,U),function(Z){var Y=W(Z);if(Z.hasAttribute&&Z.hasAttribute("_mce_bogus")){return true}if(M.hasClass(Z,"_mce_tagged_br")){X(R,Z,V);V=null}else{V=Z}R=Y});if(Q){X(R,undefined,V)}}function H(t){O(t,function(Q,P,R){N(Q,P);I(P);I(R)})}function E(t){if(tinymce.inArray(u,t)!==-1){return}if(t.parentNode.tagName===z){M.split(t.parentNode,t);J(t);p(t.parentNode,false)}u.push(t)}function B(Q){var S,R,P,t;if(tinymce.inArray(u,Q)!==-1){return}Q=c(Q,M);while(M.is(Q.parentNode,"ol,ul,li")){M.split(Q.parentNode,Q)}u.push(Q);Q=M.rename(Q,"p");P=n(Q,false,D.settings.force_br_newlines);if(P===Q){S=Q.firstChild;while(S){if(M.isBlock(S)){S=M.split(S.parentNode,S);t=true;R=S.nextSibling&&S.nextSibling.firstChild}else{R=S.nextSibling;if(t&&S.tagName==="BR"){M.remove(S)}t=false}S=R}}}e(K,function(t){t=l(t,M);if(t.tagName===z||(t.tagName==="LI"&&t.parentNode.tagName===z)){v=true}else{if(t.tagName===C||(t.tagName==="LI"&&t.parentNode.tagName===C)){L=true}else{A=true}}});if(A&&!L||v||K.length===0){F={LI:E,H1:J,H2:J,H3:J,H4:J,H5:J,H6:J,P:J,BODY:J,DIV:K.length>1?J:H,defaultAction:H,elements:this.selectedBlocks()}}else{F={defaultAction:B,elements:this.selectedBlocks()}}this.process(F)},indent:function(){var v=this.ed,A=v.dom,B=[];function t(D){var C=A.create("li",{style:"list-style-type: none;"});A.insertAfter(C,D);return C}function u(F){var C=t(F),H=A.getParent(F,"ol,ul"),G=H.tagName,I=A.getStyle(H,"list-style-type"),E={},D;if(I!==""){E.style="list-style-type: "+I+";"}D=A.create(G,E);C.appendChild(D);return D}function z(D){if(!d(v,D,B)){D=c(D,A);var C=u(D);C.appendChild(D);n(C.parentNode,false);n(C,false);B.push(D)}}this.process({LI:z,defaultAction:this.adjustPaddingFunction(true),elements:this.selectedBlocks()})},outdent:function(C,B){var A=this,v=A.ed,D=v.dom,u=[];function E(t){var G,F,H;if(!d(v,t,u)){if(D.getStyle(t,"margin-left")!==""||D.getStyle(t,"padding-left")!==""){return A.adjustPaddingFunction(false)(t)}H=D.getStyle(t,"text-align",true);if(H==="center"||H==="right"){D.setStyle(t,"text-align","left");return}t=c(t,D);G=t.parentNode;F=t.parentNode.parentNode;if(F.tagName==="P"){D.split(F,t.parentNode)}else{D.split(G,t);if(F.tagName==="LI"){D.split(F,t)}else{if(!D.is(F,"ol,ul")){D.rename(t,"p")}}}u.push(t)}}var z=B&&tinymce.is(B,"array")?B:this.selectedBlocks();this.process({LI:E,defaultAction:this.adjustPaddingFunction(false),elements:z});e(u,n)},process:function(B){var I=this,z=I.ed.selection,C=I.ed.dom,H,u;function E(K){var t=tinymce.grep(K.childNodes,function(L){return !(L.nodeName==="BR"||L.nodeName==="SPAN"&&C.getAttrib(L,"data-mce-type")=="bookmark"||L.nodeType==3&&(L.nodeValue==String.fromCharCode(160)||L.nodeValue==""))});return t.length===0}function A(t){C.removeClass(t,"_mce_act_on");if(!t||t.nodeType!==1||H.length>1&&E(t)){return}t=l(t,C);var K=B[t.tagName];if(!K){K=B.defaultAction}K(t)}function v(t){I.splitSafeEach(t.childNodes,A)}function F(t,K){return K>=0&&t.hasChildNodes()&&K<t.childNodes.length&&t.childNodes[K].tagName==="BR"}function G(){var K=z.getNode();var t=C.getParent(K,"td");return t!==null}H=B.elements;u=z.getRng(true);if(!u.collapsed){if(F(u.endContainer,u.endOffset-1)){u.setEnd(u.endContainer,u.endOffset-1);z.setRng(u)}if(F(u.startContainer,u.startOffset)){u.setStart(u.startContainer,u.startOffset+1);z.setRng(u)}}if(tinymce.isIE8){var J=I.ed.selection.getNode();if(J.tagName==="LI"&&!(J.parentNode.lastChild===J)){var D=I.ed.getDoc().createTextNode("\uFEFF");J.appendChild(D)}}g=z.getBookmark();B.OL=B.UL=v;I.splitSafeEach(H,A);z.moveToBookmark(g);g=null;if(!G()){I.ed.execCommand("mceRepaint")}},splitSafeEach:function(u,t){if(tinymce.isGecko&&(/Firefox\/[12]\.[0-9]/.test(navigator.userAgent)||/Firefox\/3\.[0-4]/.test(navigator.userAgent))){this.classBasedEach(u,t)}else{e(u,t)}},classBasedEach:function(z,v){var A=this.ed.dom,t,u;e(z,function(B){A.addClass(B,"_mce_act_on")});t=A.select("._mce_act_on");while(t.length>0){u=t.shift();A.removeClass(u,"_mce_act_on");v(u);t=A.select("._mce_act_on")}},adjustPaddingFunction:function(v){var t,z,u=this.ed;t=u.settings.indentation;z=/[a-z%]+/i.exec(t);t=parseInt(t,10);return function(A){var C,B;C=parseInt(u.dom.getStyle(A,"margin-left")||0,10)+parseInt(u.dom.getStyle(A,"padding-left")||0,10);if(v){B=C+t}else{B=C-t}u.dom.setStyle(A,"padding-left","");u.dom.setStyle(A,"margin-left",B>0?B+z:"")}},selectedBlocks:function(){var t=this.ed;var u=t.selection.getSelectedBlocks();return u.length==0?[t.dom.getRoot()]:u},getInfo:function(){return{longname:"Lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/lists",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("lists",tinymce.plugins.Lists)}());(function(){tinymce.create("tinymce.plugins.Print",{init:function(a,b){a.addCommand("mcePrint",function(){a.getWin().print()});a.addButton("print",{title:"print.print_desc",cmd:"mcePrint"})},getInfo:function(){return{longname:"Print",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/print",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("print",tinymce.plugins.Print)})();(function(d){var e=d.each;function c(g,h){var j=h.ownerDocument,f=j.createRange(),k;f.setStartBefore(h);f.setEnd(g.endContainer,g.endOffset);k=j.createElement("body");k.appendChild(f.cloneContents());return k.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length==0}function a(g,f){return parseInt(g.getAttribute(f)||1)}function b(I,H,L){var g,M,E,o;t();o=H.getParent(L.getStart(),"th,td");if(o){M=G(o);E=J();o=A(M.x,M.y)}function B(O,N){O=O.cloneNode(N);O.removeAttribute("id");return O}function t(){var N=0;g=[];e(["thead","tbody","tfoot"],function(O){var P=H.select("> "+O+" tr",I);e(P,function(Q,R){R+=N;e(H.select("> td, > th",Q),function(X,S){var T,U,V,W;if(g[R]){while(g[R][S]){S++}}V=a(X,"rowspan");W=a(X,"colspan");for(U=R;U<R+V;U++){if(!g[U]){g[U]=[]}for(T=S;T<S+W;T++){g[U][T]={part:O,real:U==R&&T==S,elm:X,rowspan:V,colspan:W}}}})});N+=P.length})}function A(N,P){var O;O=g[P];if(O){return O[N]}}function s(P,N,O){if(P){O=parseInt(O);if(O===1){P.removeAttribute(N,1)}else{P.setAttribute(N,O,1)}}}function j(N){return N&&(H.hasClass(N.elm,"mceSelected")||N==o)}function k(){var N=[];e(I.rows,function(O){e(O.cells,function(P){if(H.hasClass(P,"mceSelected")||P==o.elm){N.push(O);return false}})});return N}function r(){var N=H.createRng();N.setStartAfter(I);N.setEndAfter(I);L.setRng(N);H.remove(I)}function f(N){var O;d.walk(N,function(Q){var P;if(Q.nodeType==3){e(H.getParents(Q.parentNode,null,N).reverse(),function(R){R=B(R,false);if(!O){O=P=R}else{if(P){P.appendChild(R)}}P=R});if(P){P.innerHTML=d.isIE?"&nbsp;":'<br data-mce-bogus="1" />'}return false}},"childNodes");N=B(N,false);s(N,"rowSpan",1);s(N,"colSpan",1);if(O){N.appendChild(O)}else{if(!d.isIE){N.innerHTML='<br data-mce-bogus="1" />'}}return N}function q(){var N=H.createRng();e(H.select("tr",I),function(O){if(O.cells.length==0){H.remove(O)}});if(H.select("tr",I).length==0){N.setStartAfter(I);N.setEndAfter(I);L.setRng(N);H.remove(I);return}e(H.select("thead,tbody,tfoot",I),function(O){if(O.rows.length==0){H.remove(O)}});t();row=g[Math.min(g.length-1,M.y)];if(row){L.select(row[Math.min(row.length-1,M.x)].elm,true);L.collapse(true)}}function u(T,R,V,S){var Q,O,N,P,U;Q=g[R][T].elm.parentNode;for(N=1;N<=V;N++){Q=H.getNext(Q,"tr");if(Q){for(O=T;O>=0;O--){U=g[R+N][O].elm;if(U.parentNode==Q){for(P=1;P<=S;P++){H.insertAfter(f(U),U)}break}}if(O==-1){for(P=1;P<=S;P++){Q.insertBefore(f(Q.cells[0]),Q.cells[0])}}}}}function D(){e(g,function(N,O){e(N,function(Q,P){var T,S,U,R;if(j(Q)){Q=Q.elm;T=a(Q,"colspan");S=a(Q,"rowspan");if(T>1||S>1){s(Q,"rowSpan",1);s(Q,"colSpan",1);for(R=0;R<T-1;R++){H.insertAfter(f(Q),Q)}u(P,O,S-1,T)}}})})}function p(W,T,Z){var Q,P,Y,X,V,S,U,N,W,O,R;if(W){pos=G(W);Q=pos.x;P=pos.y;Y=Q+(T-1);X=P+(Z-1)}else{Q=M.x;P=M.y;Y=E.x;X=E.y}U=A(Q,P);N=A(Y,X);if(U&&N&&U.part==N.part){D();t();U=A(Q,P).elm;s(U,"colSpan",(Y-Q)+1);s(U,"rowSpan",(X-P)+1);for(S=P;S<=X;S++){for(V=Q;V<=Y;V++){if(!g[S]||!g[S][V]){continue}W=g[S][V].elm;if(W!=U){O=d.grep(W.childNodes);e(O,function(aa){U.appendChild(aa)});if(O.length){O=d.grep(U.childNodes);R=0;e(O,function(aa){if(aa.nodeName=="BR"&&H.getAttrib(aa,"data-mce-bogus")&&R++<O.length-1){U.removeChild(aa)}})}H.remove(W)}}}q()}}function l(R){var N,T,Q,S,U,V,O,W,P;e(g,function(X,Y){e(X,function(aa,Z){if(j(aa)){aa=aa.elm;U=aa.parentNode;V=B(U,false);N=Y;if(R){return false}}});if(R){return !N}});for(S=0;S<g[0].length;S++){if(!g[N][S]){continue}T=g[N][S].elm;if(T!=Q){if(!R){P=a(T,"rowspan");if(P>1){s(T,"rowSpan",P+1);continue}}else{if(N>0&&g[N-1][S]){W=g[N-1][S].elm;P=a(W,"rowSpan");if(P>1){s(W,"rowSpan",P+1);continue}}}O=f(T);s(O,"colSpan",T.colSpan);V.appendChild(O);Q=T}}if(V.hasChildNodes()){if(!R){H.insertAfter(V,U)}else{U.parentNode.insertBefore(V,U)}}}function h(O){var P,N;e(g,function(Q,R){e(Q,function(T,S){if(j(T)){P=S;if(O){return false}}});if(O){return !P}});e(g,function(T,U){var Q,R,S;if(!T[P]){return}Q=T[P].elm;if(Q!=N){S=a(Q,"colspan");R=a(Q,"rowspan");if(S==1){if(!O){H.insertAfter(f(Q),Q);u(P,U,R-1,S)}else{Q.parentNode.insertBefore(f(Q),Q);u(P,U,R-1,S)}}else{s(Q,"colSpan",Q.colSpan+1)}N=Q}})}function n(){var N=[];e(g,function(O,P){e(O,function(R,Q){if(j(R)&&d.inArray(N,Q)===-1){e(g,function(U){var S=U[Q].elm,T;T=a(S,"colSpan");if(T>1){s(S,"colSpan",T-1)}else{H.remove(S)}});N.push(Q)}})});q()}function m(){var O;function N(R){var Q,S,P;Q=H.getNext(R,"tr");e(R.cells,function(T){var U=a(T,"rowSpan");if(U>1){s(T,"rowSpan",U-1);S=G(T);u(S.x,S.y,1,1)}});S=G(R.cells[0]);e(g[S.y],function(T){var U;T=T.elm;if(T!=P){U=a(T,"rowSpan");if(U<=1){H.remove(T)}else{s(T,"rowSpan",U-1)}P=T}})}O=k();e(O.reverse(),function(P){N(P)});q()}function F(){var N=k();H.remove(N);q();return N}function K(){var N=k();e(N,function(P,O){N[O]=B(P,true)});return N}function C(P,O){var Q=k(),N=Q[O?0:Q.length-1],R=N.cells.length;e(g,function(T){var S;R=0;e(T,function(V,U){if(V.real){R+=V.colspan}if(V.elm.parentNode==N){S=1}});if(S){return false}});if(!O){P.reverse()}e(P,function(U){var T=U.cells.length,S;for(i=0;i<T;i++){S=U.cells[i];s(S,"colSpan",1);s(S,"rowSpan",1)}for(i=T;i<R;i++){U.appendChild(f(U.cells[T-1]))}for(i=R;i<T;i++){H.remove(U.cells[i])}if(O){N.parentNode.insertBefore(U,N)}else{H.insertAfter(U,N)}})}function G(N){var O;e(g,function(P,Q){e(P,function(S,R){if(S.elm==N){O={x:R,y:Q};return false}});return !O});return O}function z(N){M=G(N)}function J(){var P,O,N;O=N=0;e(g,function(Q,R){e(Q,function(T,S){var V,U;if(j(T)){T=g[R][S];if(S>O){O=S}if(R>N){N=R}if(T.real){V=T.colspan-1;U=T.rowspan-1;if(V){if(S+V>O){O=S+V}}if(U){if(R+U>N){N=R+U}}}}})});return{x:O,y:N}}function v(T){var Q,P,V,U,O,N,R,S;E=G(T);if(M&&E){Q=Math.min(M.x,E.x);P=Math.min(M.y,E.y);V=Math.max(M.x,E.x);U=Math.max(M.y,E.y);O=V;N=U;for(y=P;y<=N;y++){T=g[y][Q];if(!T.real){if(Q-(T.colspan-1)<Q){Q-=T.colspan-1}}}for(x=Q;x<=O;x++){T=g[P][x];if(!T.real){if(P-(T.rowspan-1)<P){P-=T.rowspan-1}}}for(y=P;y<=U;y++){for(x=Q;x<=V;x++){T=g[y][x];if(T.real){R=T.colspan-1;S=T.rowspan-1;if(R){if(x+R>O){O=x+R}}if(S){if(y+S>N){N=y+S}}}}}H.removeClass(H.select("td.mceSelected,th.mceSelected"),"mceSelected");for(y=P;y<=N;y++){for(x=Q;x<=O;x++){if(g[y][x]){H.addClass(g[y][x].elm,"mceSelected")}}}}}d.extend(this,{deleteTable:r,split:D,merge:p,insertRow:l,insertCol:h,deleteCols:n,deleteRows:m,cutRows:F,copyRows:K,pasteRows:C,getPos:G,setStartCell:z,setEndCell:v})}d.create("tinymce.plugins.TablePlugin",{init:function(g,h){var f,m,j=true;function l(p){var o=g.selection,n=g.dom.getParent(p||o.getNode(),"table");if(n){return new b(n,g.dom,o)}}function k(){g.getBody().style.webkitUserSelect="";if(j){g.dom.removeClass(g.dom.select("td.mceSelected,th.mceSelected"),"mceSelected");j=false}}e([["table","table.desc","mceInsertTable",true],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",true],["cell_props","table.cell_desc","mceTableCellProps",true],["split_cells","table.split_cells_desc","mceTableSplitCells",true],["merge_cells","table.merge_cells_desc","mceTableMergeCells",true]],function(n){g.addButton(n[0],{title:n[1],cmd:n[2],ui:n[3]})});if(!d.isIE){g.onClick.add(function(n,o){o=o.target;if(o.nodeName==="TABLE"){n.selection.select(o);n.nodeChanged()}})}g.onPreProcess.add(function(o,p){var n,q,r,t=o.dom,s;n=t.select("table",p.node);q=n.length;while(q--){r=n[q];t.setAttrib(r,"data-mce-style","");if((s=t.getAttrib(r,"width"))){t.setStyle(r,"width",s);t.setAttrib(r,"width","")}if((s=t.getAttrib(r,"height"))){t.setStyle(r,"height",s);t.setAttrib(r,"height","")}}});g.onNodeChange.add(function(q,o,s){var r;s=q.selection.getStart();r=q.dom.getParent(s,"td,th,caption");o.setActive("table",s.nodeName==="TABLE"||!!r);if(r&&r.nodeName==="CAPTION"){r=0}o.setDisabled("delete_table",!r);o.setDisabled("delete_col",!r);o.setDisabled("delete_table",!r);o.setDisabled("delete_row",!r);o.setDisabled("col_after",!r);o.setDisabled("col_before",!r);o.setDisabled("row_after",!r);o.setDisabled("row_before",!r);o.setDisabled("row_props",!r);o.setDisabled("cell_props",!r);o.setDisabled("split_cells",!r);o.setDisabled("merge_cells",!r)});g.onInit.add(function(r){var p,t,q=r.dom,u;f=r.windowManager;r.onMouseDown.add(function(z,A){if(A.button!=2){k();t=q.getParent(A.target,"td,th");p=q.getParent(t,"table")}});q.bind(r.getDoc(),"mouseover",function(D){var B,A,C=D.target;if(t&&(u||C!=t)&&(C.nodeName=="TD"||C.nodeName=="TH")){A=q.getParent(C,"table");if(A==p){if(!u){u=l(A);u.setStartCell(t);r.getBody().style.webkitUserSelect="none"}u.setEndCell(C);j=true}B=r.selection.getSel();try{if(B.removeAllRanges){B.removeAllRanges()}else{B.empty()}}catch(z){}D.preventDefault()}});r.onMouseUp.add(function(G,H){var A,C=G.selection,I,J=C.getSel(),z,D,B,F;if(t){if(u){G.getBody().style.webkitUserSelect=""}function E(K,M){var L=new d.dom.TreeWalker(K,K);do{if(K.nodeType==3&&d.trim(K.nodeValue).length!=0){if(M){A.setStart(K,0)}else{A.setEnd(K,K.nodeValue.length)}return}if(K.nodeName=="BR"){if(M){A.setStartBefore(K)}else{A.setEndBefore(K)}return}}while(K=(M?L.next():L.prev()))}I=q.select("td.mceSelected,th.mceSelected");if(I.length>0){A=q.createRng();D=I[0];F=I[I.length-1];A.setStartBefore(D);A.setEndAfter(D);E(D,1);z=new d.dom.TreeWalker(D,q.getParent(I[0],"table"));do{if(D.nodeName=="TD"||D.nodeName=="TH"){if(!q.hasClass(D,"mceSelected")){break}B=D}}while(D=z.next());E(B);C.setRng(A)}G.nodeChanged();t=u=p=null}});r.onKeyUp.add(function(z,A){k()});r.onKeyDown.add(function(z,A){n(z)});r.onMouseDown.add(function(z,A){if(A.button!=2){n(z)}});function o(E,A,B,G){var C=3,H=E.dom.getParent(A.startContainer,"TABLE"),D,z,F;if(H){D=H.parentNode}z=A.startContainer.nodeType==C&&A.startOffset==0&&A.endOffset==0&&G&&(B.nodeName=="TR"||B==D);F=(B.nodeName=="TD"||B.nodeName=="TH")&&!G;return z||F}function n(B){if(!d.isWebKit){return}var A=B.selection.getRng();var D=B.selection.getNode();var C=B.dom.getParent(A.startContainer,"TD,TH");if(!o(B,A,D,C)){return}if(!C){C=D}var z=C.lastChild;while(z.lastChild){z=z.lastChild}A.setEnd(z,z.nodeValue.length);B.selection.setRng(A)}r.plugins.table.fixTableCellSelection=n;if(r&&r.plugins.contextmenu){r.plugins.contextmenu.onContextMenu.add(function(B,z,D){var E,C=r.selection,A=C.getNode()||r.getBody();if(r.dom.getParent(D,"td")||r.dom.getParent(D,"th")||r.dom.select("td.mceSelected,th.mceSelected").length){z.removeAll();if(A.nodeName=="A"&&!r.dom.getAttrib(A,"name")){z.add({title:"advanced.link_desc",icon:"link",cmd:r.plugins.advlink?"mceAdvLink":"mceLink",ui:true});z.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"});z.addSeparator()}if(A.nodeName=="IMG"&&A.className.indexOf("mceItem")==-1){z.add({title:"advanced.image_desc",icon:"image",cmd:r.plugins.advimage?"mceAdvImage":"mceImage",ui:true});z.addSeparator()}z.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}});z.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"});z.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"});z.addSeparator();E=z.addMenu({title:"table.cell"});E.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"});E.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"});E.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"});E=z.addMenu({title:"table.row"});E.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"});E.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"});E.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"});E.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"});E.addSeparator();E.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"});E.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"});E.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!m);E.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!m);E=z.addMenu({title:"table.col"});E.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"});E.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"});E.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})}else{z.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})}})}if(d.isWebKit){function v(D,O){var M=d.VK;var R=O.keyCode;function P(Z,V,T){var U=Z?"previousSibling":"nextSibling";var aa=D.dom.getParent(V,"tr");var Y=aa[U];if(Y){A(D,V,Y,Z);d.dom.Event.cancel(T);return true}else{var ab=D.dom.getParent(aa,"table");var X=aa.parentNode;var S=X.nodeName.toLowerCase();if(S==="tbody"||S===(Z?"tfoot":"thead")){var W=z(Z,ab,X,"tbody");if(W!==null){return L(Z,W,V,T)}}return N(Z,aa,U,ab,T)}}function z(W,U,V,Y){var T=D.dom.select(">"+Y,U);var S=T.indexOf(V);if(W&&S===0||!W&&S===T.length-1){return C(W,U)}else{if(S===-1){var X=V.tagName.toLowerCase()==="thead"?0:T.length-1;return T[X]}else{return T[S+(W?-1:1)]}}}function C(V,U){var T=V?"thead":"tfoot";var S=D.dom.select(">"+T,U);return S.length!==0?S[0]:null}function L(W,U,T,V){var S=K(U,W);S&&A(D,T,S,W);d.dom.Event.cancel(V);return true}function N(Z,V,S,Y,X){var T=Y[S];if(T){G(T);return true}else{var W=D.dom.getParent(Y,"td,th");if(W){return P(Z,W,X)}else{var U=K(V,!Z);G(U);return d.dom.Event.cancel(X)}}}function K(T,S){return T&&T[S?"lastChild":"firstChild"]}function G(S){D.selection.setCursorLocation(S,0)}function B(){return R==M.UP||R==M.DOWN}function E(S){var U=S.selection.getNode();var T=S.dom.getParent(U,"tr");return T!==null}function Q(T){var S=0;var U=T;while(U.previousSibling){U=U.previousSibling;S=S+a(U,"colspan")}return S}function F(U,S){var V=0;var T=0;e(U.children,function(W,X){V=V+a(W,"colspan");T=X;if(V>S){return false}});return T}function A(U,X,Z,W){var Y=Q(U.dom.getParent(X,"td,th"));var T=F(Z,Y);var S=Z.childNodes[T];var V=K(S,W);G(V||S)}function I(S){var U=D.selection.getNode();var V=D.dom.getParent(U,"td,th");var T=D.dom.getParent(S,"td,th");return V&&V!==T&&J(V,T)}function J(T,S){return D.dom.getParent(T,"TABLE")===D.dom.getParent(S,"TABLE")}if(B()&&E(D)){var H=D.selection.getNode();setTimeout(function(){if(I(H)){P(!O.shiftKey&&R===M.UP,H,O)}},0)}}r.onKeyDown.add(v)}if(!d.isIE){function s(){var z;for(z=r.getBody().lastChild;z&&z.nodeType==3&&!z.nodeValue.length;z=z.previousSibling){}if(z&&z.nodeName=="TABLE"){r.dom.add(r.getBody(),"p",null,'<br mce_bogus="1" />')}}if(d.isGecko){r.onKeyDown.add(function(A,C){var z,B,D=A.dom;if(C.keyCode==37||C.keyCode==38){z=A.selection.getRng();B=D.getParent(z.startContainer,"table");if(B&&A.getBody().firstChild==B){if(c(z,B)){z=D.createRng();z.setStartBefore(B);z.setEndBefore(B);A.selection.setRng(z);C.preventDefault()}}}})}r.onKeyUp.add(s);r.onSetContent.add(s);r.onVisualAid.add(s);r.onPreProcess.add(function(z,B){var A=B.node.lastChild;if(A&&A.childNodes.length==1&&A.firstChild.nodeName=="BR"){z.dom.remove(A)}});s();r.startContent=r.getContent({format:"raw"})}});e({mceTableSplitCells:function(n){n.split()},mceTableMergeCells:function(o){var p,q,n;n=g.dom.getParent(g.selection.getNode(),"th,td");if(n){p=n.rowSpan;q=n.colSpan}if(!g.dom.select("td.mceSelected,th.mceSelected").length){f.open({url:h+"/merge_cells.htm",width:240+parseInt(g.getLang("table.merge_cells_delta_width",0)),height:110+parseInt(g.getLang("table.merge_cells_delta_height",0)),inline:1},{rows:p,cols:q,onaction:function(r){o.merge(n,r.cols,r.rows)},plugin_url:h})}else{o.merge()}},mceTableInsertRowBefore:function(n){n.insertRow(true)},mceTableInsertRowAfter:function(n){n.insertRow()},mceTableInsertColBefore:function(n){n.insertCol(true)},mceTableInsertColAfter:function(n){n.insertCol()},mceTableDeleteCol:function(n){n.deleteCols()},mceTableDeleteRow:function(n){n.deleteRows()},mceTableCutRow:function(n){m=n.cutRows()},mceTableCopyRow:function(n){m=n.copyRows()},mceTablePasteRowBefore:function(n){n.pasteRows(m,true)},mceTablePasteRowAfter:function(n){n.pasteRows(m)},mceTableDelete:function(n){n.deleteTable()}},function(o,n){g.addCommand(n,function(){var p=l();if(p){o(p);g.execCommand("mceRepaint");k()}})});e({mceInsertTable:function(n){f.open({url:h+"/table.htm",width:400+parseInt(g.getLang("table.table_delta_width",0)),height:320+parseInt(g.getLang("table.table_delta_height",0)),inline:1},{plugin_url:h,action:n?n.action:0})},mceTableRowProps:function(){f.open({url:h+"/row.htm",width:400+parseInt(g.getLang("table.rowprops_delta_width",0)),height:295+parseInt(g.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:h})},mceTableCellProps:function(){f.open({url:h+"/cell.htm",width:400+parseInt(g.getLang("table.cellprops_delta_width",0)),height:295+parseInt(g.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:h})}},function(o,n){g.addCommand(n,function(p,q){o(q)})})}});d.PluginManager.add("table",d.plugins.TablePlugin)})(tinymce);